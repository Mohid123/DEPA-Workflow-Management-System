"use strict";(self.webpackChunkDEPA_FRONTEND=self.webpackChunkDEPA_FRONTEND||[]).push([[691],{12691:(Xn,pt,r)=>{r.r(pt),r.d(pt,{DashboardModule:()=>M});var l=r(36895),u=r(90433),f=r(19132),t=r(94650);class O{constructor(){}}O.\u0275fac=function(i){return new(i||O)},O.\u0275cmp=t.Xpm({type:O,selectors:[["app-dashboard"]],decls:1,vars:0,template:function(i,e){1&i&&t._UZ(0,"router-outlet")},dependencies:[f.lC]});var T=r(1163),b=r(46954),I=r(15274),x=r(56546),h=r(39367),C=r(5754),_=r(4266),dt=r(80311),v=r(20696);function Ot(n,i){1&n&&(t.ynx(0),t._UZ(1,"tui-badge",12),t.BQk())}const It=function(n){return["/modules",n]},Ut=function(n){return{moduleID:n}};function kt(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"a",13),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.storeModuleID(null==a.appData?null:a.appData._id,null==a.appData?null:a.appData.code))}),t._UZ(1,"i",14),t.qZA()}if(2&n){const e=t.oxw();t.Q6J("routerLink",t.VKq(2,It,null==e.appData?null:e.appData.code))("queryParams",t.VKq(4,Ut,null==e.appData?null:e.appData._id))}}const Nt=function(n){return["/modules/edit-module",n]},Pt=function(n){return{moduleCode:n}};function Ft(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"a",15),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.editModuleEvent(null==a.appData?null:a.appData._id,null==a.appData?null:a.appData.code))}),t._UZ(1,"i",16),t.qZA()}if(2&n){const e=t.oxw();t.Q6J("routerLink",t.VKq(2,Nt,null==e.appData?null:e.appData._id))("queryParams",t.VKq(4,Pt,null==e.appData?null:e.appData.code))}}function Jt(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"a",17),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.deleteModuleEvent(null==a.appData?null:a.appData._id))}),t._UZ(1,"i",18),t.qZA()}}class y{constructor(i,e){this.transport=i,this.auth=e,this.deleteModule=new t.vpe,this.editModule=new t.vpe,this.currentUser=this.auth.currentUserValue,this.userRoleCheck=this.auth.checkIfRolesExist("sysAdmin")}storeModuleID(i,e){this.transport.moduleID.next(i),(0,_.LS)(_.MX.moduleSlug,e)}deleteModuleEvent(i){this.deleteModule.emit(i)}editModuleEvent(i,e){(0,_.LS)(_.MX.moduleSlug,e),(0,_.LS)(_.MX.moduleID,i),this.editModule.emit(i),this.transport.moduleID.next(i)}checkIfUserisAdmin(i){return i?.includes(this.currentUser?.id)}checkIfUserisViewOnly(i){return i?.includes(this.currentUser?.id)}}function Lt(n,i){1&n&&(t.TgZ(0,"div",5)(1,"div",6)(2,"div",7),t.O4$(),t.TgZ(3,"svg",8),t._UZ(4,"path",9),t.qZA()(),t.kcU(),t.TgZ(5,"div",10),t._UZ(6,"div",11)(7,"div",12)(8,"div",13)(9,"div",14)(10,"div",15)(11,"div",16),t.qZA(),t.TgZ(12,"span",17),t._uU(13,"Loading..."),t.qZA()()())}function Qt(n,i){1&n&&(t.TgZ(0,"div",18)(1,"div",19),t.O4$(),t.TgZ(2,"svg",8),t._UZ(3,"path",9),t.qZA()(),t.kcU(),t.TgZ(4,"div",20),t._UZ(5,"div",11)(6,"div",12)(7,"div",13)(8,"div",14)(9,"div",15)(10,"div",16),t.qZA()())}function Et(n,i){1&n&&(t.TgZ(0,"div",21)(1,"div",22),t.O4$(),t.TgZ(2,"svg",23),t._UZ(3,"path",9),t.qZA()(),t.kcU(),t.TgZ(4,"div",20),t._UZ(5,"div",11)(6,"div",12)(7,"div",13)(8,"div",14)(9,"div",15)(10,"div",16),t.qZA()())}function St(n,i){if(1&n&&(t.ynx(0),t.YNc(1,Lt,14,0,"div",2),t.YNc(2,Qt,11,0,"div",3),t.YNc(3,Et,11,0,"div",4),t.BQk()),2&n){const e=i.index;t.xp6(1),t.Q6J("ngIf",0==e),t.xp6(1),t.Q6J("ngIf",1==e),t.xp6(1),t.Q6J("ngIf",e>1)}}y.\u0275fac=function(i){return new(i||y)(t.Y36(v.R),t.Y36(I.e))},y.\u0275cmp=t.Xpm({type:y,selectors:[["grid-top-app"]],inputs:{appData:"appData"},outputs:{deleteModule:"deleteModule",editModule:"editModule"},standalone:!0,features:[t.jDz],decls:14,vars:7,consts:[[1,"bg-white","rounded-md","shadow-lg","h-auto","drop-shadow-lg","flex","flex-col","border-t-8","border-t-[#F15B41]"],[1,"flex","pt-5","space-x-8","px-4","pb-3"],[1,"flex","items-center","justify-center","border","border-gray-200","rounded-lg","w-[13rem]","h-[8rem]"],["alt","top_app_icon","loading","eager",1,"object-cover","w-full","h-full","rounded-lg",3,"src"],[1,"w-full","h-full"],[1,"mb-2","text-lg","font-semibold"],[4,"ngIf"],[1,"leading-6","line-clamp-4"],[1,"bg-gradient-to-r","from-orange-200","to-slate-200","h-8","w-full","flex","justify-center","items-center","rounded-br-md","rounded-bl-md","py-5"],["title","Apps and Submissions","class","px-2 py-1 text-white bg-green-500 rounded-md hover:text-white",3,"routerLink","queryParams","click",4,"ngIf"],["title","Edit","class","px-2 py-1 mx-2 text-white bg-blue-400 rounded-md hover:text-white cursor-pointer",3,"routerLink","queryParams","click",4,"ngIf"],["title","Delete","class","px-2 py-1 text-white bg-red-500 rounded-md hover:text-white cursor-pointer",3,"click",4,"ngIf"],["status","primary","value","Draft","size","s",1,"tui-space_left-1"],["title","Apps and Submissions",1,"px-2","py-1","text-white","bg-green-500","rounded-md","hover:text-white",3,"routerLink","queryParams","click"],["aria-hidden","true",1,"fa","fa-sitemap","fa-lg"],["title","Edit",1,"px-2","py-1","mx-2","text-white","bg-blue-400","rounded-md","hover:text-white","cursor-pointer",3,"routerLink","queryParams","click"],["aria-hidden","true",1,"fa","fa-pencil-square-o","fa-lg"],["title","Delete",1,"px-2","py-1","text-white","bg-red-500","rounded-md","hover:text-white","cursor-pointer",3,"click"],["aria-hidden","true",1,"fa","fa-trash","fa-lg"]],template:function(i,e){1&i&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2),t._UZ(3,"img",3),t.qZA(),t.TgZ(4,"div",4)(5,"h3",5),t._uU(6),t.YNc(7,Ot,2,0,"ng-container",6),t.qZA(),t.TgZ(8,"p",7),t._uU(9),t.qZA()()(),t.TgZ(10,"div",8),t.YNc(11,kt,2,6,"a",9),t.YNc(12,Ft,2,6,"a",10),t.YNc(13,Jt,2,0,"a",11),t.qZA()()),2&i&&(t.xp6(3),t.Q6J("src",null==e.appData?null:e.appData.image,t.LSH),t.xp6(3),t.hij(" ",null==e.appData?null:e.appData.title," "),t.xp6(1),t.Q6J("ngIf",3===(null==e.appData?null:e.appData.status)),t.xp6(2),t.Oqu(null==e.appData?null:e.appData.description),t.xp6(2),t.Q6J("ngIf",3!==(null==e.appData?null:e.appData.status)),t.xp6(1),t.Q6J("ngIf",(null==e.currentUser?null:e.currentUser.id)==(null==e.appData?null:e.appData.createdBy)||1==e.userRoleCheck||e.checkIfUserisAdmin(null==e.appData?null:e.appData.adminUsers)),t.xp6(1),t.Q6J("ngIf",(null==e.currentUser?null:e.currentUser.id)==(null==e.appData?null:e.appData.createdBy)||1==e.userRoleCheck&&0==e.checkIfUserisViewOnly(null==e.appData?null:e.appData.viewOnlyUsers)||e.checkIfUserisAdmin(null==e.appData?null:e.appData.adminUsers)))},dependencies:[l.ez,l.O5,f.Bz,f.rH,dt.f,dt.g],changeDetection:0});class U{constructor(){this.Arr=Array,this.num=4}}function Bt(n,i){1&n&&t._UZ(0,"app-grid-view-loader")}function Ht(n,i){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"p",8),t._uU(2," Create a category to start adding new apps "),t._UZ(3,"br")(4,"br"),t.TgZ(5,"a",9),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2),s=t.MAs(10);return t.KtG(a.showAddDialog(s))}),t._uU(6,"+ Add Category"),t.qZA()(),t.BQk()}}U.\u0275fac=function(i){return new(i||U)},U.\u0275cmp=t.Xpm({type:U,selectors:[["app-grid-view-loader"]],decls:2,vars:1,consts:[[1,"grid","grid-cols-12","gap-4","w-11/12","mx-auto","mt-52","pb-60"],[4,"ngFor","ngForOf"],["class","px-4 py-2 bg-gray-100 rounded-md col-span-8 h-72",4,"ngIf"],["class","px-5 py-4 bg-gray-100 rounded-md col-span-4 row-span-3",4,"ngIf"],["class","px-2 py-2 bg-gray-100 rounded-md col-span-4 row-span-2 h-88",4,"ngIf"],[1,"px-4","py-2","bg-gray-100","rounded-md","col-span-8","h-72"],["role","status",1,"animate-pulse","md:flex","md:items-center","space-x-8"],[1,"flex","items-center","justify-center","w-full","bg-gray-200","rounded","h-68"],["xmlns","http://www.w3.org/2000/svg","aria-hidden","true","fill","currentColor","viewBox","0 0 640 512",1,"w-12","h-12","text-gray-400"],["d","M480 80C480 35.82 515.8 0 560 0C604.2 0 640 35.82 640 80C640 124.2 604.2 160 560 160C515.8 160 480 124.2 480 80zM0 456.1C0 445.6 2.964 435.3 8.551 426.4L225.3 81.01C231.9 70.42 243.5 64 256 64C268.5 64 280.1 70.42 286.8 81.01L412.7 281.7L460.9 202.7C464.1 196.1 472.2 192 480 192C487.8 192 495 196.1 499.1 202.7L631.1 419.1C636.9 428.6 640 439.7 640 450.9C640 484.6 612.6 512 578.9 512H55.91C25.03 512 .0006 486.1 .0006 456.1L0 456.1z"],[1,"w-full"],[1,"h-2.5","bg-gray-200","rounded-full","w-48","mb-4"],[1,"h-2","bg-gray-200","rounded-full","max-w-[480px]","mb-2.5"],[1,"h-2","bg-gray-200","rounded-full","mb-2.5"],[1,"h-2","bg-gray-200","rounded-full","max-w-[440px]","mb-2.5"],[1,"h-2","bg-gray-200","rounded-full","max-w-[460px]","mb-2.5"],[1,"h-2","bg-gray-200","rounded-full","max-w-[360px]"],[1,"sr-only"],[1,"px-5","py-4","bg-gray-100","rounded-md","col-span-4","row-span-3"],[1,"flex","items-center","justify-center","w-full","bg-gray-200","rounded","h-72"],[1,"w-full","mt-8"],[1,"px-2","py-2","bg-gray-100","rounded-md","col-span-4","row-span-2","h-88"],[1,"flex","justify-center","items-center","w-auto","bg-gray-200","rounded","h-40","mb-5","animate-pulse"],["xmlns","http://www.w3.org/2000/svg","aria-hidden","true","fill","currentColor","viewBox","0 0 640 512",1,"w-8","h-8","text-gray-400"]],template:function(i,e){1&i&&(t.TgZ(0,"section",0),t.YNc(1,St,4,3,"ng-container",1),t.qZA()),2&i&&(t.xp6(1),t.Q6J("ngForOf",e.Arr(e.num).fill(1)))},dependencies:[l.sg,l.O5],changeDetection:0});const zt=function(n){return["/modules/add-module",n]},Yt=function(n){return{parentID:n}};function Vt(n,i){if(1&n&&(t.TgZ(0,"a",14),t._uU(1,"+ Add new app"),t.qZA()),2&n){const e=t.oxw().$implicit;t.Q6J("routerLink",t.VKq(2,zt,e._id))("queryParams",t.VKq(4,Yt,(null==e?null:e._id)||""))}}function Gt(n,i){1&n&&(t.ynx(0),t._UZ(1,"div",15),t.BQk())}function Rt(n,i){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"grid-top-app",16),t.NdJ("deleteModule",function(a){t.CHM(e);const s=t.oxw(5),c=t.MAs(8);return t.KtG(s.showDialog(a,c))}),t.qZA(),t.BQk()}if(2&n){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("appData",e)}}function $t(n,i){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"grid-top-app",16),t.NdJ("deleteModule",function(a){t.CHM(e);const s=t.oxw(6),c=t.MAs(8);return t.KtG(s.showDialog(a,c))}),t.qZA(),t.BQk()}if(2&n){const e=t.oxw(2).$implicit;t.xp6(1),t.Q6J("appData",e)}}function qt(n,i){if(1&n&&(t.ynx(0),t.YNc(1,$t,2,1,"ng-container",6),t.BQk()),2&n){const e=t.oxw().$implicit,o=t.oxw(4);t.xp6(1),t.Q6J("ngIf",(null==o.currentUser?null:o.currentUser.id)==(null==e?null:e.createdBy))}}function jt(n,i){if(1&n&&(t.ynx(0),t.YNc(1,Rt,2,1,"ng-container",6),t.YNc(2,qt,2,1,"ng-container",6),t.BQk()),2&n){const e=i.$implicit;t.xp6(1),t.Q6J("ngIf",3!==(null==e?null:e.status)),t.xp6(1),t.Q6J("ngIf",3==(null==e?null:e.status))}}function Kt(n,i){if(1&n&&t.YNc(0,jt,3,2,"ng-container",7),2&n){const e=t.oxw().$implicit;t.Q6J("ngForOf",null==e?null:e.submodules)}}function Xt(n,i){if(1&n&&(t.ynx(0),t.TgZ(1,"div",10)(2,"p",11),t._uU(3),t.qZA(),t.YNc(4,Vt,2,6,"a",12),t.qZA(),t.YNc(5,Gt,2,0,"ng-container",1),t.YNc(6,Kt,1,1,"ng-template",null,13,t.W1O),t.BQk()),2&n){const e=i.$implicit,o=t.MAs(7),a=t.oxw(2);t.xp6(3),t.Oqu(e.name),t.xp6(1),t.Q6J("ngIf",1==a.userRoleCheck),t.xp6(1),t.Q6J("ngIf",!e.submodules||0==(null==e.subsubmodules?null:e.subsubmodules.length))("ngIfElse",o)}}function Wt(n,i){if(1&n&&(t.TgZ(0,"section",5),t.YNc(1,Ht,7,0,"ng-container",6),t.ALo(2,"async"),t.YNc(3,Xt,8,4,"ng-container",7),t.ALo(4,"async"),t.qZA()),2&n){const e=t.oxw();let o;t.xp6(1),t.Q6J("ngIf",0==(null==(o=t.lcZ(2,2,e.dashboardApps))?null:o.length)),t.xp6(2),t.Q6J("ngForOf",t.lcZ(4,4,e.dashboardApps))}}function te(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"p",17),t._uU(1,"Delete App"),t.qZA(),t.TgZ(2,"p",18),t._uU(3,"Are you sure you want to delete this app?"),t.qZA(),t.TgZ(4,"div",19)(5,"button",20),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw().deleteModule(),t.KtG(s.complete())}),t._uU(6," Confirm "),t.qZA(),t.TgZ(7,"button",21),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.KtG(s.complete())}),t._uU(8," Cancel "),t.qZA()()}}function ee(n,i){1&n&&(t.TgZ(0,"span",27),t._uU(1,"Category name is required"),t.qZA())}function ne(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"p",22),t._uU(1," Add Category "),t.qZA(),t.TgZ(2,"div",23),t._UZ(3,"input",24),t.YNc(4,ee,2,0,"span",25),t.qZA(),t.TgZ(5,"button",26),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw().addCategory(),t.KtG(s.complete())}),t._uU(6," Submit "),t.qZA()}if(2&n){const e=t.oxw();t.xp6(3),t.Q6J("ngClass",null!=e.formData&&e.formData.invalid&&null!=e.formData&&e.formData.touched?"is-invalid":"")("formControl",e.formData),t.xp6(1),t.Q6J("ngIf",(null==e.formData?null:e.formData.invalid)&&(null==e.formData?null:e.formData.touched)),t.xp6(1),t.Q6J("disabled",null==e.formData?null:e.formData.invalid)}}class k{constructor(i,e,o){this.dashboard=i,this.dialogs=e,this.auth=o,this.subscription=[],this.formData=new u.NI(null,u.kI.compose([u.kI.required])),this.currentUser=this.auth.currentUserValue,this.userRoleCheck=this.auth.checkIfRolesExist("admin"),this.dashboardApps=this.dashboard.getDashboardApps()}showAddDialog(i){this.dialogs.open(i,{dismissible:!0,closeable:!0}).subscribe()}addCategory(){this.subscription.push(this.dashboard.addCategory({name:this.formData.value}).subscribe(e=>{e&&(this.dashboardApps=this.dashboard.getDashboardApps())}))}showDialog(i,e){i&&(this.moduleId=i,this.dialogs.open(e).subscribe())}deleteModule(){this.subscription.push(this.dashboard.deleteSubModule(this.moduleId).subscribe(i=>{this.dashboardApps=this.dashboard.getDashboardApps()}))}ngOnDestroy(){this.subscription.forEach(i=>i.unsubscribe())}}k.\u0275fac=function(i){return new(i||k)(t.Y36(b.s),t.Y36(T.RO),t.Y36(I.e))},k.\u0275cmp=t.Xpm({type:k,selectors:[["ng-component"]],decls:11,vars:4,consts:[[1,"bg_img_main"],[4,"ngIf","ngIfElse"],["dashboardapps",""],["template",""],["addTemplate",""],[1,"grid","w-11/12","grid-cols-12","gap-4","pb-20","mx-auto","mt-52"],[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"col-span-12","my-8","text-base","font-semibold","text-center"],[1,"px-2","py-1","bg-[#A58F81]","text-white","text-sm","rounded-md","cursor-pointer","hover:text-white",3,"click"],[1,"flex","justify-between","py-2","px-2","bg-[#eae4d8]","rounded-md","col-span-12","relative"],[1,"mt-2","text-lg","font-semibold"],["class","px-4 py-2 rounded-md bg-[#F15B41] text-white no-underline hover:text-white text-base",3,"routerLink","queryParams",4,"ngIf"],["showApps",""],[1,"px-4","py-2","rounded-md","bg-[#F15B41]","text-white","no-underline","hover:text-white","text-base",3,"routerLink","queryParams"],[1,"h-5"],[1,"col-span-4",3,"appData","deleteModule"],[1,"pb-2","text-xl","font-semibold","text-center","border-b","border-gray-400"],[1,"mt-4","text-base","font-medium","text-center"],[1,"flex","justify-center","mt-4"],["tuiButton","","appearance","secondary-destructive","type","button","size","m",1,"mx-3",3,"click"],["tuiButton","","type","button","size","m",3,"click"],[1,"text-lg","font-semibold","text-center"],[1,"flex","flex-col","justify-center","my-5"],["type","text",1,"my-2","form-control",3,"ngClass","formControl"],["class","text-xs text-red-500",4,"ngIf"],["tuiButton","","type","button","size","m",3,"disabled","click"],[1,"text-xs","text-red-500"]],template:function(i,e){if(1&i&&(t._UZ(0,"app-header"),t.TgZ(1,"div",0),t.YNc(2,Bt,1,0,"app-grid-view-loader",1),t.ALo(3,"async"),t.YNc(4,Wt,5,6,"ng-template",null,2,t.W1O),t.qZA(),t._UZ(6,"app-footer"),t.YNc(7,te,9,0,"ng-template",null,3,t.W1O),t.YNc(9,ne,7,4,"ng-template",null,4,t.W1O)),2&i){const o=t.MAs(5);t.xp6(2),t.Q6J("ngIf",!t.lcZ(3,2,e.dashboardApps))("ngIfElse",o)}},dependencies:[l.mk,l.sg,l.O5,f.rH,x.G,h.v0,C.c,u.Fj,u.JJ,u.oH,y,U,l.Ov]});var D=r(89740);class N{constructor(i,e,o,a){this.dialog=i,this.transportService=e,this.dashboard=o,this.context=a}showDialog(i){this.dialog.open(i).subscribe()}cancel(){this.dashboard.moduleEditData.next(null),(0,_.cl)(_.MX.publishAppValue),(0,_.cl)(_.MX.activeIndex),this.transportService.dialogState.emit(v.U.DISCARD),this.context.completeWith(!0)}saveDraft(){}stayOnPage(){this.context.completeWith(!0),this.transportService.dialogState.emit(v.U.DEFAULT)}}N.\u0275fac=function(i){return new(i||N)(t.Y36(T.RO),t.Y36(v.R),t.Y36(b.s),t.Y36(D.yf))},N.\u0275cmp=t.Xpm({type:N,selectors:[["app-module-guard"]],decls:9,vars:0,consts:[[1,"flex","justify-center","flex-col","items-center"],["aria-hidden","true",1,"fa","fa-exclamation-circle","fa-5x","text-yellow-500"],[1,"font-semibold","text-base","my-5"],[1,"flex","justify-between","gap-2"],["tuiButton","","type","button","size","m","appearance","accent",3,"click"],["tuiButton","","type","button","size","m","appearance","secondary",3,"click"]],template:function(i,e){1&i&&(t.TgZ(0,"div",0),t._UZ(1,"i",1),t.TgZ(2,"p",2),t._uU(3,"All your unsaved data will be lost. Are you sure you want to proceed?"),t.qZA(),t.TgZ(4,"div",3)(5,"button",4),t.NdJ("click",function(){return e.cancel()}),t._uU(6,"Proceed"),t.qZA(),t.TgZ(7,"button",5),t.NdJ("click",function(){return e.stayOnPage()}),t._uU(8,"Stay on this page"),t.qZA()()())},dependencies:[h.v0],changeDetection:0});class w{constructor(i,e,o,a){this.dialog=i,this.dashboard=e,this.transportService=o,this.router=a}canActivate(i,e){return null===this.dashboard.moduleEditData.value&&!(0,_.rV)(_.MX.publishAppValue)||(this.dialog.open(new D.Al(N),{dismissible:!1,closeable:!1}).subscribe(),this.transportService.dialogState.subscribe(a=>a===v.U.DISCARD&&(this.router.navigate([e.url]),!0)),!1)}}w.\u0275fac=function(i){return new(i||w)(t.LFG(T.RO),t.LFG(b.s),t.LFG(v.R),t.LFG(f.F0))},w.\u0275prov=t.Yz7({token:w,factory:w.\u0275fac,providedIn:"root"});var P=r(77579),R=r(61135),m=r(82722),F=r(57505),$=r(87819),p=r(70655),_t=r(77721),d=r(68923),ie=r(1054),A=r(38355),oe=r(62665),mt=r(47776),at=r(78535),J=r(54004),q=r(63900),gt=r(71884),ae=r(68675),L=r(80702),Q=r(8276),E=r(71115),ht=r(94645),j=r(31947);const ft={icons:{up:"tuiIconPlus",down:"tuiIconMinus"},appearance:"textfield",hideButtons:!1,min:0,max:Number.MAX_SAFE_INTEGER,step:1,postfix:""},st=new t.OlP("[TUI_INPUT_COUNT_OPTIONS]",{factory:()=>ft});var re=r(4707),bt=r(18090),Tt=r(55753);const ce=["tuiTh",""];function ue(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"button",3),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.table.updateSorterAndDirection(a.sorter))}),t.GkF(1,4),t._uU(2),t.ALo(3,"async"),t._UZ(4,"tui-svg",5),t.qZA()}if(2&n){const e=t.oxw(),o=t.MAs(2);t.ekj("t-sort_sorted",e.isCurrent),t.xp6(1),t.Q6J("ngTemplateOutlet",o),t.xp6(1),t.hij(" ",t.lcZ(3,5,e.table.change$)," "),t.xp6(2),t.Q6J("src",e.icon)}}function pe(n,i){1&n&&t.Hsn(0)}function de(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"div",6),t.NdJ("tuiResized",function(a){t.CHM(e);const s=t.oxw();return t.KtG(s.onResized(a))}),t.qZA()}}const K=["*"],_e=["tuiTd",""],me=["tuiTr",""];function ge(n,i){if(1&n&&(t.TgZ(0,"td",5),t._uU(1),t.qZA()),2&n){const e=i.ngIf,o=t.oxw(2).$implicit;t.xp6(1),t.hij(" ",e[o]," ")}}function he(n,i){if(1&n&&(t.YNc(0,ge,2,1,"td",4),t.ALo(1,"async")),2&n){const e=t.oxw(3);t.Q6J("ngIf",t.lcZ(1,1,e.item$))}}function fe(n,i){if(1&n&&(t.ynx(0,2),t.YNc(1,he,2,3,"ng-template",null,3,t.W1O),t.BQk()),2&n){const e=i.$implicit,o=t.MAs(2),a=t.oxw().ngIf;t.Q6J("ngTemplateOutlet",(null==a[e]?null:a[e].template)||o)}}function be(n,i){if(1&n&&(t.ynx(0),t.YNc(1,fe,3,1,"ng-container",1),t.BQk()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.table.columns)}}const Te=["tuiTbody",""];function xe(n,i){if(1&n&&(t.ynx(0),t._uU(1),t.BQk()),2&n){const e=i.polymorpheusOutlet;t.xp6(1),t.hij(" ",e," ")}}function Ce(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"tr")(1,"th",1)(2,"button",2),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.onClick())}),t.TgZ(3,"span",3),t.YNc(4,xe,2,1,"ng-container",4),t.qZA(),t._UZ(5,"tui-svg",5),t.qZA()()()}if(2&n){const e=t.oxw();t.xp6(1),t.Q6J("colSpan",e.table.columns.length),t.xp6(3),t.Q6J("polymorpheusOutlet",e.heading),t.xp6(1),t.ekj("t-chevron_rotated",e.open)}}function ve(n,i){1&n&&(t.ynx(0),t.Hsn(1),t.BQk())}function ye(n,i){if(1&n&&(t.GkF(0,7),t.ALo(1,"tuiMapper")),2&n){const e=i.$implicit,o=i.index,a=t.oxw(2);t.Q6J("ngTemplateOutlet",a.row.template)("ngTemplateOutletContext",t.Dn7(1,2,e,a.toContext,o))}}function De(n,i){if(1&n&&(t.ynx(0),t.YNc(1,ye,2,6,"ng-container",6),t.BQk()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.sorted)}}const we=["tuiThGroup",""];function Ae(n,i){if(1&n&&(t.TgZ(0,"th",5),t._uU(1),t.qZA()),2&n){const e=t.oxw(2).$implicit;t.xp6(1),t.hij(" ",e.toString()," ")}}function Ze(n,i){if(1&n&&t.YNc(0,Ae,2,1,"th",4),2&n){const e=t.oxw(3);t.Q6J("ngIf",!e.th&&!e.heads.length)}}function Me(n,i){if(1&n&&(t.ynx(0,2),t.YNc(1,Ze,1,1,"ng-template",null,3,t.W1O),t.BQk()),2&n){const e=i.$implicit,o=t.MAs(2),a=t.oxw().ngIf;t.Q6J("ngTemplateOutlet",(null==a[e.toString()]?null:a[e.toString()].template)||o)}}function Oe(n,i){if(1&n&&(t.ynx(0),t.YNc(1,Me,3,1,"ng-container",1),t.BQk()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.table.columns)}}let X=(()=>{class n{constructor(e){this.template=e,this.tuiCell=""}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(t.Rgc))},n.\u0275dir=t.lG2({type:n,selectors:[["","tuiCell",""]],inputs:{tuiCell:"tuiCell"}}),(0,p.gn)([(0,d.TH)()],n.prototype,"tuiCell",void 0),n})();const xt=new t.OlP("[TUI_STUCK]"),Ie={provide:xt,deps:[t.SBq,L.te],useFactory:({nativeElement:n},i)=>{const e=i.pipe((0,J.U)(([{intersectionRatio:o}])=>o<1));return n["$.class._stuck"]=e,e}},Ue=[{provide:L.RL,useValue:"10000px 10000px 10000px 0px"},{provide:L.op,useValue:[0,1]},{provide:E.x_,useFactory:()=>{const n=new E.qc;return n.appearance="table",n}},{provide:E.rW,useValue:{labelOutside:!0}},{provide:st,deps:[[new t.tp0,st]],useFactory:n=>Object.assign(Object.assign({},n),{hideButtons:!0})},{provide:E.kI,useExisting:(0,t.Gpc)(()=>g)},L.te,ht.CV,Ie];let g=(()=>{class n extends ie.QJ{constructor(e,o,a,s){super(),this.entries$=e,this.mode$=o,this.stuck$=a,this.changeDetectorRef=s,this.columns=[],this.size="m",this.direction=1,this.directionChange=new t.vpe,this.sorterChange=new t.vpe,this.sorter=()=>0}updateSorterAndDirection(e){this.sorter===e?this.updateDirection(1===this.direction?-1:1):(this.updateSorter(e),this.updateDirection(1))}ngAfterViewInit(){this.changeDetectorRef.detectChanges()}updateSorter(e){this.sorter=e||(()=>0),this.sorterChange.emit(this.sorter),this.change$.next()}updateDirection(e){this.direction=e,this.directionChange.emit(this.direction),this.change$.next()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(L.te),t.Y36(j.Au),t.Y36(xt),t.Y36(t.sBO))},n.\u0275dir=t.lG2({type:n,selectors:[["table","tuiTable",""]],hostAttrs:[2,"border-collapse","separate"],hostVars:1,hostBindings:function(e,o){1&e&&t.NdJ("$.data-mode.attr",function(){return o.mode$})("$.class._stuck",function(){return o.stuck$}),2&e&&t.uIk("data-size",o.size)},inputs:{columns:"columns",size:"size",direction:"direction",sorter:"sorter"},outputs:{directionChange:"directionChange",sorterChange:"sorterChange"},features:[t._Bn(Ue),t.qOj]}),(0,p.gn)([(0,d.TH)()],n.prototype,"columns",void 0),(0,p.gn)([(0,d.TH)()],n.prototype,"size",void 0),(0,p.gn)([(0,d.TH)()],n.prototype,"direction",void 0),(0,p.gn)([(0,d.TH)()],n.prototype,"sorter",void 0),n})(),S=(()=>{class n{constructor(e){this.template=e}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(t.Rgc))},n.\u0275dir=t.lG2({type:n,selectors:[["","tuiHead",""]],inputs:{tuiHead:"tuiHead"}}),n})(),ke=(()=>{class n{constructor(e,o,a){this.documentRef=e,this.elementRef=o,this.parentRef=a,this.tuiResized=(0,A.mL)(this.elementRef.nativeElement,"mousedown").pipe((0,A.mp)(),(0,q.w)(()=>{const{width:s,right:c}=this.parentRef.nativeElement.getBoundingClientRect();return(0,A.mL)(this.documentRef,"mousemove").pipe((0,gt.x)(),(0,J.U)(({clientX:ot})=>s+ot-c),(0,m.R)((0,A.mL)(this.documentRef,"mouseup")))}))}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(l.K0),t.Y36(t.SBq),t.Y36(j.zP))},n.\u0275dir=t.lG2({type:n,selectors:[["","tuiResized",""]],outputs:{tuiResized:"tuiResized"}}),n})(),Ne=(()=>{class n{constructor(e){this.template=e,this.tuiRowOf=[]}static ngTemplateContextGuard(e,o){return!0}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(t.Rgc))},n.\u0275dir=t.lG2({type:n,selectors:[["ng-template","tuiRow",""]],inputs:{tuiRowOf:"tuiRowOf"}}),(0,p.gn)([(0,d.TH)()],n.prototype,"tuiRowOf",void 0),n})(),B=(()=>{class n{constructor(e,o){this.head=e,this.table=o,this.sorter=this.head?(a,s)=>function le(n,i){const e=n instanceof bt.TU?Number(n.toUtcNativeDate()):n,o=i instanceof bt.TU?Number(i.toUtcNativeDate()):i;return e===o?0:(0,Tt.Aj)(e)&&(0,Tt.Aj)(o)?e.localeCompare(o):e>o?1:-1}(a[this.key],s[this.key]):null,this.resizable=!1,this.sticky=!1,this.width=null}get key(){if(!this.head)throw new oe.m2;return this.head.tuiHead}get isCurrent(){return!!this.sorter&&!!this.table&&this.sorter===this.table.sorter}get icon(){var e;return this.isCurrent?1===(null===(e=this.table)||void 0===e?void 0:e.direction)?"tuiIconSortDescending":"tuiIconSortAscending":"tuiIconSortOff"}onResized(e){this.width=e}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(S,8),t.Y36((0,t.Gpc)(()=>g),8))},n.\u0275cmp=t.Xpm({type:n,selectors:[["th","tuiTh",""]],hostVars:4,hostBindings:function(e,o){2&e&&(t.Udp("width",o.width,"px"),t.ekj("_sticky",o.sticky))},inputs:{sorter:"sorter",resizable:"resizable",sticky:"sticky"},features:[t._Bn([{provide:j.zP,useExisting:t.SBq}])],attrs:ce,ngContentSelectors:K,decls:4,vars:3,consts:[["type","button","class","t-sort",3,"t-sort_sorted","click",4,"ngIf","ngIfElse"],["content",""],["class","t-bar",3,"tuiResized",4,"ngIf"],["type","button",1,"t-sort",3,"click"],[3,"ngTemplateOutlet"],[1,"t-sort-icon",3,"src"],[1,"t-bar",3,"tuiResized"]],template:function(e,o){if(1&e&&(t.F$t(),t.YNc(0,ue,5,7,"button",0),t.YNc(1,pe,1,0,"ng-template",null,1,t.W1O),t.YNc(3,de,1,0,"div",2)),2&e){const a=t.MAs(2);t.Q6J("ngIf",o.sorter&&o.table)("ngIfElse",a),t.xp6(3),t.Q6J("ngIf",o.resizable)}},dependencies:[Q.PN,l.O5,l.tP,ke,l.Ov],styles:['[_nghost-%COMP%]{transition-property:box-shadow;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out;position:relative;top:0;height:var(--tui-height-m);font:var(--tui-font-text-s);text-align:left;font-weight:bold;color:var(--tui-text-02);background:var(--tui-base-01);cursor:default;padding:0 .75rem;box-sizing:border-box;box-shadow:0 .3125rem rgba(237,237,237,0);border:1px solid var(--tui-base-04)}[_nghost-%COMP%]:not(:first-child){border-left:none}._sticky[_nghost-%COMP%]{position:-webkit-sticky;position:sticky;z-index:30}._sticky[_nghost-%COMP%]:first-child{left:0}._sticky[_nghost-%COMP%]:after{transition-property:opacity;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out;content:"";position:absolute;top:0;left:100%;bottom:0;width:.3125rem;pointer-events:none;background:rgba(237,237,237,.7);opacity:0}._stuck   [_nghost-%COMP%]{z-index:20}tr:not(:first-child)[_nghost-%COMP%], tr:not(:first-child)   [_nghost-%COMP%]{border-top:none}table[data-size="l"][_nghost-%COMP%], table[data-size="l"]   [_nghost-%COMP%]{height:var(--tui-height-l);font:var(--tui-font-text-m);font-weight:bold;padding:0 1rem}thead[tuiThead][_nghost-%COMP%], thead[tuiThead]   [_nghost-%COMP%]{position:-webkit-sticky;position:sticky}table._stuck._sticky[_nghost-%COMP%]:after, table._stuck   ._sticky[_nghost-%COMP%]:after{opacity:1}thead[tuiThead]._stuck[_nghost-%COMP%], thead[tuiThead]._stuck   [_nghost-%COMP%]{box-shadow:0 .3125rem rgba(237,237,237,.7)}table[data-mode="onDark"][_nghost-%COMP%]:after, table[data-mode="onDark"]   [_nghost-%COMP%]:after{background:rgba(60,60,60,.9)}table[data-mode="onDark"]   thead[tuiThead]._stuck[_nghost-%COMP%], table[data-mode="onDark"]   thead[tuiThead]._stuck   [_nghost-%COMP%]{box-shadow:0 .3125rem rgba(60,60,60,.9)}table[data-mode="onDark"]   thead[tuiThead]._stuck[_nghost-%COMP%]:first-child, table[data-mode="onDark"]   thead[tuiThead]._stuck   [_nghost-%COMP%]:first-child{box-shadow:.0625rem .3125rem rgba(60,60,60,.9)}table[data-size="l"]   thead[tuiThead]   tr:nth-child(2)[_nghost-%COMP%], table[data-size="l"]   thead[tuiThead]   tr:nth-child(2)   [_nghost-%COMP%]{top:var(--tui-height-l)}table[data-size="m"]   thead[tuiThead]   tr:nth-child(2)[_nghost-%COMP%], table[data-size="m"]   thead[tuiThead]   tr:nth-child(2)   [_nghost-%COMP%]{top:var(--tui-height-m)}table[data-size="s"]   thead[tuiThead]   tr:nth-child(2)[_nghost-%COMP%], table[data-size="s"]   thead[tuiThead]   tr:nth-child(2)   [_nghost-%COMP%]{top:var(--tui-height-s)}.t-sort[_ngcontent-%COMP%]{transition-property:color;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out;-webkit-appearance:none;-moz-appearance:none;appearance:none;padding:0;border:0;background:none;font-size:inherit;line-height:inherit;display:inline-flex;flex-direction:inherit;align-items:center;outline:none;font-weight:bold;cursor:pointer}.t-sort_sorted[_ngcontent-%COMP%]{color:var(--tui-text-01)}.t-sort[_ngcontent-%COMP%]:focus-visible{background:var(--tui-selection)}.t-sort[_ngcontent-%COMP%]:hover{color:var(--tui-text-01)}.t-bar[_ngcontent-%COMP%]{transition-property:opacity;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out;position:absolute;top:0;bottom:0;right:-1px;width:3px;justify-self:flex-end;border-left:2px solid transparent;background:var(--tui-support-12);background-clip:content-box;cursor:ew-resize;opacity:0}.t-bar[_ngcontent-%COMP%]:hover, .t-bar[_ngcontent-%COMP%]:active{opacity:1}'],changeDetection:0}),(0,p.gn)([(0,d.TH)()],n.prototype,"sorter",void 0),(0,p.gn)([(0,d.TH)()],n.prototype,"resizable",void 0),(0,p.gn)([(0,d.TH)()],n.prototype,"sticky",void 0),n})(),H=(()=>{class n{constructor(e){this.table=e}transform(e){return this.sort(e,this.table.sorter,this.table.direction)}sort(e,o,a){return[...e].sort((s,c)=>a*o(s,c))}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(g,16))},n.\u0275pipe=t.Yjl({name:"tuiTableSort",type:n,pure:!1}),(0,p.gn)([d.UM],n.prototype,"sort",null),n})();const rt=[mt.a3,H,{provide:g,deps:[[new t.tp0,g],t.sBO,mt.a3],useFactory:ht.wD}];let W=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["th","tuiTd",""],["td","tuiTd",""]],contentQueries:function(e,o,a){if(1&e&&t.Suo(a,u.a5,5),2&e){let s;t.iGM(s=t.CRH())&&(o.control=s.first)}},hostVars:2,hostBindings:function(e,o){2&e&&t.ekj("_editable",o.control)},attrs:_e,ngContentSelectors:K,decls:1,vars:0,template:function(e,o){1&e&&(t.F$t(),t.Hsn(0))},styles:['[_nghost-%COMP%]{position:relative;height:var(--tui-height-m);font:var(--tui-font-text-s);text-align:left;padding:0 .75rem;background:var(--tui-base-01);border:1px solid var(--tui-base-04);border-top:none;box-sizing:border-box;transform:translate(0)}[_nghost-%COMP%]:first-child{left:0}[_nghost-%COMP%]:not(:first-child){border-left:none}._editable[_nghost-%COMP%]:focus-within{z-index:1}._editable[_nghost-%COMP%]{padding:0;vertical-align:top}th[_nghost-%COMP%]{position:-webkit-sticky;position:sticky;z-index:1}th[_nghost-%COMP%]:after{transition-property:opacity;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out;content:"";position:absolute;top:0;bottom:0;left:100%;width:.3125rem;pointer-events:none;background:rgba(237,237,237,.7);opacity:0}th[_nghost-%COMP%]:focus-within:not(:disabled){z-index:11}table[data-mode="onDark"][_nghost-%COMP%]:after, table[data-mode="onDark"]   [_nghost-%COMP%]:after{background:rgba(60,60,60,.9)}table._stuck[_nghost-%COMP%], table._stuck   [_nghost-%COMP%]{z-index:10}table._stuck[_nghost-%COMP%]:last-of-type:after, table._stuck   [_nghost-%COMP%]:last-of-type:after{opacity:1}table[data-size="l"][_nghost-%COMP%], table[data-size="l"]   [_nghost-%COMP%]{font:var(--tui-font-text-m);height:var(--tui-height-l);padding-left:1rem;padding-right:1rem}table[data-size="l"]._editable[_nghost-%COMP%], table[data-size="l"]   ._editable[_nghost-%COMP%]{padding:0}td[_nghost-%COMP%]:focus-within{z-index:1}td[_nghost-%COMP%]:not(:focus-within){z-index:0}'],changeDetection:0}),n})(),tt=(()=>{class n{constructor(e,o){this.table=e,this.body=o,this.cells=at.Mm,this.contentReady$=new re.t(1),this.cells$=this.contentReady$.pipe((0,q.w)(()=>(0,A.ll)(this.cells)),(0,J.U)(a=>a.reduce((s,c)=>Object.assign(Object.assign({},s),{[c.tuiCell]:c}),{}))),this.item$=this.contentReady$.pipe((0,q.w)(()=>(0,A.ll)(this.body.rows)),(0,J.U)(a=>this.body.sorted[a.findIndex(s=>s===this)]))}ngAfterContentInit(){return(0,p.mG)(this,void 0,void 0,function*(){yield Promise.resolve(),this.contentReady$.next(!0)})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36((0,t.Gpc)(()=>g)),t.Y36((0,t.Gpc)(()=>et)))},n.\u0275cmp=t.Xpm({type:n,selectors:[["tr","tuiTr",""]],contentQueries:function(e,o,a){if(1&e&&t.Suo(a,X,4),2&e){let s;t.iGM(s=t.CRH())&&(o.cells=s)}},features:[t._Bn([rt])],attrs:me,decls:2,vars:3,consts:[[4,"ngIf"],[3,"ngTemplateOutlet",4,"ngFor","ngForOf"],[3,"ngTemplateOutlet"],["plain",""],["tuiTd","",4,"ngIf"],["tuiTd",""]],template:function(e,o){1&e&&(t.YNc(0,be,2,1,"ng-container",0),t.ALo(1,"async")),2&e&&t.Q6J("ngIf",t.lcZ(1,1,o.cells$))},dependencies:[W,l.O5,l.sg,l.tP,l.Ov],encapsulation:2,changeDetection:0}),n})(),et=(()=>{class n{constructor(e,o){this.pipe=e,this.table=o,this.data=[],this.heading="",this.open=!0,this.openChange=new t.vpe,this.rows=at.Mm,this.toContext=(a,s)=>({$implicit:a,index:s})}get sorted(){return this.pipe.transform(this.data)}onClick(){this.open=!this.open,this.openChange.emit(this.open)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(H),t.Y36((0,t.Gpc)(()=>g)))},n.\u0275cmp=t.Xpm({type:n,selectors:[["tbody","tuiTbody",""]],contentQueries:function(e,o,a){if(1&e&&(t.Suo(a,Ne,5),t.Suo(a,tt,4)),2&e){let s;t.iGM(s=t.CRH())&&(o.row=s.first),t.iGM(s=t.CRH())&&(o.rows=s)}},inputs:{data:"data",heading:"heading",open:"open"},outputs:{openChange:"openChange"},features:[t._Bn(rt)],attrs:Te,ngContentSelectors:K,decls:3,vars:3,consts:[[4,"ngIf"],[1,"t-heading",3,"colSpan"],["type","button",1,"t-expand",3,"click"],[1,"t-name"],[4,"polymorpheusOutlet"],["src","tuiIconChevronDownLarge",1,"t-chevron"],[3,"ngTemplateOutlet","ngTemplateOutletContext",4,"ngFor","ngForOf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(e,o){1&e&&(t.F$t(),t.YNc(0,Ce,6,4,"tr",0),t.YNc(1,ve,2,0,"ng-container",0),t.YNc(2,De,2,1,"ng-container",0)),2&e&&(t.Q6J("ngIf",o.heading),t.xp6(1),t.Q6J("ngIf",o.open),t.xp6(1),t.Q6J("ngIf",o.open&&o.row))},dependencies:[Q.PN,l.O5,D.Li,l.sg,l.tP,_t.c],styles:['[_nghost-%COMP%]{border-color:var(--tui-base-04)}[_nghost-%COMP%]   tr[_ngcontent-%COMP%]{border-color:inherit}.t-expand[_ngcontent-%COMP%]{-webkit-appearance:none;-moz-appearance:none;appearance:none;padding:0;border:0;background:none;font-size:inherit;line-height:inherit;display:flex;width:100%;height:100%;align-items:center;box-sizing:border-box;outline:none;font-weight:bold;cursor:pointer;border-color:inherit}.t-expand[_ngcontent-%COMP%]:focus-visible   .t-name[_ngcontent-%COMP%]{background:var(--tui-selection)}.t-expand[_ngcontent-%COMP%]:before, .t-expand[_ngcontent-%COMP%]:after{content:"";position:-webkit-sticky;position:sticky;height:100%;border-left:1px solid;border-color:inherit}.t-expand[_ngcontent-%COMP%]:before{left:0}.t-expand[_ngcontent-%COMP%]:after{right:0}.t-heading[_ngcontent-%COMP%]{transition-property:background;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out;height:var(--tui-height-m);font:var(--tui-font-text-s);padding:0;background:var(--tui-base-02);border-bottom:1px solid var(--tui-base-04);border-color:inherit}.t-heading[_ngcontent-%COMP%]:hover{background:var(--tui-base-03)}table[data-size="l"][_nghost-%COMP%]   .t-heading[_ngcontent-%COMP%], table[data-size="l"]   [_nghost-%COMP%]   .t-heading[_ngcontent-%COMP%]{font:var(--tui-font-text-m);height:var(--tui-height-l)}.t-name[_ngcontent-%COMP%]{position:-webkit-sticky;position:sticky;left:.75rem;display:inline-block}table[data-size="l"][_nghost-%COMP%]   .t-name[_ngcontent-%COMP%], table[data-size="l"]   [_nghost-%COMP%]   .t-name[_ngcontent-%COMP%]{left:1rem}.t-chevron[_ngcontent-%COMP%]{transition-property:transform;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out;position:-webkit-sticky;position:sticky;right:.75rem;margin:0 .6875rem 0 auto}.t-chevron_rotated[_ngcontent-%COMP%]{transform:rotate(180deg)}'],changeDetection:0}),(0,p.gn)([(0,d.TH)()],n.prototype,"data",void 0),(0,p.gn)([(0,d.TH)()],n.prototype,"heading",void 0),(0,p.gn)([(0,d.TH)()],n.prototype,"open",void 0),n})(),lt=(()=>{class n{constructor(e){this.table=e,this.heads=at.Mm,this.heads$=null}ngAfterContentInit(){this.heads$=this.heads.changes.pipe((0,ae.O)(null),(0,J.U)(()=>this.heads.reduce((e,o)=>Object.assign(Object.assign({},e),{[o.tuiHead]:o}),{})))}}return n.\u0275fac=function(e){return new(e||n)(t.Y36((0,t.Gpc)(()=>g)))},n.\u0275cmp=t.Xpm({type:n,selectors:[["tr","tuiThGroup",""]],contentQueries:function(e,o,a){if(1&e&&(t.Suo(a,B,5),t.Suo(a,S,4)),2&e){let s;t.iGM(s=t.CRH())&&(o.th=s.first),t.iGM(s=t.CRH())&&(o.heads=s)}},features:[t._Bn([rt])],attrs:we,ngContentSelectors:K,decls:3,vars:3,consts:[[4,"ngIf"],[3,"ngTemplateOutlet",4,"ngFor","ngForOf"],[3,"ngTemplateOutlet"],["plain",""],["tuiTh","",4,"ngIf"],["tuiTh",""]],template:function(e,o){1&e&&(t.F$t(),t.Hsn(0),t.YNc(1,Oe,2,1,"ng-container",0),t.ALo(2,"async")),2&e&&(t.xp6(1),t.Q6J("ngIf",t.lcZ(2,1,o.heads$)))},dependencies:[B,l.O5,l.sg,l.tP,l.Ov],encapsulation:2,changeDetection:0}),n})(),Ct=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[l.ez,D.wq,_t.I,Q.EI]]}),n})();var vt=r(53548);new t.OlP("[TUI_TABLE_SHOW_HIDE_MESSAGE]",{factory:(0,vt.v)("showHideText")});const Pe=new t.OlP("[TUI_TABLE_PAGINATION_TEXTS]",{factory:(0,vt.v)("paginationTexts")});var yt=r(91127),Dt=r(79791),ct=r(53861);function Fe(n,i){if(1&n&&(t.ynx(0),t._uU(1),t.TgZ(2,"strong",6),t._uU(3),t.qZA(),t.BQk()),2&n){const e=t.oxw().ngIf,o=t.oxw();t.xp6(1),t.hij(" ",e.pages," "),t.xp6(2),t.Oqu(o.pages)}}function Je(n,i){if(1&n&&(t.ynx(0),t._uU(1),t.BQk()),2&n){const e=i.polymorpheusOutlet;t.xp6(1),t.hij(" ",e," ")}}function Le(n,i){1&n&&t._UZ(0,"tui-svg",13)}function Qe(n,i){1&n&&t._UZ(0,"span",14)}const Ee=function(n,i){return{$implicit:n,total:i}};function Se(n,i){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"button",9),t.NdJ("click",function(){const s=t.CHM(e).$implicit,c=t.oxw(3);return t.KtG(c.onItem(s))}),t.YNc(2,Je,2,1,"ng-container",10),t.YNc(3,Le,1,0,"tui-svg",11),t.YNc(4,Qe,1,0,"ng-template",null,12,t.W1O),t.qZA(),t.BQk()}if(2&n){const e=i.$implicit,o=t.MAs(5),a=t.oxw(3);t.xp6(2),t.Q6J("polymorpheusOutlet",a.options.sizeOptionContent)("polymorpheusOutletContext",t.WLB(4,Ee,e,a.total)),t.xp6(1),t.Q6J("ngIf",e===a.size)("ngIfElse",o)}}function Be(n,i){if(1&n&&(t.TgZ(0,"tui-data-list",7),t.YNc(1,Se,6,7,"ng-container",8),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",e.items)}}function He(n,i){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"button",15),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.back())}),t.qZA(),t.TgZ(2,"button",16),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2);return t.KtG(a.forth())}),t.qZA(),t.BQk()}if(2&n){const e=i.ngIf,o=t.oxw(2);t.xp6(1),t.Q6J("disabled",o.leftDisabled)("title",e[0]),t.xp6(1),t.Q6J("disabled",o.rightDisabled)("title",e[1])}}function ze(n,i){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"span",1),t.YNc(2,Fe,4,2,"ng-container",0),t.qZA(),t.TgZ(3,"span",2),t._uU(4),t.TgZ(5,"tui-hosted-dropdown",3),t.NdJ("openChange",function(a){t.CHM(e);const s=t.oxw();return t.KtG(s.open=a)}),t.TgZ(6,"button",4)(7,"strong"),t._uU(8),t.qZA()(),t.YNc(9,Be,2,1,"ng-template",null,5,t.W1O),t.qZA(),t._uU(11),t.TgZ(12,"strong",6),t._uU(13),t.qZA()(),t.YNc(14,He,3,4,"ng-container",0),t.ALo(15,"async"),t.BQk()}if(2&n){const e=i.ngIf,o=t.MAs(10),a=t.oxw();t.xp6(2),t.Q6J("ngIf",a.options.showPages),t.xp6(2),t.hij(" ",e.linesPerPage," "),t.xp6(1),t.Q6J("content",o)("open",a.open),t.xp6(3),t.AsE("",a.start+1,"\u2013",a.end,""),t.xp6(3),t.hij(" ",e.of," "),t.xp6(2),t.Oqu(a.total),t.xp6(1),t.Q6J("ngIf",t.lcZ(15,9,a.spinTexts$))}}const wt={sizeOptionContent:function Ye({$implicit:n}){return`${n}`},showPages:!0,items:[10,20,50,100],size:10},At=new t.OlP("[TUI_TABLE_PAGINATION_OPTIONS]",{factory:()=>wt});let ut=(()=>{class n{constructor(e,o,a){this.spinTexts$=e,this.texts$=o,this.options=a,this.items=this.options.items,this.total=0,this.page=0,this.size=this.options.size,this.pageChange=new t.vpe,this.sizeChange=new t.vpe,this.paginationChange=new t.vpe,this.open=!1}get pages(){return Math.ceil(this.total/this.size)}get start(){return this.page*this.size}get end(){return Math.min(this.start+this.size,this.total)}get leftDisabled(){return!this.start}get rightDisabled(){return this.end===this.total}get pagination(){return{page:this.page,size:this.size}}onItem(e){const{start:o}=this;this.size=e,this.sizeChange.emit(e),this.open=!1,this.page=Math.floor(o/this.size),this.pageChange.emit(this.page),this.paginationChange.emit(this.pagination)}back(){this.page--,this.pageChange.emit(this.page),this.paginationChange.emit(this.pagination)}forth(){this.page++,this.pageChange.emit(this.page),this.paginationChange.emit(this.pagination)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(j.U4),t.Y36(Pe),t.Y36(At))},n.\u0275cmp=t.Xpm({type:n,selectors:[["tui-table-pagination"]],inputs:{items:"items",total:"total",page:"page",size:"size"},outputs:{pageChange:"pageChange",sizeChange:"sizeChange",paginationChange:"paginationChange"},decls:2,vars:3,consts:[[4,"ngIf"],[1,"t-pages"],["automation-id","tui-table-pagination__lines-per-page-wrapper"],[3,"content","open","openChange"],["tuiLink","","type","button"],["content",""],[1,"t-strong"],["size","s"],[4,"ngFor","ngForOf"],["tuiOption","",1,"t-item",3,"click"],[4,"polymorpheusOutlet","polymorpheusOutletContext"],["src","tuiIconCheckLarge","class","t-checkmark",4,"ngIf","ngIfElse"],["fakeIcon",""],["src","tuiIconCheckLarge",1,"t-checkmark"],[1,"t-checkmark"],["tuiIconButton","","type","button","size","xs","appearance","icon","icon","tuiIconChevronLeft",1,"t-back",3,"disabled","title","click"],["tuiIconButton","","type","button","size","xs","appearance","icon","icon","tuiIconChevronRight",3,"disabled","title","click"]],template:function(e,o){1&e&&(t.YNc(0,ze,16,11,"ng-container",0),t.ALo(1,"async")),2&e&&t.Q6J("ngIf",t.lcZ(1,1,o.texts$))},dependencies:[yt.o1,Dt.V,ct.qi,ct.vK,Q.PN,h.v0,l.O5,l.sg,D.Li,l.Ov],styles:["[_nghost-%COMP%]{display:flex;font:var(--tui-font-text-s);align-items:center;color:var(--tui-text-03)}.t-strong[_ngcontent-%COMP%]{color:var(--tui-text-01)}.t-pages[_ngcontent-%COMP%]{margin-right:auto}.t-item[_ngcontent-%COMP%]{min-width:5.5rem;box-sizing:border-box}.t-checkmark[_ngcontent-%COMP%]{min-width:1.5rem;border-left:5px solid transparent}.t-back[_ngcontent-%COMP%]{margin:0 .25rem 0 1.5rem}"],changeDetection:0}),(0,p.gn)([(0,d.TH)()],n.prototype,"items",void 0),(0,p.gn)([(0,d.TH)()],n.prototype,"total",void 0),(0,p.gn)([(0,d.TH)()],n.prototype,"page",void 0),(0,p.gn)([(0,d.TH)()],n.prototype,"size",void 0),n})(),Ve=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[l.ez,h.fN,Dt.j,yt.jh,ct.pc,Q.EI,D.wq]]}),n})();var nt=r(54227),it=r(60101);function Ge(n,i){1&n&&(t.TgZ(0,"th",17),t._uU(1," Category Name "),t.qZA()),2&n&&t.Q6J("resizable",!0)}function Re(n,i){1&n&&(t.TgZ(0,"th",18),t._uU(1,"Actions"),t.qZA()),2&n&&t.Q6J("sorter",null)}function $e(n,i){1&n&&(t.TgZ(0,"tr")(1,"td",21),t._uU(2,"No results found!"),t.qZA()())}function qe(n,i){if(1&n&&(t.TgZ(0,"td",26),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",null==e?null:e.name," ")}}function je(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"div",29)(1,"a",30),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2).$implicit,s=t.oxw(4),c=t.MAs(15);return t.KtG(s.showAddOrEditDialog(c,a))}),t._UZ(2,"i",31),t.qZA(),t.TgZ(3,"button",32),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2).$implicit,s=t.oxw(4),c=t.MAs(13);return t.KtG(s.showDeleteDialog(a,c))}),t._UZ(4,"i",33),t.qZA()()}}function Ke(n,i){if(1&n&&(t.TgZ(0,"td",27),t.YNc(1,je,5,0,"div",28),t.qZA()),2&n){const e=t.oxw().$implicit,o=t.oxw(4);t.xp6(1),t.Q6J("ngIf",(null==e?null:e.createdBy)===(null==o.currentUser?null:o.currentUser.id)||1==o.userRoleCheckAdmin)}}function Xe(n,i){1&n&&(t.TgZ(0,"tr",23),t.YNc(1,qe,2,1,"td",24),t.YNc(2,Ke,2,1,"td",25),t.qZA()),2&n&&(t.xp6(1),t.Q6J("tuiCell","name"),t.xp6(1),t.Q6J("tuiCell","actions"))}function We(n,i){if(1&n&&t.YNc(0,Xe,3,2,"tr",22),2&n){const e=t.oxw().tuiLet;t.Q6J("ngForOf",e)}}function tn(n,i){if(1&n&&(t.TgZ(0,"tbody",19),t.YNc(1,$e,3,0,"tr",5),t.YNc(2,We,1,1,"ng-template",null,20,t.W1O),t.qZA()),2&n){const e=i.tuiLet,o=t.MAs(3);t.Q6J("data",e),t.xp6(1),t.Q6J("ngIf",0==(null==e?null:e.length))("ngIfElse",o)}}const en=function(){return["name","actions"]};function nn(n,i){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"table",9)(2,"thead")(3,"tr",10),t.YNc(4,Ge,2,1,"th",11),t.YNc(5,Re,2,1,"th",12),t.qZA()(),t.YNc(6,tn,4,3,"tbody",13),t.ALo(7,"tuiTableSort"),t.TgZ(8,"tfoot",14)(9,"tr")(10,"td",15)(11,"tui-table-pagination",16),t.NdJ("pageChange",function(a){t.CHM(e);const s=t.oxw();return t.KtG(s.changePage(a))}),t.qZA()()()()(),t.BQk()}if(2&n){const e=i.ngIf,o=t.oxw();t.xp6(1),t.Q6J("columns",t.DdM(10,en)),t.xp6(3),t.Q6J("tuiHead","name"),t.xp6(1),t.Q6J("tuiHead","actions"),t.xp6(1),t.Q6J("tuiLet",t.lcZ(7,8,null==e?null:e.results)),t.xp6(4),t.Q6J("colSpan",12),t.xp6(1),t.Q6J("total",null==e?null:e.totalResults)("size",o.limit)("page",o.page)}}function on(n,i){1&n&&(t._UZ(0,"tui-loader",34),t.TgZ(1,"p",35),t._uU(2,"Fetching Data..."),t.qZA()),2&n&&t.Q6J("overlay",!1)("inheritColor",!1)}function an(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"p",36),t._uU(1,"Delete Category"),t.qZA(),t.TgZ(2,"p",37),t._uU(3,"Are you sure you want to delete this category?"),t.qZA(),t.TgZ(4,"div",38)(5,"button",39),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw().deleteCategory(),t.KtG(s.complete())}),t._uU(6," Confirm "),t.qZA(),t.TgZ(7,"button",40),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.KtG(s.complete())}),t._uU(8," Cancel "),t.qZA()()}}function sn(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"p",41),t._uU(1," Add/Edit Category "),t.qZA(),t.TgZ(2,"div",42)(3,"formio",43),t.NdJ("change",function(a){t.CHM(e);const s=t.oxw();return t.KtG(s.getFormValues(a))}),t.qZA()(),t.TgZ(4,"div",44)(5,"button",45),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.editOrAddCategory())}),t.ALo(6,"async"),t.ALo(7,"async"),t._uU(8),t.qZA(),t.TgZ(9,"button",46),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.KtG(s.complete())}),t._uU(10," Cancel "),t.qZA()()}if(2&n){const e=t.oxw();let o;t.xp6(3),t.Q6J("submission",e.formSubmission)("form",e.categoryFormField),t.xp6(2),t.Q6J("disabled",0==(null==(o=t.lcZ(6,4,e.formData))?null:o.isValid)||!(null!=(o=t.lcZ(7,6,e.formData))&&o.changed)),t.xp6(3),t.hij(" ",e.categoryId?"Update":"Submit"," ")}}class z{constructor(i,e,o,a){this.dashboard=i,this.dialogs=e,this.cf=o,this.auth=a,this.categoryEditControl=new u.NI(""),this.categoryId=null,this.destroy$=new P.x,this.limit=10,this.page=0,this.categoryFormField=F.yp,this.formData=new R.X({isValid:!1}),this.subscription=[],this.currentUser=this.auth.currentUserValue,this.userRoleCheckAdmin=this.auth.checkIfRolesExist("admin"),this.categories=this.dashboard.getAllCategories(this.limit)}changePage(i){this.page=i,this.categories=this.dashboard.getAllCategories(this.limit)}showAddOrEditDialog(i,e){this.subscription.push(this.dialogs.open(i,{dismissible:!0,closeable:!0}).subscribe()),e?.id?(this.categoryId=e?.id,this.formSubmission={data:{categoryName:e?.name}}):(this.categoryId=null,this.formSubmission={data:{}})}editOrAddCategory(){const i={name:this.formData.value?.data?.categoryName};this.categoryId?this.dashboard.editCategory(i,this.categoryId).pipe((0,m.R)(this.destroy$)).subscribe(e=>{e&&(this.categoryId=null,this.categories=this.dashboard.getAllCategories(this.limit),this.cf.detectChanges(),this.subscription.forEach(o=>o.unsubscribe()))}):this.dashboard.addCategory(i).pipe((0,m.R)(this.destroy$)).subscribe(e=>{e&&(this.categories=this.dashboard.getAllCategories(this.limit),this.cf.detectChanges(),this.subscription.forEach(o=>o.unsubscribe()))})}getFormValues(i){i?.data&&this.formData.next(i)}showStatus(i){return 1==i?"Published":2==i?"Deleted":"Draft"}deleteCategory(){this.dashboard.deleteCategory(this.categoryId).pipe((0,m.R)(this.destroy$)).subscribe(()=>{this.categories=this.dashboard.getAllCategories(this.limit),this.cf.detectChanges()})}showDeleteDialog(i,e){this.dialogs.open(e,{dismissible:!0,closeable:!0}).subscribe(),this.categoryId=i?.id}ngOnDestroy(){this.destroy$.complete(),this.destroy$.unsubscribe()}}z.\u0275fac=function(i){return new(i||z)(t.Y36(b.s),t.Y36(T.RO),t.Y36(t.sBO),t.Y36(I.e))},z.\u0275cmp=t.Xpm({type:z,selectors:[["ng-component"]],decls:16,vars:4,consts:[[1,"bg_img_main"],[1,"w-11/12","mx-auto","mt-52","pb-60"],[1,"flex","justify-end","mb-5"],[1,"cursor-pointer"],[1,"px-4","py-2","rounded-lg","bg-[#a58f81]","text-white","no-underline","hover:text-white","text-sm",3,"click"],[4,"ngIf","ngIfElse"],["loading",""],["deltemplate",""],["addTemplate",""],["tuiTable","",1,"w-full","rounded-lg",3,"columns"],["tuiThGroup",""],["tuiTh","","class","text-base",3,"resizable",4,"tuiHead"],["class","text-base","tuiTh","",3,"sorter",4,"tuiHead"],["tuiTbody","",3,"data",4,"tuiLet"],[1,"bg-white"],[1,"px-3","py-6","border","border-gray-300",3,"colSpan"],[3,"total","size","page","pageChange"],["tuiTh","",1,"text-base",3,"resizable"],["tuiTh","",1,"text-base",3,"sorter"],["tuiTbody","",3,"data"],["showData",""],["colspan","12",1,"px-4","py-8","text-lg","font-medium","text-center","text-gray-500","bg-white","border","border-gray-300"],["tuiTr","",4,"ngFor","ngForOf"],["tuiTr",""],["class","py-3 font-semibold","tuiTd","",4,"tuiCell"],["tuiTd","",4,"tuiCell"],["tuiTd","",1,"py-3","font-semibold"],["tuiTd",""],["class","flex justify-start",4,"ngIf"],[1,"flex","justify-start"],[1,"px-2","py-1","mx-2","text-white","bg-blue-400","rounded-md","cursor-pointer","hover:text-white",3,"click"],["aria-hidden","true",1,"fa","fa-pencil-square-o"],[1,"px-2","py-1","text-white","bg-red-500","rounded-md",3,"click"],["aria-hidden","true",1,"fa","fa-trash"],["size","xl",1,"mt-14",3,"overlay","inheritColor"],[1,"text-base","font-medium","text-center","my-2","text-[#6C86E2]"],[1,"pb-2","text-xl","font-semibold","text-center","border-b","border-gray-400"],[1,"mt-4","text-base","font-medium","text-center"],[1,"flex","justify-center","mt-4"],["tuiButton","","appearance","secondary-destructive","type","button","size","m",1,"mx-3",3,"click"],["tuiButton","","type","button","size","m",3,"click"],[1,"text-lg","font-semibold","text-center"],[1,"flex","flex-col","justify-center","my-5"],[3,"submission","form","change"],[1,"flex","justify-center","gap-x-3"],["tuiButton","","type","button","size","m",3,"disabled","click"],["tuiButton","","type","button","size","m","appearance","accent",3,"click"]],template:function(i,e){if(1&i){const o=t.EpF();t._UZ(0,"app-header"),t.TgZ(1,"div",0)(2,"section",1)(3,"div",2)(4,"div",3)(5,"a",4),t.NdJ("click",function(){t.CHM(o);const s=t.MAs(15);return t.KtG(e.showAddOrEditDialog(s,null))}),t._uU(6,"+ Add category"),t.qZA()()(),t.YNc(7,nn,12,11,"ng-container",5),t.ALo(8,"async"),t.YNc(9,on,3,2,"ng-template",null,6,t.W1O),t.qZA()(),t._UZ(11,"app-footer"),t.YNc(12,an,9,0,"ng-template",null,7,t.W1O),t.YNc(14,sn,11,8,"ng-template",null,8,t.W1O)}if(2&i){const o=t.MAs(10);t.xp6(7),t.Q6J("ngIf",t.lcZ(8,2,e.categories))("ngIfElse",o)}},dependencies:[l.sg,l.O5,x.G,h.v0,C.c,g,et,lt,B,W,tt,X,S,nt.Ls,$.kM,it.k4,ut,l.Ov,H],changeDetection:0});var rn=r(78372),ln=r(1668);function cn(n,i){1&n&&(t.TgZ(0,"th",20),t._uU(1," Full Name "),t.qZA()),2&n&&t.Q6J("resizable",!0)}function un(n,i){1&n&&(t.TgZ(0,"th",20),t._uU(1," Email "),t.qZA()),2&n&&t.Q6J("resizable",!0)}function pn(n,i){1&n&&(t.TgZ(0,"th",20),t._uU(1," Role "),t.qZA()),2&n&&t.Q6J("resizable",!0)}function dn(n,i){1&n&&(t.TgZ(0,"th",21),t._uU(1,"Actions"),t.qZA()),2&n&&t.Q6J("sorter",null)}function _n(n,i){1&n&&(t.TgZ(0,"tr")(1,"td",24),t._uU(2,"No results found!"),t.qZA()())}function mn(n,i){if(1&n&&(t.TgZ(0,"td",29),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",null==e?null:e.fullName," ")}}function gn(n,i){if(1&n&&(t.TgZ(0,"td",29),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",null==e?null:e.email," ")}}function hn(n,i){if(1&n&&(t.TgZ(0,"td",29),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",null==e?null:e.roles," ")}}function fn(n,i){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",32)(2,"a",33),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2).$implicit,s=t.oxw(4),c=t.MAs(15);return t.KtG(s.showDialog(c,a))}),t._UZ(3,"i",34),t.qZA(),t.TgZ(4,"button",35),t.NdJ("click",function(){t.CHM(e);const a=t.oxw(2).$implicit,s=t.oxw(4),c=t.MAs(17);return t.KtG(s.showDeleteDialog(a,c))}),t._UZ(5,"i",36),t.qZA()(),t.BQk()}}function bn(n,i){if(1&n&&(t.TgZ(0,"td",30),t.YNc(1,fn,6,0,"ng-container",31),t.qZA()),2&n){const e=t.oxw().$implicit,o=t.oxw(4);t.xp6(1),t.Q6J("ngIf",0==o.checkRoles(null==e?null:e.roles))}}function Tn(n,i){1&n&&(t.TgZ(0,"tr",26),t.YNc(1,mn,2,1,"td",27),t.YNc(2,gn,2,1,"td",27),t.YNc(3,hn,2,1,"td",27),t.YNc(4,bn,2,1,"td",28),t.qZA()),2&n&&(t.xp6(1),t.Q6J("tuiCell","full name"),t.xp6(1),t.Q6J("tuiCell","email"),t.xp6(1),t.Q6J("tuiCell","role"),t.xp6(1),t.Q6J("tuiCell","actions"))}function xn(n,i){if(1&n&&t.YNc(0,Tn,5,4,"tr",25),2&n){const e=t.oxw().tuiLet;t.Q6J("ngForOf",e)}}function Cn(n,i){if(1&n&&(t.TgZ(0,"tbody",22),t.YNc(1,_n,3,0,"tr",7),t.YNc(2,xn,1,1,"ng-template",null,23,t.W1O),t.qZA()),2&n){const e=i.tuiLet,o=t.MAs(3);t.Q6J("data",e),t.xp6(1),t.Q6J("ngIf",0==(null==e?null:e.length))("ngIfElse",o)}}const vn=function(){return["fullName","email","role","actions"]};function yn(n,i){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"table",12)(2,"thead")(3,"tr",13),t.YNc(4,cn,2,1,"th",14),t.YNc(5,un,2,1,"th",14),t.YNc(6,pn,2,1,"th",14),t.YNc(7,dn,2,1,"th",15),t.qZA()(),t.YNc(8,Cn,4,3,"tbody",16),t.ALo(9,"tuiTableSort"),t.TgZ(10,"tfoot",17)(11,"tr")(12,"td",18)(13,"tui-table-pagination",19),t.NdJ("pageChange",function(a){t.CHM(e);const s=t.oxw();return t.KtG(s.changePage(a))}),t.qZA()()()()(),t.BQk()}if(2&n){const e=i.ngIf,o=t.oxw();t.xp6(1),t.Q6J("columns",t.DdM(12,vn)),t.xp6(3),t.Q6J("tuiHead","fullName"),t.xp6(1),t.Q6J("tuiHead","email"),t.xp6(1),t.Q6J("tuiHead","role"),t.xp6(1),t.Q6J("tuiHead","actions"),t.xp6(1),t.Q6J("tuiLet",t.lcZ(9,10,null==e?null:e.results)),t.xp6(4),t.Q6J("colSpan",12),t.xp6(1),t.Q6J("total",null==e?null:e.totalResults)("size",o.limit)("page",o.page)}}function Dn(n,i){1&n&&(t._UZ(0,"tui-loader",37),t.TgZ(1,"p",38),t._uU(2,"Fetching Data..."),t.qZA()),2&n&&t.Q6J("overlay",!1)("inheritColor",!1)}function wn(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"p",39),t._uU(1," Edit User "),t.qZA(),t.TgZ(2,"div",40)(3,"formio",41),t.NdJ("change",function(a){t.CHM(e);const s=t.oxw();return t.KtG(s.getFormValues(a))}),t.qZA()(),t.TgZ(4,"div",42)(5,"button",43),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.editOrAddUser())}),t.ALo(6,"async"),t._uU(7," Update "),t.qZA(),t.TgZ(8,"button",44),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.KtG(s.complete())}),t._uU(9," Cancel "),t.qZA()()}if(2&n){const e=t.oxw();let o;t.xp6(3),t.Q6J("submission",e.formSubmission)("form",e.userForm),t.xp6(2),t.Q6J("disabled",0==(null==(o=t.lcZ(6,3,e.formData))?null:o.isValid))}}function An(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"p",45),t._uU(1,"Delete User"),t.qZA(),t.TgZ(2,"p",46),t._uU(3,"Are you sure you want to delete this user ?"),t.qZA(),t.TgZ(4,"div",47)(5,"button",48),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw().deleteUser(),t.KtG(s.complete())}),t._uU(6," Confirm "),t.qZA(),t.TgZ(7,"button",44),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.KtG(s.complete())}),t._uU(8," Cancel "),t.qZA()()}}function Zn(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"p",39),t._uU(1," Add User "),t.qZA(),t.TgZ(2,"div",40)(3,"formio",41),t.NdJ("change",function(a){t.CHM(e);const s=t.oxw();return t.KtG(s.getFormValues(a))}),t.qZA()(),t.TgZ(4,"div",42)(5,"button",43),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.editOrAddUser())}),t.ALo(6,"async"),t.ALo(7,"async"),t._uU(8," Submit "),t.qZA(),t.TgZ(9,"button",44),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.KtG(s.complete())}),t._uU(10," Cancel "),t.qZA()()}if(2&n){const e=t.oxw();let o;t.xp6(3),t.Q6J("submission",e.formSubmission)("form",e.addUserForm),t.xp6(2),t.Q6J("disabled",0==(null==(o=t.lcZ(6,3,e.formData))?null:o.isValid)||!(null!=(o=t.lcZ(7,5,e.formData))&&o.changed))}}class Y{constructor(i,e,o,a){this.dashboard=i,this.auth=e,this.dialogs=o,this.cf=a,this.destroy$=new P.x,this.limit=6,this.page=0,this.userForm=F.rd,this.addUserForm=F.gD,this.formData=new R.X({isValid:!1}),this.searchValue=new u.NI,this.fetchingUsers=new P.x,this.subscription=[],this.users=this.dashboard.getAllUsersForListing(this.limit,this.page),this.searchValue.valueChanges.pipe((0,rn.b)(400),(0,gt.x)(),(0,q.w)(s=>this.users=""==s?this.dashboard.getAllUsersForListing(this.limit,this.page):this.dashboard.getAllUsersForListing(this.limit,this.page,s)),(0,m.R)(this.destroy$)).subscribe(()=>{this.cf.detectChanges()})}changePage(i){this.page=i,this.users=this.dashboard.getAllUsersForListing(this.limit,this.page)}checkRoles(i){return i?.includes("sysAdmin")}showDialog(i,e){this.subscription.push(this.dialogs.open(i,{dismissible:!0,closeable:!0}).subscribe()),this.userId=e?.id||null,this.formSubmission={data:{fullname:e?.fullName,email:e?.email,role:e?.roles,password:e?.password}}}showAddDialog(i){this.subscription.push(this.dialogs.open(i,{dismissible:!0,closeable:!0}).subscribe()),this.formSubmission={data:{}}}showDeleteDialog(i,e){this.dialogs.open(e,{dismissible:!0,closeable:!0}).subscribe(),this.userId=i?.id}getFormValues(i){i?.data&&this.formData.next(i)}editOrAddUser(){if(this.userId){const i={roles:this.auth.currentUserValue?.roles.includes("sysAdmin")?void 0:this.formData?.value?.data?.role,fullName:this.formData?.value?.data?.fullname,email:this.formData?.value?.data?.email,password:this.formData?.value?.data?.password};this.dashboard.updateUser(this.userId,i).pipe((0,m.R)(this.destroy$)).subscribe(e=>{e&&(this.users=this.dashboard.getAllUsersForListing(this.limit,this.page),this.cf.detectChanges(),this.subscription.forEach(o=>o.unsubscribe()))})}else this.dashboard.addNewUser({fullName:this.formData?.value?.data?.fullname,email:this.formData?.value?.data?.email,roles:this.formData?.value?.data?.role,password:this.formData?.value?.data?.password}).pipe((0,m.R)(this.destroy$)).subscribe(e=>{e&&(this.users=this.dashboard.getAllUsersForListing(this.limit,this.page),this.cf.detectChanges(),this.subscription.forEach(o=>o.unsubscribe()))})}deleteUser(){this.dashboard.deleteUser(this.userId).pipe((0,m.R)(this.destroy$)).subscribe(()=>{this.users=this.dashboard.getAllUsersForListing(this.limit,this.page),this.cf.detectChanges()})}ngOnDestroy(){this.destroy$.complete(),this.destroy$.unsubscribe()}}function Mn(n,i){1&n&&(t.TgZ(0,"th",17),t._uU(1," Company Name "),t.qZA()),2&n&&t.Q6J("resizable",!0)}function On(n,i){1&n&&(t.TgZ(0,"th",18),t._uU(1,"Actions"),t.qZA()),2&n&&t.Q6J("sorter",null)}function In(n,i){1&n&&(t.TgZ(0,"tr")(1,"td",21),t._uU(2,"No results found!"),t.qZA()())}function Un(n,i){if(1&n&&(t.TgZ(0,"td",26),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",null==e?null:e.title," ")}}function kn(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"td",27)(1,"div",28)(2,"a",29),t.NdJ("click",function(){t.CHM(e);const a=t.oxw().$implicit,s=t.oxw(4),c=t.MAs(13);return t.KtG(s.showDialog(c,a))}),t._UZ(3,"i",30),t.qZA(),t.TgZ(4,"button",31),t.NdJ("click",function(){t.CHM(e);const a=t.oxw().$implicit,s=t.oxw(4),c=t.MAs(15);return t.KtG(s.showDeleteDialog(a,c))}),t._UZ(5,"i",32),t.qZA()()()}}function Nn(n,i){1&n&&(t.TgZ(0,"tr",23),t.YNc(1,Un,2,1,"td",24),t.YNc(2,kn,6,0,"td",25),t.qZA()),2&n&&(t.xp6(1),t.Q6J("tuiCell","title"),t.xp6(1),t.Q6J("tuiCell","actions"))}function Pn(n,i){if(1&n&&t.YNc(0,Nn,3,2,"tr",22),2&n){const e=t.oxw().tuiLet;t.Q6J("ngForOf",e)}}function Fn(n,i){if(1&n&&(t.TgZ(0,"tbody",19),t.YNc(1,In,3,0,"tr",5),t.YNc(2,Pn,1,1,"ng-template",null,20,t.W1O),t.qZA()),2&n){const e=i.tuiLet,o=t.MAs(3);t.Q6J("data",e),t.xp6(1),t.Q6J("ngIf",0==(null==e?null:e.length))("ngIfElse",o)}}Y.\u0275fac=function(i){return new(i||Y)(t.Y36(b.s),t.Y36(I.e),t.Y36(T.RO),t.Y36(t.sBO))},Y.\u0275cmp=t.Xpm({type:Y,selectors:[["ng-component"]],decls:20,vars:5,consts:[[1,"bg_img_main"],[1,"w-11/12","mx-auto","mt-52","pb-60"],[1,"flex","justify-between","mb-5"],[1,"w-2/5"],["appTrim","","placeholder","Search users",1,"form-control",3,"formControl"],[1,"cursor-pointer"],[1,"px-4","py-2","rounded-lg","bg-[#a58f81]","text-white","no-underline","hover:text-white","text-sm",3,"click"],[4,"ngIf","ngIfElse"],["loading",""],["template",""],["deltemplate",""],["addTemplate",""],["tuiTable","",1,"w-full","rounded-lg",3,"columns"],["tuiThGroup",""],["tuiTh","","class","text-base",3,"resizable",4,"tuiHead"],["class","text-base","tuiTh","",3,"sorter",4,"tuiHead"],["tuiTbody","",3,"data",4,"tuiLet"],[1,"bg-white"],[1,"px-3","py-6","border","border-gray-300",3,"colSpan"],[3,"total","size","page","pageChange"],["tuiTh","",1,"text-base",3,"resizable"],["tuiTh","",1,"text-base",3,"sorter"],["tuiTbody","",3,"data"],["showData",""],["colspan","12",1,"px-4","py-8","text-lg","font-medium","text-center","text-gray-500","bg-white","border","border-gray-300"],["tuiTr","",4,"ngFor","ngForOf"],["tuiTr",""],["class","py-3 font-semibold","tuiTd","",4,"tuiCell"],["tuiTd","",4,"tuiCell"],["tuiTd","",1,"py-3","font-semibold"],["tuiTd",""],[4,"ngIf"],[1,"flex","justify-start"],[1,"px-2","py-1","mx-2","text-white","bg-blue-400","rounded-md","cursor-pointer","hover:text-white",3,"click"],["aria-hidden","true",1,"fa","fa-pencil-square-o"],[1,"px-2","py-1","text-white","bg-red-500","rounded-md",3,"click"],["aria-hidden","true",1,"fa","fa-trash"],["size","xl",1,"mt-14",3,"overlay","inheritColor"],[1,"text-base","font-medium","text-center","my-2","text-[#6C86E2]"],[1,"text-lg","font-semibold","text-center"],[1,"flex","flex-col","justify-center","my-5"],[3,"submission","form","change"],[1,"flex","justify-center","gap-x-3"],["tuiButton","","type","button","size","m",3,"disabled","click"],["tuiButton","","type","button","size","m","appearance","accent",3,"click"],[1,"pb-2","text-xl","font-semibold","text-center","border-b","border-gray-400"],[1,"mt-4","text-base","font-medium","text-center"],[1,"flex","justify-center","mt-4"],["tuiButton","","appearance","secondary-destructive","type","button","size","m",1,"mx-3",3,"click"]],template:function(i,e){if(1&i){const o=t.EpF();t._UZ(0,"app-header"),t.TgZ(1,"div",0)(2,"section",1)(3,"div",2)(4,"div",3),t._UZ(5,"input",4),t.qZA(),t.TgZ(6,"div",5)(7,"a",6),t.NdJ("click",function(){t.CHM(o);const s=t.MAs(19);return t.KtG(e.showAddDialog(s))}),t._uU(8,"+ Add new user"),t.qZA()()(),t.YNc(9,yn,14,13,"ng-container",7),t.ALo(10,"async"),t.YNc(11,Dn,3,2,"ng-template",null,8,t.W1O),t.qZA()(),t._UZ(13,"app-footer"),t.YNc(14,wn,10,5,"ng-template",null,9,t.W1O),t.YNc(16,An,9,0,"ng-template",null,10,t.W1O),t.YNc(18,Zn,11,7,"ng-template",null,11,t.W1O)}if(2&i){const o=t.MAs(12);t.xp6(5),t.Q6J("formControl",e.searchValue),t.xp6(4),t.Q6J("ngIf",t.lcZ(10,3,e.users))("ngIfElse",o)}},dependencies:[l.sg,l.O5,x.G,h.v0,C.c,g,et,lt,B,W,tt,X,S,nt.Ls,u.Fj,u.JJ,u.oH,$.kM,it.k4,ut,ln.$,l.Ov,H],changeDetection:0});const Jn=function(){return["title","actions"]};function Ln(n,i){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"table",9)(2,"thead")(3,"tr",10),t.YNc(4,Mn,2,1,"th",11),t.YNc(5,On,2,1,"th",12),t.qZA()(),t.YNc(6,Fn,4,3,"tbody",13),t.ALo(7,"tuiTableSort"),t.TgZ(8,"tfoot",14)(9,"tr")(10,"td",15)(11,"tui-table-pagination",16),t.NdJ("pageChange",function(a){t.CHM(e);const s=t.oxw();return t.KtG(s.changePage(a))}),t.qZA()()()()(),t.BQk()}if(2&n){const e=i.ngIf,o=t.oxw();t.xp6(1),t.Q6J("columns",t.DdM(10,Jn)),t.xp6(3),t.Q6J("tuiHead","title"),t.xp6(1),t.Q6J("tuiHead","actions"),t.xp6(1),t.Q6J("tuiLet",t.lcZ(7,8,null==e?null:e.results)),t.xp6(4),t.Q6J("colSpan",12),t.xp6(1),t.Q6J("total",null==e?null:e.totalResults)("size",o.limit)("page",o.page)}}function Qn(n,i){1&n&&(t._UZ(0,"tui-loader",33),t.TgZ(1,"p",34),t._uU(2,"Fetching Data..."),t.qZA()),2&n&&t.Q6J("overlay",!1)("inheritColor",!1)}function En(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"p",35),t._uU(1),t.qZA(),t.TgZ(2,"div",36)(3,"label",37),t._uU(4,"Company Name"),t.qZA(),t._UZ(5,"input",38),t.qZA(),t.TgZ(6,"div",39)(7,"button",40),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.editOrAddCompany())}),t._uU(8),t.qZA(),t.TgZ(9,"button",41),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.KtG(s.complete())}),t._uU(10," Cancel "),t.qZA()()}if(2&n){const e=t.oxw();t.xp6(1),t.hij(" ",e.categoryId?"Edit":"Add"," Company "),t.xp6(4),t.Q6J("formControl",e.categoryEditControl),t.xp6(2),t.Q6J("disabled",!(null!=e.categoryEditControl&&e.categoryEditControl.value)),t.xp6(1),t.hij(" ",e.categoryId?"Update":"Submit"," ")}}function Sn(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"p",42),t._uU(1,"Delete Company"),t.qZA(),t.TgZ(2,"p",43),t._uU(3,"Are you sure you want to delete this company?"),t.qZA(),t.TgZ(4,"div",44)(5,"button",45),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw().deleteCompanyData(),t.KtG(s.complete())}),t._uU(6," Confirm "),t.qZA(),t.TgZ(7,"button",46),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.KtG(s.complete())}),t._uU(8," Cancel "),t.qZA()()}}class V{constructor(i,e){this.dashboard=i,this.dialogs=e,this.categoryEditControl=new u.NI(""),this.destroy$=new P.x,this.limit=6,this.page=0,this.subscription=[],this.companies=this.dashboard.getAllCompanies(this.limit,this.page)}changePage(i){this.page=i,this.companies=this.dashboard.getAllCompanies(this.limit,this.page)}editOrAddCompany(){this.categoryId?this.dashboard.updateCompany({title:this.categoryEditControl?.value,groupCode:this.categoryEditControl?.value?.replace(/\s/g,"-")},this.categoryId).pipe((0,m.R)(this.destroy$)).subscribe(i=>{i&&(this.companies=this.dashboard.getAllCompanies(this.limit,this.page),this.subscription.forEach(e=>e.unsubscribe()))}):this.dashboard.addCompany({title:this.categoryEditControl?.value,groupCode:this.categoryEditControl?.value?.replace(/\s/g,"-")}).pipe((0,m.R)(this.destroy$)).subscribe(i=>{i&&(this.companies=this.dashboard.getAllCompanies(this.limit,this.page),this.subscription.forEach(e=>e.unsubscribe()))})}deleteCompanyData(){this.dashboard.deleteCompany(this.categoryId).pipe((0,m.R)(this.destroy$)).subscribe(()=>this.companies=this.dashboard.getAllCompanies(this.limit,this.page))}showDialog(i,e){this.subscription.push(this.dialogs.open(i,{dismissible:!0,closeable:!0}).subscribe()),this.categoryEditControl.setValue(e?.title?e?.title:""),this.categoryId=e?.id||null}showDeleteDialog(i,e){this.dialogs.open(e,{dismissible:!0,closeable:!0}).subscribe(),this.categoryId=i?.id}ngOnDestroy(){this.destroy$.complete(),this.destroy$.unsubscribe()}}V.\u0275fac=function(i){return new(i||V)(t.Y36(b.s),t.Y36(T.RO))},V.\u0275cmp=t.Xpm({type:V,selectors:[["ng-component"]],decls:16,vars:4,consts:[[1,"bg_img_main"],[1,"w-11/12","mx-auto","mt-52","pb-60"],[1,"flex","justify-end","mb-5"],[1,"cursor-pointer"],[1,"px-4","py-2","rounded-lg","bg-[#a58f81]","text-white","no-underline","hover:text-white","text-sm",3,"click"],[4,"ngIf","ngIfElse"],["loading",""],["template",""],["deltemplate",""],["tuiTable","",1,"w-full","rounded-lg",3,"columns"],["tuiThGroup",""],["tuiTh","","class","text-base",3,"resizable",4,"tuiHead"],["class","text-base","tuiTh","",3,"sorter",4,"tuiHead"],["tuiTbody","",3,"data",4,"tuiLet"],[1,"bg-white"],[1,"px-3","py-6","border","border-gray-300",3,"colSpan"],[3,"total","size","page","pageChange"],["tuiTh","",1,"text-base",3,"resizable"],["tuiTh","",1,"text-base",3,"sorter"],["tuiTbody","",3,"data"],["showData",""],["colspan","12",1,"px-4","py-8","text-lg","font-medium","text-center","text-gray-500","bg-white","border","border-gray-300"],["tuiTr","",4,"ngFor","ngForOf"],["tuiTr",""],["class","py-3 font-semibold","tuiTd","",4,"tuiCell"],["tuiTd","",4,"tuiCell"],["tuiTd","",1,"py-3","font-semibold"],["tuiTd",""],[1,"flex","justify-start"],[1,"px-2","py-1","mx-2","text-white","bg-blue-400","rounded-md","cursor-pointer","hover:text-white",3,"click"],["aria-hidden","true",1,"fa","fa-pencil-square-o"],[1,"px-2","py-1","text-white","bg-red-500","rounded-md",3,"click"],["aria-hidden","true",1,"fa","fa-trash"],["size","xl",1,"mt-14",3,"overlay","inheritColor"],[1,"text-base","font-medium","text-center","my-2","text-[#6C86E2]"],[1,"text-lg","font-semibold","text-center"],[1,"flex","flex-col","justify-center","my-5"],["for","Textarea1",1,"block"],[1,"form-control",3,"formControl"],[1,"flex","justify-center","gap-x-3"],["tuiButton","","type","button","size","m",3,"disabled","click"],["tuiButton","","type","button","size","m","appearance","accent",3,"click"],[1,"pb-2","text-xl","font-semibold","text-center","border-b","border-gray-400"],[1,"mt-4","text-base","font-medium","text-center"],[1,"flex","justify-center","mt-4"],["tuiButton","","appearance","secondary-destructive","type","button","size","m",1,"mx-3",3,"click"],["tuiButton","","type","button","size","m",3,"click"]],template:function(i,e){if(1&i){const o=t.EpF();t._UZ(0,"app-header"),t.TgZ(1,"div",0)(2,"section",1)(3,"div",2)(4,"div",3)(5,"a",4),t.NdJ("click",function(){t.CHM(o);const s=t.MAs(13);return t.KtG(e.showDialog(s,null))}),t._uU(6,"+ Add company"),t.qZA()()(),t.YNc(7,Ln,12,11,"ng-container",5),t.ALo(8,"async"),t.YNc(9,Qn,3,2,"ng-template",null,6,t.W1O),t.qZA()(),t._UZ(11,"app-footer"),t.YNc(12,En,11,4,"ng-template",null,7,t.W1O),t.YNc(14,Sn,9,0,"ng-template",null,8,t.W1O)}if(2&i){const o=t.MAs(10);t.xp6(7),t.Q6J("ngIf",t.lcZ(8,2,e.companies))("ngIfElse",o)}},dependencies:[l.sg,l.O5,x.G,h.v0,C.c,g,et,lt,B,W,tt,X,S,nt.Ls,u.Fj,u.JJ,u.oH,$.kM,ut,l.Ov,H]});var Bn=r(22603),Zt=r(32041);class G{constructor(i,e,o,a){this.auth=i,this.dashboard=e,this.notif=o,this.cf=a,this.formData=new R.X({}),this.userForm=F.dI,this.passwordForm=F.LD,this.destroy$=new P.x,this.passValue=new R.X(null),this.currentUser=this.auth.currentUserValue,this.formData.next({fullname:this.currentUser?.fullName,email:this.currentUser?.email,roles:this.currentUser?.roles}),this.formSubmission={data:{fullname:this.currentUser?.fullName,email:this.currentUser?.email,roles:this.currentUser?.roles}}}getFormValues(i){if(i?.data)return i}getPasswordFieldValues(i){i?.data&&this.passValue.next(i?.data)}updatePassword(){if(this.passValue?.value?.password?.length>0&&this.passValue?.value?.password1?.length){if(this.passValue?.value?.password!==this.passValue?.value?.password1)return this.notif.displayNotification("Passwords do not match","Update password","warning");console.log(this.passValue?.value)}else this.notif.displayNotification("Please fill in all fields","Update password","warning")}editUser(){if(1==this.checkIfObjectValuesHaveChanged(this.formData?.value,this.formSubmission?.data))return this.notif.displayNotification("You have not changed any information","Edit User Info","warning");this.dashboard.updateUser(this.currentUser?.id,{fullName:this.formSubmission?.data?.fullname,email:this.formSubmission?.data?.email,roles:this.formSubmission?.data?.roles}).pipe((0,m.R)(this.destroy$)).subscribe(e=>{e&&(this.auth.updateUser(e),this.formData.next({fullname:e?.fullName,email:e?.email,roles:e?.roles}))})}checkIfObjectValuesHaveChanged(i,e){const o=Object?.keys(i).sort(),a=Object?.keys(e).sort();return o.length===a.length&&!!o.every((c,ot)=>i[c]===e[a[ot]])}ngOnDestroy(){this.destroy$.complete(),this.destroy$.unsubscribe()}}G.\u0275fac=function(i){return new(i||G)(t.Y36(I.e),t.Y36(b.s),t.Y36(Bn.T),t.Y36(t.sBO))},G.\u0275cmp=t.Xpm({type:G,selectors:[["ng-component"]],decls:23,vars:9,consts:[[1,"bg_img_main"],[1,"mt-52","pb-52","mx-auto","w-11/12"],[1,"px-8","py-5","bg-white","rounded-md","w-full","grid","grid-cols-12","sahdow-lg","drop-shadow-lg"],[1,"col-span-4","flex","flex-col","items-center","gap-2"],["new","","size","xxl",3,"text"],[1,"font-semibold"],[1,"col-span-8"],[1,"pb-3","text-base","font-semibold"],[3,"submission","form","change"],["tuiButton","","type","button","size","m",3,"disabled","click"],[1,"py-3","mt-9","text-base","font-semibold"],[3,"form","change"],["tuiButton","","type","button","size","m",3,"click"]],template:function(i,e){if(1&i&&(t._UZ(0,"app-header"),t.TgZ(1,"div",0)(2,"section",1)(3,"div",2)(4,"div",3),t._UZ(5,"tui-avatar",4),t.TgZ(6,"p",5),t._uU(7),t.qZA(),t.TgZ(8,"p"),t._uU(9),t.qZA()(),t.TgZ(10,"div",6)(11,"p",7),t._uU(12,"Profile data"),t.qZA(),t.TgZ(13,"formio",8),t.NdJ("change",function(a){return e.getFormValues(a)}),t.qZA(),t.TgZ(14,"button",9),t.NdJ("click",function(){return e.editUser()}),t.ALo(15,"async"),t._uU(16," Edit "),t.qZA(),t.TgZ(17,"p",10),t._uU(18,"Reset password"),t.qZA(),t.TgZ(19,"formio",11),t.NdJ("change",function(a){return e.getPasswordFieldValues(a)}),t.qZA(),t.TgZ(20,"button",12),t.NdJ("click",function(){return e.updatePassword()}),t._uU(21," Update password "),t.qZA()()()()(),t._UZ(22,"app-footer")),2&i){let o;t.xp6(5),t.Q6J("text",null==e.currentUser?null:e.currentUser.fullName),t.xp6(2),t.Oqu(null==e.currentUser?null:e.currentUser.fullName),t.xp6(2),t.Oqu(null==e.currentUser?null:e.currentUser.email),t.xp6(4),t.Q6J("submission",e.formSubmission)("form",e.userForm),t.xp6(1),t.Q6J("disabled",0==(null==(o=t.lcZ(15,7,e.formData))?null:o.isValid)),t.xp6(5),t.Q6J("form",e.passwordForm)}},dependencies:[x.G,h.v0,C.c,it.k4,Zt.JP,l.Ov],changeDetection:0});const Hn=[{path:"",component:O,data:{breadcrumb:"Dashboard"},children:[{path:"home",component:k,canActivate:[w],data:{breadcrumb:"Home"}},{path:"categories",component:z,data:{breadcrumb:"Categories"}},{path:"users",component:Y,data:{breadcrumb:"Users"}},{path:"companies",component:V,data:{breadcrumb:"Companies"}},{path:"profile",component:G,data:{breadcrumb:"Profile"}},{path:"",redirectTo:"home",pathMatch:"full"}]}];class Z{}Z.\u0275fac=function(i){return new(i||Z)},Z.\u0275mod=t.oAB({type:Z}),Z.\u0275inj=t.cJS({imports:[f.Bz.forChild(Hn),f.Bz]});var zn=r(44886),Yn=r(13675),Vn=r(82176),Gn=r(60946),Rn=r(4053),$n=r(56772),qn=r(37378),jn=r(75407);class M{}M.\u0275fac=function(i){return new(i||M)},M.\u0275mod=t.oAB({type:M}),M.\u0275inj=t.cJS({imports:[l.ez,Z,x.G,h.fN,C.c,Ct,Vn.i,nt.WD,Gn.$$,u.UX,u.u5,$.dS,y,jn.e,it.XI,Ct,Rn.cB,$n.zX,E.cn,Ve,qn.f,Zt.Jm,zn.go,Yn.Q]})}}]);