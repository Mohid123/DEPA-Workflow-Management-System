"use strict";(self.webpackChunkDEPA_FRONTEND=self.webpackChunkDEPA_FRONTEND||[]).push([[964],{74964:(vi,ft,r)=>{r.r(ft),r.d(ft,{DashboardModule:()=>J});var u=r(36895),c=r(90433),b=r(19132),t=r(94650);class E{constructor(){}}E.\u0275fac=function(i){return new(i||E)},E.\u0275cmp=t.Xpm({type:E,selectors:[["app-dashboard"]],decls:1,vars:0,template:function(i,e){1&i&&t._UZ(0,"router-outlet")},dependencies:[b.lC]});var y=r(1163),C=r(46954),w=r(56546),x=r(39367),A=r(5754),I=r(20696),bt=r(15274);function qt(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"a",12),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.editModuleEvent(null==s.appData?null:s.appData._id))}),t._UZ(1,"i",13),t.qZA()}}function Bt(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"button",14),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.deleteModuleEvent(null==s.appData?null:s.appData._id))}),t._UZ(1,"i",15),t.qZA()}}const zt=function(n){return["/submodule/submodules-list",n]},Ht=function(n){return{moduleID:n}};class D{constructor(i,e){this.transport=i,this.auth=e,this.deleteModule=new t.vpe,this.editModule=new t.vpe,this.currentUser=this.auth.currentUserValue}storeModuleID(i){this.transport.moduleID.next(i)}deleteModuleEvent(i){this.deleteModule.emit(i)}editModuleEvent(i){this.editModule.emit(i),this.transport.moduleID.next(i)}}function Yt(n,i){1&n&&(t.TgZ(0,"div",5)(1,"div",6)(2,"div",7),t.O4$(),t.TgZ(3,"svg",8),t._UZ(4,"path",9),t.qZA()(),t.kcU(),t.TgZ(5,"div",10),t._UZ(6,"div",11)(7,"div",12)(8,"div",13)(9,"div",14)(10,"div",15)(11,"div",16),t.qZA(),t.TgZ(12,"span",17),t._uU(13,"Loading..."),t.qZA()()())}function Gt(n,i){1&n&&(t.TgZ(0,"div",18)(1,"div",19),t.O4$(),t.TgZ(2,"svg",8),t._UZ(3,"path",9),t.qZA()(),t.kcU(),t.TgZ(4,"div",20),t._UZ(5,"div",11)(6,"div",12)(7,"div",13)(8,"div",14)(9,"div",15)(10,"div",16),t.qZA()())}function Rt(n,i){1&n&&(t.TgZ(0,"div",21)(1,"div",22),t.O4$(),t.TgZ(2,"svg",23),t._UZ(3,"path",9),t.qZA()(),t.kcU(),t.TgZ(4,"div",20),t._UZ(5,"div",11)(6,"div",12)(7,"div",13)(8,"div",14)(9,"div",15)(10,"div",16),t.qZA()())}function Vt(n,i){if(1&n&&(t.ynx(0),t.YNc(1,Yt,14,0,"div",2),t.YNc(2,Gt,11,0,"div",3),t.YNc(3,Rt,11,0,"div",4),t.BQk()),2&n){const e=i.index;t.xp6(1),t.Q6J("ngIf",0==e),t.xp6(1),t.Q6J("ngIf",1==e),t.xp6(1),t.Q6J("ngIf",e>1)}}D.\u0275fac=function(i){return new(i||D)(t.Y36(I.R),t.Y36(bt.e))},D.\u0275cmp=t.Xpm({type:D,selectors:[["grid-top-app"]],inputs:{appData:"appData"},outputs:{deleteModule:"deleteModule",editModule:"editModule"},standalone:!0,features:[t.jDz],decls:14,vars:11,consts:[[1,"px-4","py-2","bg-white","rounded-md","shadow-lg","h-52","drop-shadow-lg"],[1,"flex","items-center","py-2","space-x-8","h-48"],[1,"flex","items-center","justify-center","border","border-gray-200","rounded-lg","w-[18rem]","h-full"],["alt","top_app_icon","loading","eager",1,"object-cover","w-full","h-full","rounded-lg",3,"src"],[1,"w-full","h-full"],[1,"mb-2","text-xl","font-semibold"],[1,"leading-6","line-clamp-4"],[1,"absolute","bottom-5"],[1,"px-2","py-1","text-white","bg-green-500","rounded-md","hover:text-white",3,"routerLink","queryParams","click"],["aria-hidden","true",1,"fa","fa-eye"],["class","px-2 py-1 mx-2 text-white bg-blue-400 rounded-md hover:text-white cursor-pointer",3,"click",4,"ngIf"],["class","px-2 py-1 text-white bg-red-500 rounded-md",3,"click",4,"ngIf"],[1,"px-2","py-1","mx-2","text-white","bg-blue-400","rounded-md","hover:text-white","cursor-pointer",3,"click"],["aria-hidden","true",1,"fa","fa-pencil-square-o"],[1,"px-2","py-1","text-white","bg-red-500","rounded-md",3,"click"],["aria-hidden","true",1,"fa","fa-trash"]],template:function(i,e){1&i&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2),t._UZ(3,"img",3),t.qZA(),t.TgZ(4,"div",4)(5,"h3",5),t._uU(6),t.qZA(),t.TgZ(7,"p",6),t._uU(8),t.qZA(),t.TgZ(9,"div",7)(10,"a",8),t.NdJ("click",function(){return e.storeModuleID(null==e.appData?null:e.appData._id)}),t._UZ(11,"i",9),t.qZA(),t.YNc(12,qt,2,0,"a",10),t.YNc(13,Bt,2,0,"button",11),t.qZA()()()()),2&i&&(t.xp6(3),t.Q6J("src",null==e.appData?null:e.appData.image,t.LSH),t.xp6(3),t.Oqu(null==e.appData?null:e.appData.title),t.xp6(2),t.Oqu(null==e.appData?null:e.appData.description),t.xp6(2),t.Q6J("routerLink",t.VKq(7,zt,null==e.appData?null:e.appData.code))("queryParams",t.VKq(9,Ht,null==e.appData?null:e.appData._id)),t.xp6(2),t.Q6J("ngIf",(null==e.currentUser?null:e.currentUser.id)==(null==e.appData?null:e.appData.createdBy)||"admin"==(null==e.currentUser?null:e.currentUser.role)),t.xp6(1),t.Q6J("ngIf",(null==e.currentUser?null:e.currentUser.id)==(null==e.appData?null:e.appData.createdBy)||"admin"==(null==e.currentUser?null:e.currentUser.role)))},dependencies:[u.ez,u.O5,b.Bz,b.rH],changeDetection:0});class S{constructor(){this.Arr=Array,this.num=4}}function $t(n,i){1&n&&t._UZ(0,"app-grid-view-loader")}function jt(n,i){1&n&&(t.ynx(0),t.TgZ(1,"p",7),t._uU(2,"There are currently no modules. Add your first Module "),t.TgZ(3,"a",8),t._uU(4,"here"),t.qZA()(),t.BQk())}function Kt(n,i){1&n&&(t.ynx(0),t.TgZ(1,"p",7),t._uU(2,"No modules exist against this category. You can add a new module "),t.TgZ(3,"a",8),t._uU(4,"here"),t.qZA()(),t.BQk())}function Xt(n,i){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"grid-top-app",11),t.NdJ("deleteModule",function(s){t.CHM(e);const a=t.oxw(4),l=t.MAs(8);return t.KtG(a.showDialog(s,l))})("editModule",function(s){t.CHM(e);const a=t.oxw(4);return t.KtG(a.editModule(s))}),t.qZA(),t.BQk()}if(2&n){const e=i.$implicit;t.xp6(1),t.Q6J("appData",e)}}function Wt(n,i){if(1&n&&t.YNc(0,Xt,2,1,"ng-container",6),2&n){const e=t.oxw().$implicit;t.Q6J("ngForOf",null==e?null:e.modules)}}function te(n,i){if(1&n&&(t.ynx(0),t.TgZ(1,"p",9),t._uU(2),t.qZA(),t.YNc(3,Kt,5,0,"ng-container",1),t.YNc(4,Wt,1,1,"ng-template",null,10,t.W1O),t.BQk()),2&n){const e=i.$implicit,o=i.first,s=t.MAs(5);t.xp6(1),t.Q6J("ngClass",o?"mt-0":"mt-12"),t.xp6(1),t.Oqu(e.name),t.xp6(1),t.Q6J("ngIf",0==e.modules.length)("ngIfElse",s)}}function ee(n,i){if(1&n&&(t.TgZ(0,"section",4),t.YNc(1,jt,5,0,"ng-container",5),t.ALo(2,"async"),t.YNc(3,te,6,4,"ng-container",6),t.ALo(4,"async"),t.qZA()),2&n){const e=t.oxw();let o;t.xp6(1),t.Q6J("ngIf",0==(null==(o=t.lcZ(2,2,e.dashboardApps))?null:o.length)),t.xp6(2),t.Q6J("ngForOf",t.lcZ(4,4,e.dashboardApps))}}function ne(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"p",12),t._uU(1,"Delete Module"),t.qZA(),t.TgZ(2,"p",13),t._uU(3,"Are you sure you want to delete this module?"),t.qZA(),t.TgZ(4,"div",14)(5,"button",15),t.NdJ("click",function(){const a=t.CHM(e).$implicit;return t.oxw().deleteModule(),t.KtG(a.complete())}),t._uU(6," Confirm "),t.qZA(),t.TgZ(7,"button",16),t.NdJ("click",function(){const a=t.CHM(e).$implicit;return t.KtG(a.complete())}),t._uU(8," Cancel "),t.qZA()()}}S.\u0275fac=function(i){return new(i||S)},S.\u0275cmp=t.Xpm({type:S,selectors:[["app-grid-view-loader"]],decls:2,vars:1,consts:[[1,"grid","grid-cols-12","gap-4","w-11/12","mx-auto","mt-52","pb-60"],[4,"ngFor","ngForOf"],["class","px-4 py-2 bg-gray-100 rounded-md col-span-8 h-72",4,"ngIf"],["class","px-5 py-4 bg-gray-100 rounded-md col-span-4 row-span-3",4,"ngIf"],["class","px-2 py-2 bg-gray-100 rounded-md col-span-4 row-span-2 h-88",4,"ngIf"],[1,"px-4","py-2","bg-gray-100","rounded-md","col-span-8","h-72"],["role","status",1,"animate-pulse","md:flex","md:items-center","space-x-8"],[1,"flex","items-center","justify-center","w-full","bg-gray-200","rounded","h-68"],["xmlns","http://www.w3.org/2000/svg","aria-hidden","true","fill","currentColor","viewBox","0 0 640 512",1,"w-12","h-12","text-gray-400"],["d","M480 80C480 35.82 515.8 0 560 0C604.2 0 640 35.82 640 80C640 124.2 604.2 160 560 160C515.8 160 480 124.2 480 80zM0 456.1C0 445.6 2.964 435.3 8.551 426.4L225.3 81.01C231.9 70.42 243.5 64 256 64C268.5 64 280.1 70.42 286.8 81.01L412.7 281.7L460.9 202.7C464.1 196.1 472.2 192 480 192C487.8 192 495 196.1 499.1 202.7L631.1 419.1C636.9 428.6 640 439.7 640 450.9C640 484.6 612.6 512 578.9 512H55.91C25.03 512 .0006 486.1 .0006 456.1L0 456.1z"],[1,"w-full"],[1,"h-2.5","bg-gray-200","rounded-full","w-48","mb-4"],[1,"h-2","bg-gray-200","rounded-full","max-w-[480px]","mb-2.5"],[1,"h-2","bg-gray-200","rounded-full","mb-2.5"],[1,"h-2","bg-gray-200","rounded-full","max-w-[440px]","mb-2.5"],[1,"h-2","bg-gray-200","rounded-full","max-w-[460px]","mb-2.5"],[1,"h-2","bg-gray-200","rounded-full","max-w-[360px]"],[1,"sr-only"],[1,"px-5","py-4","bg-gray-100","rounded-md","col-span-4","row-span-3"],[1,"flex","items-center","justify-center","w-full","bg-gray-200","rounded","h-72"],[1,"w-full","mt-8"],[1,"px-2","py-2","bg-gray-100","rounded-md","col-span-4","row-span-2","h-88"],[1,"flex","justify-center","items-center","w-auto","bg-gray-200","rounded","h-40","mb-5","animate-pulse"],["xmlns","http://www.w3.org/2000/svg","aria-hidden","true","fill","currentColor","viewBox","0 0 640 512",1,"w-8","h-8","text-gray-400"]],template:function(i,e){1&i&&(t.TgZ(0,"section",0),t.YNc(1,Vt,4,3,"ng-container",1),t.qZA()),2&i&&(t.xp6(1),t.Q6J("ngForOf",e.Arr(e.num).fill(1)))},dependencies:[u.sg,u.O5],changeDetection:0});class L{constructor(i,e,o){this.dashboard=i,this.dialogs=e,this.router=o,this.subscription=[],this.dashboardApps=this.dashboard.getDashboardApps()}showDialog(i,e){i&&(this.moduleId=i,this.dialogs.open(e).subscribe())}deleteModule(){this.subscription.push(this.dashboard.deleteModule(this.moduleId).subscribe(i=>{this.dashboardApps=this.dashboard.getDashboardApps()}))}editModule(i){i&&this.subscription.push(this.dashboard.getModuleByIDForEditModule(i).subscribe(e=>{e&&this.router.navigate(["/dashboard/create-edit-module"],{queryParams:{id:i}})}))}ngOnDestroy(){this.subscription.forEach(i=>i.unsubscribe())}}L.\u0275fac=function(i){return new(i||L)(t.Y36(C.s),t.Y36(y.RO),t.Y36(b.F0))},L.\u0275cmp=t.Xpm({type:L,selectors:[["ng-component"]],decls:9,vars:4,consts:[[1,"bg_img_main"],[4,"ngIf","ngIfElse"],["dashboardapps",""],["template",""],[1,"grid","w-11/12","grid-cols-12","gap-4","mx-auto","mt-52","pb-20"],[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"col-span-12","my-8","text-base","font-semibold","text-center"],["routerLink","/dashboard/create-edit-module",1,"text-[#F15B41]","hover:text-[#F15B41]","hover:underline"],[1,"col-span-12","mb-3","text-lg","font-semibold","py-3","px-2","bg-[#eae4d8]","rounded-md",3,"ngClass"],["showApps",""],[1,"col-span-6",3,"appData","deleteModule","editModule"],[1,"pb-2","text-xl","font-semibold","text-center","border-b","border-gray-400"],[1,"mt-4","text-base","font-medium","text-center"],[1,"flex","justify-center","mt-4"],["tuiButton","","appearance","secondary-destructive","type","button","size","m",1,"mx-3",3,"click"],["tuiButton","","type","button","size","m",3,"click"]],template:function(i,e){if(1&i&&(t._UZ(0,"app-header"),t.TgZ(1,"div",0),t.YNc(2,$t,1,0,"app-grid-view-loader",1),t.ALo(3,"async"),t.YNc(4,ee,5,6,"ng-template",null,2,t.W1O),t.qZA(),t._UZ(6,"app-footer"),t.YNc(7,ne,9,0,"ng-template",null,3,t.W1O)),2&i){const o=t.MAs(5);t.xp6(2),t.Q6J("ngIf",!t.lcZ(3,2,e.dashboardApps))("ngIfElse",o)}},dependencies:[u.mk,u.sg,u.O5,b.rH,w.G,x.v0,A.c,D,S,u.Ov]});var xt=r(15861),v=r(77579),ie=r(39646),Z=r(61135),oe=r(95698),_=r(82722),Q=r(63900),p=r(4266),se=r(68341),ct=r(22603),ae=r(18505),re=r(61005),le=r(80529);class k extends re.s{constructor(i,e){super(i),this.http=i,this.notif=e}uploadMedia(i){const e=new FormData;return e.append("image",i),this.postMedia("/modules/upload-image",e).pipe((0,ae.b)(o=>{if(o.hasErrors())return this.notif.displayNotification(o.errors[0]?.error?.message,"Image Upload","error")}))}}k.\u0275fac=function(i){return new(i||k)(t.LFG(le.eN),t.LFG(ct.T))},k.\u0275prov=t.Yz7({token:k,factory:k.\u0275fac,providedIn:"root"});var q=r(87819),tt=r(53861),U=r(71115),Tt=r(13675),et=r(75809),Ct=r(4053),vt=r(56772),yt=r(37378),wt=r(77915);const ue=["btn"],ce=function(n,i,e){return{"mr-10":n,"ml-10":i,"mx-10":e}};function pe(n,i){if(1&n&&(t.ynx(0),t.TgZ(1,"button",11),t._uU(2),t.qZA(),t.BQk()),2&n){const e=i.$implicit,o=i.last,s=i.first;t.xp6(1),t.Q6J("ngClass",t.kEZ(2,ce,s,o,!o&&!s)),t.xp6(1),t.hij(" ",e.text," ")}}function de(n,i){if(1&n&&(t.ynx(0),t.TgZ(1,"option",30),t._uU(2),t.qZA(),t.BQk()),2&n){const e=i.$implicit;t.xp6(1),t.Q6J("value",null==e?null:e.id),t.xp6(1),t.Oqu(null==e?null:e.name)}}function _e(n,i){if(1&n&&(t.ynx(0),t.YNc(1,de,3,2,"ng-container",6),t.BQk()),2&n){const e=i.ngIf;t.xp6(1),t.Q6J("ngForOf",null==e?null:e.results)}}function me(n,i){1&n&&(t.TgZ(0,"label",40),t._uU(1,"Add new categories"),t.qZA())}function ge(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"button",41),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(3);return t.KtG(s.submitNewCategory())}),t._uU(1," Submit "),t.qZA()}}function he(n,i){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",31)(2,"div",32)(3,"div",33),t.YNc(4,me,2,0,"label",34),t._UZ(5,"input",35),t.qZA(),t.TgZ(6,"div",36)(7,"button",37),t.NdJ("click",function(){const a=t.CHM(e).index,l=t.oxw(2);return t.KtG(l.removeCategory(a))}),t.qZA()()(),t.TgZ(8,"div",38),t.YNc(9,ge,2,0,"button",39),t.qZA()(),t.BQk()}if(2&n){const e=i.index,o=i.first,s=i.last;t.xp6(1),t.Q6J("formGroupName",e),t.xp6(3),t.Q6J("ngIf",0==e),t.xp6(2),t.Q6J("ngClass",o?"mt-7":"mt-0"),t.xp6(3),t.Q6J("ngIf",s)}}function fe(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"button",42),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(2);return t.KtG(s.addCategory())}),t.qZA()}}const be=function(n){return{validation:"required",message:"Module Title is required",control:n}},xe=function(n){return{validation:"required",message:"Module Description is required",control:n}},Te=function(n){return{validation:"required",message:"Module Category is required",control:n}};function Ce(n,i){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"form",12)(2,"div",13)(3,"label",14),t._uU(4,"Module Title "),t.TgZ(5,"span",15),t._uU(6,"*"),t.qZA()(),t._UZ(7,"input",16),t.GkF(8,17),t.qZA(),t.TgZ(9,"div",18)(10,"label",14),t._uU(11,"Module URL "),t.TgZ(12,"span",15),t._uU(13,"*"),t.qZA()(),t._UZ(14,"input",19),t.qZA(),t.TgZ(15,"div",18)(16,"label",14),t._uU(17,"Module Description "),t.TgZ(18,"span",15),t._uU(19,"*"),t.qZA()(),t._UZ(20,"textarea",20),t.GkF(21,17),t.qZA(),t.TgZ(22,"div",18)(23,"label",14),t._uU(24,"Module Code "),t.TgZ(25,"span",15),t._uU(26,"*"),t.qZA()(),t._UZ(27,"input",21),t.qZA(),t.TgZ(28,"div",18)(29,"label",14),t._uU(30,"Module Category "),t.TgZ(31,"span",15),t._uU(32,"*"),t.qZA()(),t.TgZ(33,"select",22),t.YNc(34,_e,2,1,"ng-container",7),t.ALo(35,"async"),t.qZA(),t.GkF(36,17),t.qZA(),t.TgZ(37,"div",23)(38,"p",24),t._uU(39," You can add a new category below "),t.qZA()(),t.TgZ(40,"div",25),t.ynx(41,26),t.YNc(42,he,10,4,"ng-container",6),t.BQk(),t.YNc(43,fe,1,0,"button",27),t.qZA(),t.TgZ(44,"div",28)(45,"button",29),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.nextStep())}),t._uU(46," Proceed to Default Workflow "),t.qZA()()(),t.BQk()}if(2&n){const e=t.oxw(),o=t.MAs(16);t.xp6(1),t.Q6J("formGroup",e.moduleDetailsForm),t.xp6(6),t.Q6J("ngClass",null!=e.f.moduleTitle&&e.f.moduleTitle.invalid&&null!=e.f.moduleTitle&&e.f.moduleTitle.dirty?"is-invalid":""),t.xp6(1),t.Q6J("ngTemplateOutlet",o)("ngTemplateOutletContext",t.VKq(14,be,e.f.moduleTitle)),t.xp6(12),t.Q6J("ngClass",null!=e.f.moduleDescription&&e.f.moduleDescription.invalid&&null!=e.f.moduleDescription&&e.f.moduleDescription.dirty?"is-invalid":""),t.xp6(1),t.Q6J("ngTemplateOutlet",o)("ngTemplateOutletContext",t.VKq(16,xe,e.f.moduleDescription)),t.xp6(13),t.Q6J("ngIf",t.lcZ(35,12,e.categories)),t.xp6(2),t.Q6J("ngTemplateOutlet",o)("ngTemplateOutletContext",t.VKq(18,Te,e.f.moduleCategory)),t.xp6(6),t.Q6J("ngForOf",e.category.controls),t.xp6(1),t.Q6J("ngIf",(null==e.category?null:e.category.length)<1)}}function ve(n,i){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"p",48),t._uU(2),t.qZA(),t.TgZ(3,"div",49)(4,"div",50)(5,"label",14),t._uU(6,"Approvers "),t.TgZ(7,"span",15),t._uU(8,"*"),t.qZA()(),t.TgZ(9,"custom-multi-select",51),t.NdJ("checkUsersLength",function(s){const l=t.CHM(e).index,h=t.oxw(2);return t.KtG(h.countUsers(s,l))})("approverList",function(s){const l=t.CHM(e).index,h=t.oxw(2);return t.KtG(h.getApproverList(s,l))}),t.qZA()(),t.TgZ(10,"div",50)(11,"label",52),t._uU(12," Condition "),t.TgZ(13,"span",15),t._uU(14,"*"),t.qZA()(),t.TgZ(15,"select",53),t.NdJ("change",function(){const a=t.CHM(e).index,l=t.oxw(2);return t.KtG(l.validateSelection(a))}),t.TgZ(16,"option",54),t._uU(17,"AND"),t.qZA(),t.TgZ(18,"option",55),t._uU(19,"OR"),t.qZA(),t.TgZ(20,"option",56),t._uU(21,"NONE"),t.qZA()()(),t.TgZ(22,"div",57),t._UZ(23,"tui-tooltip",58),t.TgZ(24,"tui-badged-content",59)(25,"button",60),t.NdJ("click",function(){const a=t.CHM(e).index,l=t.oxw(2),h=t.MAs(18);return t.KtG(l.openEmailNotifyModal(h,l.workflows,a))}),t.qZA()()(),t.TgZ(26,"div",61)(27,"button",37),t.NdJ("click",function(){const a=t.CHM(e).index,l=t.oxw(2);return t.KtG(l.removeWorkflowStep(a))}),t.qZA()()(),t.BQk()}if(2&n){const e=i.index,o=t.oxw(2),s=t.MAs(20);let a;t.xp6(2),t.hij(" Step ",0===e?"1":e+1," "),t.xp6(1),t.Q6J("formGroupName",e),t.xp6(20),t.Q6J("content",s),t.xp6(1),t.Q6J("contentTop",null==(a=o.workflows.at(e).get("emailNotifyTo"))||null==a.value?null:a.value.length)("colorTop","green")}}function ye(n,i){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",12),t.ynx(2,43),t.YNc(3,ve,28,5,"ng-container",6),t.BQk(),t.TgZ(4,"button",44),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.addWorkflowStep())}),t.qZA(),t.TgZ(5,"div",45)(6,"button",46),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.previousStep())}),t._uU(7," Back "),t.qZA(),t.TgZ(8,"button",29,47),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.nextStep())}),t._uU(10," Proceed to Module Graphics "),t.qZA()()(),t.BQk()}if(2&n){const e=t.oxw();t.xp6(1),t.Q6J("formGroup",e.workflowForm),t.xp6(2),t.Q6J("ngForOf",e.workflows.controls)}}function we(n,i){if(1&n&&(t.TgZ(0,"div",67),t._UZ(1,"img",68),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("src",e.base64File,t.LSH)}}function Ae(n,i){1&n&&(t.TgZ(0,"div",69)(1,"div",70),t._UZ(2,"img",71),t.qZA(),t.TgZ(3,"div",72)(4,"p",73),t._uU(5," Module Icon "),t.qZA(),t.TgZ(6,"ul",74)(7,"li"),t._uU(8,"Icon should be 1:1 ratio"),t.qZA(),t.TgZ(9,"li"),t._uU(10,"Only (JPEG, PNG, WEBP) extensions are allowed"),t.qZA(),t.TgZ(11,"li"),t._uU(12,"Up to 2MB file size is allowed"),t.qZA()()()())}function Ze(n,i){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"label",62),t.NdJ("change",function(s){t.CHM(e);const a=t.oxw();return t.KtG(a.onFileSelect(s))}),t.TgZ(2,"tui-loader",63),t.YNc(3,we,2,1,"div",64),t.YNc(4,Ae,13,0,"div",65),t.qZA(),t._UZ(5,"input",66),t.qZA(),t.TgZ(6,"div",45)(7,"button",46),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.previousStep())}),t._uU(8," Back "),t.qZA(),t.TgZ(9,"button",29),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.nextStep())}),t._uU(10),t.ALo(11,"async"),t.qZA()(),t.BQk()}if(2&n){const e=t.oxw();t.xp6(2),t.Q6J("inheritColor",!0)("size","l")("showLoader",!1)("overlay",!0),t.xp6(1),t.Q6J("ngIf",e.file),t.xp6(1),t.Q6J("ngIf",!e.file),t.xp6(6),t.hij(" ",t.lcZ(11,7,e.isCreatingModule)?"Please wait...":"Publish Module"," ")}}function Me(n,i){1&n&&(t.ynx(0),t.TgZ(1,"div",75),t._UZ(2,"img",76),t.TgZ(3,"p",77),t._uU(4,"Congratulations"),t.qZA(),t.TgZ(5,"p",78),t._uU(6,"Your module has been created successfully"),t.qZA()(),t.BQk())}function Ie(n,i){if(1&n&&(t.ynx(0),t.TgZ(1,"div",79)(2,"span",80),t._uU(3),t.qZA()(),t.BQk()),2&n){const e=t.oxw().message;t.xp6(3),t.hij(" ",e," ")}}function De(n,i){if(1&n&&t.YNc(0,Ie,4,1,"ng-container",7),2&n){const e=i.control;t.Q6J("ngIf",e.hasError(i.validation)&&(e.dirty||e.touched))}}function ke(n,i){if(1&n&&t._UZ(0,"tui-data-list-wrapper",89),2&n){const e=t.oxw(2);t.Q6J("items",e.userListForEmail)}}function Ue(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"p",81),t._uU(1,"Email Notification Users"),t.qZA(),t.TgZ(2,"p",82),t._uU(3," Please specify the users you want to send the notification email to "),t.qZA(),t.TgZ(4,"div",83)(5,"tui-input-tag",84),t.NdJ("searchChange",function(s){t.CHM(e);const a=t.oxw();return t.KtG(a.onSearchChange(s))}),t._uU(6," Type to search and press Enter to select... "),t.YNc(7,ke,1,1,"tui-data-list-wrapper",85),t.qZA()(),t.TgZ(8,"div",86)(9,"button",87),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.validateEmails())}),t._uU(10," Confirm & Close "),t.qZA(),t.TgZ(11,"button",88),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.cancelEmailNotify())}),t._uU(12," Remove Users & Close "),t.qZA()()}if(2&n){const e=t.oxw();t.xp6(5),t.Q6J("formControl",null==e.currentFieldArray||null==e.currentFieldArray.controls[e.activeEmailIndex]?null:e.currentFieldArray.controls[e.activeEmailIndex].controls.emailNotifyTo)("tuiTextfieldLabelOutside",!0)}}function Ne(n,i){1&n&&(t.TgZ(0,"strong",78),t._uU(1,"How conditions work?"),t.qZA(),t._UZ(2,"hr"),t.TgZ(3,"ul",90)(4,"li")(5,"strong"),t._uU(6,"AND"),t.qZA(),t._uU(7," implies that every user of the step must provide approval"),t.qZA(),t.TgZ(8,"li",23)(9,"strong"),t._uU(10,"OR"),t.qZA(),t._uU(11," implies that any one of the users may provide approval"),t.qZA(),t.TgZ(12,"li")(13,"strong"),t._uU(14,"NONE"),t.qZA(),t._uU(15," implies that there is only one user per step and hence no conditon is necessary"),t.qZA()())}class B{constructor(i,e,o,s,a,l,h){this.fb=i,this.notif=e,this.dashboard=o,this.router=s,this.activatedRoute=a,this.media=l,this.dialogs=h,this.destroy$=new v.x,this.appNameLength=(0,ie.of)(0),this.activeIndex=(0,p.rV)(p.MX.activeIndex)||0,this.moduleData=new Z.X({}),this.refreshForm=new t.vpe,this.arrow=se.SX,this.tabs=[{text:"Module Details"},{text:"Default Workflow"},{text:"Module Graphics"},{text:"Published"}],this.categoryOptions=["Human Resources","Networking","Games","E-Commerce","Finance","Management"],this.conditions=["OR","AND","ANY"],this.isCreatingModule=new v.x,this.limit=10,this.page=0,this.categoryDataForFormIOSelect=new Z.X(null),this.isEditMode=new Z.X(!1),this.storeModuleID=new Z.X(""),this.userListForEmail=[],this.search$=new v.x,this.saveDialogSubscription=[],this.dashboard.moduleEditData.pipe((0,oe.q)(1),(0,_.R)(this.destroy$)).subscribe(d=>{if(d){const T={value:d.categoryId?.id,label:d.categoryId?.name},bi=d?.workFlowId?.stepIds?.map(M=>({id:M?.id,approverIds:M?.approverIds?.map(Qt=>({name:Qt?.fullName,id:Qt?.id,control:new c.NI(!0)})),emailNotifyTo:M?.emailNotifyToId?.notifyUsers||[],condition:M?.condition,emailNotifyToId:M?.emailNotifyToId?.id})),xi=d?.workFlowId?.id;this.activatedRoute.queryParams.pipe((0,_.R)(this.destroy$)).subscribe(M=>{this.storeModuleID.next(M.id)}),this.base64File=d?.image,this.file=d?.image;const Ti=`${window.location.origin}${d?.url}`,Ci=Object.assign(d,{categoryId:T,workFlowId:xi,steps:bi,url:Ti});(0,p.LS)(p.MX.publishAppValue,Ci),this.isEditMode.next(!0)}}),this.localStorageApp=(0,p.rV)(p.MX.publishAppValue),this.localStorageApp?(this.initWorkflowForm(this.localStorageApp),this.initModuleDetailsForm(this.localStorageApp),this.moduleData.next(this.localStorageApp),this.file=this.localStorageApp?.image,this.base64File=this.localStorageApp?.image):(this.initWorkflowForm(),this.initModuleDetailsForm()),this.moduleDetailsForm?.get("moduleTitle")?.valueChanges.subscribe(d=>{this.moduleDetailsForm?.get("moduleURL")?.setValue(`${window.location.origin}/submodule/submodules-list/`+d.replace(/\s/g,"-").toLowerCase()),this.moduleDetailsForm?.get("moduleCode")?.setValue(d.replace(/\s/g,"-").toLowerCase())}),this.categories=this.dashboard.getAllCategories(this.limit,this.page),this.search$.pipe((0,Q.w)(d=>this.dashboard.getAllUsersForListing(this.limit,this.page,d))).subscribe(d=>{d&&(this.userListForEmail=d?.results?.map(T=>T?.email))}),this.dashboard.getAllUsersForListing(this.limit,this.page).pipe((0,_.R)(this.destroy$)).subscribe(d=>{d&&(this.userListForEmail=d?.results?.map(T=>T?.email))})}onSearchChange(i){this.search$.next(i)}validateEmails(){let i=this.workflows.at(this.activeEmailIndex)?.get("emailNotifyTo")?.value;i=i.map(e=>!!/\S+@\S+\.\S+/.test(e)),i.includes(!1)?this.notif.displayNotification("Please provide valid email addresses","Email Notify","warning"):this.saveDialogSubscription.forEach(e=>e.unsubscribe())}cancelEmailNotify(){this.workflows.at(this.activeEmailIndex)?.get("emailNotifyTo")?.setValue([]),this.saveDialogSubscription.forEach(i=>i.unsubscribe())}initModuleDetailsForm(i){this.moduleDetailsForm=this.fb.group({moduleTitle:[i?.title||null,c.kI.required],moduleURL:[{value:i?.url||null,disabled:!0}],moduleDescription:[i?.description||null,c.kI.required],moduleCode:[{value:i?.code||null,disabled:!0}],moduleCategory:[i?.categoryId?.value||null,c.kI.required],category:this.fb.array([])})}get category(){return this.f.category}addCategory(){const i=this.fb.group({title:["",c.kI.required]});this.category.push(i)}removeCategory(i){this.category.removeAt(i)}initWorkflowForm(i){this.workflowForm=this.fb.group(i?.steps?{workflows:this.fb.array(i?.steps?.map(e=>this.fb.group({condition:[e.condition,c.kI.required],approverIds:[e.approverIds,c.kI.required],emailNotifyTo:[e.emailNotifyTo||[],c.kI.required],emailNotifyToId:[e.emailNotifyToId||void 0],id:[e.id||void 0]})))}:{workflows:this.fb.array([this.fb.group({condition:["",c.kI.required],approverIds:[[],c.kI.required],emailNotifyTo:[[],c.kI.required]})])})}submitNewCategory(){const i=this.f.category?.value?.map(e=>({name:e.title}));this.dashboard.postNewCategory(i[0]).pipe((0,_.R)(this.destroy$)).subscribe(e=>{this.category.removeAt(0),this.categories=this.dashboard.getAllCategories(this.limit,this.page)})}get f(){return this.moduleDetailsForm.controls}get workflows(){return this.workflowForm.controls.workflows}addWorkflowStep(){const i=this.fb.group({condition:["",c.kI.required],approverIds:[[],c.kI.required],emailNotifyTo:[[],c.kI.required]});this.workflows.push(i)}removeWorkflowStep(i){this.workflows.removeAt(i)}getApproverList(i,e){this.workflows.at(e)?.get("approverIds")?.setValue(i)}countUsers(i,e){return i<2&&(this.workflows.at(e)?.get("condition")?.setValue("none"),this.notif.displayNotification('Default condition of "None" will be used if the number of approvers is less than 2',"Create Module","warning")),i>=2&&"none"==this.workflows.at(e)?.get("condition")?.value?(this.notif.displayNotification("Please select either AND or OR as the condition","Create Module","warning"),this.btn.nativeElement.disabled=!0):this.btn.nativeElement.disabled=!1}validateSelection(i){return this.workflows.at(i)?.get("approverIds")?.value?.length<2&&(this.workflows.at(i)?.get("condition")?.setValue("none"),this.notif.displayNotification('Default condition of "None" will be used if the number of approvers is less than 2',"Create Module","warning")),this.workflows.at(i)?.get("approverIds")?.value?.length>=2&&"none"==this.workflows.at(i)?.get("condition")?.value?(this.notif.displayNotification("Please select either AND or OR as the condition","Create Module","warning"),this.btn.nativeElement.disabled=!0):this.btn.nativeElement.disabled=!1}openEmailNotifyModal(i,e,o){this.activeEmailIndex=o,this.currentFieldArray=e,this.saveDialogSubscription.push(this.dialogs.open(i,{dismissible:!1,closeable:!1}).subscribe())}nextStep(i){if(3!==this.activeIndex)switch(this.activeIndex){case 0:if(this.f.moduleTitle?.invalid||this.f.moduleDescription?.invalid||this.f.moduleCategory?.invalid)return this.notif.displayNotification("Please fill in all fields","Create Module","warning");const e={categoryId:this.f.moduleCategory?.value,title:this.f.moduleTitle?.value,description:this.f.moduleDescription?.value,url:this.f.moduleURL?.value,code:this.f.moduleCode?.value};if(1==this.isEditMode.value){const o=this.localStorageApp?.categoryId?.value,s=this.localStorageApp?.workFlowId,a=this.localStorageApp?.steps;Object.assign(e,{workFlowId:s,categoryId:o,steps:a})}(0,p.LS)(p.MX.publishAppValue,e),this.moduleData.next(e),this.moveNext();break;case 1:if(0==this.workflows?.length)return this.notif.displayNotification("Please complete the default workflow","Create Module","warning");if(this.workflows.controls.map(o=>0==o.get("approverIds")?.value.length).includes(!0))return this.notif.displayNotification("Please complete the default workflow","Create Module","warning");if(!0===this.workflows.controls.map(o=>o.get("condition")?.value).includes(""))return this.notif.displayNotification("Please complete the default workflow","Create Module","warning");if(0==this.isEditMode.value){const o=this.workflows?.value?.map(s=>({approverIds:s?.approverIds?.map(a=>a.id?a.id:a),condition:s?.condition,emailNotifyTo:s?.emailNotifyTo}));this.moduleData.next({...this.moduleData?.value,steps:o})}else{const s=this.workflows?.value?.map(a=>({approverIds:a?.approverIds?.map(l=>l.id?l.id:l),condition:a?.condition,emailNotifyTo:a?.emailNotifyTo,id:a?.id?a?.id:void 0,emailNotifyToId:a?.emailNotifyToId?a?.emailNotifyToId:void 0}));this.moduleData.next({...this.moduleData?.value,steps:s})}(0,p.LS)(p.MX.publishAppValue,this.moduleData?.value),this.moveNext();break;case 2:if(!this.file)return this.notif.displayNotification("Please provide a valid image for your module","Create Module","warning");this.moduleData.next({...this.moduleData?.value,image:this.base64File}),(0,p.LS)(p.MX.publishAppValue,this.moduleData?.value),this.submitNewModule();break;default:this.moveNext()}}previousStep(){0!==this.activeIndex&&this.activeIndex--,(0,p.LS)(p.MX.activeIndex,this.activeIndex)}moveNext(){this.activeIndex++,(0,p.LS)(p.MX.activeIndex,this.activeIndex)}onFileSelect(i){const e=i?.target?.files[0];1==this.calculateFileSize(e)?this.calculateAspectRatio(e).then(o=>{if(0==o)this.notif.displayNotification("Image should be of 1:1 aspect ratio","File Upload","warning");else{this.file=e;const s=new FileReader;s.readAsDataURL(e),s.onload=a=>{this.base64File=s.result}}}):this.notif.displayNotification("Allowed file types are JPG/PNG/WebP. File size cannot exceed 2MB","File Upload","warning")}calculateAspectRatio(i){return new Promise((e,o)=>{const s=new FileReader;s.readAsDataURL(i),s.onload=function(){var a=(0,xt.Z)(function*(l){const h=new Image;h.src=l.target.result,h.onload=(0,xt.Z)(function*(){1!==Math.round(h.naturalWidth/h.naturalHeight)&&e(!1),e(!0)})});return function(l){return a.apply(this,arguments)}}()})}calculateFileSize(i){return("image/jpg"==i?.type||"image/jpeg"==i?.type||"image/png"==i?.type||"image/webp"==i?.type)&&i?.size<=2097152}submitNewModule(){this.isCreatingModule.next(!0);const i=this.f.moduleURL?.value.split(window.location.origin).pop();let e={...this.moduleData.value,url:i};if(0==this.isEditMode.value)this.media.uploadMedia(this.file).pipe((0,_.R)(this.destroy$)).subscribe(o=>{o.hasErrors()||(e={...e,image:o?.data?.imageUrl},this.dashboard.createModule(e).pipe((0,_.R)(this.destroy$)).subscribe(s=>{s&&(this.moveNext(),setTimeout(()=>{(0,p.cl)(p.MX.publishAppValue),(0,p.cl)(p.MX.activeIndex),this.dashboard.moduleEditData.next(null),this.router.navigate(["/dashboard/home"])},1400))}))});else if("string"==typeof this.file){const o="uploads"+e?.image.split("uploads")[1];e={...e,image:o},this.dashboard.editModule(this.storeModuleID?.value,e).pipe((0,_.R)(this.destroy$)).subscribe(s=>{s&&(this.moveNext(),setTimeout(()=>{(0,p.cl)(p.MX.publishAppValue),(0,p.cl)(p.MX.activeIndex),this.dashboard.moduleEditData.next(null),this.router.navigate(["/dashboard/home"])},1400))})}else this.media.uploadMedia(this.file).pipe((0,_.R)(this.destroy$)).subscribe(o=>{o.hasErrors()||(e={...e,image:o?.data?.imageUrl},this.dashboard.editModule(this.storeModuleID?.value,e).pipe((0,_.R)(this.destroy$)).subscribe(s=>{s&&(this.moveNext(),setTimeout(()=>{(0,p.cl)(p.MX.publishAppValue),(0,p.cl)(p.MX.activeIndex),this.dashboard.moduleEditData.next(null),this.router.navigate(["/dashboard/home"])},1400))}))})}ngOnDestroy(){this.destroy$.complete(),this.destroy$.unsubscribe()}}B.\u0275fac=function(i){return new(i||B)(t.Y36(c.qu),t.Y36(ct.T),t.Y36(C.s),t.Y36(b.F0),t.Y36(b.gz),t.Y36(k),t.Y36(y.RO))},B.\u0275cmp=t.Xpm({type:B,selectors:[["ng-component"]],viewQuery:function(i,e){if(1&i&&t.Gf(ue,5),2&i){let o;t.iGM(o=t.CRH())&&(e.btn=o.first)}},decls:21,vars:6,consts:[[1,"bg_img_main"],[1,"grid","w-10/12","grid-cols-12","gap-4","mx-auto","mt-48","pb-44"],[1,"px-12","py-5","bg-white","rounded-lg","shadow-lg","col-span-full"],[1,"text-2xl","font-bold","text-center"],[1,"flex","justify-center","my-6"],["tuiMobileTabs","",3,"activeItemIndex","activeItemIndexChange"],[4,"ngFor","ngForOf"],[4,"ngIf"],["formError",""],["template",""],["hint",""],["disabled","","tuiTab","",1,"text-base","font-semibold","text-black",3,"ngClass"],[3,"formGroup"],[1,"my-3"],[1,"block","pb-1"],[1,"text-xs","text-red-400"],["required","","formControlName","moduleTitle","type","text",1,"form-control",3,"ngClass"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"my-7"],["formControlName","moduleURL","type","text",1,"form-control"],["required","","formControlName","moduleDescription","type","text","rows","4",1,"form-control",3,"ngClass"],["formControlName","moduleCode","type","text",1,"form-control"],["formControlName","moduleCategory","type","text",1,"form-control","form-select"],[1,"my-2"],[1,"text-xs","text-gray-500"],[1,"my-5"],["formArrayName","category"],["tuiIconButton","","type","button","size","m","appearance","secondary","icon","tuiIconPlusLarge",3,"click",4,"ngIf"],[1,"flex","justify-end","mt-5"],["type","button",1,"btn","btn-primary",3,"click"],[3,"value"],[1,"w-7/12","px-8",3,"formGroupName"],[1,"flex","items-center","justify-between","w-full","gap-2","mb-3"],[1,"w-full"],["class","block pb-2 text-xs font-semibold",4,"ngIf"],["formControlName","title","type","text",1,"form-control"],[3,"ngClass"],["tuiIconButton","","type","button","size","s","appearance","secondary-destructive","icon","tuiIconTrash2Large",3,"click"],[1,"flex","justify-end"],["tuiButton","","type","button","class","mb-3","size","m",3,"click",4,"ngIf"],[1,"block","pb-2","text-xs","font-semibold"],["tuiButton","","type","button","size","m",1,"mb-3",3,"click"],["tuiIconButton","","type","button","size","m","appearance","secondary","icon","tuiIconPlusLarge",3,"click"],["formArrayName","workflows"],["tuiIconButton","","type","button","size","m","appearance","primary","icon","tuiIconPlusLarge",3,"click"],[1,"flex","justify-end","gap-5","mt-5"],["type","button",1,"px-4","py-2","text-base","font-medium","border","border-gray-400","rounded-md","bg-gray-50",3,"click"],["btn",""],[1,"text-base","font-semibold","mt-7"],[1,"grid","grid-cols-12","gap-3","my-4",3,"formGroupName"],[1,"col-span-5"],["formControlName","approverIds",3,"checkUsersLength","approverList"],["for","conditionSelect",1,"block","pb-1"],["formControlName","condition","aria-label","Default select example","id","conditionSelect",1,"h-10","form-select","form-control",3,"change"],["value","and"],["value","or"],["value","none"],[1,"col-span-1","mt-8","inline-flex"],["direction","right",1,"mr-4","mt-1","-ml-2",3,"content"],[3,"contentTop","colorTop"],["tuiIconButton","","type","button","size","s","appearance","outline","icon","tuiIconMailLarge",3,"click"],[1,"col-span-1","mt-8","-ml-3"],["for","dropzone-file",1,"flex","flex-col","items-center","justify-center","w-full","h-64","mt-10","border-2","border-gray-300","border-dashed","rounded-lg","cursor-pointer","bg-gray-50","dark:hover:bg-bray-800","dark:bg-gray-700","hover:bg-gray-100","dark:border-gray-600","dark:hover:border-gray-500","dark:hover:bg-gray-600",3,"change"],[3,"inheritColor","size","showLoader","overlay"],["class","flex justify-center",4,"ngIf"],["class","flex justify-start",4,"ngIf"],["id","dropzone-file","type","file",1,"hidden"],[1,"flex","justify-center"],["alt","app_icon","width","200","height","200",1,"rounded-md",3,"src"],[1,"flex","justify-start"],[1,"mx-8"],["src","../../../../../assets/windows.svg","width","32","height","32"],[1,"flex","flex-col"],[1,"mb-3","text-lg","font-semibold","text-black"],[1,"text-sm","text-gray-400","list-disc"],[1,"flex","flex-col","items-center","justify-center","w-full","mt-10"],["src","../../../../../assets/published.svg","alt","ok","width","118","height","118"],[1,"my-2","text-lg","font-semibold"],[1,"text-base"],[1,"w-full","mt-1","text-left","fv-plugins-message-container","text-xxs","2xl:text-xs"],["role","alert",1,"text-red-400","fv-help-block","text-xxs","2xl:text-xs","2xl:mb-2"],[1,"text-lg","font-semibold","text-center"],[1,"mt-3","text-base","font-medium","text-gray-500"],[1,"flex","flex-col","justify-center","my-5"],[1,"b-form",3,"formControl","tuiTextfieldLabelOutside","searchChange"],[3,"items",4,"tuiDataList"],[1,"flex","justify-start","gap-x-3"],["tuiButton","","type","button","size","m",3,"click"],["appearance","accent","tuiButton","","type","button","size","m",3,"click"],[3,"items"],[1,"mt-2"]],template:function(i,e){1&i&&(t._UZ(0,"app-header"),t.TgZ(1,"div",0)(2,"section",1)(3,"div",2)(4,"p",3),t._uU(5,"Create/Edit Module"),t.qZA(),t.TgZ(6,"div",4)(7,"tui-tabs",5),t.NdJ("activeItemIndexChange",function(s){return e.activeIndex=s}),t.YNc(8,pe,3,6,"ng-container",6),t.qZA()(),t.TgZ(9,"form"),t.YNc(10,Ce,47,20,"ng-container",7),t.YNc(11,ye,11,2,"ng-container",7),t.YNc(12,Ze,12,9,"ng-container",7),t.YNc(13,Me,7,0,"ng-container",7),t.qZA()()()(),t._UZ(14,"app-footer"),t.YNc(15,De,1,1,"ng-template",null,8,t.W1O),t.YNc(17,Ue,13,2,"ng-template",null,9,t.W1O),t.YNc(19,Ne,16,0,"ng-template",null,10,t.W1O)),2&i&&(t.xp6(7),t.Q6J("activeItemIndex",e.activeIndex),t.xp6(1),t.Q6J("ngForOf",e.tabs),t.xp6(2),t.Q6J("ngIf",0==e.activeIndex),t.xp6(1),t.Q6J("ngIf",1==e.activeIndex),t.xp6(1),t.Q6J("ngIf",2==e.activeIndex),t.xp6(1),t.Q6J("ngIf",3==e.activeIndex))},dependencies:[u.mk,u.sg,u.O5,u.tP,w.G,x.v0,A.c,et.H9,et.p_,et.yu,c._Y,c.YN,c.Kr,c.Fj,c.EJ,c.JJ,c.JL,c.Q7,c.oH,c.sg,c.u,c.x0,c.CE,c.F,q.kM,wt.e,Ct.PZ,vt.eC,tt.gX,U.xT,yt.V,Tt.w,u.Ov]});var N=r(89740);class z{constructor(i,e,o,s){this.dialog=i,this.transportService=e,this.dashboard=o,this.context=s}showDialog(i){this.dialog.open(i).subscribe()}cancel(){this.dashboard.moduleEditData.next(null),(0,p.cl)(p.MX.publishAppValue),(0,p.cl)(p.MX.activeIndex),this.transportService.dialogState.emit(I.U.DISCARD),this.context.completeWith(!0)}saveDraft(){}stayOnPage(){this.context.completeWith(!0),this.transportService.dialogState.emit(I.U.DEFAULT)}}z.\u0275fac=function(i){return new(i||z)(t.Y36(y.RO),t.Y36(I.R),t.Y36(C.s),t.Y36(N.yf))},z.\u0275cmp=t.Xpm({type:z,selectors:[["app-module-guard"]],decls:9,vars:0,consts:[[1,"flex","justify-center","flex-col","items-center"],["aria-hidden","true",1,"fa","fa-exclamation-circle","fa-5x","text-yellow-500"],[1,"font-semibold","text-base","my-5"],[1,"flex","justify-between","gap-2"],["tuiButton","","type","button","size","m","appearance","accent",3,"click"],["tuiButton","","type","button","size","m","appearance","secondary",3,"click"]],template:function(i,e){1&i&&(t.TgZ(0,"div",0),t._UZ(1,"i",1),t.TgZ(2,"p",2),t._uU(3,"All your unsaved data will be lost. Are you sure you want to proceed?"),t.qZA(),t.TgZ(4,"div",3)(5,"button",4),t.NdJ("click",function(){return e.cancel()}),t._uU(6,"Proceed"),t.qZA(),t.TgZ(7,"button",5),t.NdJ("click",function(){return e.stayOnPage()}),t._uU(8,"Stay on this page"),t.qZA()()())},dependencies:[x.v0],changeDetection:0});class O{constructor(i,e,o,s){this.dialog=i,this.dashboard=e,this.transportService=o,this.router=s}canActivate(i,e){return null===this.dashboard.moduleEditData.value&&!(0,p.rV)(p.MX.publishAppValue)||(this.dialog.open(new N.Al(z),{dismissible:!1,closeable:!1}).subscribe(),this.transportService.dialogState.subscribe(s=>s===I.U.DISCARD&&(this.router.navigate([e.url]),!0)),!1)}}O.\u0275fac=function(i){return new(i||O)(t.LFG(y.RO),t.LFG(C.s),t.LFG(I.R),t.LFG(b.F0))},O.\u0275prov=t.Yz7({token:O,factory:O.\u0275fac,providedIn:"root"});var m=r(70655),At=r(77721),g=r(68923),Oe=r(1054),P=r(38355),Pe=r(62665),Zt=r(78595),pt=r(78535),H=r(54004),Mt=r(71884),Fe=r(68675),Y=r(80702),G=r(8276),It=r(94645),nt=r(31947);const Dt={icons:{up:"tuiIconPlus",down:"tuiIconMinus"},appearance:"textfield",hideButtons:!1,min:0,max:Number.MAX_SAFE_INTEGER,step:1,postfix:""},dt=new t.OlP("[TUI_INPUT_COUNT_OPTIONS]",{factory:()=>Dt});var Ee=r(4707),kt=r(18090),Ut=r(55753);const Le=["tuiTh",""];function Qe(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"button",3),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.table.updateSorterAndDirection(s.sorter))}),t.GkF(1,4),t._uU(2),t.ALo(3,"async"),t._UZ(4,"tui-svg",5),t.qZA()}if(2&n){const e=t.oxw(),o=t.MAs(2);t.ekj("t-sort_sorted",e.isCurrent),t.xp6(1),t.Q6J("ngTemplateOutlet",o),t.xp6(1),t.hij(" ",t.lcZ(3,5,e.table.change$)," "),t.xp6(2),t.Q6J("src",e.icon)}}function qe(n,i){1&n&&t.Hsn(0)}function Be(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"div",6),t.NdJ("tuiResized",function(s){t.CHM(e);const a=t.oxw();return t.KtG(a.onResized(s))}),t.qZA()}}const it=["*"],ze=["tuiTd",""],He=["tuiTr",""];function Ye(n,i){if(1&n&&(t.TgZ(0,"td",5),t._uU(1),t.qZA()),2&n){const e=i.ngIf,o=t.oxw(2).$implicit;t.xp6(1),t.hij(" ",e[o]," ")}}function Ge(n,i){if(1&n&&(t.YNc(0,Ye,2,1,"td",4),t.ALo(1,"async")),2&n){const e=t.oxw(3);t.Q6J("ngIf",t.lcZ(1,1,e.item$))}}function Re(n,i){if(1&n&&(t.ynx(0,2),t.YNc(1,Ge,2,3,"ng-template",null,3,t.W1O),t.BQk()),2&n){const e=i.$implicit,o=t.MAs(2),s=t.oxw().ngIf;t.Q6J("ngTemplateOutlet",(null==s[e]?null:s[e].template)||o)}}function Ve(n,i){if(1&n&&(t.ynx(0),t.YNc(1,Re,3,1,"ng-container",1),t.BQk()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.table.columns)}}const $e=["tuiTbody",""];function je(n,i){if(1&n&&(t.ynx(0),t._uU(1),t.BQk()),2&n){const e=i.polymorpheusOutlet;t.xp6(1),t.hij(" ",e," ")}}function Ke(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"tr")(1,"th",1)(2,"button",2),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.onClick())}),t.TgZ(3,"span",3),t.YNc(4,je,2,1,"ng-container",4),t.qZA(),t._UZ(5,"tui-svg",5),t.qZA()()()}if(2&n){const e=t.oxw();t.xp6(1),t.Q6J("colSpan",e.table.columns.length),t.xp6(3),t.Q6J("polymorpheusOutlet",e.heading),t.xp6(1),t.ekj("t-chevron_rotated",e.open)}}function Xe(n,i){1&n&&(t.ynx(0),t.Hsn(1),t.BQk())}function We(n,i){if(1&n&&(t.GkF(0,7),t.ALo(1,"tuiMapper")),2&n){const e=i.$implicit,o=i.index,s=t.oxw(2);t.Q6J("ngTemplateOutlet",s.row.template)("ngTemplateOutletContext",t.Dn7(1,2,e,s.toContext,o))}}function tn(n,i){if(1&n&&(t.ynx(0),t.YNc(1,We,2,6,"ng-container",6),t.BQk()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.sorted)}}const en=["tuiThGroup",""];function nn(n,i){if(1&n&&(t.TgZ(0,"th",5),t._uU(1),t.qZA()),2&n){const e=t.oxw(2).$implicit;t.xp6(1),t.hij(" ",e.toString()," ")}}function on(n,i){if(1&n&&t.YNc(0,nn,2,1,"th",4),2&n){const e=t.oxw(3);t.Q6J("ngIf",!e.th&&!e.heads.length)}}function sn(n,i){if(1&n&&(t.ynx(0,2),t.YNc(1,on,1,1,"ng-template",null,3,t.W1O),t.BQk()),2&n){const e=i.$implicit,o=t.MAs(2),s=t.oxw().ngIf;t.Q6J("ngTemplateOutlet",(null==s[e.toString()]?null:s[e.toString()].template)||o)}}function an(n,i){if(1&n&&(t.ynx(0),t.YNc(1,sn,3,1,"ng-container",1),t.BQk()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.table.columns)}}let ot=(()=>{class n{constructor(e){this.template=e,this.tuiCell=""}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(t.Rgc))},n.\u0275dir=t.lG2({type:n,selectors:[["","tuiCell",""]],inputs:{tuiCell:"tuiCell"}}),(0,m.gn)([(0,g.TH)()],n.prototype,"tuiCell",void 0),n})();const Nt=new t.OlP("[TUI_STUCK]"),rn={provide:Nt,deps:[t.SBq,Y.te],useFactory:({nativeElement:n},i)=>{const e=i.pipe((0,H.U)(([{intersectionRatio:o}])=>o<1));return n["$.class._stuck"]=e,e}},ln=[{provide:Y.RL,useValue:"10000px 10000px 10000px 0px"},{provide:Y.op,useValue:[0,1]},{provide:U.x_,useFactory:()=>{const n=new U.qc;return n.appearance="table",n}},{provide:U.rW,useValue:{labelOutside:!0}},{provide:dt,deps:[[new t.tp0,dt]],useFactory:n=>Object.assign(Object.assign({},n),{hideButtons:!0})},{provide:U.kI,useExisting:(0,t.Gpc)(()=>f)},Y.te,It.CV,rn];let f=(()=>{class n extends Oe.QJ{constructor(e,o,s,a){super(),this.entries$=e,this.mode$=o,this.stuck$=s,this.changeDetectorRef=a,this.columns=[],this.size="m",this.direction=1,this.directionChange=new t.vpe,this.sorterChange=new t.vpe,this.sorter=()=>0}updateSorterAndDirection(e){this.sorter===e?this.updateDirection(1===this.direction?-1:1):(this.updateSorter(e),this.updateDirection(1))}ngAfterViewInit(){this.changeDetectorRef.detectChanges()}updateSorter(e){this.sorter=e||(()=>0),this.sorterChange.emit(this.sorter),this.change$.next()}updateDirection(e){this.direction=e,this.directionChange.emit(this.direction),this.change$.next()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(Y.te),t.Y36(nt.Au),t.Y36(Nt),t.Y36(t.sBO))},n.\u0275dir=t.lG2({type:n,selectors:[["table","tuiTable",""]],hostAttrs:[2,"border-collapse","separate"],hostVars:1,hostBindings:function(e,o){1&e&&t.NdJ("$.data-mode.attr",function(){return o.mode$})("$.class._stuck",function(){return o.stuck$}),2&e&&t.uIk("data-size",o.size)},inputs:{columns:"columns",size:"size",direction:"direction",sorter:"sorter"},outputs:{directionChange:"directionChange",sorterChange:"sorterChange"},features:[t._Bn(ln),t.qOj]}),(0,m.gn)([(0,g.TH)()],n.prototype,"columns",void 0),(0,m.gn)([(0,g.TH)()],n.prototype,"size",void 0),(0,m.gn)([(0,g.TH)()],n.prototype,"direction",void 0),(0,m.gn)([(0,g.TH)()],n.prototype,"sorter",void 0),n})(),R=(()=>{class n{constructor(e){this.template=e}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(t.Rgc))},n.\u0275dir=t.lG2({type:n,selectors:[["","tuiHead",""]],inputs:{tuiHead:"tuiHead"}}),n})(),un=(()=>{class n{constructor(e,o,s){this.documentRef=e,this.elementRef=o,this.parentRef=s,this.tuiResized=(0,P.mL)(this.elementRef.nativeElement,"mousedown").pipe((0,P.mp)(),(0,Q.w)(()=>{const{width:a,right:l}=this.parentRef.nativeElement.getBoundingClientRect();return(0,P.mL)(this.documentRef,"mousemove").pipe((0,Mt.x)(),(0,H.U)(({clientX:h})=>a+h-l),(0,_.R)((0,P.mL)(this.documentRef,"mouseup")))}))}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(u.K0),t.Y36(t.SBq),t.Y36(nt.zP))},n.\u0275dir=t.lG2({type:n,selectors:[["","tuiResized",""]],outputs:{tuiResized:"tuiResized"}}),n})(),cn=(()=>{class n{constructor(e){this.template=e,this.tuiRowOf=[]}static ngTemplateContextGuard(e,o){return!0}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(t.Rgc))},n.\u0275dir=t.lG2({type:n,selectors:[["ng-template","tuiRow",""]],inputs:{tuiRowOf:"tuiRowOf"}}),(0,m.gn)([(0,g.TH)()],n.prototype,"tuiRowOf",void 0),n})(),V=(()=>{class n{constructor(e,o){this.head=e,this.table=o,this.sorter=this.head?(s,a)=>function Se(n,i){const e=n instanceof kt.TU?Number(n.toUtcNativeDate()):n,o=i instanceof kt.TU?Number(i.toUtcNativeDate()):i;return e===o?0:(0,Ut.Aj)(e)&&(0,Ut.Aj)(o)?e.localeCompare(o):e>o?1:-1}(s[this.key],a[this.key]):null,this.resizable=!1,this.sticky=!1,this.width=null}get key(){if(!this.head)throw new Pe.m2;return this.head.tuiHead}get isCurrent(){return!!this.sorter&&!!this.table&&this.sorter===this.table.sorter}get icon(){var e;return this.isCurrent?1===(null===(e=this.table)||void 0===e?void 0:e.direction)?"tuiIconSortDescending":"tuiIconSortAscending":"tuiIconSortOff"}onResized(e){this.width=e}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(R,8),t.Y36((0,t.Gpc)(()=>f),8))},n.\u0275cmp=t.Xpm({type:n,selectors:[["th","tuiTh",""]],hostVars:4,hostBindings:function(e,o){2&e&&(t.Udp("width",o.width,"px"),t.ekj("_sticky",o.sticky))},inputs:{sorter:"sorter",resizable:"resizable",sticky:"sticky"},features:[t._Bn([{provide:nt.zP,useExisting:t.SBq}])],attrs:Le,ngContentSelectors:it,decls:4,vars:3,consts:[["type","button","class","t-sort",3,"t-sort_sorted","click",4,"ngIf","ngIfElse"],["content",""],["class","t-bar",3,"tuiResized",4,"ngIf"],["type","button",1,"t-sort",3,"click"],[3,"ngTemplateOutlet"],[1,"t-sort-icon",3,"src"],[1,"t-bar",3,"tuiResized"]],template:function(e,o){if(1&e&&(t.F$t(),t.YNc(0,Qe,5,7,"button",0),t.YNc(1,qe,1,0,"ng-template",null,1,t.W1O),t.YNc(3,Be,1,0,"div",2)),2&e){const s=t.MAs(2);t.Q6J("ngIf",o.sorter&&o.table)("ngIfElse",s),t.xp6(3),t.Q6J("ngIf",o.resizable)}},dependencies:[G.PN,u.O5,u.tP,un,u.Ov],styles:['[_nghost-%COMP%]{transition-property:box-shadow;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out;position:relative;top:0;height:var(--tui-height-m);font:var(--tui-font-text-s);text-align:left;font-weight:bold;color:var(--tui-text-02);background:var(--tui-base-01);cursor:default;padding:0 .75rem;box-sizing:border-box;box-shadow:0 .3125rem rgba(237,237,237,0);border:1px solid var(--tui-base-04)}[_nghost-%COMP%]:not(:first-child){border-left:none}._sticky[_nghost-%COMP%]{position:-webkit-sticky;position:sticky;z-index:30}._sticky[_nghost-%COMP%]:first-child{left:0}._sticky[_nghost-%COMP%]:after{transition-property:opacity;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out;content:"";position:absolute;top:0;left:100%;bottom:0;width:.3125rem;pointer-events:none;background:rgba(237,237,237,.7);opacity:0}._stuck   [_nghost-%COMP%]{z-index:20}tr:not(:first-child)[_nghost-%COMP%], tr:not(:first-child)   [_nghost-%COMP%]{border-top:none}table[data-size="l"][_nghost-%COMP%], table[data-size="l"]   [_nghost-%COMP%]{height:var(--tui-height-l);font:var(--tui-font-text-m);font-weight:bold;padding:0 1rem}thead[tuiThead][_nghost-%COMP%], thead[tuiThead]   [_nghost-%COMP%]{position:-webkit-sticky;position:sticky}table._stuck._sticky[_nghost-%COMP%]:after, table._stuck   ._sticky[_nghost-%COMP%]:after{opacity:1}thead[tuiThead]._stuck[_nghost-%COMP%], thead[tuiThead]._stuck   [_nghost-%COMP%]{box-shadow:0 .3125rem rgba(237,237,237,.7)}table[data-mode="onDark"][_nghost-%COMP%]:after, table[data-mode="onDark"]   [_nghost-%COMP%]:after{background:rgba(60,60,60,.9)}table[data-mode="onDark"]   thead[tuiThead]._stuck[_nghost-%COMP%], table[data-mode="onDark"]   thead[tuiThead]._stuck   [_nghost-%COMP%]{box-shadow:0 .3125rem rgba(60,60,60,.9)}table[data-mode="onDark"]   thead[tuiThead]._stuck[_nghost-%COMP%]:first-child, table[data-mode="onDark"]   thead[tuiThead]._stuck   [_nghost-%COMP%]:first-child{box-shadow:.0625rem .3125rem rgba(60,60,60,.9)}table[data-size="l"]   thead[tuiThead]   tr:nth-child(2)[_nghost-%COMP%], table[data-size="l"]   thead[tuiThead]   tr:nth-child(2)   [_nghost-%COMP%]{top:var(--tui-height-l)}table[data-size="m"]   thead[tuiThead]   tr:nth-child(2)[_nghost-%COMP%], table[data-size="m"]   thead[tuiThead]   tr:nth-child(2)   [_nghost-%COMP%]{top:var(--tui-height-m)}table[data-size="s"]   thead[tuiThead]   tr:nth-child(2)[_nghost-%COMP%], table[data-size="s"]   thead[tuiThead]   tr:nth-child(2)   [_nghost-%COMP%]{top:var(--tui-height-s)}.t-sort[_ngcontent-%COMP%]{transition-property:color;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out;-webkit-appearance:none;-moz-appearance:none;appearance:none;padding:0;border:0;background:none;font-size:inherit;line-height:inherit;display:inline-flex;flex-direction:inherit;align-items:center;outline:none;font-weight:bold;cursor:pointer}.t-sort_sorted[_ngcontent-%COMP%]{color:var(--tui-text-01)}.t-sort[_ngcontent-%COMP%]:focus-visible{background:var(--tui-selection)}.t-sort[_ngcontent-%COMP%]:hover{color:var(--tui-text-01)}.t-bar[_ngcontent-%COMP%]{transition-property:opacity;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out;position:absolute;top:0;bottom:0;right:-1px;width:3px;justify-self:flex-end;border-left:2px solid transparent;background:var(--tui-support-12);background-clip:content-box;cursor:ew-resize;opacity:0}.t-bar[_ngcontent-%COMP%]:hover, .t-bar[_ngcontent-%COMP%]:active{opacity:1}'],changeDetection:0}),(0,m.gn)([(0,g.TH)()],n.prototype,"sorter",void 0),(0,m.gn)([(0,g.TH)()],n.prototype,"resizable",void 0),(0,m.gn)([(0,g.TH)()],n.prototype,"sticky",void 0),n})(),$=(()=>{class n{constructor(e){this.table=e}transform(e){return this.sort(e,this.table.sorter,this.table.direction)}sort(e,o,s){return[...e].sort((a,l)=>s*o(a,l))}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(f,16))},n.\u0275pipe=t.Yjl({name:"tuiTableSort",type:n,pure:!1}),(0,m.gn)([g.UM],n.prototype,"sort",null),n})();const _t=[Zt.a3,$,{provide:f,deps:[[new t.tp0,f],t.sBO,Zt.a3],useFactory:It.wD}];let st=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["th","tuiTd",""],["td","tuiTd",""]],contentQueries:function(e,o,s){if(1&e&&t.Suo(s,c.a5,5),2&e){let a;t.iGM(a=t.CRH())&&(o.control=a.first)}},hostVars:2,hostBindings:function(e,o){2&e&&t.ekj("_editable",o.control)},attrs:ze,ngContentSelectors:it,decls:1,vars:0,template:function(e,o){1&e&&(t.F$t(),t.Hsn(0))},styles:['[_nghost-%COMP%]{position:relative;height:var(--tui-height-m);font:var(--tui-font-text-s);text-align:left;padding:0 .75rem;background:var(--tui-base-01);border:1px solid var(--tui-base-04);border-top:none;box-sizing:border-box;transform:translate(0)}[_nghost-%COMP%]:first-child{left:0}[_nghost-%COMP%]:not(:first-child){border-left:none}._editable[_nghost-%COMP%]:focus-within{z-index:1}._editable[_nghost-%COMP%]{padding:0;vertical-align:top}th[_nghost-%COMP%]{position:-webkit-sticky;position:sticky;z-index:1}th[_nghost-%COMP%]:after{transition-property:opacity;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out;content:"";position:absolute;top:0;bottom:0;left:100%;width:.3125rem;pointer-events:none;background:rgba(237,237,237,.7);opacity:0}th[_nghost-%COMP%]:focus-within:not(:disabled){z-index:11}table[data-mode="onDark"][_nghost-%COMP%]:after, table[data-mode="onDark"]   [_nghost-%COMP%]:after{background:rgba(60,60,60,.9)}table._stuck[_nghost-%COMP%], table._stuck   [_nghost-%COMP%]{z-index:10}table._stuck[_nghost-%COMP%]:last-of-type:after, table._stuck   [_nghost-%COMP%]:last-of-type:after{opacity:1}table[data-size="l"][_nghost-%COMP%], table[data-size="l"]   [_nghost-%COMP%]{font:var(--tui-font-text-m);height:var(--tui-height-l);padding-left:1rem;padding-right:1rem}table[data-size="l"]._editable[_nghost-%COMP%], table[data-size="l"]   ._editable[_nghost-%COMP%]{padding:0}td[_nghost-%COMP%]:focus-within{z-index:1}td[_nghost-%COMP%]:not(:focus-within){z-index:0}'],changeDetection:0}),n})(),at=(()=>{class n{constructor(e,o){this.table=e,this.body=o,this.cells=pt.Mm,this.contentReady$=new Ee.t(1),this.cells$=this.contentReady$.pipe((0,Q.w)(()=>(0,P.ll)(this.cells)),(0,H.U)(s=>s.reduce((a,l)=>Object.assign(Object.assign({},a),{[l.tuiCell]:l}),{}))),this.item$=this.contentReady$.pipe((0,Q.w)(()=>(0,P.ll)(this.body.rows)),(0,H.U)(s=>this.body.sorted[s.findIndex(a=>a===this)]))}ngAfterContentInit(){return(0,m.mG)(this,void 0,void 0,function*(){yield Promise.resolve(),this.contentReady$.next(!0)})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36((0,t.Gpc)(()=>f)),t.Y36((0,t.Gpc)(()=>rt)))},n.\u0275cmp=t.Xpm({type:n,selectors:[["tr","tuiTr",""]],contentQueries:function(e,o,s){if(1&e&&t.Suo(s,ot,4),2&e){let a;t.iGM(a=t.CRH())&&(o.cells=a)}},features:[t._Bn([_t])],attrs:He,decls:2,vars:3,consts:[[4,"ngIf"],[3,"ngTemplateOutlet",4,"ngFor","ngForOf"],[3,"ngTemplateOutlet"],["plain",""],["tuiTd","",4,"ngIf"],["tuiTd",""]],template:function(e,o){1&e&&(t.YNc(0,Ve,2,1,"ng-container",0),t.ALo(1,"async")),2&e&&t.Q6J("ngIf",t.lcZ(1,1,o.cells$))},dependencies:[st,u.O5,u.sg,u.tP,u.Ov],encapsulation:2,changeDetection:0}),n})(),rt=(()=>{class n{constructor(e,o){this.pipe=e,this.table=o,this.data=[],this.heading="",this.open=!0,this.openChange=new t.vpe,this.rows=pt.Mm,this.toContext=(s,a)=>({$implicit:s,index:a})}get sorted(){return this.pipe.transform(this.data)}onClick(){this.open=!this.open,this.openChange.emit(this.open)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36($),t.Y36((0,t.Gpc)(()=>f)))},n.\u0275cmp=t.Xpm({type:n,selectors:[["tbody","tuiTbody",""]],contentQueries:function(e,o,s){if(1&e&&(t.Suo(s,cn,5),t.Suo(s,at,4)),2&e){let a;t.iGM(a=t.CRH())&&(o.row=a.first),t.iGM(a=t.CRH())&&(o.rows=a)}},inputs:{data:"data",heading:"heading",open:"open"},outputs:{openChange:"openChange"},features:[t._Bn(_t)],attrs:$e,ngContentSelectors:it,decls:3,vars:3,consts:[[4,"ngIf"],[1,"t-heading",3,"colSpan"],["type","button",1,"t-expand",3,"click"],[1,"t-name"],[4,"polymorpheusOutlet"],["src","tuiIconChevronDownLarge",1,"t-chevron"],[3,"ngTemplateOutlet","ngTemplateOutletContext",4,"ngFor","ngForOf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(e,o){1&e&&(t.F$t(),t.YNc(0,Ke,6,4,"tr",0),t.YNc(1,Xe,2,0,"ng-container",0),t.YNc(2,tn,2,1,"ng-container",0)),2&e&&(t.Q6J("ngIf",o.heading),t.xp6(1),t.Q6J("ngIf",o.open),t.xp6(1),t.Q6J("ngIf",o.open&&o.row))},dependencies:[G.PN,u.O5,N.Li,u.sg,u.tP,At.c],styles:['[_nghost-%COMP%]{border-color:var(--tui-base-04)}[_nghost-%COMP%]   tr[_ngcontent-%COMP%]{border-color:inherit}.t-expand[_ngcontent-%COMP%]{-webkit-appearance:none;-moz-appearance:none;appearance:none;padding:0;border:0;background:none;font-size:inherit;line-height:inherit;display:flex;width:100%;height:100%;align-items:center;box-sizing:border-box;outline:none;font-weight:bold;cursor:pointer;border-color:inherit}.t-expand[_ngcontent-%COMP%]:focus-visible   .t-name[_ngcontent-%COMP%]{background:var(--tui-selection)}.t-expand[_ngcontent-%COMP%]:before, .t-expand[_ngcontent-%COMP%]:after{content:"";position:-webkit-sticky;position:sticky;height:100%;border-left:1px solid;border-color:inherit}.t-expand[_ngcontent-%COMP%]:before{left:0}.t-expand[_ngcontent-%COMP%]:after{right:0}.t-heading[_ngcontent-%COMP%]{transition-property:background;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out;height:var(--tui-height-m);font:var(--tui-font-text-s);padding:0;background:var(--tui-base-02);border-bottom:1px solid var(--tui-base-04);border-color:inherit}.t-heading[_ngcontent-%COMP%]:hover{background:var(--tui-base-03)}table[data-size="l"][_nghost-%COMP%]   .t-heading[_ngcontent-%COMP%], table[data-size="l"]   [_nghost-%COMP%]   .t-heading[_ngcontent-%COMP%]{font:var(--tui-font-text-m);height:var(--tui-height-l)}.t-name[_ngcontent-%COMP%]{position:-webkit-sticky;position:sticky;left:.75rem;display:inline-block}table[data-size="l"][_nghost-%COMP%]   .t-name[_ngcontent-%COMP%], table[data-size="l"]   [_nghost-%COMP%]   .t-name[_ngcontent-%COMP%]{left:1rem}.t-chevron[_ngcontent-%COMP%]{transition-property:transform;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out;position:-webkit-sticky;position:sticky;right:.75rem;margin:0 .6875rem 0 auto}.t-chevron_rotated[_ngcontent-%COMP%]{transform:rotate(180deg)}'],changeDetection:0}),(0,m.gn)([(0,g.TH)()],n.prototype,"data",void 0),(0,m.gn)([(0,g.TH)()],n.prototype,"heading",void 0),(0,m.gn)([(0,g.TH)()],n.prototype,"open",void 0),n})(),mt=(()=>{class n{constructor(e){this.table=e,this.heads=pt.Mm,this.heads$=null}ngAfterContentInit(){this.heads$=this.heads.changes.pipe((0,Fe.O)(null),(0,H.U)(()=>this.heads.reduce((e,o)=>Object.assign(Object.assign({},e),{[o.tuiHead]:o}),{})))}}return n.\u0275fac=function(e){return new(e||n)(t.Y36((0,t.Gpc)(()=>f)))},n.\u0275cmp=t.Xpm({type:n,selectors:[["tr","tuiThGroup",""]],contentQueries:function(e,o,s){if(1&e&&(t.Suo(s,V,5),t.Suo(s,R,4)),2&e){let a;t.iGM(a=t.CRH())&&(o.th=a.first),t.iGM(a=t.CRH())&&(o.heads=a)}},features:[t._Bn([_t])],attrs:en,ngContentSelectors:it,decls:3,vars:3,consts:[[4,"ngIf"],[3,"ngTemplateOutlet",4,"ngFor","ngForOf"],[3,"ngTemplateOutlet"],["plain",""],["tuiTh","",4,"ngIf"],["tuiTh",""]],template:function(e,o){1&e&&(t.F$t(),t.Hsn(0),t.YNc(1,an,2,1,"ng-container",0),t.ALo(2,"async")),2&e&&(t.xp6(1),t.Q6J("ngIf",t.lcZ(2,1,o.heads$)))},dependencies:[V,u.O5,u.sg,u.tP,u.Ov],encapsulation:2,changeDetection:0}),n})(),Ot=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[u.ez,N.wq,At.I,G.EI]]}),n})();var Pt=r(53548);new t.OlP("[TUI_TABLE_SHOW_HIDE_MESSAGE]",{factory:(0,Pt.v)("showHideText")});const pn=new t.OlP("[TUI_TABLE_PAGINATION_TEXTS]",{factory:(0,Pt.v)("paginationTexts")});var Ft=r(91127),Jt=r(79791);function dn(n,i){if(1&n&&(t.ynx(0),t._uU(1),t.TgZ(2,"strong",6),t._uU(3),t.qZA(),t.BQk()),2&n){const e=t.oxw().ngIf,o=t.oxw();t.xp6(1),t.hij(" ",e.pages," "),t.xp6(2),t.Oqu(o.pages)}}function _n(n,i){if(1&n&&(t.ynx(0),t._uU(1),t.BQk()),2&n){const e=i.polymorpheusOutlet;t.xp6(1),t.hij(" ",e," ")}}function mn(n,i){1&n&&t._UZ(0,"tui-svg",13)}function gn(n,i){1&n&&t._UZ(0,"span",14)}const hn=function(n,i){return{$implicit:n,total:i}};function fn(n,i){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"button",9),t.NdJ("click",function(){const a=t.CHM(e).$implicit,l=t.oxw(3);return t.KtG(l.onItem(a))}),t.YNc(2,_n,2,1,"ng-container",10),t.YNc(3,mn,1,0,"tui-svg",11),t.YNc(4,gn,1,0,"ng-template",null,12,t.W1O),t.qZA(),t.BQk()}if(2&n){const e=i.$implicit,o=t.MAs(5),s=t.oxw(3);t.xp6(2),t.Q6J("polymorpheusOutlet",s.options.sizeOptionContent)("polymorpheusOutletContext",t.WLB(4,hn,e,s.total)),t.xp6(1),t.Q6J("ngIf",e===s.size)("ngIfElse",o)}}function bn(n,i){if(1&n&&(t.TgZ(0,"tui-data-list",7),t.YNc(1,fn,6,7,"ng-container",8),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",e.items)}}function xn(n,i){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"button",15),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(2);return t.KtG(s.back())}),t.qZA(),t.TgZ(2,"button",16),t.NdJ("click",function(){t.CHM(e);const s=t.oxw(2);return t.KtG(s.forth())}),t.qZA(),t.BQk()}if(2&n){const e=i.ngIf,o=t.oxw(2);t.xp6(1),t.Q6J("disabled",o.leftDisabled)("title",e[0]),t.xp6(1),t.Q6J("disabled",o.rightDisabled)("title",e[1])}}function Tn(n,i){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"span",1),t.YNc(2,dn,4,2,"ng-container",0),t.qZA(),t.TgZ(3,"span",2),t._uU(4),t.TgZ(5,"tui-hosted-dropdown",3),t.NdJ("openChange",function(s){t.CHM(e);const a=t.oxw();return t.KtG(a.open=s)}),t.TgZ(6,"button",4)(7,"strong"),t._uU(8),t.qZA()(),t.YNc(9,bn,2,1,"ng-template",null,5,t.W1O),t.qZA(),t._uU(11),t.TgZ(12,"strong",6),t._uU(13),t.qZA()(),t.YNc(14,xn,3,4,"ng-container",0),t.ALo(15,"async"),t.BQk()}if(2&n){const e=i.ngIf,o=t.MAs(10),s=t.oxw();t.xp6(2),t.Q6J("ngIf",s.options.showPages),t.xp6(2),t.hij(" ",e.linesPerPage," "),t.xp6(1),t.Q6J("content",o)("open",s.open),t.xp6(3),t.AsE("",s.start+1,"\u2013",s.end,""),t.xp6(3),t.hij(" ",e.of," "),t.xp6(2),t.Oqu(s.total),t.xp6(1),t.Q6J("ngIf",t.lcZ(15,9,s.spinTexts$))}}const Et={sizeOptionContent:function Cn({$implicit:n}){return`${n}`},showPages:!0,items:[10,20,50,100],size:10},St=new t.OlP("[TUI_TABLE_PAGINATION_OPTIONS]",{factory:()=>Et});let gt=(()=>{class n{constructor(e,o,s){this.spinTexts$=e,this.texts$=o,this.options=s,this.items=this.options.items,this.total=0,this.page=0,this.size=this.options.size,this.pageChange=new t.vpe,this.sizeChange=new t.vpe,this.paginationChange=new t.vpe,this.open=!1}get pages(){return Math.ceil(this.total/this.size)}get start(){return this.page*this.size}get end(){return Math.min(this.start+this.size,this.total)}get leftDisabled(){return!this.start}get rightDisabled(){return this.end===this.total}get pagination(){return{page:this.page,size:this.size}}onItem(e){const{start:o}=this;this.size=e,this.sizeChange.emit(e),this.open=!1,this.page=Math.floor(o/this.size),this.pageChange.emit(this.page),this.paginationChange.emit(this.pagination)}back(){this.page--,this.pageChange.emit(this.page),this.paginationChange.emit(this.pagination)}forth(){this.page++,this.pageChange.emit(this.page),this.paginationChange.emit(this.pagination)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(nt.U4),t.Y36(pn),t.Y36(St))},n.\u0275cmp=t.Xpm({type:n,selectors:[["tui-table-pagination"]],inputs:{items:"items",total:"total",page:"page",size:"size"},outputs:{pageChange:"pageChange",sizeChange:"sizeChange",paginationChange:"paginationChange"},decls:2,vars:3,consts:[[4,"ngIf"],[1,"t-pages"],["automation-id","tui-table-pagination__lines-per-page-wrapper"],[3,"content","open","openChange"],["tuiLink","","type","button"],["content",""],[1,"t-strong"],["size","s"],[4,"ngFor","ngForOf"],["tuiOption","",1,"t-item",3,"click"],[4,"polymorpheusOutlet","polymorpheusOutletContext"],["src","tuiIconCheckLarge","class","t-checkmark",4,"ngIf","ngIfElse"],["fakeIcon",""],["src","tuiIconCheckLarge",1,"t-checkmark"],[1,"t-checkmark"],["tuiIconButton","","type","button","size","xs","appearance","icon","icon","tuiIconChevronLeft",1,"t-back",3,"disabled","title","click"],["tuiIconButton","","type","button","size","xs","appearance","icon","icon","tuiIconChevronRight",3,"disabled","title","click"]],template:function(e,o){1&e&&(t.YNc(0,Tn,16,11,"ng-container",0),t.ALo(1,"async")),2&e&&t.Q6J("ngIf",t.lcZ(1,1,o.texts$))},dependencies:[Ft.o1,Jt.V,tt.qi,tt.vK,G.PN,x.v0,u.O5,u.sg,N.Li,u.Ov],styles:["[_nghost-%COMP%]{display:flex;font:var(--tui-font-text-s);align-items:center;color:var(--tui-text-03)}.t-strong[_ngcontent-%COMP%]{color:var(--tui-text-01)}.t-pages[_ngcontent-%COMP%]{margin-right:auto}.t-item[_ngcontent-%COMP%]{min-width:5.5rem;box-sizing:border-box}.t-checkmark[_ngcontent-%COMP%]{min-width:1.5rem;border-left:5px solid transparent}.t-back[_ngcontent-%COMP%]{margin:0 .25rem 0 1.5rem}"],changeDetection:0}),(0,m.gn)([(0,g.TH)()],n.prototype,"items",void 0),(0,m.gn)([(0,g.TH)()],n.prototype,"total",void 0),(0,m.gn)([(0,g.TH)()],n.prototype,"page",void 0),(0,m.gn)([(0,g.TH)()],n.prototype,"size",void 0),n})(),vn=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[u.ez,x.fN,Jt.j,Ft.jh,tt.pc,G.EI,N.wq]]}),n})();var lt=r(54227);function yn(n,i){1&n&&(t.TgZ(0,"th",17),t._uU(1," Category Name "),t.qZA()),2&n&&t.Q6J("resizable",!0)}function wn(n,i){1&n&&(t.TgZ(0,"th",18),t._uU(1,"Actions"),t.qZA()),2&n&&t.Q6J("sorter",null)}function An(n,i){1&n&&(t.TgZ(0,"tr")(1,"td",21),t._uU(2,"No results found!"),t.qZA()())}function Zn(n,i){if(1&n&&(t.TgZ(0,"td",26),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",null==e?null:e.name," ")}}function Mn(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"td",27)(1,"div",28)(2,"a",29),t.NdJ("click",function(){t.CHM(e);const s=t.oxw().$implicit,a=t.oxw(4),l=t.MAs(13);return t.KtG(a.showDialog(l,s))}),t._UZ(3,"i",30),t.qZA(),t.TgZ(4,"button",31),t.NdJ("click",function(){t.CHM(e);const s=t.oxw().$implicit,a=t.oxw(4),l=t.MAs(15);return t.KtG(a.showDeleteDialog(s,l))}),t._UZ(5,"i",32),t.qZA()()()}}function In(n,i){1&n&&(t.TgZ(0,"tr",23),t.YNc(1,Zn,2,1,"td",24),t.YNc(2,Mn,6,0,"td",25),t.qZA()),2&n&&(t.xp6(1),t.Q6J("tuiCell","name"),t.xp6(1),t.Q6J("tuiCell","actions"))}function Dn(n,i){if(1&n&&t.YNc(0,In,3,2,"tr",22),2&n){const e=t.oxw().tuiLet;t.Q6J("ngForOf",e)}}function kn(n,i){if(1&n&&(t.TgZ(0,"tbody",19),t.YNc(1,An,3,0,"tr",5),t.YNc(2,Dn,1,1,"ng-template",null,20,t.W1O),t.qZA()),2&n){const e=i.tuiLet,o=t.MAs(3);t.Q6J("data",e),t.xp6(1),t.Q6J("ngIf",0==(null==e?null:e.length))("ngIfElse",o)}}const Un=function(){return["name","actions"]};function Nn(n,i){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"table",9)(2,"thead")(3,"tr",10),t.YNc(4,yn,2,1,"th",11),t.YNc(5,wn,2,1,"th",12),t.qZA()(),t.YNc(6,kn,4,3,"tbody",13),t.ALo(7,"tuiTableSort"),t.TgZ(8,"tfoot",14)(9,"tr")(10,"td",15)(11,"tui-table-pagination",16),t.NdJ("pageChange",function(s){t.CHM(e);const a=t.oxw();return t.KtG(a.changePage(s))}),t.qZA()()()()(),t.BQk()}if(2&n){const e=i.ngIf,o=t.oxw();t.xp6(1),t.Q6J("columns",t.DdM(10,Un)),t.xp6(3),t.Q6J("tuiHead","name"),t.xp6(1),t.Q6J("tuiHead","actions"),t.xp6(1),t.Q6J("tuiLet",t.lcZ(7,8,null==e?null:e.results)),t.xp6(4),t.Q6J("colSpan",12),t.xp6(1),t.Q6J("total",null==e?null:e.totalResults)("size",o.limit)("page",o.page)}}function On(n,i){1&n&&(t._UZ(0,"tui-loader",33),t.TgZ(1,"p",34),t._uU(2,"Fetching Data..."),t.qZA()),2&n&&t.Q6J("overlay",!1)("inheritColor",!1)}function Pn(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"p",35),t._uU(1),t.qZA(),t.TgZ(2,"div",36)(3,"label",37),t._uU(4,"Category Name"),t.qZA(),t._UZ(5,"input",38),t.qZA(),t.TgZ(6,"button",39),t.NdJ("click",function(){const a=t.CHM(e).$implicit;return t.oxw().editOrAddCategory(),t.KtG(a.complete())}),t._uU(7," Send "),t.qZA()}if(2&n){const e=t.oxw();t.xp6(1),t.hij(" ",e.categoryId?"Edit":"Add"," Category "),t.xp6(4),t.Q6J("formControl",e.categoryEditControl),t.xp6(1),t.Q6J("disabled",!(null!=e.categoryEditControl&&e.categoryEditControl.value))}}function Fn(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"p",40),t._uU(1,"Delete Category"),t.qZA(),t.TgZ(2,"p",41),t._uU(3,"Are you sure you want to delete this category?"),t.qZA(),t.TgZ(4,"div",42)(5,"button",43),t.NdJ("click",function(){const a=t.CHM(e).$implicit;return t.oxw().deleteCategory(),t.KtG(a.complete())}),t._uU(6," Confirm "),t.qZA(),t.TgZ(7,"button",44),t.NdJ("click",function(){const a=t.CHM(e).$implicit;return t.KtG(a.complete())}),t._uU(8," Cancel "),t.qZA()()}}class j{constructor(i,e,o){this.dashboard=i,this.dialogs=e,this.cf=o,this.categoryEditControl=new c.NI(""),this.destroy$=new v.x,this.limit=6,this.page=0,this.categories=this.dashboard.getAllCategories(this.limit,this.page)}changePage(i){this.page=i,this.categories=this.dashboard.getAllCategories(this.limit,this.page)}editOrAddCategory(){this.categoryId?this.dashboard.updateCategory({name:this.categoryEditControl?.value},this.categoryId).pipe((0,_.R)(this.destroy$)).subscribe(i=>{i&&(this.categories=this.dashboard.getAllCategories(this.limit,this.page),this.cf.detectChanges())}):this.dashboard.postNewCategory({name:this.categoryEditControl?.value}).pipe((0,_.R)(this.destroy$)).subscribe(i=>{i&&(this.categories=this.dashboard.getAllCategories(this.limit,this.page),this.cf.detectChanges())})}deleteCategory(){this.dashboard.deleteCategory(this.categoryId).pipe((0,_.R)(this.destroy$)).subscribe(()=>{this.categories=this.dashboard.getAllCategories(this.limit,this.page),this.cf.detectChanges()})}showDialog(i,e){this.dialogs.open(i,{dismissible:!0,closeable:!0}).subscribe(),this.categoryEditControl.setValue(e?.name?e?.name:""),this.categoryId=e?.id||null}showDeleteDialog(i,e){this.dialogs.open(e,{dismissible:!0,closeable:!0}).subscribe(),this.categoryId=i?.id}ngOnDestroy(){this.destroy$.complete(),this.destroy$.unsubscribe()}}j.\u0275fac=function(i){return new(i||j)(t.Y36(C.s),t.Y36(y.RO),t.Y36(t.sBO))},j.\u0275cmp=t.Xpm({type:j,selectors:[["ng-component"]],decls:16,vars:4,consts:[[1,"bg_img_main"],[1,"mt-52","pb-60","mx-auto","w-11/12"],[1,"flex","justify-end","mb-5"],[1,"cursor-pointer"],[1,"px-4","py-2","rounded-lg","bg-[#a58f81]","text-white","no-underline","hover:text-white","text-sm",3,"click"],[4,"ngIf","ngIfElse"],["loading",""],["template",""],["deltemplate",""],["tuiTable","",1,"rounded-lg","w-full",3,"columns"],["tuiThGroup",""],["tuiTh","","class","text-base",3,"resizable",4,"tuiHead"],["class","text-base","tuiTh","",3,"sorter",4,"tuiHead"],["tuiTbody","",3,"data",4,"tuiLet"],[1,"bg-white"],[1,"py-6","px-3","border","border-gray-300",3,"colSpan"],[3,"total","size","page","pageChange"],["tuiTh","",1,"text-base",3,"resizable"],["tuiTh","",1,"text-base",3,"sorter"],["tuiTbody","",3,"data"],["showData",""],["colspan","12",1,"px-4","py-8","text-lg","text-gray-500","text-center","bg-white","border","border-gray-300","font-medium"],["tuiTr","",4,"ngFor","ngForOf"],["tuiTr",""],["class","py-3 font-semibold","tuiTd","",4,"tuiCell"],["tuiTd","",4,"tuiCell"],["tuiTd","",1,"py-3","font-semibold"],["tuiTd",""],[1,"flex","justify-start"],[1,"px-2","py-1","cursor-pointer","rounded-md","bg-blue-400","text-white","mx-2","hover:text-white",3,"click"],["aria-hidden","true",1,"fa","fa-pencil-square-o"],[1,"px-2","py-1","rounded-md","bg-red-500","text-white",3,"click"],["aria-hidden","true",1,"fa","fa-trash"],["size","xl",1,"mt-14",3,"overlay","inheritColor"],[1,"text-base","font-medium","text-center","my-2","text-[#6C86E2]"],[1,"text-lg","font-semibold","text-center"],[1,"flex","flex-col","justify-center","my-5"],["for","Textarea1",1,"block"],[1,"form-control",3,"formControl"],["tuiButton","","type","button","size","m",3,"disabled","click"],[1,"text-xl","font-semibold","text-center","border-b","border-gray-400","pb-2"],[1,"mt-4","text-base","font-medium","text-center"],[1,"flex","justify-center","mt-4"],["tuiButton","","appearance","secondary-destructive","type","button","size","m",1,"mx-3",3,"click"],["tuiButton","","type","button","size","m",3,"click"]],template:function(i,e){if(1&i){const o=t.EpF();t._UZ(0,"app-header"),t.TgZ(1,"div",0)(2,"section",1)(3,"div",2)(4,"div",3)(5,"a",4),t.NdJ("click",function(){t.CHM(o);const a=t.MAs(13);return t.KtG(e.showDialog(a,null))}),t._uU(6,"+ Add category"),t.qZA()()(),t.YNc(7,Nn,12,11,"ng-container",5),t.ALo(8,"async"),t.YNc(9,On,3,2,"ng-template",null,6,t.W1O),t.qZA()(),t._UZ(11,"app-footer"),t.YNc(12,Pn,8,3,"ng-template",null,7,t.W1O),t.YNc(14,Fn,9,0,"ng-template",null,8,t.W1O)}if(2&i){const o=t.MAs(10);t.xp6(7),t.Q6J("ngIf",t.lcZ(8,2,e.categories))("ngIfElse",o)}},dependencies:[u.sg,u.O5,w.G,x.v0,A.c,f,rt,mt,V,st,at,ot,R,lt.Ls,c.Fj,c.JJ,c.oH,q.kM,gt,u.Ov,$],changeDetection:0});var Jn=r(78372),ut=r(57505),ht=r(60101),En=r(1668);function Sn(n,i){1&n&&(t.TgZ(0,"th",20),t._uU(1," Full Name "),t.qZA()),2&n&&t.Q6J("resizable",!0)}function Ln(n,i){1&n&&(t.TgZ(0,"th",20),t._uU(1," Email "),t.qZA()),2&n&&t.Q6J("resizable",!0)}function Qn(n,i){1&n&&(t.TgZ(0,"th",20),t._uU(1," Role "),t.qZA()),2&n&&t.Q6J("resizable",!0)}function qn(n,i){1&n&&(t.TgZ(0,"th",21),t._uU(1,"Actions"),t.qZA()),2&n&&t.Q6J("sorter",null)}function Bn(n,i){1&n&&(t.TgZ(0,"tr")(1,"td",24),t._uU(2,"No results found!"),t.qZA()())}function zn(n,i){if(1&n&&(t.TgZ(0,"td",29),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",null==e?null:e.fullName," ")}}function Hn(n,i){if(1&n&&(t.TgZ(0,"td",29),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",null==e?null:e.email," ")}}function Yn(n,i){if(1&n&&(t.TgZ(0,"td",29),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",null==e?null:e.role," ")}}function Gn(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"td",30)(1,"div",31)(2,"a",32),t.NdJ("click",function(){t.CHM(e);const s=t.oxw().$implicit,a=t.oxw(4),l=t.MAs(15);return t.KtG(a.showDialog(l,s))}),t._UZ(3,"i",33),t.qZA(),t.TgZ(4,"button",34),t.NdJ("click",function(){t.CHM(e);const s=t.oxw().$implicit,a=t.oxw(4),l=t.MAs(17);return t.KtG(a.showDeleteDialog(s,l))}),t._UZ(5,"i",35),t.qZA()()()}}function Rn(n,i){1&n&&(t.TgZ(0,"tr",26),t.YNc(1,zn,2,1,"td",27),t.YNc(2,Hn,2,1,"td",27),t.YNc(3,Yn,2,1,"td",27),t.YNc(4,Gn,6,0,"td",28),t.qZA()),2&n&&(t.xp6(1),t.Q6J("tuiCell","full name"),t.xp6(1),t.Q6J("tuiCell","email"),t.xp6(1),t.Q6J("tuiCell","role"),t.xp6(1),t.Q6J("tuiCell","actions"))}function Vn(n,i){if(1&n&&t.YNc(0,Rn,5,4,"tr",25),2&n){const e=t.oxw().tuiLet;t.Q6J("ngForOf",e)}}function $n(n,i){if(1&n&&(t.TgZ(0,"tbody",22),t.YNc(1,Bn,3,0,"tr",7),t.YNc(2,Vn,1,1,"ng-template",null,23,t.W1O),t.qZA()),2&n){const e=i.tuiLet,o=t.MAs(3);t.Q6J("data",e),t.xp6(1),t.Q6J("ngIf",0==(null==e?null:e.length))("ngIfElse",o)}}const jn=function(){return["fullName","email","role","actions"]};function Kn(n,i){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"table",12)(2,"thead")(3,"tr",13),t.YNc(4,Sn,2,1,"th",14),t.YNc(5,Ln,2,1,"th",14),t.YNc(6,Qn,2,1,"th",14),t.YNc(7,qn,2,1,"th",15),t.qZA()(),t.YNc(8,$n,4,3,"tbody",16),t.ALo(9,"tuiTableSort"),t.TgZ(10,"tfoot",17)(11,"tr")(12,"td",18)(13,"tui-table-pagination",19),t.NdJ("pageChange",function(s){t.CHM(e);const a=t.oxw();return t.KtG(a.changePage(s))}),t.qZA()()()()(),t.BQk()}if(2&n){const e=i.ngIf,o=t.oxw();t.xp6(1),t.Q6J("columns",t.DdM(12,jn)),t.xp6(3),t.Q6J("tuiHead","fullName"),t.xp6(1),t.Q6J("tuiHead","email"),t.xp6(1),t.Q6J("tuiHead","role"),t.xp6(1),t.Q6J("tuiHead","actions"),t.xp6(1),t.Q6J("tuiLet",t.lcZ(9,10,null==e?null:e.results)),t.xp6(4),t.Q6J("colSpan",12),t.xp6(1),t.Q6J("total",null==e?null:e.totalResults)("size",o.limit)("page",o.page)}}function Xn(n,i){1&n&&(t._UZ(0,"tui-loader",36),t.TgZ(1,"p",37),t._uU(2,"Fetching Data..."),t.qZA()),2&n&&t.Q6J("overlay",!1)("inheritColor",!1)}function Wn(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"p",38),t._uU(1," Edit User "),t.qZA(),t.TgZ(2,"div",39)(3,"formio",40),t.NdJ("change",function(s){t.CHM(e);const a=t.oxw();return t.KtG(a.getFormValues(s))}),t.qZA()(),t.TgZ(4,"button",41),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.editOrAddUser())}),t.ALo(5,"async"),t._uU(6," Send "),t.qZA()}if(2&n){const e=t.oxw();let o;t.xp6(3),t.Q6J("submission",e.formSubmission)("form",e.userForm),t.xp6(1),t.Q6J("disabled",0==(null==(o=t.lcZ(5,3,e.formData))?null:o.isValid))}}function ti(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"p",42),t._uU(1,"Delete User"),t.qZA(),t.TgZ(2,"p",43),t._uU(3,"Are you sure you want to delete this user ?"),t.qZA(),t.TgZ(4,"div",44)(5,"button",45),t.NdJ("click",function(){const a=t.CHM(e).$implicit;return t.oxw().deleteUser(),t.KtG(a.complete())}),t._uU(6," Confirm "),t.qZA(),t.TgZ(7,"button",46),t.NdJ("click",function(){const a=t.CHM(e).$implicit;return t.KtG(a.complete())}),t._uU(8," Cancel "),t.qZA()()}}function ei(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"p",38),t._uU(1," Add User "),t.qZA(),t.TgZ(2,"div",39)(3,"formio",40),t.NdJ("change",function(s){t.CHM(e);const a=t.oxw();return t.KtG(a.getFormValues(s))}),t.qZA()(),t.TgZ(4,"button",41),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.editOrAddUser())}),t.ALo(5,"async"),t.ALo(6,"async"),t._uU(7," Send "),t.qZA()}if(2&n){const e=t.oxw();let o;t.xp6(3),t.Q6J("submission",e.formSubmission)("form",e.addUserForm),t.xp6(1),t.Q6J("disabled",0==(null==(o=t.lcZ(5,3,e.formData))?null:o.isValid)||!(null!=(o=t.lcZ(6,5,e.formData))&&o.changed))}}class K{constructor(i,e,o){this.dashboard=i,this.dialogs=e,this.cf=o,this.destroy$=new v.x,this.limit=6,this.page=0,this.userForm=ut.rd,this.addUserForm=ut.gD,this.formData=new Z.X({isValid:!1}),this.searchValue=new c.NI,this.fetchingUsers=new v.x,this.subscription=[],this.users=this.dashboard.getAllUsersForListing(this.limit,this.page),this.searchValue.valueChanges.pipe((0,Jn.b)(400),(0,Mt.x)(),(0,Q.w)(s=>this.users=""==s?this.dashboard.getAllUsersForListing(this.limit,this.page):this.dashboard.getAllUsersForListing(this.limit,this.page,s)),(0,_.R)(this.destroy$)).subscribe(()=>{this.cf.detectChanges()})}changePage(i){this.page=i,this.users=this.dashboard.getAllUsersForListing(this.limit,this.page)}showDialog(i,e){this.subscription.push(this.dialogs.open(i,{dismissible:!0,closeable:!0}).subscribe()),this.userId=e?.id||null,this.formSubmission={data:{fullname:e?.fullName,email:e?.email,role:e?.role}}}showAddDialog(i){this.subscription.push(this.dialogs.open(i,{dismissible:!0,closeable:!0}).subscribe())}showDeleteDialog(i,e){this.dialogs.open(e,{dismissible:!0,closeable:!0}).subscribe(),this.userId=i?.id}getFormValues(i){i?.data&&this.formData.next(i)}editOrAddUser(){this.userId?this.dashboard.updateUser(this.userId,{role:this.formData?.value?.data?.role}).pipe((0,_.R)(this.destroy$)).subscribe(e=>{this.users=this.dashboard.getAllUsersForListing(this.limit,this.page),this.cf.detectChanges(),this.subscription.forEach(o=>o.unsubscribe())}):this.dashboard.addNewUser({fullName:this.formData?.value?.data?.fullname,email:this.formData?.value?.data?.email,role:this.formData?.value?.data?.role}).pipe((0,_.R)(this.destroy$)).subscribe(e=>{this.users=this.dashboard.getAllUsersForListing(this.limit,this.page),this.cf.detectChanges(),this.subscription.forEach(o=>o.unsubscribe())})}deleteUser(){this.dashboard.deleteUser(this.userId).pipe((0,_.R)(this.destroy$)).subscribe(()=>{this.users=this.dashboard.getAllUsersForListing(this.limit,this.page),this.cf.detectChanges()})}ngOnDestroy(){this.destroy$.complete(),this.destroy$.unsubscribe()}}function ni(n,i){1&n&&(t.TgZ(0,"th",17),t._uU(1," Company Name "),t.qZA()),2&n&&t.Q6J("resizable",!0)}function ii(n,i){1&n&&(t.TgZ(0,"th",18),t._uU(1,"Actions"),t.qZA()),2&n&&t.Q6J("sorter",null)}function oi(n,i){1&n&&(t.TgZ(0,"tr")(1,"td",21),t._uU(2,"No results found!"),t.qZA()())}function si(n,i){if(1&n&&(t.TgZ(0,"td",26),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",null==e?null:e.title," ")}}function ai(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"td",27)(1,"div",28)(2,"a",29),t.NdJ("click",function(){t.CHM(e);const s=t.oxw().$implicit,a=t.oxw(4),l=t.MAs(13);return t.KtG(a.showDialog(l,s))}),t._UZ(3,"i",30),t.qZA(),t.TgZ(4,"button",31),t.NdJ("click",function(){t.CHM(e);const s=t.oxw().$implicit,a=t.oxw(4),l=t.MAs(15);return t.KtG(a.showDeleteDialog(s,l))}),t._UZ(5,"i",32),t.qZA()()()}}function ri(n,i){1&n&&(t.TgZ(0,"tr",23),t.YNc(1,si,2,1,"td",24),t.YNc(2,ai,6,0,"td",25),t.qZA()),2&n&&(t.xp6(1),t.Q6J("tuiCell","title"),t.xp6(1),t.Q6J("tuiCell","actions"))}function li(n,i){if(1&n&&t.YNc(0,ri,3,2,"tr",22),2&n){const e=t.oxw().tuiLet;t.Q6J("ngForOf",e)}}function ui(n,i){if(1&n&&(t.TgZ(0,"tbody",19),t.YNc(1,oi,3,0,"tr",5),t.YNc(2,li,1,1,"ng-template",null,20,t.W1O),t.qZA()),2&n){const e=i.tuiLet,o=t.MAs(3);t.Q6J("data",e),t.xp6(1),t.Q6J("ngIf",0==(null==e?null:e.length))("ngIfElse",o)}}K.\u0275fac=function(i){return new(i||K)(t.Y36(C.s),t.Y36(y.RO),t.Y36(t.sBO))},K.\u0275cmp=t.Xpm({type:K,selectors:[["ng-component"]],decls:20,vars:5,consts:[[1,"bg_img_main"],[1,"mt-52","pb-60","mx-auto","w-11/12"],[1,"flex","justify-between","mb-5"],[1,"w-2/5"],["appTrim","","placeholder","Search users",1,"form-control",3,"formControl"],[1,"cursor-pointer"],[1,"px-4","py-2","rounded-lg","bg-[#a58f81]","text-white","no-underline","hover:text-white","text-sm",3,"click"],[4,"ngIf","ngIfElse"],["loading",""],["template",""],["deltemplate",""],["addTemplate",""],["tuiTable","",1,"rounded-lg","w-full",3,"columns"],["tuiThGroup",""],["tuiTh","","class","text-base",3,"resizable",4,"tuiHead"],["class","text-base","tuiTh","",3,"sorter",4,"tuiHead"],["tuiTbody","",3,"data",4,"tuiLet"],[1,"bg-white"],[1,"py-6","px-3","border","border-gray-300",3,"colSpan"],[3,"total","size","page","pageChange"],["tuiTh","",1,"text-base",3,"resizable"],["tuiTh","",1,"text-base",3,"sorter"],["tuiTbody","",3,"data"],["showData",""],["colspan","12",1,"px-4","py-8","text-lg","text-gray-500","text-center","bg-white","border","border-gray-300","font-medium"],["tuiTr","",4,"ngFor","ngForOf"],["tuiTr",""],["class","py-3 font-semibold","tuiTd","",4,"tuiCell"],["tuiTd","",4,"tuiCell"],["tuiTd","",1,"py-3","font-semibold"],["tuiTd",""],[1,"flex","justify-start"],[1,"px-2","py-1","cursor-pointer","rounded-md","bg-blue-400","text-white","mx-2","hover:text-white",3,"click"],["aria-hidden","true",1,"fa","fa-pencil-square-o"],[1,"px-2","py-1","rounded-md","bg-red-500","text-white",3,"click"],["aria-hidden","true",1,"fa","fa-trash"],["size","xl",1,"mt-14",3,"overlay","inheritColor"],[1,"text-base","font-medium","text-center","my-2","text-[#6C86E2]"],[1,"text-lg","font-semibold","text-center"],[1,"flex","flex-col","justify-center","my-5"],[3,"submission","form","change"],["tuiButton","","type","button","size","m",3,"disabled","click"],[1,"text-xl","font-semibold","text-center","border-b","border-gray-400","pb-2"],[1,"mt-4","text-base","font-medium","text-center"],[1,"flex","justify-center","mt-4"],["tuiButton","","appearance","secondary-destructive","type","button","size","m",1,"mx-3",3,"click"],["tuiButton","","type","button","size","m",3,"click"]],template:function(i,e){if(1&i){const o=t.EpF();t._UZ(0,"app-header"),t.TgZ(1,"div",0)(2,"section",1)(3,"div",2)(4,"div",3),t._UZ(5,"input",4),t.qZA(),t.TgZ(6,"div",5)(7,"a",6),t.NdJ("click",function(){t.CHM(o);const a=t.MAs(19);return t.KtG(e.showAddDialog(a))}),t._uU(8,"+ Add new user"),t.qZA()()(),t.YNc(9,Kn,14,13,"ng-container",7),t.ALo(10,"async"),t.YNc(11,Xn,3,2,"ng-template",null,8,t.W1O),t.qZA()(),t._UZ(13,"app-footer"),t.YNc(14,Wn,7,5,"ng-template",null,9,t.W1O),t.YNc(16,ti,9,0,"ng-template",null,10,t.W1O),t.YNc(18,ei,8,7,"ng-template",null,11,t.W1O)}if(2&i){const o=t.MAs(12);t.xp6(5),t.Q6J("formControl",e.searchValue),t.xp6(4),t.Q6J("ngIf",t.lcZ(10,3,e.users))("ngIfElse",o)}},dependencies:[u.sg,u.O5,w.G,x.v0,A.c,f,rt,mt,V,st,at,ot,R,lt.Ls,c.Fj,c.JJ,c.oH,q.kM,ht.k4,gt,En.$,u.Ov,$],changeDetection:0});const ci=function(){return["title","actions"]};function pi(n,i){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"table",9)(2,"thead")(3,"tr",10),t.YNc(4,ni,2,1,"th",11),t.YNc(5,ii,2,1,"th",12),t.qZA()(),t.YNc(6,ui,4,3,"tbody",13),t.ALo(7,"tuiTableSort"),t.TgZ(8,"tfoot",14)(9,"tr")(10,"td",15)(11,"tui-table-pagination",16),t.NdJ("pageChange",function(s){t.CHM(e);const a=t.oxw();return t.KtG(a.changePage(s))}),t.qZA()()()()(),t.BQk()}if(2&n){const e=i.ngIf,o=t.oxw();t.xp6(1),t.Q6J("columns",t.DdM(10,ci)),t.xp6(3),t.Q6J("tuiHead","title"),t.xp6(1),t.Q6J("tuiHead","actions"),t.xp6(1),t.Q6J("tuiLet",t.lcZ(7,8,null==e?null:e.results)),t.xp6(4),t.Q6J("colSpan",12),t.xp6(1),t.Q6J("total",null==e?null:e.totalResults)("size",o.limit)("page",o.page)}}function di(n,i){1&n&&(t._UZ(0,"tui-loader",33),t.TgZ(1,"p",34),t._uU(2,"Fetching Data..."),t.qZA()),2&n&&t.Q6J("overlay",!1)("inheritColor",!1)}function _i(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"p",35),t._uU(1),t.qZA(),t.TgZ(2,"div",36)(3,"label",37),t._uU(4,"Company Name"),t.qZA(),t._UZ(5,"input",38),t.qZA(),t.TgZ(6,"button",39),t.NdJ("click",function(){const a=t.CHM(e).$implicit;return t.oxw().editOrAddCompany(),t.KtG(a.complete())}),t._uU(7," Send "),t.qZA()}if(2&n){const e=t.oxw();t.xp6(1),t.hij(" ",e.categoryId?"Edit":"Add"," Company "),t.xp6(4),t.Q6J("formControl",e.categoryEditControl),t.xp6(1),t.Q6J("disabled",!(null!=e.categoryEditControl&&e.categoryEditControl.value))}}function mi(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"p",40),t._uU(1,"Delete Company"),t.qZA(),t.TgZ(2,"p",41),t._uU(3,"Are you sure you want to delete this company?"),t.qZA(),t.TgZ(4,"div",42)(5,"button",43),t.NdJ("click",function(){const a=t.CHM(e).$implicit;return t.oxw().deleteCompanyData(),t.KtG(a.complete())}),t._uU(6," Confirm "),t.qZA(),t.TgZ(7,"button",44),t.NdJ("click",function(){const a=t.CHM(e).$implicit;return t.KtG(a.complete())}),t._uU(8," Cancel "),t.qZA()()}}class X{constructor(i,e){this.dashboard=i,this.dialogs=e,this.categoryEditControl=new c.NI(""),this.destroy$=new v.x,this.limit=6,this.page=0,this.companies=this.dashboard.getAllCompanies(this.limit,this.page)}changePage(i){this.page=i,this.companies=this.dashboard.getAllCompanies(this.limit,this.page)}editOrAddCompany(){this.categoryId?this.dashboard.updateCompany({title:this.categoryEditControl?.value,groupCode:this.categoryEditControl?.value?.replace(/\s/g,"-")},this.categoryId).pipe((0,_.R)(this.destroy$)).subscribe(i=>{i&&(this.companies=this.dashboard.getAllCompanies(this.limit,this.page))}):this.dashboard.addCompany({title:this.categoryEditControl?.value,groupCode:this.categoryEditControl?.value?.replace(/\s/g,"-")}).pipe((0,_.R)(this.destroy$)).subscribe(i=>{i&&(this.companies=this.dashboard.getAllCompanies(this.limit,this.page))})}deleteCompanyData(){this.dashboard.deleteCompany(this.categoryId).pipe((0,_.R)(this.destroy$)).subscribe(()=>this.companies=this.dashboard.getAllCompanies(this.limit,this.page))}showDialog(i,e){this.dialogs.open(i,{dismissible:!0,closeable:!0}).subscribe(),this.categoryEditControl.setValue(e?.title?e?.title:""),this.categoryId=e?.id||null}showDeleteDialog(i,e){this.dialogs.open(e,{dismissible:!0,closeable:!0}).subscribe(),this.categoryId=i?.id}ngOnDestroy(){this.destroy$.complete(),this.destroy$.unsubscribe()}}X.\u0275fac=function(i){return new(i||X)(t.Y36(C.s),t.Y36(y.RO))},X.\u0275cmp=t.Xpm({type:X,selectors:[["ng-component"]],decls:16,vars:4,consts:[[1,"bg_img_main"],[1,"mt-52","pb-60","mx-auto","w-11/12"],[1,"flex","justify-end","mb-5"],[1,"cursor-pointer"],[1,"px-4","py-2","rounded-lg","bg-[#a58f81]","text-white","no-underline","hover:text-white","text-sm",3,"click"],[4,"ngIf","ngIfElse"],["loading",""],["template",""],["deltemplate",""],["tuiTable","",1,"rounded-lg","w-full",3,"columns"],["tuiThGroup",""],["tuiTh","","class","text-base",3,"resizable",4,"tuiHead"],["class","text-base","tuiTh","",3,"sorter",4,"tuiHead"],["tuiTbody","",3,"data",4,"tuiLet"],[1,"bg-white"],[1,"py-6","px-3","border","border-gray-300",3,"colSpan"],[3,"total","size","page","pageChange"],["tuiTh","",1,"text-base",3,"resizable"],["tuiTh","",1,"text-base",3,"sorter"],["tuiTbody","",3,"data"],["showData",""],["colspan","12",1,"px-4","py-8","text-lg","text-gray-500","text-center","bg-white","border","border-gray-300","font-medium"],["tuiTr","",4,"ngFor","ngForOf"],["tuiTr",""],["class","py-3 font-semibold","tuiTd","",4,"tuiCell"],["tuiTd","",4,"tuiCell"],["tuiTd","",1,"py-3","font-semibold"],["tuiTd",""],[1,"flex","justify-start"],[1,"px-2","py-1","cursor-pointer","rounded-md","bg-blue-400","text-white","mx-2","hover:text-white",3,"click"],["aria-hidden","true",1,"fa","fa-pencil-square-o"],[1,"px-2","py-1","rounded-md","bg-red-500","text-white",3,"click"],["aria-hidden","true",1,"fa","fa-trash"],["size","xl",1,"mt-14",3,"overlay","inheritColor"],[1,"text-base","font-medium","text-center","my-2","text-[#6C86E2]"],[1,"text-lg","font-semibold","text-center"],[1,"flex","flex-col","justify-center","my-5"],["for","Textarea1",1,"block"],[1,"form-control",3,"formControl"],["tuiButton","","type","button","size","m",3,"disabled","click"],[1,"text-xl","font-semibold","text-center","border-b","border-gray-400","pb-2"],[1,"mt-4","text-base","font-medium","text-center"],[1,"flex","justify-center","mt-4"],["tuiButton","","appearance","secondary-destructive","type","button","size","m",1,"mx-3",3,"click"],["tuiButton","","type","button","size","m",3,"click"]],template:function(i,e){if(1&i){const o=t.EpF();t._UZ(0,"app-header"),t.TgZ(1,"div",0)(2,"section",1)(3,"div",2)(4,"div",3)(5,"a",4),t.NdJ("click",function(){t.CHM(o);const a=t.MAs(13);return t.KtG(e.showDialog(a,null))}),t._uU(6,"+ Add company"),t.qZA()()(),t.YNc(7,pi,12,11,"ng-container",5),t.ALo(8,"async"),t.YNc(9,di,3,2,"ng-template",null,6,t.W1O),t.qZA()(),t._UZ(11,"app-footer"),t.YNc(12,_i,8,3,"ng-template",null,7,t.W1O),t.YNc(14,mi,9,0,"ng-template",null,8,t.W1O)}if(2&i){const o=t.MAs(10);t.xp6(7),t.Q6J("ngIf",t.lcZ(8,2,e.companies))("ngIfElse",o)}},dependencies:[u.sg,u.O5,w.G,x.v0,A.c,f,rt,mt,V,st,at,ot,R,lt.Ls,c.Fj,c.JJ,c.oH,q.kM,gt,u.Ov,$]});var Lt=r(32041);class W{constructor(i,e,o,s){this.auth=i,this.dashboard=e,this.notif=o,this.cf=s,this.formData=new Z.X({}),this.userForm=ut.dI,this.passwordForm=ut.LD,this.destroy$=new v.x,this.passValue=new Z.X(null),this.currentUser=this.auth.currentUserValue,this.formData.next({fullname:this.currentUser?.fullName,email:this.currentUser?.email,role:this.currentUser?.role}),this.formSubmission={data:{fullname:this.currentUser?.fullName,email:this.currentUser?.email,role:this.currentUser?.role}}}getFormValues(i){if(i?.data)return i}getPasswordFieldValues(i){i?.data&&this.passValue.next(i?.data)}updatePassword(){if(this.passValue?.value?.password?.length>0&&this.passValue?.value?.password1?.length){if(this.passValue?.value?.password!==this.passValue?.value?.password1)return this.notif.displayNotification("Passwords do not match","Update password","warning");console.log(this.passValue?.value)}else this.notif.displayNotification("Please fill in all fields","Update password","warning")}editUser(){if(1==this.checkIfObjectValuesHaveChanged(this.formData?.value,this.formSubmission?.data))return this.notif.displayNotification("You have not changed any information","Edit User Info","warning");this.dashboard.updateUser(this.currentUser?.id,{fullName:this.formSubmission?.data?.fullname,email:this.formSubmission?.data?.email,role:this.formSubmission?.data?.role}).pipe((0,_.R)(this.destroy$)).subscribe(e=>{e&&(this.auth.updateUser(e),this.formData.next({fullname:e?.fullName,email:e?.email,role:e?.role}))})}checkIfObjectValuesHaveChanged(i,e){const o=Object?.keys(i).sort(),s=Object?.keys(e).sort();return o.length===s.length&&!!o.every((l,h)=>i[l]===e[s[h]])}ngOnDestroy(){this.destroy$.complete(),this.destroy$.unsubscribe()}}W.\u0275fac=function(i){return new(i||W)(t.Y36(bt.e),t.Y36(C.s),t.Y36(ct.T),t.Y36(t.sBO))},W.\u0275cmp=t.Xpm({type:W,selectors:[["ng-component"]],decls:23,vars:9,consts:[[1,"bg_img_main"],[1,"mt-52","pb-52","mx-auto","w-11/12"],[1,"px-8","py-5","bg-white","rounded-md","w-full","grid","grid-cols-12","sahdow-lg","drop-shadow-lg"],[1,"col-span-4","flex","flex-col","items-center","gap-2"],["new","","size","xxl",3,"text"],[1,"font-semibold"],[1,"col-span-8"],[1,"pb-3","text-base","font-semibold"],[3,"submission","form","change"],["tuiButton","","type","button","size","m",3,"disabled","click"],[1,"py-3","mt-9","text-base","font-semibold"],[3,"form","change"],["tuiButton","","type","button","size","m",3,"click"]],template:function(i,e){if(1&i&&(t._UZ(0,"app-header"),t.TgZ(1,"div",0)(2,"section",1)(3,"div",2)(4,"div",3),t._UZ(5,"tui-avatar",4),t.TgZ(6,"p",5),t._uU(7),t.qZA(),t.TgZ(8,"p"),t._uU(9),t.qZA()(),t.TgZ(10,"div",6)(11,"p",7),t._uU(12,"Profile data"),t.qZA(),t.TgZ(13,"formio",8),t.NdJ("change",function(s){return e.getFormValues(s)}),t.qZA(),t.TgZ(14,"button",9),t.NdJ("click",function(){return e.editUser()}),t.ALo(15,"async"),t._uU(16," Edit "),t.qZA(),t.TgZ(17,"p",10),t._uU(18,"Reset password"),t.qZA(),t.TgZ(19,"formio",11),t.NdJ("change",function(s){return e.getPasswordFieldValues(s)}),t.qZA(),t.TgZ(20,"button",12),t.NdJ("click",function(){return e.updatePassword()}),t._uU(21," Update password "),t.qZA()()()()(),t._UZ(22,"app-footer")),2&i){let o;t.xp6(5),t.Q6J("text",null==e.currentUser?null:e.currentUser.fullName),t.xp6(2),t.Oqu(null==e.currentUser?null:e.currentUser.fullName),t.xp6(2),t.Oqu(null==e.currentUser?null:e.currentUser.email),t.xp6(4),t.Q6J("submission",e.formSubmission)("form",e.userForm),t.xp6(1),t.Q6J("disabled",0==(null==(o=t.lcZ(15,7,e.formData))?null:o.isValid)),t.xp6(5),t.Q6J("form",e.passwordForm)}},dependencies:[w.G,x.v0,A.c,ht.k4,Lt.JP,u.Ov],changeDetection:0});const gi=[{path:"",component:E,data:{breadcrumb:"Dashboard"},children:[{path:"home",component:L,canActivate:[O],data:{breadcrumb:"Home"}},{path:"create-edit-module",component:B,data:{breadcrumb:"Create/Edit Module"}},{path:"categories",component:j,data:{breadcrumb:"Categories"}},{path:"users",component:K,data:{breadcrumb:"Users"}},{path:"companies",component:X,data:{breadcrumb:"Companies"}},{path:"profile",component:W,data:{breadcrumb:"Profile"}},{path:"",redirectTo:"home",pathMatch:"full"}]}];class F{}F.\u0275fac=function(i){return new(i||F)},F.\u0275mod=t.oAB({type:F}),F.\u0275inj=t.cJS({imports:[b.Bz.forChild(gi),b.Bz]});var hi=r(44886),fi=r(82176);class J{}J.\u0275fac=function(i){return new(i||J)},J.\u0275mod=t.oAB({type:J}),J.\u0275inj=t.cJS({imports:[u.ez,F,w.G,x.fN,A.c,Ot,fi.i,lt.WD,et.$$,c.UX,c.u5,q.dS,D,wt.e,ht.XI,Ot,Ct.cB,vt.zX,U.cn,vn,yt.f,Lt.Jm,hi.go,Tt.Q]})}}]);