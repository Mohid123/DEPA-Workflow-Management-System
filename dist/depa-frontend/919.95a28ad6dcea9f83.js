"use strict";(self.webpackChunkDEPA_FRONTEND=self.webpackChunkDEPA_FRONTEND||[]).push([[919],{24919:(ot,Z,m)=>{m.r(Z),m.d(Z,{FormsModule:()=>v});var u=m(36895),F=m(19132),t=m(94650);class T{}T.\u0275fac=function(o){return new(o||T)},T.\u0275cmp=t.Xpm({type:T,selectors:[["app-forms"]],decls:1,vars:0,template:function(o,e){1&o&&t._UZ(0,"router-outlet")},dependencies:[F.lC]});var a=m(90433),M=m(1163),N=m(77579),d=m(82722),g=m(92340),i=m(4266),V=m(17820),I=m(89740),_=m(39367),U=m(73347),D=m(20696);function X(n,o){if(1&n&&(t.ynx(0),t.TgZ(1,"div",6)(2,"p",7),t._uU(3),t.qZA(),t.TgZ(4,"tui-checkbox-labeled",8),t._uU(5," Can Edit? "),t.TgZ(6,"div",9),t._uU(7,"User will have the right to edit this component"),t.qZA()(),t.TgZ(8,"tui-checkbox-labeled",8),t._uU(9," Can View? "),t.TgZ(10,"div",9),t._uU(11,"User will have the right to only view this component"),t.qZA()()(),t.BQk()),2&n){const e=o.$implicit,r=t.oxw();t.xp6(3),t.Oqu(null==e?null:e.name),t.xp6(1),t.Q6J("formControl",r.userFormControls[e.id].canEdit),t.xp6(4),t.Q6J("formControl",r.userFormControls[e.id].canView)}}class y{constructor(o,e,r){this.context=o,this.dialogs=e,this.transport=r,this.userFormControls={},this.workflowApprovers=(0,i.rV)(i.MX.approvers)||[],this.workflowApprovers.length>0&&this.workflowApprovers.forEach(s=>{this.userFormControls[s.id]={canEdit:new a.NI(!1),canView:new a.NI(!0)}})}get data(){return this.context.data}submitPermission(){this.workflowApprovers=this.workflowApprovers?.map(e=>({...e,canEdit:this.userFormControls[e.id]?.canEdit?.value,canView:this.userFormControls[e.id]?.canView?.value}));let o={...this.data,permissions:this.workflowApprovers};this.transport.updatedComponent.emit(o),this.context.completeWith(this.data)}cancel(){this.context.completeWith(null)}showDialog(o){this.dialogs.open(o,{dismissible:!1,closeable:!1}).subscribe()}}y.\u0275fac=function(o){return new(o||y)(t.Y36(I.yf),t.Y36(M.RO),t.Y36(D.R))},y.\u0275cmp=t.Xpm({type:y,selectors:[["ng-component"]],standalone:!0,features:[t.jDz],decls:9,vars:1,consts:[[1,"text-lg","font-semibold","text-center"],[1,"my-6"],[4,"ngFor","ngForOf"],[1,"flex","justify-center","gap-2","mt-5"],["tuiButton","","type","button","size","m","appearance","primary",3,"click"],["tuiButton","","type","button","size","m","appearance","accent",3,"click"],[1,"border-b","border-gray-300","py-4"],[1,"font-semibold","text-base","mb-3"],[1,"tui-space_top-3",3,"formControl"],[1,"text-gray-400"]],template:function(o,e){1&o&&(t.TgZ(0,"h2",0),t._uU(1,"Set Permissions for users"),t.qZA(),t.TgZ(2,"div",1),t.YNc(3,X,12,3,"ng-container",2),t.qZA(),t.TgZ(4,"div",3)(5,"button",4),t.NdJ("click",function(){return e.submitPermission()}),t._uU(6," Confirm "),t.qZA(),t.TgZ(7,"button",5),t.NdJ("click",function(){return e.cancel()}),t._uU(8," Cancel "),t.qZA()()),2&o&&(t.xp6(3),t.Q6J("ngForOf",e.workflowApprovers))},dependencies:[u.ez,u.sg,_.fN,_.v0,a.UX,a.JJ,a.oH,a.u5,U.s,U.p],encapsulation:2});var $=m(22603),J=m(94051),B=m(46954),C=m(60101),p=m(60946),w=m(56546);const S=["json"],R=["code"];function j(n,o){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"button",5),t.NdJ("click",function(){const c=t.CHM(e).index,l=t.oxw();return l.activeIndex=c,t.KtG(l.onJsonView())}),t._UZ(2,"i",6),t._uU(3),t.qZA(),t.BQk()}if(2&n){const e=o.$implicit;t.xp6(2),t.Tol(e.icon),t.xp6(1),t.hij(" \xa0 ",e.text," ")}}function Y(n,o){1&n&&(t.TgZ(0,"p",17),t._uU(1," A form by this title already exists. Please select another name "),t.qZA())}function L(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"section",7)(1,"div",8)(2,"div",9)(3,"label",10),t._uU(4,"Title"),t.qZA(),t._UZ(5,"input",11),t.YNc(6,Y,2,0,"p",12),t.qZA()(),t.TgZ(7,"form-builder",13),t.NdJ("change",function(s){t.CHM(e);const c=t.oxw();return t.KtG(c.onChange(s))}),t.qZA(),t.TgZ(8,"div",14)(9,"button",15),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.submitFormData())}),t._uU(10," Submit Form "),t.qZA(),t.TgZ(11,"button",16),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.cancelFormData())}),t._uU(12," Cancel "),t.qZA()()()}if(2&n){const e=t.oxw();t.xp6(5),t.Q6J("formControl",e.formTitleControl),t.xp6(1),t.Q6J("ngIf",null==e.formTitleControl?null:e.formTitleControl.hasError("codeExists")),t.xp6(1),t.Q6J("form",e.form),t.xp6(2),t.Q6J("disabled",null==e.formTitleControl?null:e.formTitleControl.hasError("codeExists"))}}function Q(n,o){if(1&n&&(t.TgZ(0,"section",7)(1,"div",18),t._UZ(2,"formio",19),t.qZA()()),2&n){const e=t.oxw();t.xp6(2),t.Q6J("form",e.form)("refresh",e.refreshForm)}}function O(n,o){1&n&&(t.TgZ(0,"section",7)(1,"div",18)(2,"pre",20),t._UZ(3,"code",21),t.qZA()()())}class E{constructor(o,e,r,s,c,l,f,A){this.transportService=o,this.notif=e,this.location=r,this.activatedRoute=s,this.formService=c,this.dashboard=l,this.dialogs=f,this.injector=A,this.refreshForm=new t.vpe,this.activeIndex=0,this.editMode=!1,this.items=[{text:"Form Builder",icon:"fa fa-file-text-o fa-lg"},{text:"Preview",icon:"fa fa-eye fa-lg"},{text:"JSON view",icon:"fa fa-file-code-o fa-lg"}],this.formTitleControl=new a.NI({value:"",disabled:this.editMode},a.kI.compose([a.kI.required]),[V.U$.createValidator(this.dashboard)]),this.formDisplayType=new a.NI("form"),this.destroy$=new N.x,this.crudUsers=new a.NI([]),this.viewUsers=new a.NI([]),this.editMode=this.transportService.isFormEdit.value,this.activatedRoute.queryParams?.subscribe(h=>{h.key&&this.formService.getFormByKey(h.key).pipe((0,d.R)(this.destroy$)).subscribe(b=>{b&&(this.form=b,this.formTitleControl.setValue(b?.title))}),!0===this.editMode?(this.form=this.transportService.sendFormDataForEdit.value,this.formTitleControl.setValue(this.transportService.sendFormDataForEdit.value.title),this.formTitleControl.disable()):this.form={title:this.formTitleControl?.value,key:"",display:this.formDisplayType.value,components:[]}})}ngOnInit(){this.activatedRoute.queryParams.pipe((0,d.R)(this.destroy$)).subscribe(o=>{if(0==Object.keys(o).length){const e=(0,i.rV)(i.MX.navHierarchy);e&&this.dashboard.previousRoute&&!this.dashboard.previousRoute.includes("?")?(e.forEach(r=>{r.routerLink=`/modules/${r.caption}?moduleID=${(0,i.rV)(i.MX.moduleID)}`}),this.dashboard.items=[...e,{caption:"Add App",routerLink:`/modules/add-module/${(0,i.rV)(i.MX.moduleID)}`},{caption:"Add Form",routerLink:"/forms/form-builder"}]):this.dashboard.items=[{caption:"Add App",routerLink:`/modules/add-module/${(0,i.rV)(i.MX.moduleID)}`},{caption:"Add Form",routerLink:"/forms/form-builder"}]}else this.dashboard.items=[{caption:"Add App",routerLink:`/modules/add-module/${(0,i.rV)(i.MX.moduleID)}`},{caption:"Add Form",routerLink:"/forms/form-builder"}]}),this.transportService.updatedComponent.pipe((0,d.R)(this.destroy$)).subscribe(o=>{o&&(this.form.components=this.form?.components?.map(e=>(e.key===o.key&&(e=o),e)))})}onChange(o){this.refreshForm.emit({property:"form",value:o.form}),o.form.display=this.formDisplayType?.value,o.form.title=this.formTitleControl?.value,this.formValue=o.form,this.form?.components?.map(e=>e?.label&&"Upload"===e?.label?(e.storage="url",e.url=`${g.N.apiUrl}/upload`,e.uploadEnabled=!0,e.input=!0,e.multiple=!0,e):"Data Grid"==e?.label||"Data Map"==e?.label||"Panel"==e?.label?e?.components?.map(r=>(r?.label&&"Upload"===r?.label&&(r.storage="url"),r.url=`${g.N.apiUrl}/upload`,r.uploadEnabled=!0,r.input=!0,r.multiple=!0,r)):"Columns"==e?.label?e?.columns?.map(r=>r?.components?.map(s=>(s?.label&&"Upload"===s?.label&&(s.storage="url"),s.url=`${g.N.apiUrl}/upload`,s.uploadEnabled=!0,s.input=!0,s.multiple=!0,s))):("Panel"==e?.label&&console.log(e),e)),this.addCustomEventTrigger()}addCustomEventTrigger(){if(!document.getElementById("custom-div")){let e=document.getElementsByClassName("component-btn-group");Array.from(e).forEach((r,s)=>{let c=document.createElement("div"),l=document.createElement("div");l.id="custom-div",l.setAttribute("class","btn btn-xxs btn-primary component-settings-button component-settings-button-depa relative"),l.tabIndex=-1,l.role="button",l.ariaLabel="Permissions Button",l.innerHTML='<i class="fa fa-key"></i>',l.addEventListener("click",()=>{let f=this.form?.components[s];this.openPermissionDialog(f)}),l.addEventListener("mouseover",()=>{c.setAttribute("class","absolute z-30 -top-8 -left-10 bg-black bg-opacity-80 text-white text-[13px] font-medium rounded-md p-2"),c.innerText="Permissions",l.append(c)}),l.addEventListener("mouseleave",()=>{c.remove()}),r.append(l)})}}openPermissionDialog(o){this.dialogs.open(new I.Al(y,this.injector),{data:o,dismissible:!1,closeable:!1}).pipe((0,d.R)(this.destroy$)).subscribe()}onJsonView(){setTimeout(()=>{const o=document.getElementById("json_code");o&&(o.innerHTML=""),o?.appendChild(document.createTextNode(JSON.stringify(this.formValue,null,4)))},500)}submitFormData(){if(!this.formTitleControl?.value||""==this.formTitleControl?.value)return this.notif.displayNotification("Please provide a title for your form","Create Form","warning");if(0==this.form?.components?.length)return this.notif.displayNotification("You have not created a form!","Create Form","warning");if((0,i.cl)(i.MX.approvers),this.form.title=this.formTitleControl?.value,this.form.display=this.formDisplayType?.value,this.form.key=this.formTitleControl?.value?.replace(/\s+/g,"-").trim().toLowerCase(),0==this.editMode)if(this.transportService.formBuilderData.value[0].components?.length>0){const o=[...this.transportService.formBuilderData.value,this.form];this.transportService.sendFormBuilderData(o),this.location.back()}else this.transportService.sendFormBuilderData([this.form]),this.location.back();else{const o=this.transportService.formBuilderData.value?.map(e=>(e.title==this.form?.title&&(e=this.form),e));this.transportService.sendFormBuilderData(o),this.location.back()}}setSelectValue(o){this.formDisplayType.setValue(o.target.value)}cancelFormData(){if((0,i.cl)(i.MX.approvers),0==this.editMode)this.transportService.sendFormBuilderData([{title:"",key:"",display:"",components:[]}]),this.location.back();else{const o=this.transportService.formBuilderData.value?.map(e=>(e.title==this.form?.title&&(e=this.form),e));this.transportService.sendFormBuilderData(o),this.location.back()}}ngOnDestroy(){this.destroy$.complete(),this.destroy$.unsubscribe()}}E.\u0275fac=function(o){return new(o||E)(t.Y36(D.R),t.Y36($.T),t.Y36(u.Ye),t.Y36(F.gz),t.Y36(J.s),t.Y36(B.s),t.Y36(M.RO),t.Y36(t.zs3))},E.\u0275cmp=t.Xpm({type:E,selectors:[["ng-component"]],viewQuery:function(o,e){if(1&o&&(t.Gf(S,7),t.Gf(R,7)),2&o){let r;t.iGM(r=t.CRH())&&(e.jsonElement=r.first),t.iGM(r=t.CRH())&&(e.codeElement=r.first)}},decls:9,vars:5,consts:[[1,"pt-40","pb-5"],["tuiMobileTabs","",1,"flex","justify-center","mx-2","lg:mx-20","md:mx-10",3,"activeItemIndex"],[4,"ngFor","ngForOf"],["class","px-5",4,"ngIf"],["childContainer",""],["tuiTab","","tuiRipple","var(--tui-text-01)",3,"click"],["alt","svg-icon",1,"pr-1"],[1,"px-5"],[1,"grid","w-8/12","grid-cols-12","gap-3","px-1","mx-auto","my-4"],[1,"col-span-6"],["for","titleField"],["type","text","placeholder","Form title","id","titleField",1,"form-control",3,"formControl"],["class","text-red-500 text-xs mt-1",4,"ngIf"],[3,"form","change"],[1,"flex","justify-center","py-3"],["tuiButton","","type","button","size","m","appearance","accent",1,"tui-space_right-3","tui-space_bottom-3",3,"disabled","click"],["tuiButton","","type","button","size","m","appearance","secondary-destructive",1,"tui-space_right-3","tui-space_bottom-3",3,"click"],[1,"text-red-500","text-xs","mt-1"],[1,"well","jsonviewer"],[3,"form","refresh"],["id","json"],["id","json_code",1,"language-json"]],template:function(o,e){1&o&&(t._UZ(0,"app-header"),t.TgZ(1,"section",0)(2,"tui-tabs",1),t.YNc(3,j,4,3,"ng-container",2),t.qZA()(),t.YNc(4,L,13,4,"section",3),t.YNc(5,Q,3,2,"section",3),t.YNc(6,O,4,0,"section",3),t.GkF(7,null,4)),2&o&&(t.xp6(2),t.Q6J("activeItemIndex",e.activeIndex),t.xp6(1),t.Q6J("ngForOf",e.items),t.xp6(1),t.Q6J("ngIf",0==e.activeIndex),t.xp6(1),t.Q6J("ngIf",1===e.activeIndex),t.xp6(1),t.Q6J("ngIf",2===e.activeIndex))},dependencies:[u.sg,u.O5,C.k4,C.hd,p.H9,p.p_,p.yu,_.v0,w.G,a.Fj,a.JJ,a.oH]});const P=["json"],H=["code"];function G(n,o){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"button",4),t.NdJ("click",function(){const c=t.CHM(e).index,l=t.oxw();return l.activeIndex=c,t.KtG(l.onJsonView())}),t._UZ(2,"i",5),t._uU(3),t.qZA(),t.BQk()}if(2&n){const e=o.$implicit;t.xp6(2),t.Tol(e.icon),t.xp6(1),t.hij(" \xa0 ",e.text," ")}}function K(n,o){1&n&&(t.TgZ(0,"p",16),t._uU(1," A form by this title already exists. Please select another name "),t.qZA())}function z(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"section",6)(1,"div",7)(2,"div",8)(3,"label",9),t._uU(4,"Title"),t.qZA(),t._UZ(5,"input",10),t.YNc(6,K,2,0,"p",11),t.qZA()(),t.TgZ(7,"form-builder",12),t.NdJ("change",function(s){t.CHM(e);const c=t.oxw();return t.KtG(c.onChange(s))}),t.qZA(),t.TgZ(8,"div",13)(9,"button",14),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.submitFormData())}),t._uU(10," Submit Form "),t.qZA(),t.TgZ(11,"button",15),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.cancelFormData())}),t._uU(12," Cancel "),t.qZA()()()}if(2&n){const e=t.oxw();t.xp6(5),t.Q6J("formControl",e.formTitleControl),t.xp6(1),t.Q6J("ngIf",null==e.formTitleControl?null:e.formTitleControl.hasError("codeExists")),t.xp6(1),t.Q6J("form",e.form),t.xp6(2),t.Q6J("disabled",null==e.formTitleControl?null:e.formTitleControl.hasError("codeExists"))}}function q(n,o){if(1&n&&(t.TgZ(0,"section",6)(1,"div",17),t._UZ(2,"formio",18),t.qZA()()),2&n){const e=t.oxw();t.xp6(2),t.Q6J("form",e.form)("refresh",e.refreshForm)}}function W(n,o){1&n&&(t.TgZ(0,"section",6)(1,"div",17)(2,"pre",19),t._UZ(3,"code",20),t.qZA()()())}class k{constructor(o,e,r,s,c,l,f,A){this.notif=o,this.activatedRoute=e,this.formService=r,this._location=s,this.dashboard=c,this.dialogs=l,this.injector=f,this.transportService=A,this.refreshForm=new t.vpe,this.activeIndex=0,this.editMode=!1,this.items=[{text:"Form Builder",icon:"fa fa-file-text-o fa-lg"},{text:"Preview",icon:"fa fa-eye fa-lg"},{text:"JSON view",icon:"fa fa-file-code-o fa-lg"}],this.formTitleControl=new a.NI({value:"",disabled:this.editMode},a.kI.compose([a.kI.required]),[V.U$.createValidator(this.dashboard)]),this.formDisplayType=new a.NI("form"),this.destroy$=new N.x,this.crudUsers=new a.NI([]),this.viewUsers=new a.NI([]),this.activatedRoute?.queryParams.pipe((0,d.R)(this.destroy$)).subscribe(h=>{h.id?(this.editFormID=h.id,this.formService.getFormById(h.id).pipe((0,d.R)(this.destroy$)).subscribe(b=>{b&&(this.form=b,this.formTitleControl.setValue(b?.title))})):this.form={title:this.formTitleControl?.value,key:null,display:this.formDisplayType.value||null,components:[]}})}ngOnInit(){this.activatedRoute.queryParams.pipe((0,d.R)(this.destroy$)).subscribe(o=>{const e=(0,i.rV)(i.MX.navHierarchy)||[];e&&this.dashboard.previousRoute&&this.dashboard.previousRoute.includes("edit-module")?(e.forEach(r=>{r.routerLink=`/modules/${r.caption}?moduleID=${(0,i.rV)(i.MX.moduleID)}`}),this.dashboard.items=this.dashboard.previousRoute.includes("moduleCode")?0==Object.keys(o).length?[...e,{caption:(0,i.rV)(i.MX.formKey)||"Add Form",routerLink:`/modules/${(0,i.rV)(i.MX.moduleSlug)}/${(0,i.rV)(i.MX.formKey)||"Add Form"}`}]:[...e,{caption:(0,i.rV)(i.MX.formKey)||"Edit Form",routerLink:`/modules/${(0,i.rV)(i.MX.moduleSlug)}/${(0,i.rV)(i.MX.formKey)||"Edit Form"}`}]:0==Object.keys(o).length?[...e,{caption:(0,i.rV)(i.MX.editmoduleSlug),routerLink:`/modules/edit-module/${(0,i.rV)(i.MX.editmoduleId)}`},{caption:(0,i.rV)(i.MX.formKey)||"Add Form",routerLink:`/modules/${(0,i.rV)(i.MX.moduleSlug)}/${(0,i.rV)(i.MX.formKey)||"Add Form"}`}]:[...e,{caption:(0,i.rV)(i.MX.editmoduleSlug),routerLink:`/modules/edit-module/${(0,i.rV)(i.MX.editmoduleId)}`},{caption:(0,i.rV)(i.MX.formKey)||"Edit Form",routerLink:`/modules/${(0,i.rV)(i.MX.moduleSlug)}/${(0,i.rV)(i.MX.formKey)||"Edit Form"}`}]):this.dashboard.items=e&&this.dashboard.previousRoute&&this.dashboard.previousRoute.includes("add-submission")?[...e,{caption:"Add Submission",routerLink:`/modules/${(0,i.rV)(i.MX.moduleSlug)}/add-submission/${(0,i.rV)(i.MX.moduleID)}`},{caption:(0,i.rV)(i.MX.formKey)||"Edit Form",routerLink:`/modules/${(0,i.rV)(i.MX.moduleSlug)}/${(0,i.rV)(i.MX.formKey)||"Edit Form"}`}]:[...e,{caption:(0,i.rV)(i.MX.formKey)||"Edit Form",routerLink:`/forms/edit-form?id=${this.editFormID}`}]}),this.transportService.updatedComponent.pipe((0,d.R)(this.destroy$)).subscribe(o=>{o&&(this.form.components=this.form?.components?.map(e=>(e.key===o.key&&(e=o),e)))})}ngAfterViewInit(){setTimeout(()=>this.addCustomEventTrigger(),2e3)}onChange(o){this.refreshForm.emit({property:"form",value:o.form}),o.form.display=this.formDisplayType?.value,o.form.title=this.formTitleControl?.value,this.formValue=o.form,this.form?.components?.map(e=>e?.label&&"Upload"===e?.label?(e.storage="url",e.url=`${g.N.apiUrl}/upload`,e.uploadEnabled=!0,e.input=!0,e.multiple=!0,e):"Data Grid"==e?.label||"Data Map"==e?.label||"Panel"==e?.label?e?.components?.map(r=>(r?.label&&"Upload"===r?.label&&(r.storage="url"),r.url=`${g.N.apiUrl}/upload`,r.uploadEnabled=!0,r.input=!0,r.multiple=!0,r)):"Columns"==e?.label?e?.columns?.map(r=>r?.components?.map(s=>(s?.label&&"Upload"===s?.label&&(s.storage="url"),s.url=`${g.N.apiUrl}/upload`,s.uploadEnabled=!0,s.input=!0,s.multiple=!0,s))):e),this.addCustomEventTrigger()}addCustomEventTrigger(){if(!document.getElementById("custom-div")){let e=document.getElementsByClassName("component-btn-group");Array.from(e).forEach((r,s)=>{let c=document.createElement("div"),l=document.createElement("div");l.id="custom-div",l.setAttribute("class","btn btn-xxs btn-primary component-settings-button component-settings-button-depa relative"),l.tabIndex=-1,l.role="button",l.ariaLabel="Permissions Button",l.innerHTML='<i class="fa fa-key"></i>',l.addEventListener("click",()=>{let f=this.form?.components[s];this.openPermissionDialog(f)}),l.addEventListener("mouseover",()=>{c.setAttribute("class","absolute z-30 -top-8 -left-10 bg-black bg-opacity-80 text-white text-[13px] font-medium rounded-md p-2"),c.innerText="Permissions",l.append(c)}),l.addEventListener("mouseleave",()=>{c.remove()}),r.append(l)})}}openPermissionDialog(o){this.dialogs.open(new I.Al(y,this.injector),{data:o,dismissible:!1,closeable:!1}).pipe((0,d.R)(this.destroy$)).subscribe()}onJsonView(){setTimeout(()=>{const o=document.getElementById("json_code");o&&(o.innerHTML=""),o?.appendChild(document.createTextNode(JSON.stringify(this.formValue||this.form,null,4)))},500)}submitFormData(){if(!this.formTitleControl?.value||""==this.formTitleControl?.value)return this.notif.displayNotification("Please provide a title for your form","Edit Form","warning");if(0==this.form?.components?.length)return this.notif.displayNotification("Your form cannot be empty!","Edit Form","warning");(0,i.cl)(i.MX.approvers);const o={title:this.formTitleControl?.value,key:this.formTitleControl?.value?.replace(/\s+/g,"-").toLowerCase(),display:this.form?.display??this.formDisplayType.value,components:this.form?.components},e=(0,i.rV)(i.MX.formEdit);this.editFormID?this.formService.updateForm(this.editFormID,o).pipe((0,d.R)(this.destroy$)).subscribe(r=>{r&&(e?((0,i.cl)(i.MX.formEdit),setTimeout(()=>this._location.back(),800)):this._location.back())}):(Object.assign(o,{subModuleId:this.transportService.subModuleID?.value}),this.formService.createForm(o).pipe((0,d.R)(this.destroy$)).subscribe(r=>{r&&(e?((0,i.cl)(i.MX.formEdit),setTimeout(()=>this._location.back(),800)):this._location.back())}))}setSelectValue(o){this.formDisplayType.setValue(o.target.value)}cancelFormData(){(0,i.cl)(i.MX.approvers),(0,i.rV)(i.MX.formEdit)?((0,i.cl)(i.MX.formEdit),this._location.back()):this._location.back()}ngOnDestroy(){this.destroy$.complete(),this.destroy$.unsubscribe()}}k.\u0275fac=function(o){return new(o||k)(t.Y36($.T),t.Y36(F.gz),t.Y36(J.s),t.Y36(u.Ye),t.Y36(B.s),t.Y36(M.RO),t.Y36(t.zs3),t.Y36(D.R))},k.\u0275cmp=t.Xpm({type:k,selectors:[["ng-component"]],viewQuery:function(o,e){if(1&o&&(t.Gf(P,7),t.Gf(H,7)),2&o){let r;t.iGM(r=t.CRH())&&(e.jsonElement=r.first),t.iGM(r=t.CRH())&&(e.codeElement=r.first)}},decls:7,vars:5,consts:[[1,"pb-5","pt-44"],["tuiMobileTabs","",1,"mx-2","lg:mx-20","md:mx-10","flex","justify-center",3,"activeItemIndex"],[4,"ngFor","ngForOf"],["class","px-5",4,"ngIf"],["tuiTab","","tuiRipple","var(--tui-text-01)",3,"click"],["alt","svg-icon",1,"pr-1"],[1,"px-5"],[1,"grid","grid-cols-12","gap-3","w-8/12","mx-auto","px-1","my-4"],[1,"col-span-6"],["for","titleField"],["type","text","placeholder","Form title","id","titleField",1,"form-control",3,"formControl"],["class","text-red-500 text-xs mt-1",4,"ngIf"],[3,"form","change"],[1,"flex","justify-center","py-3"],["tuiButton","","type","button","size","m","appearance","accent",1,"tui-space_right-3","tui-space_bottom-3",3,"disabled","click"],["tuiButton","","type","button","size","m","appearance","secondary-destructive",1,"tui-space_right-3","tui-space_bottom-3",3,"click"],[1,"text-red-500","text-xs","mt-1"],[1,"well","jsonviewer"],[3,"form","refresh"],["id","json"],["id","json_code",1,"language-json"]],template:function(o,e){1&o&&(t._UZ(0,"app-header"),t.TgZ(1,"section",0)(2,"tui-tabs",1),t.YNc(3,G,4,3,"ng-container",2),t.qZA()(),t.YNc(4,z,13,4,"section",3),t.YNc(5,q,3,2,"section",3),t.YNc(6,W,4,0,"section",3)),2&o&&(t.xp6(2),t.Q6J("activeItemIndex",e.activeIndex),t.xp6(1),t.Q6J("ngForOf",e.items),t.xp6(1),t.Q6J("ngIf",0==e.activeIndex),t.xp6(1),t.Q6J("ngIf",1===e.activeIndex),t.xp6(1),t.Q6J("ngIf",2===e.activeIndex))},dependencies:[u.sg,u.O5,C.k4,C.hd,p.H9,p.p_,p.yu,_.v0,w.G,a.Fj,a.JJ,a.oH]});const tt=[{path:"",component:T,children:[{path:"form-builder",component:E,data:{breadcrumb:"Form Builder"}},{path:"edit-form",component:k,data:{breadcrumb:"Edit Form"}},{path:"",redirectTo:"form-builder",pathMatch:"full"}]}];class x{}x.\u0275fac=function(o){return new(o||x)},x.\u0275mod=t.oAB({type:x}),x.\u0275inj=t.cJS({imports:[F.Bz.forChild(tt),F.Bz]});var et=m(75407);class v{}v.\u0275fac=function(o){return new(o||v)},v.\u0275mod=t.oAB({type:v}),v.\u0275inj=t.cJS({imports:[u.ez,x,C.XI,p.$$,_.fN,w.G,a.UX,et.e]})}}]);