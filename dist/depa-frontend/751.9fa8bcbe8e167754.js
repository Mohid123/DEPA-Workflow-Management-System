"use strict";(self.webpackChunkDEPA_FRONTEND=self.webpackChunkDEPA_FRONTEND||[]).push([[751],{51751:(ge,oe,u)=>{u.r(oe),u.d(oe,{AppListingModule:()=>De});var i=u(36895),l=u(19132),d=u(4266),e=u(94650);class V{constructor(n,t){this.ac=n,this.router=t;let s=(0,d.rV)(d.MX.moduleSlug)||"",r=(0,d.rV)(d.MX.moduleID)||"";"/modules"==this.router.url&&this.router.navigate(["/modules",s],{queryParams:{moduleID:r}})}}V.\u0275fac=function(n){return new(n||V)(e.Y36(l.gz),e.Y36(l.F0))},V.\u0275cmp=e.Xpm({type:V,selectors:[["app-app-listing"]],decls:1,vars:0,template:function(n,t){1&n&&e._UZ(0,"router-outlet")},dependencies:[l.lC]});var c=u(24006),U=u(86169),A=u(1163),D=u(61135),y=u(77579),h=u(82722),B=u(63900),q=u(4128),K=u(17820),se=u(15274),$=u(20696),ee=u(46954),R=u(22603),I=u(18505),M=u(61005),N=u(80529);class H extends M.s{constructor(n,t){super(n),this.http=n,this.notif=t}uploadMedia(n){const t=new FormData;return t.append("file",n),this.postMedia("/upload",t).pipe((0,I.b)(s=>{if(s.hasErrors())return this.notif.displayNotification(s.errors[0]?.error?.message,"Image Upload","error")}))}}H.\u0275fac=function(n){return new(n||H)(e.LFG(N.eN),e.LFG(R.T))},H.\u0275prov=e.Yz7({token:H,factory:H.\u0275fac,providedIn:"root"});var le=u(56546),ce=u(5754),F=u(86679),Q=u(56772),w=u(77975),z=u(21469),j=u(70655),re=u(1054),k=u(78535),ie=u(37414),G=u(68923),de=u(79982),C=u(88261),te=u(82302),T=u(68702),J=u(80063),X=u(39255),pe=u(47846),Te=u(31947),fe=u(53281);const S=["*"];let v=(()=>{class o{constructor(){this.name="tui-radio-group-"+o.index++}}return o.index=0,o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["tui-radio-group"]],inputs:{name:"name"},ngContentSelectors:S,decls:1,vars:0,template:function(t,s){1&t&&(e.F$t(),e.Hsn(0))},encapsulation:2,changeDetection:0}),(0,j.gn)([(0,G.TH)()],o.prototype,"name",void 0),o})();const Z=["focusableElement"];function W(o,n){if(1&o&&e._UZ(0,"div",4),2&o){const t=e.oxw();e.Q6J("@tuiScaleIn",t.animation)}}const ue={size:"m",appearances:{unchecked:"outline",checked:"primary"}},he=new e.OlP("[TUI_RADIO_OPTIONS]",{factory:()=>ue});let x=(()=>{class o extends re.F9{constructor(t,s,r,a,m){super(t,s),this.animationOptions=r,this.options=a,this.radioGroup=m,this.identityMatcher=k.bg,this.name=null,this.size=this.options.size,this.pseudoDisabled=!1,this.animation=Object.assign({value:""},this.animationOptions)}get appearance(){return this.checked?this.options.appearances.checked:this.options.appearances.unchecked}get computedDisabled(){return this.disabled||this.pseudoDisabled}get nativeFocusableElement(){return!this.focusableElement||this.computedDisabled?null:this.focusableElement.nativeElement}get focused(){return(0,X.V8)(this.nativeFocusableElement)}get checked(){return null===this.value?null===this.item:null!=this.item&&this.identityMatcher(this.value,this.item)}get computedName(){return this.name||this.radioGroupName||this.controlName||""}get isFocusable(){return!this.readOnly&&this.computedFocusable}onChecked(t){t&&this.updateValue(void 0!==this.item?this.item:this.fallbackValue)}onFocused(t){this.updateFocused(t)}onFocusVisible(t){this.updateFocusVisible(t)}get radioGroupName(){return null===this.radioGroup?null:this.radioGroup.name}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(c.a5,10),e.Y36(e.sBO),e.Y36(Te.Pw),e.Y36(he),e.Y36(v,8))},o.\u0275cmp=e.Xpm({type:o,selectors:[["tui-radio"]],viewQuery:function(t,s){if(1&t&&e.Gf(Z,5),2&t){let r;e.iGM(r=e.CRH())&&(s.focusableElement=r.first)}},hostVars:3,hostBindings:function(t,s){2&t&&(e.uIk("data-size",s.size),e.ekj("_disabled",s.computedDisabled))},inputs:{item:"item",identityMatcher:"identityMatcher",name:"name",size:"size",pseudoDisabled:"pseudoDisabled"},features:[e._Bn([(0,ie.FT)(o),(0,re.wB)(o)]),e.qOj],decls:4,vars:12,consts:[["tuiWrapper","",3,"appearance","disabled","focus","hover","active","invalid"],["class","t-mark",4,"ngIf"],["type","radio",1,"t-native",3,"id","disabled","tuiChecked","tuiFocusable","tuiFocusedChange","tuiCheckedChange","tuiFocusVisibleChange"],["focusableElement",""],[1,"t-mark"]],template:function(t,s){1&t&&(e.TgZ(0,"div",0),e.YNc(1,W,1,1,"div",1),e.TgZ(2,"input",2,3),e.NdJ("tuiFocusedChange",function(a){return s.onFocused(a)})("tuiCheckedChange",function(a){return s.onChecked(a)})("tuiFocusVisibleChange",function(a){return s.onFocusVisible(a)}),e.qZA()()),2&t&&(e.Q6J("appearance",s.appearance)("disabled",s.computedDisabled)("focus",s.computedFocusVisible)("hover",s.pseudoHover)("active",s.pseudoActive)("invalid",s.computedInvalid),e.xp6(1),e.Q6J("ngIf",s.checked),e.xp6(1),e.Q6J("id",s.id)("disabled",s.computedDisabled)("tuiChecked",s.checked)("tuiFocusable",s.isFocusable),e.uIk("name",s.computedName))},dependencies:[pe.o,i.O5,T.t,de.t,C.U,J.q],styles:["[_nghost-%COMP%]{font:var(--tui-font-text-s);color:var(--tui-text-01);position:relative;display:block;flex-shrink:0;border-radius:100%}[data-size=m][_nghost-%COMP%]{width:1rem;height:1rem}[data-size=l][_nghost-%COMP%]{width:1.5rem;height:1.5rem}._readonly[_nghost-%COMP%]{pointer-events:none}.t-mark[_ngcontent-%COMP%]{position:absolute;background-color:currentColor;border-radius:100%}[data-size=m][_nghost-%COMP%]   .t-mark[_ngcontent-%COMP%]{margin:.25rem;width:.5rem;height:.5rem}[data-size=l][_nghost-%COMP%]   .t-mark[_ngcontent-%COMP%]{margin:.4375rem;width:.625rem;height:.625rem}.t-native[_ngcontent-%COMP%]{padding:0;margin:0;border:0;border-radius:inherit;background:none;font-size:inherit;line-height:inherit;font-weight:inherit;color:inherit;caret-color:currentColor;outline:none;-webkit-appearance:none;-moz-appearance:none;appearance:none;word-break:keep-all;-webkit-text-fill-color:currentColor;position:absolute;top:0;left:0;width:100%;height:100%;opacity:0;cursor:pointer}.t-native[_ngcontent-%COMP%]:-webkit-autofill, .t-native[_ngcontent-%COMP%]:-webkit-autofill:hover, .t-native[_ngcontent-%COMP%]:-webkit-autofill:focus{caret-color:var(--tui-base-09);border-radius:inherit;color:inherit!important;background-color:transparent!important;-webkit-text-fill-color:var(--tui-text-01)!important;border-color:var(--tui-autofill);-webkit-box-shadow:0 0 0 100rem var(--tui-autofill) inset!important}._disabled[_nghost-%COMP%]   .t-native[_ngcontent-%COMP%]{cursor:default}"],data:{animation:[fe.gI]},changeDetection:0}),(0,j.gn)([(0,G.TH)()],o.prototype,"identityMatcher",void 0),(0,j.gn)([(0,G.TH)()],o.prototype,"name",void 0),(0,j.gn)([(0,G.TH)()],o.prototype,"size",void 0),(0,j.gn)([(0,G.TH)()],o.prototype,"pseudoDisabled",void 0),o})(),P=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[i.ez,T.S,de.u,C.F,J.c,pe.W]]}),o})();const p=["*"];let b=(()=>{class o extends re.F9{constructor(t,s,r,a){super(t,s),this.modeDirective=r,this.options=a,this.size=this.options.size,this.identityMatcher=k.bg,this.pseudoDisabled=!1}get nativeFocusableElement(){return this.radio?this.radio.nativeFocusableElement:null}get focused(){return!!this.radio&&this.radio.focused}get computedDisabled(){return this.disabled||this.pseudoDisabled}get mode(){return this.modeDirective?this.modeDirective.mode:null}onFocused(t){this.updateFocused(t)}onModelChange(t){this.updateValue(t)}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(c.a5,10),e.Y36(e.sBO),e.Y36(te.w,8),e.Y36(he))},o.\u0275cmp=e.Xpm({type:o,selectors:[["tui-radio-labeled"]],viewQuery:function(t,s){if(1&t&&e.Gf(x,5),2&t){let r;e.iGM(r=e.CRH())&&(s.radio=r.first)}},hostVars:4,hostBindings:function(t,s){2&t&&(e.uIk("data-size",s.size)("data-mode",s.mode),e.ekj("_disabled",s.computedDisabled))},inputs:{item:"item",size:"size",identityMatcher:"identityMatcher",pseudoDisabled:"pseudoDisabled"},features:[e._Bn([(0,ie.FT)(o),(0,re.wB)(o)]),e.qOj],ngContentSelectors:p,decls:4,vars:15,consts:[[1,"t-wrapper"],[3,"focusable","identityMatcher","name","nativeId","readOnly","pseudoDisabled","pseudoInvalid","pseudoFocus","pseudoHover","pseudoActive","size","item","ngModel","ngModelChange","focusedChange"],[1,"t-content"]],template:function(t,s){1&t&&(e.F$t(),e.TgZ(0,"label",0)(1,"tui-radio",1),e.NdJ("ngModelChange",function(a){return s.onModelChange(a)})("focusedChange",function(a){return s.onFocused(a)}),e.qZA(),e.TgZ(2,"div",2),e.Hsn(3),e.qZA()()),2&t&&(e.xp6(1),e.Q6J("focusable",s.focusable)("identityMatcher",s.identityMatcher)("name",s.computedName||"")("nativeId",s.nativeId)("readOnly",s.readOnly)("pseudoDisabled",s.computedDisabled)("pseudoInvalid",s.computedInvalid)("pseudoFocus",s.pseudoFocus)("pseudoHover",s.pseudoHover)("pseudoActive",s.pseudoActive)("size",s.size)("item",s.item)("ngModel",s.value),e.xp6(1),e.ekj("t-content_disabled",s.computedDisabled))},dependencies:[x,c.JJ,c.On],styles:["[_nghost-%COMP%]{position:relative;display:block;font:var(--tui-font-text-s);line-height:1rem}._readonly[_nghost-%COMP%]{pointer-events:none}.t-wrapper[_ngcontent-%COMP%]{display:inline-flex;max-width:100%;cursor:pointer;vertical-align:top}._disabled[_nghost-%COMP%]   .t-wrapper[_ngcontent-%COMP%]{cursor:default}[data-mode=onDark][_nghost-%COMP%]   .t-wrapper[_ngcontent-%COMP%]{color:var(--tui-text-01-night)}.t-content[_ngcontent-%COMP%]{word-wrap:break-word;min-width:0}.t-content_disabled[_ngcontent-%COMP%]{opacity:var(--tui-disabled-opacity)}[data-size=m][_nghost-%COMP%]   .t-content[_ngcontent-%COMP%]{margin-left:.5rem}[data-size=l][_nghost-%COMP%]   .t-content[_ngcontent-%COMP%]{font:var(--tui-font-text-m);margin-left:.75rem}"],changeDetection:0}),(0,j.gn)([(0,G.TH)()],o.prototype,"size",void 0),(0,j.gn)([(0,G.TH)()],o.prototype,"identityMatcher",void 0),(0,j.gn)([(0,G.TH)()],o.prototype,"pseudoDisabled",void 0),o})(),_=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[i.ez,c.u5,de.u,C.F,P]]}),o})();var f=u(60946),Y=u(37378),ne=u(4053),ae=u(60117),ve=u(71115),ye=u(53861),xe=u(39367),we=u(13675),ke=u(87819),Pe=u(60101),Le=u(75407);function je(o,n){1&o&&(e.TgZ(0,"span",59),e._uU(1," An app by this title already exists. Please select another title "),e.qZA())}function Xe(o,n){1&o&&(e.TgZ(0,"span",59),e._uU(1," An app with this code already exists. Please select another code. "),e.qZA())}function et(o,n){if(1&o&&(e.TgZ(0,"div",60),e._UZ(1,"img",61),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("src",t.base64File,e.LSH)}}function tt(o,n){1&o&&(e.TgZ(0,"div",62)(1,"div",63),e._UZ(2,"img",64),e.qZA(),e.TgZ(3,"ul",65)(4,"li"),e._uU(5,"Only (JPEG, PNG, WEBP) extensions are allowed"),e.qZA(),e.TgZ(6,"li"),e._uU(7,"Up to 2MB file size is allowed"),e.qZA()()())}function nt(o,n){if(1&o&&(e.ynx(0),e.TgZ(1,"option",66),e._uU(2),e.qZA(),e.BQk()),2&o){const t=n.$implicit;e.xp6(1),e.Q6J("value",null==t?null:t.value),e.xp6(1),e.Oqu(null==t?null:t.label)}}function it(o,n){1&o&&(e.TgZ(0,"label",77),e._uU(1,"Add new companies"),e.qZA())}function ot(o,n){1&o&&(e.TgZ(0,"span",59),e._uU(1," Please provide a company name "),e.qZA())}function st(o,n){1&o&&(e.TgZ(0,"span",59),e._uU(1," A company with this name already exists. Please provide another name. "),e.qZA())}function rt(o,n){1&o&&(e.TgZ(0,"span",59),e._uU(1," Please provide a group code with upto 4 characters "),e.qZA())}function at(o,n){1&o&&(e.TgZ(0,"span",59),e._uU(1," A company with this code already exists. Please provide a different code. "),e.qZA())}function lt(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"button",78),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.submitNewCompany())}),e._uU(1,"Submit"),e.qZA()}}function ut(o,n){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",67)(2,"div",68)(3,"div",69),e.YNc(4,it,2,0,"label",70),e._UZ(5,"input",71),e.YNc(6,ot,2,0,"span",10),e.YNc(7,st,2,0,"span",10),e._UZ(8,"input",72),e.YNc(9,rt,2,0,"span",10),e.YNc(10,at,2,0,"span",10),e.qZA(),e.TgZ(11,"div",73)(12,"button",74),e.NdJ("click",function(){const a=e.CHM(t).index,m=e.oxw();return e.KtG(m.removeCompany(a))}),e.qZA()()(),e.TgZ(13,"div",75),e.YNc(14,lt,2,0,"button",76),e.qZA()(),e.BQk()}if(2&o){const t=n.index,s=n.first,r=n.last,a=e.oxw();e.xp6(1),e.Q6J("formGroupName",t),e.xp6(3),e.Q6J("ngIf",0==t),e.xp6(1),e.Q6J("ngClass",a.getValidityForCompany(t)?"is-invalid":""),e.xp6(1),e.Q6J("ngIf",a.getValidityForCompany(t)),e.xp6(1),e.Q6J("ngIf",a.getValidityForCompanyCodeExists(t)),e.xp6(1),e.Q6J("ngClass",a.getValidityForCompanyCode(t)?"is-invalid":""),e.xp6(1),e.Q6J("ngIf",a.getValidityForCompanyCode(t)),e.xp6(1),e.Q6J("ngIf",a.getValidityForCompanyCodeExistsGroup(t)),e.xp6(1),e.Q6J("ngClass",s?"mt-7":"mt-0"),e.xp6(3),e.Q6J("ngIf",r)}}function ct(o,n){if(1&o&&(e.ynx(0),e.TgZ(1,"option",66),e._uU(2),e.qZA(),e.BQk()),2&o){const t=n.$implicit;e.xp6(1),e.Q6J("value",null==t?null:t.value),e.xp6(1),e.Oqu(null==t?null:t.label)}}function dt(o,n){1&o&&(e.TgZ(0,"label",77),e._uU(1,"Add new categories"),e.qZA())}function mt(o,n){1&o&&(e.TgZ(0,"span",59),e._uU(1," Please provide a category name with upto 40 characters "),e.qZA())}function pt(o,n){1&o&&(e.TgZ(0,"span",59),e._uU(1," A category with this name already exists. Please provide a different name. "),e.qZA())}function _t(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"button",83),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(3);return e.KtG(r.submitNewCategory())}),e._uU(1,"Submit"),e.qZA()}if(2&o){const t=e.oxw().index,s=e.oxw(2);e.Q6J("disabled",s.getValidityForCategory(t)||s.getValidityForCategoryCode(t))}}function gt(o,n){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",67)(2,"div",68)(3,"div",69),e.YNc(4,dt,2,0,"label",70),e._UZ(5,"input",81),e.YNc(6,mt,2,0,"span",10),e.YNc(7,pt,2,0,"span",10),e.qZA(),e.TgZ(8,"div",73)(9,"button",74),e.NdJ("click",function(){const a=e.CHM(t).index,m=e.oxw(2);return e.KtG(m.removeCategory(a))}),e.qZA()()(),e.TgZ(10,"div",75),e.YNc(11,_t,2,1,"button",82),e.qZA()(),e.BQk()}if(2&o){const t=n.index,s=n.first,r=n.last,a=e.oxw(2);e.xp6(1),e.Q6J("formGroupName",t),e.xp6(3),e.Q6J("ngIf",0==t),e.xp6(1),e.Q6J("ngClass",a.getValidityForCategory(t)?"is-invalid":""),e.xp6(1),e.Q6J("ngIf",a.getValidityForCategory(t)),e.xp6(1),e.Q6J("ngIf",a.getValidityForCategoryCode(t)),e.xp6(1),e.Q6J("ngClass",s?"mt-7":"mt-0"),e.xp6(3),e.Q6J("ngIf",r)}}const ft=function(o){return{validation:"required",message:"Category is required",control:o}};function ht(o,n){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",19)(2,"label",6),e._uU(3,"Category Name "),e.TgZ(4,"span",7),e._uU(5,"*"),e.qZA()(),e.TgZ(6,"select",79),e.YNc(7,ct,3,2,"ng-container",21),e.qZA(),e.GkF(8,9),e.qZA(),e.TgZ(9,"div",22)(10,"p",23),e._uU(11,"If your desired category isn't listed, you can add it below"),e.qZA()(),e.ynx(12,80),e.YNc(13,gt,12,7,"ng-container",21),e.BQk(),e.TgZ(14,"button",25),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.addCategory())}),e.qZA(),e.BQk()}if(2&o){const t=e.oxw(),s=e.MAs(110);e.xp6(6),e.Q6J("ngClass",null!=t.f.categoryName&&t.f.categoryName.invalid&&null!=t.f.categoryName&&t.f.categoryName.dirty?"is-invalid":""),e.xp6(1),e.Q6J("ngForOf",t.categoryList),e.xp6(1),e.Q6J("ngTemplateOutlet",s)("ngTemplateOutletContext",e.VKq(5,ft,t.f.categoryName)),e.xp6(5),e.Q6J("ngForOf",t.categories.controls)}}function bt(o,n){1&o&&(e.TgZ(0,"span",59),e._uU(1,"Please select either AND or OR as the condition"),e.qZA())}function vt(o,n){1&o&&(e.TgZ(0,"span",59),e._uU(1," Please specify submission creator/s "),e.qZA())}function xt(o,n){1&o&&(e.ynx(0),e.TgZ(1,"option",101),e._uU(2,"AND"),e.qZA(),e.BQk())}function yt(o,n){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",86)(2,"label",6),e._uU(3),e.TgZ(4,"span",7),e._uU(5,"*"),e.qZA()(),e.TgZ(6,"custom-multi-select",87),e.NdJ("checkUsersLength",function(r){e.CHM(t);const a=e.oxw().index,m=e.oxw();return e.KtG(m.countUsers(r,a))})("approverList",function(r){e.CHM(t);const a=e.oxw().index,m=e.oxw();return e.KtG(m.getApproverList(r,a))}),e.qZA(),e.YNc(7,bt,2,0,"span",10),e.ALo(8,"async"),e.YNc(9,vt,2,0,"span",10),e.qZA(),e.TgZ(10,"div",86)(11,"label",88),e._uU(12,"Condition "),e.TgZ(13,"span",7),e._uU(14,"*"),e.qZA()(),e.TgZ(15,"select",89),e.NdJ("change",function(){e.CHM(t);const r=e.oxw().index,a=e.oxw();return e.KtG(a.validateSelection(r))}),e.YNc(16,xt,3,0,"ng-container",26),e.TgZ(17,"option",90),e._uU(18,"OR"),e.qZA(),e.TgZ(19,"option",91),e._uU(20,"NONE"),e.qZA()()(),e.TgZ(21,"div",92),e._UZ(22,"tui-tooltip",93),e.TgZ(23,"tui-badged-content",94)(24,"button",95),e.NdJ("click",function(){e.CHM(t);const r=e.oxw().index,a=e.oxw(),m=e.MAs(112);return e.KtG(a.openEmailNotifyModal(m,a.workflows,r))}),e.qZA()()(),e.TgZ(25,"div",96)(26,"div",97)(27,"tui-radio-labeled",98)(28,"div"),e._uU(29,"Any (Create)"),e.qZA(),e.TgZ(30,"div",99),e._uU(31,"Any user can create a new submission"),e.qZA()(),e.TgZ(32,"tui-radio-labeled",98)(33,"div"),e._uU(34,"Any (Create & Modify)"),e.qZA(),e.TgZ(35,"div",99),e._uU(36,"Any user can create a new submission and modify it's workflow"),e.qZA()(),e.TgZ(37,"tui-radio-labeled",98)(38,"div"),e._uU(39,"Disabled"),e.qZA(),e.TgZ(40,"div",99),e._uU(41,"Only Admin users can create and modify submissions"),e.qZA()()()(),e.TgZ(42,"div",100)(43,"button",74),e.NdJ("click",function(){e.CHM(t);const r=e.oxw().index,a=e.oxw();return e.KtG(a.removeWorkflowStep(r))}),e.qZA()(),e.BQk()}if(2&o){const t=e.oxw(),s=t.first,r=t.index,a=e.oxw(),m=e.MAs(114);let E;e.xp6(3),e.hij("",s?"Creators":"Approvers"," "),e.xp6(4),e.Q6J("ngIf",e.lcZ(8,13,a.showError)&&r===a.errorIndex),e.xp6(2),e.Q6J("ngIf",1==a.getValidityForWorkflowStep()),e.xp6(7),e.Q6J("ngIf",r>0),e.xp6(6),e.Q6J("content",m),e.xp6(1),e.Q6J("contentTop",null==(E=a.workflows.at(r).get("emailNotifyTo"))||null==E.value?null:E.value.length)("colorTop","green"),e.xp6(4),e.Q6J("formControl",a.accessTypeValue)("item",a.items[0]),e.xp6(5),e.Q6J("formControl",a.accessTypeValue)("item",a.items[1]),e.xp6(5),e.Q6J("formControl",a.accessTypeValue)("item",a.items[2])}}function Tt(o,n){1&o&&(e.TgZ(0,"span",59),e._uU(1,"Please select either AND or OR as the condition"),e.qZA())}function Ct(o,n){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",96)(2,"label",6),e._uU(3,"Approvers "),e.TgZ(4,"span",7),e._uU(5,"*"),e.qZA()(),e.TgZ(6,"custom-multi-select",87),e.NdJ("checkUsersLength",function(r){e.CHM(t);const a=e.oxw().index,m=e.oxw();return e.KtG(m.countUsers(r,a))})("approverList",function(r){e.CHM(t);const a=e.oxw().index,m=e.oxw();return e.KtG(m.getApproverList(r,a))}),e.qZA(),e.YNc(7,Tt,2,0,"span",10),e.ALo(8,"async"),e.qZA(),e.TgZ(9,"div",96)(10,"label",88),e._uU(11,"Condition "),e.TgZ(12,"span",7),e._uU(13,"*"),e.qZA()(),e.TgZ(14,"select",89),e.NdJ("change",function(){e.CHM(t);const r=e.oxw().index,a=e.oxw();return e.KtG(a.validateSelection(r))}),e.TgZ(15,"option",101),e._uU(16,"AND"),e.qZA(),e.TgZ(17,"option",90),e._uU(18,"OR"),e.qZA(),e.TgZ(19,"option",91),e._uU(20,"NONE"),e.qZA()()(),e.TgZ(21,"div",92),e._UZ(22,"tui-tooltip",93),e.TgZ(23,"tui-badged-content",94)(24,"button",95),e.NdJ("click",function(){e.CHM(t);const r=e.oxw().index,a=e.oxw(),m=e.MAs(112);return e.KtG(a.openEmailNotifyModal(m,a.workflows,r))}),e.qZA()()(),e.TgZ(25,"div",102)(26,"button",74),e.NdJ("click",function(){e.CHM(t);const r=e.oxw().index,a=e.oxw();return e.KtG(a.removeWorkflowStep(r))}),e.qZA()(),e.BQk()}if(2&o){const t=e.oxw().index,s=e.oxw(),r=e.MAs(114);let a;e.xp6(7),e.Q6J("ngIf",e.lcZ(8,4,s.showError)&&t===s.errorIndex),e.xp6(15),e.Q6J("content",r),e.xp6(1),e.Q6J("contentTop",null==(a=s.workflows.at(t).get("emailNotifyTo"))||null==a.value?null:a.value.length)("colorTop","green")}}function wt(o,n){if(1&o&&(e.ynx(0),e.TgZ(1,"p",84),e._uU(2),e.qZA(),e.TgZ(3,"div",85),e.YNc(4,yt,44,15,"ng-container",26),e.YNc(5,Ct,27,6,"ng-container",26),e.qZA(),e.BQk()),2&o){const t=n.index;e.xp6(2),e.hij("Step ",0===t?"1":t+1,""),e.xp6(1),e.Q6J("formGroupName",t),e.xp6(1),e.Q6J("ngIf",0==t),e.xp6(1),e.Q6J("ngIf",t>0)}}function St(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"a",103),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(),a=e.MAs(120);return e.KtG(r.openSummarySchemaDialog(a))}),e._uU(1," Summary & View Schema "),e.qZA()}}function At(o,n){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",106),e.NdJ("click",function(){const a=e.CHM(t).index,m=e.oxw(2);return e.KtG(m.activeIndex=a)}),e._uU(2),e.qZA(),e.BQk()}if(2&o){const t=n.$implicit;e.xp6(2),e.Oqu(t)}}function It(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"div",108)(1,"div",75)(2,"div",109)(3,"a",110),e.NdJ("click",function(){e.CHM(t);const r=e.oxw().index,a=e.oxw(2),m=e.MAs(124);return e.KtG(a.addDefaultData(r,m))}),e._UZ(4,"i",111),e.qZA(),e.TgZ(5,"a",112),e.NdJ("click",function(){e.CHM(t);const r=e.oxw().index,a=e.oxw(2);return e.KtG(a.sendFormForEdit(r))}),e._UZ(6,"i",113),e.qZA(),e.TgZ(7,"a",114),e.NdJ("click",function(){e.CHM(t);const r=e.oxw().index,a=e.oxw(2),m=e.MAs(122);return e.KtG(a.deleteFormDialog(m,r))}),e._UZ(8,"i",115),e.qZA()()(),e._UZ(9,"formio",116),e.qZA()}if(2&o){const t=e.oxw(),s=t.$implicit,r=t.index,a=e.oxw(2);e.xp6(9),e.Q6J("language",a.language)("options",a.options)("form",s)("submission",a.deafultFormSubmission[r])}}function Mt(o,n){if(1&o&&(e.ynx(0),e.YNc(1,It,10,4,"div",107),e.BQk()),2&o){const t=n.index,s=e.oxw(2);e.xp6(1),e.Q6J("ngIf",s.activeIndex==t)}}function Zt(o,n){if(1&o&&(e.ynx(0),e.TgZ(1,"section",104)(2,"nav",105),e.YNc(3,At,3,1,"ng-container",21),e.qZA(),e.YNc(4,Mt,2,1,"ng-container",21),e.qZA(),e.BQk()),2&o){const t=e.oxw();e.xp6(3),e.Q6J("ngForOf",t.formTabs),e.xp6(1),e.Q6J("ngForOf",t.formComponents)}}function Dt(o,n){1&o&&(e.ynx(0),e.TgZ(1,"div",117),e._UZ(2,"div",118),e.TgZ(3,"div",119),e._UZ(4,"div",120)(5,"div",120),e.qZA(),e.TgZ(6,"div",119),e._UZ(7,"div",121)(8,"div",121),e.qZA()(),e.BQk())}function kt(o,n){if(1&o&&(e.ynx(0),e.TgZ(1,"div",122)(2,"span",123),e._uU(3),e.qZA()(),e.BQk()),2&o){const t=e.oxw().message;e.xp6(3),e.hij(" ",t," ")}}function Ut(o,n){if(1&o&&e.YNc(0,kt,4,1,"ng-container",26),2&o){const t=n.control;e.Q6J("ngIf",t.hasError(n.validation)&&(t.dirty||t.touched))}}function Ot(o,n){if(1&o&&e._UZ(0,"tui-data-list-wrapper",132),2&o){const t=e.oxw(2);e.Q6J("items",t.userListForEmail)}}function Et(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"p",124),e._uU(1,"Email Notification Users"),e.qZA(),e.TgZ(2,"p",125),e._uU(3," Please specify the users you want to send the notification email to "),e.qZA(),e.TgZ(4,"div",126)(5,"tui-input-tag",127),e.NdJ("searchChange",function(r){e.CHM(t);const a=e.oxw();return e.KtG(a.onSearchChange(r))}),e._uU(6," Type to search and press Enter to select... "),e.YNc(7,Ot,1,1,"tui-data-list-wrapper",128),e.qZA()(),e.TgZ(8,"div",129)(9,"button",130),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.validateEmails())}),e._uU(10," Confirm "),e.qZA(),e.TgZ(11,"button",131),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.cancelEmailNotify())}),e._uU(12," Cancel "),e.qZA()()}if(2&o){const t=e.oxw();e.xp6(5),e.Q6J("formControl",null==t.currentFieldArray||null==t.currentFieldArray.controls[t.activeEmailIndex]?null:t.currentFieldArray.controls[t.activeEmailIndex].controls.emailNotifyTo)("tuiTextfieldLabelOutside",!0)}}function Nt(o,n){1&o&&(e.TgZ(0,"strong",133),e._uU(1,"How conditions work?"),e.qZA(),e._UZ(2,"hr"),e.TgZ(3,"ul",134)(4,"li")(5,"strong"),e._uU(6,"AND"),e.qZA(),e._uU(7," implies that every user of the step must provide approval"),e.qZA(),e.TgZ(8,"li",22)(9,"strong"),e._uU(10,"OR"),e.qZA(),e._uU(11," implies that any one of the users may provide approval"),e.qZA(),e.TgZ(12,"li")(13,"strong"),e._uU(14,"NONE"),e.qZA(),e._uU(15," implies that there is only one user per step and hence no conditon is necessary"),e.qZA()())}function Ft(o,n){1&o&&(e.TgZ(0,"strong",135),e._uU(1,"Admin Users"),e.qZA(),e._UZ(2,"hr"),e.TgZ(3,"p",136),e._uU(4," Admin Users have access to create, delete and modify submissions as well as child apps within a specified application "),e.qZA())}function Pt(o,n){1&o&&(e.TgZ(0,"strong",135),e._uU(1,"View Only Users"),e.qZA(),e._UZ(2,"hr"),e.TgZ(3,"p",136),e._uU(4," View Only Users have read-only access. They may view submissions and child apps but may not modify or delete them "),e.qZA())}function Lt(o,n){if(1&o&&e._UZ(0,"tui-data-list-wrapper",132),2&o){const t=e.oxw(2);e.Q6J("items",t.summarySchemaFields)}}function Jt(o,n){if(1&o&&e._UZ(0,"tui-data-list-wrapper",132),2&o){const t=e.oxw(3);e.Q6J("items",null==t.schemaForm||null==t.schemaForm.controls.summarySchema?null:t.schemaForm.controls.summarySchema.value)}}function Bt(o,n){if(1&o&&e._UZ(0,"tui-data-list-wrapper",132),2&o){const t=e.oxw(3);e.Q6J("items",t.selectItems)}}function Qt(o,n){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",147)(2,"tui-select",148),e._uU(3," View schema field "),e.YNc(4,Jt,1,1,"tui-data-list-wrapper",128),e.qZA(),e.TgZ(5,"tui-input",149),e._UZ(6,"input",150),e.TgZ(7,"p",134),e._uU(8,"Field label"),e.qZA()(),e.TgZ(9,"tui-select",151),e._uU(10," Specify data type "),e._UZ(11,"input",152),e.YNc(12,Bt,1,1,"tui-data-list-wrapper",128),e.qZA(),e.TgZ(13,"button",153),e.NdJ("click",function(){const a=e.CHM(t).index,m=e.oxw(2);return e.KtG(m.deleteViewSchema(a))}),e.qZA()(),e.BQk()}if(2&o){const t=n.index;e.xp6(1),e.Q6J("formGroupName",t),e.xp6(1),e.Q6J("tuiTextfieldLabelOutside",!0),e.xp6(3),e.Q6J("tuiTextfieldLabelOutside",!0),e.xp6(1),e.Q6J("tuiTextfieldLabelOutside",!0)}}function Vt(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"h2",137),e._uU(1,"Modify Summary & View Schema"),e.qZA(),e.TgZ(2,"div",138)(3,"label",139),e._uU(4,"Summary Schema "),e.TgZ(5,"sup"),e._uU(6,"(Optional)"),e.qZA()(),e.TgZ(7,"tui-multi-select",140),e.NdJ("ngModelChange",function(r){e.CHM(t);const a=e.oxw();return e.KtG(a.applySummarySchemaValuesToViewSchema(r))}),e._uU(8," Summary schema fields "),e.YNc(9,Lt,1,1,"tui-data-list-wrapper",128),e.qZA(),e.TgZ(10,"p",141),e._uU(11,"Type the fieldname and press Enter to add. e.g. formKey.fieldValue"),e.qZA(),e.TgZ(12,"div",45),e.ynx(13,142),e.TgZ(14,"label",139),e._uU(15,"View Schema "),e.TgZ(16,"sup"),e._uU(17,"(Optional)"),e.qZA()(),e.YNc(18,Qt,14,4,"ng-container",21),e.TgZ(19,"div",143)(20,"button",144),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.addViewSchema())}),e.qZA()(),e.BQk(),e.qZA()(),e.TgZ(21,"div",145)(22,"button",146),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.setSummaryAndViewSchema())}),e._uU(23," Confirm "),e.qZA(),e.TgZ(24,"button",50),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.closeSchemaDialog())}),e._uU(25," Cancel "),e.qZA()()}if(2&o){const t=e.oxw();e.xp6(2),e.Q6J("formGroup",t.schemaForm),e.xp6(5),e.Q6J("tuiTextfieldLabelOutside",!0),e.xp6(11),e.Q6J("ngForOf",t.viewSchema.controls)}}function Rt(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"p",154),e._uU(1,"Delete Form"),e.qZA(),e.TgZ(2,"p",155),e._uU(3,"Are you sure you want to delete this form?"),e.qZA(),e.TgZ(4,"div",156)(5,"button",157),e.NdJ("click",function(){const a=e.CHM(t).$implicit;return e.oxw().deleteForm(),e.KtG(a.complete())}),e._uU(6," Confirm "),e.qZA(),e.TgZ(7,"button",130),e.NdJ("click",function(){const a=e.CHM(t).$implicit;return e.KtG(a.complete())}),e._uU(8," Cancel "),e.qZA()()}}function qt(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"h2",137),e._uU(1,"Add default data"),e.qZA(),e.TgZ(2,"div",158)(3,"formio",159),e.NdJ("change",function(r){e.CHM(t);const a=e.oxw();return e.KtG(a.onChangeForm(r))}),e.qZA()(),e.TgZ(4,"div",160)(5,"button",146),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.confirmDefaultSubmission())}),e._uU(6," Confirm "),e.qZA(),e.TgZ(7,"button",50),e.NdJ("click",function(){const a=e.CHM(t).$implicit;return e.KtG(a.complete())}),e._uU(8," Cancel "),e.qZA()()}if(2&o){const t=e.oxw();e.xp6(3),e.Q6J("options",t.options)("form",t.formForDefaultData)("submission",t.deafultFormSubmission[t.defaultFormIndex])}}const Yt=function(o){return{validation:"required",message:"App Title is required",control:o}},Kt=function(o){return{validation:"required",message:"App code is required",control:o}},Gt=function(o){return{validation:"maxlength",message:"App code should not exceed 7 characters",control:o}},$t=function(o){return{validation:"required",message:"A Description is required",control:o}},Ht=function(o){return{validation:"required",message:"Company is required",control:o}};class Ue{constructor(n,t,s,r,a,m,E,me,be){this.fb=n,this.auth=t,this.transportService=s,this.router=r,this.dashboard=a,this.activatedRoute=m,this.notif=E,this.dialogs=me,this.media=be,this.formKeys=[],this.formComponents=[],this.activeIndex=0,this.language=new e.vpe,this.langItems=[{name:"en"},{name:"ar"}],this.languageForm=new c.cw({languages:new c.NI(this.langItems[0])}),this.conditions=["OR","AND","ANY"],this.formTabs=[],this.subModuleFormIoValue=new D.X({}),this.destroy$=new y.x,this.isCreatingSubModule=new y.x,this.isSavingAsDraft=new y.x,this.domainURL=window.location.origin,this.userListForEmail=[],this.search$=new y.x,this.saveDialogSubscription=[],this.schemaSubscription=[],this.limit=10,this.page=0,this.showError=new y.x,this.errorIndex=0,this.parentIDUnAssigned=!1,this.items=[{name:"anyCreate"},{name:"anyCreateAndModify"},{name:"disabled"}],this.selectItems=["Text","Number","Date"],this.formKeysForViewSchema=[],this.summarySchemaFields=[],this.schemaForm=new c.cw({summarySchema:new c.NI([]),viewSchema:new c.Oe([new c.cw({fieldKey:new c.NI(""),displayAs:new c.NI(""),type:new c.NI(this.selectItems[0])})])}),this.deafultFormSubmission=[],this.defaultFormSubscription=[],this.initSubModuleForm(),this.accessTypeValue=new c.NI(this.items[2]),this.submoduleFromLS=this.transportService.subModuleDraft.value,this.activatedRoute.queryParams.pipe((0,h.R)(this.destroy$)).subscribe(O=>{Object.keys(O).length>0?(this.parentIDUnAssigned=!0,this.getDefaultWorkflowByModule(),this.getAllCategories(),this.categoryIdForMatch=O.parentID):this.getDefaultWorkflowBySubModule()}),this.getAllCompanies(),this.formComponents=this.transportService.formBuilderData.value,this.formTabs=this.formComponents.map(O=>O.title),JSON.parse(JSON.stringify(this.formComponents))?.map(O=>{this.formKeys?.push({[O.key]:U.cQ.flattenComponents(O?.components,!0)})}),this.summarySchemaFields=this.formKeys.flatMap(O=>(0,K.oX)(O)),this.formKeysForViewSchema=this.summarySchemaFields,this.search$.pipe((0,B.w)(O=>this.dashboard.getAllUsersForListing(this.limit,this.page,O)),(0,h.R)(this.destroy$)).subscribe(O=>{O&&(this.userListForEmail=O?.results?.map(_e=>_e?.email))}),this.dashboard.getAllUsersForListing(this.limit,this.page).pipe((0,h.R)(this.destroy$)).subscribe(O=>{O&&(this.userListForEmail=O?.results?.map(_e=>_e?.email))})}ngOnInit(){this.activatedRoute.queryParams.pipe((0,h.R)(this.destroy$)).subscribe(n=>{if(0==Object.keys(n).length){const t=(0,d.rV)(d.MX.navHierarchy);t&&this.dashboard.previousRoute&&this.dashboard.previousRoute.includes("isParent"),t.forEach(s=>{s.routerLink=`/modules/${s.code}?moduleID=${(0,d.rV)(d.MX.moduleID)}`}),this.dashboard.items=[...t,{caption:this.transportService?.subModuleDraft?.value?.title||"Add App",routerLink:`/modules/add-module/${(0,d.rV)(d.MX.moduleID)}`}]}})}applySummarySchemaValuesToViewSchema(n){n?.forEach((t,s)=>{this.schemaForm?.controls.viewSchema?.value?.forEach((r,a)=>{r?.fieldKey!==t&&this.schemaForm?.controls.viewSchema?.removeAt(a)})}),0==n?.length&&this.schemaForm?.controls.viewSchema?.removeAt(0)}checkIfLabelIsUnique(){return new Set(this.schemaForm.controls.viewSchema.value?.map(t=>t?.displayAs)).size===this.schemaForm.controls.viewSchema.value?.length}get viewSchema(){return this.schemaForm.controls.viewSchema}addViewSchema(){const n=this.fb.group({fieldKey:new c.NI(""),displayAs:new c.NI(""),type:new c.NI(this.selectItems[0])});this.viewSchema.push(n)}deleteViewSchema(n){this.viewSchema.removeAt(n)}getDefaultWorkflowByModule(){this.activatedRoute.params.pipe((0,h.R)(this.destroy$)).subscribe(n=>{n.id&&(!1===this.parentIDUnAssigned&&(this.parentID=n.id),this.redirectToModuleID=n.id,this.transportService.moduleID.next(n.id),Object.keys(this.submoduleFromLS)?.length>0&&(this.initSubModuleForm(this.submoduleFromLS),this.base64File=this.submoduleFromLS?.image,this.file=this.submoduleFromLS?.file))})}getDefaultWorkflowBySubModule(){this.activatedRoute.params.pipe((0,h.R)(this.destroy$)).subscribe(n=>{n.id&&(!1===this.parentIDUnAssigned&&(this.parentID=n.id),this.redirectToModuleID=n.id,this.transportService.moduleID.next(n.id),this.dashboard.getWorkflowFromSubModule(n.id).pipe((0,h.R)(this.destroy$)).subscribe(t=>{t&&(this.categoryId=t?.categoryId,this.initSubModuleForm(t?.response)),Object.keys(this.submoduleFromLS)?.length>0&&(this.initSubModuleForm(this.submoduleFromLS),this.base64File=this.submoduleFromLS?.image,this.file=this.submoduleFromLS?.file)}))})}openEmailNotifyModal(n,t,s){this.activeEmailIndex=s,this.currentFieldArray=t,this.saveDialogSubscription.push(this.dialogs.open(n,{dismissible:!1,closeable:!1}).subscribe())}onSearchChange(n){this.search$.next(n)}validateEmails(){let n=this.workflows.at(this.activeEmailIndex)?.get("emailNotifyTo")?.value;n=n.map(t=>!!/\S+@\S+\.\S+/.test(t)),n.includes(!1)?this.notif.displayNotification("Please provide valid email addresses","Email Notify","warning"):this.saveDialogSubscription.forEach(t=>t.unsubscribe())}cancelEmailNotify(){this.workflows.at(this.activeEmailIndex)?.get("emailNotifyTo")?.setValue([]),this.saveDialogSubscription.forEach(n=>n.unsubscribe())}getAllCompanies(){this.dashboard.getAllCompanies(20,0).pipe((0,h.R)(this.destroy$)).subscribe(n=>{this.companyList=n.results?.map(t=>({value:t?.id,label:t?.title}))})}getAllCategories(){this.dashboard.getAllCategories(20).pipe((0,h.R)(this.destroy$)).subscribe(n=>{this.categoryList=n.results?.map(r=>({value:r?.id,label:r?.name}));let t=this.categoryList;t=t?.filter(r=>r?.value==this.categoryIdForMatch)[0],this.subModuleForm?.get("categoryName")?.value||this.subModuleForm?.get("categoryName")?.setValue(t?.value)})}initSubModuleForm(n){this.subModuleForm=this.fb.group({companies:this.fb.array([]),categories:this.fb.array([]),code:[n?.code||null,c.kI.compose([c.kI.required,c.kI.maxLength(7)]),[K.Iw.createValidator(this.dashboard,"submodule")]],companyName:[n?.companyName||null,c.kI.required],categoryName:[n?.categoryName||null,c.kI.required],adminUsers:[n?.adminUsers||[],c.kI.required],viewOnlyUsers:[n?.viewOnlyUsers||[],c.kI.required],title:[n?.title||null,c.kI.compose([c.kI.required]),[K.Iw.createValidator(this.dashboard,"submodule","title")]],image:[n?.image||null,c.kI.required],description:[n?.description||null,c.kI.required],workflows:this.fb.array(n?.workflows?n?.workflows?.map(t=>this.fb.group({condition:[t.condition,c.kI.required],approverIds:[t.approverIds,c.kI.required],emailNotifyTo:[t.emailNotifyTo||[],c.kI.required]})):n?.map(t=>this.fb.group({condition:[t.condition,c.kI.required],approverIds:[t.approverIds,c.kI.required],emailNotifyTo:[t.emailNotifyTo||[],c.kI.required]}))||[this.fb.group({condition:[null,c.kI.required],approverIds:[[],c.kI.required],emailNotifyTo:[[],c.kI.required]})])})}onFileSelect(n){const t=n?.target?.files[0];if(1==(0,K.QG)(t)){this.file=t;const s=new FileReader;s.readAsDataURL(t),s.onload=r=>{this.base64File=s.result}}else this.notif.displayNotification("Allowed file types are JPG/PNG/WebP. File size cannot exceed 2MB","File Upload","warning")}get f(){return this.subModuleForm.controls}get companies(){return this.f.companies}addCompany(){const n=this.fb.group({title:["",c.kI.compose([c.kI.required]),[K.Iw.createValidator(this.dashboard,"company","title")]],groupCode:["",c.kI.compose([c.kI.required,c.kI.minLength(3),c.kI.maxLength(4)]),[K.Iw.createValidator(this.dashboard,"company")]]});this.companies.push(n)}getValidityForCompany(n){return this.companies.controls[n]?.get("title").hasError("required")&&this.companies.controls[n]?.get("title").dirty}getValidityForCompanyCode(n){return(this.companies.controls[n]?.get("groupCode").hasError("required")||this.companies.controls[n]?.get("groupCode").hasError("maxlength")||this.companies.controls[n]?.get("groupCode").hasError("minlength"))&&this.companies.controls[n]?.get("groupCode").dirty}getValidityForWorkflowStep(){return this.workflows.controls[0]?.get("approverIds")?.hasError("required")&&this.workflows.controls[0]?.get("approverIds")?.touched}getValidityForCompanyCodeExists(n){return this.companies.controls[n]?.get("title")?.hasError("codeExists")}getValidityForCompanyCodeExistsGroup(n){return this.companies.controls[n]?.get("groupCode")?.hasError("codeExists")}getValidityForCategory(n){return this.categories.controls[n].hasError("required")&&this.categories.controls[n].touched}getValidityForCategoryCode(n){return this.categories.controls[n]?.get("name").hasError("codeExists")}removeCompany(n){this.companies.removeAt(n)}get categories(){return this.f.categories}addCategory(){const n=this.fb.group({name:["",c.kI.compose([c.kI.required,c.kI.maxLength(40)]),[K.Iw.createValidator(this.dashboard,"category")]]});this.categories.push(n)}removeCategory(n){this.categories.removeAt(n)}get workflows(){return this.f.workflows}addWorkflowStep(){const n=this.fb.group({condition:["",c.kI.required],approverIds:[[],c.kI.required],emailNotifyTo:[[],c.kI.required]});this.workflows.push(n)}removeWorkflowStep(n){this.workflows.removeAt(n)}getApproverList(n,t){this.workflows.at(t)?.get("approverIds")?.setValue(n)}submitNewCompany(){let n=[];for(let t=0;t<this.f.companies?.value?.length;t++)n.push(this.dashboard.addCompany({title:this.f.companies?.value[t]?.title,groupCode:this.f.companies?.value[t]?.groupCode}).pipe((0,h.R)(this.destroy$)));n.length>0&&(0,q.D)(n).subscribe(t=>{if(t&&!t.includes(void 0)){for(let s=t?.length;s>0;s--)this.companies.removeAt(0),this.companies.removeAt(s),this.companies.reset();this.getAllCompanies()}})}submitNewCategory(){this.dashboard.addCategory({name:this.f.categories?.value[0]?.name}).pipe((0,h.R)(this.destroy$)).subscribe(t=>{t&&(this.categories.reset(),this.categories.removeAt(0),this.getAllCategories())})}saveDraft(){this.transportService.isFormEdit.next(!1),this.transportService.saveDraftLocally({...this.subModuleForm.value,image:this.base64File,file:this.file});let n=this.workflows?.value?.flatMap(t=>t?.approverIds?.map(s=>({id:s.id,name:s.name})));if(0==n.length)return this.notif.displayNotification("Please create a default workflow before adding forms","Default Workflow","warning");(0,d.LS)(d.MX.editBreadcrumbs,this.dashboard.items),(0,d.LS)(d.MX.approvers,n),this.categoryIdForMatch?this.router.navigate(["/forms/form-builder"],{queryParams:{isParent:!0}}):this.router.navigate(["/forms/form-builder"])}addDefaultData(n,t){this.formForDefaultData=this.formComponents[n],this.defaultFormIndex=n,this.defaultFormSubscription.push(this.dialogs.open(t,{dismissible:!1,closeable:!1,size:"page"}).subscribe())}onChangeForm(n){n?.data&&n?.changed&&1==n.isModified&&(n?.data?.file&&n?.data?.file?.forEach(t=>{t.url=t?.data?.baseUrl.split("v1")[0]+t?.data?.fileUrl}),this.deafultFormSubmission[this.defaultFormIndex]={data:n?.data})}confirmDefaultSubmission(){this.formComponents[this.defaultFormIndex].defaultData=this.deafultFormSubmission[this.defaultFormIndex],this.defaultFormSubscription.forEach(n=>n.unsubscribe())}sendFormForEdit(n){this.transportService.isFormEdit.next(!0),this.transportService.sendFormDataForEdit.next(this.formComponents[n]),(0,d.LS)(d.MX.editBreadcrumbs,this.dashboard.items),this.transportService.saveDraftLocally({...this.subModuleForm.value,image:this.base64File,file:this.file}),this.router.navigate(["/forms/form-builder"])}deleteFormDialog(n,t){this.delIndex=t,this.dialogs.open(n,{dismissible:!0,closeable:!0}).pipe((0,h.R)(this.destroy$)).subscribe()}deleteForm(){this.formComponents.splice(this.delIndex,1),this.formTabs.splice(this.delIndex,1)}changeLanguage(n){this.language.emit(n)}setSummaryAndViewSchema(){return 0==this.checkIfLabelIsUnique()?this.notif.displayNotification("Field labels must be unique","Schema Controls","warning"):this.schemaForm?.value?.viewSchema[0]?.displayAs?(this.schemaSubscription.forEach(n=>n.unsubscribe()),void console.log(this.schemaForm.value)):this.notif.displayNotification("Please provide all data","Form Schema","warning")}closeSchemaDialog(){this.schemaForm?.reset(),this.schemaSubscription.forEach(n=>n.unsubscribe())}saveSubModule(n){if(!n){if(0==this.dataSubmitValidation())return this.subModuleForm.markAllAsTouched(),this.notif.displayNotification("Please provide complete data for all fields","Create module","warning");if(this.workflows.controls.map(s=>s.get("approverIds")?.value.length>1&&s.get("condition")?.value).includes("none"))return this.notif.displayNotification("Please provide valid condition for the workflow step/s","Create module","warning")}let t={title:this.subModuleForm.get("title")?.value,description:this.subModuleForm.get("description")?.value,url:`/modules/module-details/${this.subModuleForm.get("title")?.value.replace(/\s/g,"-").toLowerCase()}`,companyId:this.subModuleForm.get("companyName")?.value,categoryId:this.subModuleForm.get("categoryName")?.value?this.subModuleForm.get("categoryName")?.value:this.categoryId,code:this.subModuleForm.get("code")?.value,adminUsers:this.subModuleForm.get("adminUsers")?.value?.map(s=>s?.id),viewOnlyUsers:this.subModuleForm.get("viewOnlyUsers")?.value?.map(s=>s?.id),formIds:this.formComponents,parentId:!0===this.parentIDUnAssigned?void 0:this.parentID,steps:this.workflows?.value?.map(s=>({approverIds:s?.approverIds?.map(r=>r.id?r.id:r),condition:s?.condition,emailNotifyTo:s?.emailNotifyTo||[]})),summarySchema:this.schemaForm.value?.summarySchema?.length>0?this.schemaForm.value?.summarySchema:void 0,viewSchema:this.schemaForm.value?.viewSchema[0]?.displayAs?this.schemaForm.value?.viewSchema:void 0,accessType:"disabled"!==this.accessTypeValue?.value?.name?this.accessTypeValue?.value?.name:void 0};n?this.isSavingAsDraft.next(!0):this.isCreatingSubModule.next(!0),this.file?this.media.uploadMedia(this.file).pipe((0,h.R)(this.destroy$)).subscribe(s=>{s.hasErrors()?(this.isCreatingSubModule.next(!1),this.isSavingAsDraft.next(!1)):(t={...t,image:s?.data?.fileUrl},n&&Object.assign(t,{status:n}),this.dashboard.createSubModule(t).pipe((0,h.R)(this.destroy$)).subscribe(r=>{r?(this.isCreatingSubModule.next(!1),this.isSavingAsDraft.next(!1),this.transportService.saveDraftLocally({}),this.transportService.sendFormBuilderData([{title:"",key:"",display:"",components:[]}]),this.routeToBasedOnPreviousPage()):(this.isCreatingSubModule.next(!1),this.isSavingAsDraft.next(!1))}))}):this.dashboard.createSubModule(t).pipe((0,h.R)(this.destroy$)).subscribe(s=>{s?(this.isCreatingSubModule.next(!1),this.isSavingAsDraft.next(!1),this.transportService.saveDraftLocally({}),this.transportService.sendFormBuilderData([{title:"",key:"",display:"",components:[]}]),this.routeToBasedOnPreviousPage()):(this.isCreatingSubModule.next(!1),this.isSavingAsDraft.next(!1))})}routeToBasedOnPreviousPage(){this.activatedRoute.queryParams.pipe((0,h.R)(this.destroy$)).subscribe(n=>{Object.keys(n).length>0?this.router.navigate(["/dashboard/home"]):this.router.navigate(["/modules",(0,d.rV)(d.MX.moduleSlug)||""],{queryParams:{moduleID:(0,d.rV)(d.MX.moduleID)||""}})})}cancelSubmodule(){this.routeToBasedOnPreviousPage()}dataSubmitValidation(){return!(this.f.companyName?.invalid||0==this.workflows?.length||this.workflows.controls.map(n=>0==n.get("approverIds")?.value.length).includes(!0)||!0===this.workflows.controls.map(n=>n.get("condition")?.value).includes(""))}validateSelection(n){return this.errorIndex=n,this.workflows.at(n)?.get("approverIds")?.value?.length<2?(this.workflows.at(n)?.get("condition")?.setValue("none"),this.notif.displayNotification('Default condition of "None" will be used if the number of approvers is less than 2',"Create module","info"),this.showError.next(!1)):this.workflows.at(n)?.get("approverIds")?.value?.length>=2&&"none"==this.workflows.at(n)?.get("condition")?.value?this.showError.next(!0):void this.showError.next(!1)}countUsers(n,t){return this.errorIndex=t,n<2?(this.workflows.at(t)?.get("condition")?.setValue("none"),this.notif.displayNotification('Default condition of "None" will be used if the number of approvers is less than 2',"Create Module","info"),this.showError.next(!1)):n>=2&&"none"==this.workflows.at(t)?.get("condition")?.value?this.showError.next(!0):void this.showError.next(!1)}setAdminUsers(n){this.subModuleForm?.get("adminUsers")?.setValue(n)}setViewUsers(n){this.subModuleForm?.get("viewOnlyUsers")?.setValue(n)}openSummarySchemaDialog(n){this.schemaSubscription.push(this.dialogs.open(n,{dismissible:!1,closeable:!1,size:"page"}).subscribe())}ngOnDestroy(){this.destroy$.complete(),this.destroy$.unsubscribe()}}Ue.\u0275fac=function(n){return new(n||Ue)(e.Y36(c.qu),e.Y36(se.e),e.Y36($.R),e.Y36(l.F0),e.Y36(ee.s),e.Y36(l.gz),e.Y36(R.T),e.Y36(A.RO),e.Y36(H))},Ue.\u0275cmp=e.Xpm({type:Ue,selectors:[["ng-component"]],decls:125,vars:49,consts:[[1,"w-11/12","h-auto","min-h-screen","mx-auto","mt-52","pb-44"],[1,"text-xl","font-semibold","text-center"],[1,"text-lg","font-semibold","bg-[#EAE4D8]","px-2","py-2","rounded-md","mt-2"],[1,"block","pt-5",3,"formGroup"],[1,"grid","grid-cols-12","gap-3"],[1,"col-span-6","mt-3","mb-5"],[1,"block","pb-1"],[1,"text-xs","text-red-400"],["required","","formControlName","title","type","text",1,"form-control",3,"ngClass"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["class","text-xs text-red-500",4,"ngIf"],["required","","formControlName","code","type","text",1,"form-control",3,"ngClass"],[1,"col-span-6","mt-3","mb-3"],["required","","formControlName","description","type","text","rows","6",1,"form-control",3,"ngClass"],["for","dropzone-file",1,"flex","flex-col","items-center","justify-center","w-full","h-[9.85rem]","border-2","border-gray-300","border-dashed","rounded-md","cursor-pointer","bg-gray-50","hover:bg-gray-100",3,"change"],[3,"inheritColor","size","showLoader","overlay"],["class","flex justify-center",4,"ngIf"],["class","flex justify-start",4,"ngIf"],["id","dropzone-file","type","file",1,"hidden"],[1,"my-7"],["required","","formControlName","companyName","type","text",1,"form-control",3,"ngClass"],[4,"ngFor","ngForOf"],[1,"my-2"],[1,"text-xs","text-gray-500"],["formArrayName","companies"],["tuiIconButton","","type","button","size","m","appearance","secondary","icon","tuiIconPlusLarge",3,"click"],[4,"ngIf"],[1,"mt-10"],[1,"grid","grid-cols-12","gap-3","my-8"],[1,"col-span-6"],[1,"block","pb-1","text-sm"],["direction","right",1,"",3,"content"],["formControlName","adminUsers",3,"approverList"],["formControlName","viewOnlyUsers",3,"approverList"],[1,"mt-12","mb-16"],[1,"py-2","mb-3","text-lg","font-semibold"],["formArrayName","workflows"],["tuiIconButton","","type","button","size","m","appearance","primary","icon","tuiIconPlusLarge",3,"click"],[1,"mb-5","mt-7"],[1,"flex","justify-between","bg-[#EAE4D8]","px-2","py-2","rounded-md","mb-3"],[1,"text-lg","font-semibold"],["class","px-2.5 py-2 text-white bg-blue-500 rounded-md cursor-pointer hover:text-white",3,"click",4,"ngIf"],[1,"mt-3","text-base","font-semibold","text-center"],[1,"flex","flex-col","w-full","px-5","mx-auto","mt-3","border","border-gray-400","border-dashed","rounded-md","bg-gray-50"],[1,"w-full","mx-auto","my-1"],[1,"mt-7"],[1,"px-5","py-3","rounded-lg","bg-[#a58f81]","no-underline","text-white","cursor-pointer","hover:text-white",3,"click"],[1,"flex","justify-center","gap-2","mt-10"],["tuiButton","","type","button","size","m","appearance","primary",3,"showLoader","click"],["tuiButton","","type","button","size","m","appearance","secondary",3,"showLoader","click"],["tuiButton","","type","button","size","m","appearance","accent",3,"click"],["formError",""],["template",""],["hint",""],["hintAdmin",""],["hintViewOnly",""],["summarySchemaTemplate",""],["deltemplate",""],["defaultForm",""],[1,"text-xs","text-red-500"],[1,"flex","justify-center"],["alt","app_icon","width","100","height","130",1,"rounded-md",3,"src"],[1,"flex","justify-start"],[1,"mx-8","mt-1"],["src","../../../../../assets/windows.svg","width","32","height","32"],[1,"text-sm","text-gray-400","list-disc"],[3,"value"],[1,"w-7/12","px-8",3,"formGroupName"],[1,"flex","items-center","justify-between","w-full","gap-2","mb-3"],[1,"w-full"],["class","block pb-2 text-xs font-semibold",4,"ngIf"],["formControlName","title","type","text",1,"form-control",3,"ngClass"],["formControlName","groupCode","type","text",1,"mt-3","form-control",3,"ngClass"],[3,"ngClass"],["tuiIconButton","","type","button","size","s","appearance","secondary-destructive","icon","tuiIconTrash2Large",3,"click"],[1,"flex","justify-end"],["tuiButton","","type","button","class","mb-3","size","m",3,"click",4,"ngIf"],[1,"block","pb-2","text-xs","font-semibold"],["tuiButton","","type","button","size","m",1,"mb-3",3,"click"],["required","","formControlName","categoryName","type","text",1,"form-control",3,"ngClass"],["formArrayName","categories"],["formControlName","name","type","text",1,"form-control",3,"ngClass"],["tuiButton","","type","button","class","mb-3","size","m",3,"disabled","click",4,"ngIf"],["tuiButton","","type","button","size","m",1,"mb-3",3,"disabled","click"],[1,"text-base","font-semibold","mt-7"],[1,"grid","grid-cols-12","gap-3","my-4",3,"formGroupName"],[1,"col-span-3"],["formControlName","approverIds",3,"checkUsersLength","approverList"],["for","conditionSelect",1,"block","pb-1"],["formControlName","condition","aria-label","Default select example","id","conditionSelect",1,"h-10","mt-2","form-select","form-control",3,"change"],["value","or"],["value","none"],[1,"inline-flex","col-span-1","mt-8"],["direction","right",1,"mt-1","mr-4","-ml-2",3,"content"],[3,"contentTop","colorTop"],["tuiIconButton","","type","button","size","s","appearance","outline","icon","tuiIconMailLarge",3,"click"],[1,"col-span-4"],[1,"flex","justify-between","mt-8"],[1,"tui-space_bottom-3",3,"formControl","item"],[1,"mt-1","text-xxs","font-extralight"],[1,"col-span-1","mt-8"],["value","and"],[1,"col-span-1","mt-8","-ml-4"],[1,"px-2.5","py-2","text-white","bg-blue-500","rounded-md","cursor-pointer","hover:text-white",3,"click"],[1,"relative","flex","justify-between","my-8"],["tuiTabs","","vertical","left",1,"w-32","mr-5"],["tuiTab","",3,"click"],["class","w-full well jsonviewer",4,"ngIf"],[1,"w-full","well","jsonviewer"],[1,"absolute","z-10","flex","justify-end","-top-7","right-1","gap-x-2"],["title","Add default data",1,"rounded-md","cursor-pointer","mt-[0.5px]",3,"click"],["aria-hidden","true",1,"text-green-500","hover:text-green-600","fa","fa-table","fa-2x"],["title","Edit Form",1,"rounded-md","cursor-pointer",3,"click"],["aria-hidden","true",1,"text-blue-500","hover:text-blue-600","fa","fa-pencil-square","fa-2x"],[1,"rounded-md","cursor-pointer",3,"click"],["aria-hidden","true",1,"text-red-500","fa","fa-trash","fa-2x","hover:text-red-600"],[3,"language","options","form","submission"],[1,"grid","grid-cols-12","gap-2"],["data-placeholder","",1,"h-8","col-span-12","my-3","overflow-hidden","bg-gray-200","rounded-md"],[1,"grid","grid-cols-12","col-span-12","gap-2"],["data-placeholder","",1,"col-span-6","mb-3","overflow-hidden","bg-gray-200","rounded-md","h-28"],["data-placeholder","",1,"h-8","col-span-6","my-3","overflow-hidden","bg-gray-200","rounded-md"],[1,"w-full","mt-1","text-left","fv-plugins-message-container","text-xxs","2xl:text-xs"],["role","alert",1,"text-xs","text-red-400","fv-help-block","2xl:text-xs","2xl:mb-2"],[1,"text-lg","font-semibold","text-center"],[1,"mt-3","text-base","font-medium","text-gray-500"],[1,"flex","flex-col","justify-center","my-5"],[1,"b-form",3,"formControl","tuiTextfieldLabelOutside","searchChange"],[3,"items",4,"tuiDataList"],[1,"flex","justify-start","gap-x-3"],["tuiButton","","type","button","size","m",3,"click"],["appearance","accent","tuiButton","","type","button","size","m",3,"click"],[3,"items"],[1,"text-base"],[1,"mt-2"],[1,"text-base","text-center"],[1,"mt-2","leading-5"],[1,"mt-8","text-lg","font-semibold","text-center"],[1,"w-[80%]","mx-auto","my-8",3,"formGroup"],[1,"mb-2","font-medium"],["formControlName","summarySchema",3,"tuiTextfieldLabelOutside","ngModelChange"],[1,"mt-1","text-xxs"],["formArrayName","viewSchema"],[1,"flex","justify-end","my-2"],["tuiIconButton","","type","button","size","s","appearance","primary","icon","tuiIconPlus",3,"click"],[1,"flex","justify-center","gap-2"],["tuiButton","","type","button","size","m","appearance","primary",3,"click"],[1,"grid","grid-cols-12","gap-2","mb-3",3,"formGroupName"],["formControlName","fieldKey",1,"col-span-4",3,"tuiTextfieldLabelOutside"],["formControlName","displayAs",1,"col-span-4",3,"tuiTextfieldLabelOutside"],["tuiTextfield","","type","text",3,"tuiTextfieldLabelOutside"],["formControlName","type",1,"col-span-3"],["placeholder","Specify data type","tuiTextfield",""],["tuiIconButton","","type","button","size","s","appearance","secondary-destructive","icon","tuiIconTrash2",1,"col-span-1","mt-2",3,"click"],[1,"pb-2","text-xl","font-semibold","text-center","border-b","border-gray-400"],[1,"mt-4","text-base","font-medium","text-center"],[1,"flex","justify-center","mt-4"],["tuiButton","","appearance","secondary-destructive","type","button","size","m",1,"mx-3",3,"click"],[1,"w-[90%]","mx-auto"],[3,"options","form","submission","change"],[1,"flex","justify-center","gap-2","mb-5"]],template:function(n,t){if(1&n&&(e._UZ(0,"app-header"),e.TgZ(1,"section",0)(2,"section")(3,"h3",1),e._uU(4,"Create a new app"),e.qZA(),e.TgZ(5,"h4",2),e._uU(6,"Basic Info"),e.qZA()(),e.TgZ(7,"form",3)(8,"div",4)(9,"div",5)(10,"label",6),e._uU(11,"App Title "),e.TgZ(12,"span",7),e._uU(13,"*"),e.qZA()(),e._UZ(14,"input",8),e.GkF(15,9),e.YNc(16,je,2,0,"span",10),e.qZA(),e.TgZ(17,"div",5)(18,"label",6),e._uU(19,"App Code "),e.TgZ(20,"span",7),e._uU(21,"*"),e.qZA()(),e._UZ(22,"input",11),e.GkF(23,9)(24,9),e.YNc(25,Xe,2,0,"span",10),e.qZA()(),e.TgZ(26,"div",4)(27,"div",12)(28,"label",6),e._uU(29,"App Description"),e.TgZ(30,"span",7),e._uU(31,"*"),e.qZA()(),e._UZ(32,"textarea",13),e.GkF(33,9),e.qZA(),e.TgZ(34,"div",12)(35,"label",6),e._uU(36,"App Icon"),e.TgZ(37,"span",7),e._uU(38,"*"),e.qZA()(),e.TgZ(39,"label",14),e.NdJ("change",function(r){return t.onFileSelect(r)}),e.TgZ(40,"tui-loader",15),e.YNc(41,et,2,1,"div",16),e.YNc(42,tt,8,0,"div",17),e.qZA(),e._UZ(43,"input",18),e.qZA()()(),e.TgZ(44,"div",19)(45,"label",6),e._uU(46,"Company Name "),e.TgZ(47,"span",7),e._uU(48,"*"),e.qZA()(),e.TgZ(49,"select",20),e.YNc(50,nt,3,2,"ng-container",21),e.qZA(),e.GkF(51,9),e.qZA(),e.TgZ(52,"div",22)(53,"p",23),e._uU(54,"If your company isn't listed, you can add it below"),e.qZA()(),e.ynx(55,24),e.YNc(56,ut,15,10,"ng-container",21),e.BQk(),e.TgZ(57,"button",25),e.NdJ("click",function(){return t.addCompany()}),e.qZA(),e.YNc(58,ht,15,7,"ng-container",26),e.TgZ(59,"section",27)(60,"h4",2),e._uU(61,"User Access & Control"),e.qZA()(),e.TgZ(62,"div",28)(63,"div",29)(64,"label",30),e._uU(65,"Admin users "),e._UZ(66,"tui-tooltip",31),e.TgZ(67,"sup"),e._uU(68,"(optional)"),e.qZA()(),e.TgZ(69,"custom-multi-select",32),e.NdJ("approverList",function(r){return t.setAdminUsers(r)}),e.qZA()(),e.TgZ(70,"div",29)(71,"label",30),e._uU(72,"View Only users "),e._UZ(73,"tui-tooltip",31),e.TgZ(74,"sup"),e._uU(75,"(optional)"),e.qZA()(),e.TgZ(76,"custom-multi-select",33),e.NdJ("approverList",function(r){return t.setViewUsers(r)}),e.qZA()()(),e.TgZ(77,"div",34)(78,"h4",35),e._uU(79,"Create Workflow"),e.qZA(),e.ynx(80,36),e.YNc(81,wt,6,4,"ng-container",21),e.BQk(),e.TgZ(82,"button",37),e.NdJ("click",function(){return t.addWorkflowStep()}),e.qZA()(),e.TgZ(83,"div",38)(84,"div",39)(85,"h4",40),e._uU(86,"Dynamic Forms"),e.qZA(),e.YNc(87,St,2,0,"a",41),e.qZA(),e.TgZ(88,"h4",42),e._uU(89,"Form/s Preview"),e.qZA(),e.TgZ(90,"div",43),e.YNc(91,Zt,5,2,"ng-container",26),e.YNc(92,Dt,9,0,"ng-container",26),e.qZA(),e.TgZ(93,"div",44)(94,"p",23),e._uU(95,"The form/s you add will appear here"),e.qZA()()(),e.TgZ(96,"div",45)(97,"a",46),e.NdJ("click",function(){return t.saveDraft()}),e._uU(98),e.qZA()(),e.TgZ(99,"div",47)(100,"button",48),e.NdJ("click",function(){return t.saveSubModule()}),e.ALo(101,"async"),e._uU(102," Publish "),e.qZA(),e.TgZ(103,"button",49),e.NdJ("click",function(){return t.saveSubModule(3)}),e.ALo(104,"async"),e._uU(105," Save as Draft "),e.qZA(),e.TgZ(106,"button",50),e.NdJ("click",function(){return t.cancelSubmodule()}),e._uU(107,"Cancel"),e.qZA()()()(),e._UZ(108,"app-footer"),e.YNc(109,Ut,1,1,"ng-template",null,51,e.W1O),e.YNc(111,Et,13,2,"ng-template",null,52,e.W1O),e.YNc(113,Nt,16,0,"ng-template",null,53,e.W1O),e.YNc(115,Ft,5,0,"ng-template",null,54,e.W1O),e.YNc(117,Pt,5,0,"ng-template",null,55,e.W1O),e.YNc(119,Vt,26,3,"ng-template",null,56,e.W1O),e.YNc(121,Rt,9,0,"ng-template",null,57,e.W1O),e.YNc(123,qt,9,3,"ng-template",null,58,e.W1O)),2&n){const s=e.MAs(110),r=e.MAs(116),a=e.MAs(118);e.xp6(7),e.Q6J("formGroup",t.subModuleForm),e.xp6(7),e.Q6J("ngClass",null!=t.f.title&&t.f.title.invalid&&null!=t.f.title&&t.f.title.dirty?"is-invalid":""),e.xp6(1),e.Q6J("ngTemplateOutlet",s)("ngTemplateOutletContext",e.VKq(39,Yt,t.f.title)),e.xp6(1),e.Q6J("ngIf",null==t.f.title?null:t.f.title.hasError("codeExists")),e.xp6(6),e.Q6J("ngClass",null!=t.f.code&&t.f.code.invalid&&null!=t.f.code&&t.f.code.dirty?"is-invalid":""),e.xp6(1),e.Q6J("ngTemplateOutlet",s)("ngTemplateOutletContext",e.VKq(41,Kt,t.f.code)),e.xp6(1),e.Q6J("ngTemplateOutlet",s)("ngTemplateOutletContext",e.VKq(43,Gt,t.f.code)),e.xp6(1),e.Q6J("ngIf",null==t.f.code?null:t.f.code.hasError("codeExists")),e.xp6(7),e.Q6J("ngClass",null!=t.f.description&&t.f.description.invalid&&null!=t.f.description&&t.f.description.dirty?"is-invalid":""),e.xp6(1),e.Q6J("ngTemplateOutlet",s)("ngTemplateOutletContext",e.VKq(45,$t,t.f.description)),e.xp6(7),e.Q6J("inheritColor",!0)("size","l")("showLoader",!1)("overlay",!0),e.xp6(1),e.Q6J("ngIf",t.file),e.xp6(1),e.Q6J("ngIf",!t.file),e.xp6(7),e.Q6J("ngClass",null!=t.f.companyName&&t.f.companyName.invalid&&null!=t.f.companyName&&t.f.companyName.dirty?"is-invalid":""),e.xp6(1),e.Q6J("ngForOf",t.companyList),e.xp6(1),e.Q6J("ngTemplateOutlet",s)("ngTemplateOutletContext",e.VKq(47,Ht,t.f.companyName)),e.xp6(5),e.Q6J("ngForOf",t.companies.controls),e.xp6(2),e.Q6J("ngIf",1==t.parentIDUnAssigned),e.xp6(8),e.Q6J("content",r),e.xp6(7),e.Q6J("content",a),e.xp6(8),e.Q6J("ngForOf",t.workflows.controls),e.xp6(6),e.Q6J("ngIf",(null==t.formComponents[0]||null==t.formComponents[0].components?null:t.formComponents[0].components.length)>0),e.xp6(4),e.Q6J("ngIf",(null==t.formComponents[0]||null==t.formComponents[0].components?null:t.formComponents[0].components.length)>0),e.xp6(1),e.Q6J("ngIf",0==(null==t.formComponents[0]||null==t.formComponents[0].components?null:t.formComponents[0].components.length)||0==(null==t.formComponents?null:t.formComponents.length)),e.xp6(6),e.hij(" ","Add form"," "),e.xp6(2),e.Q6J("showLoader",1==e.lcZ(101,35,t.isCreatingSubModule)),e.xp6(3),e.Q6J("showLoader",1==e.lcZ(104,37,t.isSavingAsDraft))}},dependencies:[i.mk,i.sg,i.O5,i.tP,le.G,ce.c,F.K3,F.wU,ae.MB,ve.xT,Q.eC,ye.gX,w.VT,z.uJ,z.OI,c._Y,c.YN,c.Kr,c.Fj,c.EJ,c.JJ,c.JL,c.Q7,c.oH,c.sg,c.u,c.x0,c.CE,xe.v0,Pe.k4,b,Le.e,f.p_,f.uW,f.yu,Y.V,ne.PZ,we.w,ke.kM,i.Ov]});var zt=u(68538),Wt=u(94051);function jt(o,n){1&o&&(e.TgZ(0,"span",57),e._uU(1," An app by this title already exists. Please select another title "),e.qZA())}function Xt(o,n){1&o&&(e.TgZ(0,"span",57),e._uU(1," An app with this code already exists. Please select another code. "),e.qZA())}function en(o,n){if(1&o&&(e.TgZ(0,"div",58),e._UZ(1,"img",59),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("src",t.base64File,e.LSH)}}function tn(o,n){1&o&&(e.TgZ(0,"div",60)(1,"div",61),e._UZ(2,"img",62),e.qZA(),e.TgZ(3,"ul",63)(4,"li"),e._uU(5,"Only (JPEG, PNG, WEBP) extensions are allowed"),e.qZA(),e.TgZ(6,"li"),e._uU(7,"Up to 2MB file size is allowed"),e.qZA()()())}function nn(o,n){if(1&o&&(e.ynx(0),e.TgZ(1,"option",64),e._uU(2),e.qZA(),e.BQk()),2&o){const t=n.$implicit;e.xp6(1),e.Q6J("value",null==t?null:t.value),e.xp6(1),e.Oqu(null==t?null:t.label)}}function on(o,n){if(1&o&&(e.ynx(0),e.TgZ(1,"option",64),e._uU(2),e.qZA(),e.BQk()),2&o){const t=n.$implicit;e.xp6(1),e.Q6J("value",null==t?null:t.value),e.xp6(1),e.Oqu(null==t?null:t.label)}}function sn(o,n){1&o&&(e.TgZ(0,"span",57),e._uU(1,"Please select either AND or OR as the condition"),e.qZA())}function rn(o,n){1&o&&(e.TgZ(0,"span",57),e._uU(1," Please specify submission creator/s "),e.qZA())}function an(o,n){1&o&&(e.ynx(0),e.TgZ(1,"option",83),e._uU(2,"AND"),e.qZA(),e.BQk())}function ln(o,n){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",67)(2,"label",6),e._uU(3),e.TgZ(4,"span",7),e._uU(5,"*"),e.qZA()(),e.TgZ(6,"custom-multi-select",68),e.NdJ("checkUsersLength",function(r){e.CHM(t);const a=e.oxw().index,m=e.oxw();return e.KtG(m.countUsers(r,a))})("approverList",function(r){e.CHM(t);const a=e.oxw().index,m=e.oxw();return e.KtG(m.getApproverList(r,a))}),e.qZA(),e.YNc(7,sn,2,0,"span",10),e.ALo(8,"async"),e.YNc(9,rn,2,0,"span",10),e.qZA(),e.TgZ(10,"div",67)(11,"label",69),e._uU(12,"Condition "),e.TgZ(13,"span",7),e._uU(14,"*"),e.qZA()(),e.TgZ(15,"select",70),e.NdJ("change",function(){e.CHM(t);const r=e.oxw().index,a=e.oxw();return e.KtG(a.validateSelection(r))}),e.YNc(16,an,3,0,"ng-container",40),e.TgZ(17,"option",71),e._uU(18,"OR"),e.qZA(),e.TgZ(19,"option",72),e._uU(20,"NONE"),e.qZA()()(),e.TgZ(21,"div",73),e._UZ(22,"tui-tooltip",74),e.TgZ(23,"tui-badged-content",75)(24,"button",76),e.NdJ("click",function(){e.CHM(t);const r=e.oxw().index,a=e.oxw(),m=e.MAs(113);return e.KtG(a.openEmailNotifyModal(m,a.workflows,r))}),e.qZA()()(),e.TgZ(25,"div",77)(26,"div",78)(27,"tui-radio-labeled",79)(28,"div"),e._uU(29,"Any (Create)"),e.qZA(),e.TgZ(30,"div",80),e._uU(31,"Any user can create a new submission"),e.qZA()(),e.TgZ(32,"tui-radio-labeled",79)(33,"div"),e._uU(34,"Any (Create & Modify)"),e.qZA(),e.TgZ(35,"div",80),e._uU(36,"Any user can create a new submission and modify it's workflow"),e.qZA()(),e.TgZ(37,"tui-radio-labeled",79)(38,"div"),e._uU(39,"Disabled"),e.qZA(),e.TgZ(40,"div",80),e._uU(41,"Only Admin users can create and modify submissions"),e.qZA()()()(),e.TgZ(42,"div",81)(43,"button",82),e.NdJ("click",function(){e.CHM(t);const r=e.oxw().index,a=e.oxw();return e.KtG(a.removeWorkflowStep(r))}),e.qZA()(),e.BQk()}if(2&o){const t=e.oxw(),s=t.first,r=t.index,a=e.oxw(),m=e.MAs(115);let E;e.xp6(3),e.hij("",s?"Creators":"Approvers"," "),e.xp6(4),e.Q6J("ngIf",e.lcZ(8,13,a.showError)&&r===a.errorIndex),e.xp6(2),e.Q6J("ngIf",1==a.getValidityForWorkflowStep()),e.xp6(7),e.Q6J("ngIf",r>0),e.xp6(6),e.Q6J("content",m),e.xp6(1),e.Q6J("contentTop",null==(E=a.workflows.at(r).get("emailNotifyTo"))||null==E.value?null:E.value.length)("colorTop","green"),e.xp6(4),e.Q6J("formControl",a.accessTypeValue)("item",a.items[0]),e.xp6(5),e.Q6J("formControl",a.accessTypeValue)("item",a.items[1]),e.xp6(5),e.Q6J("formControl",a.accessTypeValue)("item",a.items[2])}}function un(o,n){1&o&&(e.TgZ(0,"span",57),e._uU(1,"Please select either AND or OR as the condition"),e.qZA())}function cn(o,n){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",77)(2,"label",6),e._uU(3,"Approvers "),e.TgZ(4,"span",7),e._uU(5,"*"),e.qZA()(),e.TgZ(6,"custom-multi-select",68),e.NdJ("checkUsersLength",function(r){e.CHM(t);const a=e.oxw().index,m=e.oxw();return e.KtG(m.countUsers(r,a))})("approverList",function(r){e.CHM(t);const a=e.oxw().index,m=e.oxw();return e.KtG(m.getApproverList(r,a))}),e.qZA(),e.YNc(7,un,2,0,"span",10),e.ALo(8,"async"),e.qZA(),e.TgZ(9,"div",77)(10,"label",69),e._uU(11,"Condition "),e.TgZ(12,"span",7),e._uU(13,"*"),e.qZA()(),e.TgZ(14,"select",70),e.NdJ("change",function(){e.CHM(t);const r=e.oxw().index,a=e.oxw();return e.KtG(a.validateSelection(r))}),e.TgZ(15,"option",83),e._uU(16,"AND"),e.qZA(),e.TgZ(17,"option",71),e._uU(18,"OR"),e.qZA(),e.TgZ(19,"option",72),e._uU(20,"NONE"),e.qZA()()(),e.TgZ(21,"div",73),e._UZ(22,"tui-tooltip",74),e.TgZ(23,"tui-badged-content",75)(24,"button",76),e.NdJ("click",function(){e.CHM(t);const r=e.oxw().index,a=e.oxw(),m=e.MAs(113);return e.KtG(a.openEmailNotifyModal(m,a.workflows,r))}),e.qZA()()(),e.TgZ(25,"div",84)(26,"button",82),e.NdJ("click",function(){e.CHM(t);const r=e.oxw().index,a=e.oxw();return e.KtG(a.removeWorkflowStep(r))}),e.qZA()(),e.BQk()}if(2&o){const t=e.oxw().index,s=e.oxw(),r=e.MAs(115);let a;e.xp6(7),e.Q6J("ngIf",e.lcZ(8,4,s.showError)&&t===s.errorIndex),e.xp6(15),e.Q6J("content",r),e.xp6(1),e.Q6J("contentTop",null==(a=s.workflows.at(t).get("emailNotifyTo"))||null==a.value?null:a.value.length)("colorTop","green")}}function dn(o,n){if(1&o&&(e.ynx(0),e.TgZ(1,"p",65),e._uU(2),e.qZA(),e.TgZ(3,"div",66),e.YNc(4,ln,44,15,"ng-container",40),e.YNc(5,cn,27,6,"ng-container",40),e.qZA(),e.BQk()),2&o){const t=n.index;e.xp6(2),e.hij("Step ",0===t?"1":t+1,""),e.xp6(1),e.Q6J("formGroupName",t),e.xp6(1),e.Q6J("ngIf",0==t),e.xp6(1),e.Q6J("ngIf",t>0)}}function mn(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"a",85),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(),a=e.MAs(121);return e.KtG(r.openSummarySchemaDialog(a))}),e._uU(1," Summary & View Schema "),e.qZA()}}function pn(o,n){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",88),e.NdJ("click",function(){const a=e.CHM(t).index,m=e.oxw(2);return e.KtG(m.activeIndex=a)}),e._uU(2),e.qZA(),e.BQk()}if(2&o){const t=n.$implicit;e.xp6(2),e.Oqu(t)}}function _n(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"div",90)(1,"div",91)(2,"div",92)(3,"a",93),e.NdJ("click",function(){e.CHM(t);const r=e.oxw().index,a=e.oxw(2),m=e.MAs(125);return e.KtG(a.addDefaultData(r,m))}),e._UZ(4,"i",94),e.qZA(),e.TgZ(5,"a",95),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(),a=r.index,m=r.$implicit,E=e.oxw(2);return e.KtG(E.sendFormForEdit(a,null==m?null:m.id,null==m?null:m.key))}),e._UZ(6,"i",96),e.qZA(),e.TgZ(7,"a",97),e.NdJ("click",function(){e.CHM(t);const r=e.oxw().$implicit,a=e.oxw(2),m=e.MAs(123);return e.KtG(a.deleteFormDialog(m,null==r?null:r.id))}),e._UZ(8,"i",98),e.qZA()()(),e._UZ(9,"formio",99),e.qZA()}if(2&o){const t=e.oxw(),s=t.$implicit,r=t.index,a=e.oxw(2);e.xp6(9),e.Q6J("language",a.language)("options",a.options)("form",s)("submission",a.deafultFormSubmission[r]||(null==s?null:s.defaultData))}}function gn(o,n){if(1&o&&(e.ynx(0),e.YNc(1,_n,10,4,"div",89),e.BQk()),2&o){const t=n.index,s=e.oxw(2);e.xp6(1),e.Q6J("ngIf",s.activeIndex==t)}}function fn(o,n){if(1&o&&(e.ynx(0),e.TgZ(1,"section",86)(2,"nav",87),e.YNc(3,pn,3,1,"ng-container",21),e.qZA(),e.YNc(4,gn,2,1,"ng-container",21),e.qZA(),e.BQk()),2&o){const t=e.oxw();e.xp6(3),e.Q6J("ngForOf",t.formTabs),e.xp6(1),e.Q6J("ngForOf",t.formComponents)}}function hn(o,n){1&o&&(e.ynx(0),e.TgZ(1,"div",100),e._UZ(2,"div",101),e.TgZ(3,"div",102),e._UZ(4,"div",103)(5,"div",103),e.qZA(),e.TgZ(6,"div",102),e._UZ(7,"div",104)(8,"div",104),e.qZA()(),e.BQk())}function bn(o,n){if(1&o&&(e.ynx(0),e.TgZ(1,"div",105)(2,"span",106),e._uU(3),e.qZA()(),e.BQk()),2&o){const t=e.oxw().message;e.xp6(3),e.hij(" ",t," ")}}function vn(o,n){if(1&o&&e.YNc(0,bn,4,1,"ng-container",40),2&o){const t=n.control;e.Q6J("ngIf",t.hasError(n.validation)&&(t.dirty||t.touched))}}function xn(o,n){if(1&o&&e._UZ(0,"tui-data-list-wrapper",115),2&o){const t=e.oxw(2);e.Q6J("items",t.userListForEmail)}}function yn(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"p",107),e._uU(1,"Email Notification Users"),e.qZA(),e.TgZ(2,"p",108),e._uU(3," Please specify the users you want to send the notification email to "),e.qZA(),e.TgZ(4,"div",109)(5,"tui-input-tag",110),e.NdJ("searchChange",function(r){e.CHM(t);const a=e.oxw();return e.KtG(a.onSearchChange(r))}),e._uU(6," Type to search and press Enter to select... "),e.YNc(7,xn,1,1,"tui-data-list-wrapper",111),e.qZA()(),e.TgZ(8,"div",112)(9,"button",113),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.validateEmails())}),e._uU(10," Confirm & Close "),e.qZA(),e.TgZ(11,"button",114),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.cancelEmailNotify())}),e._uU(12," Remove Users & Close "),e.qZA()()}if(2&o){const t=e.oxw();e.xp6(5),e.Q6J("formControl",null==t.currentFieldArray||null==t.currentFieldArray.controls[t.activeEmailIndex]?null:t.currentFieldArray.controls[t.activeEmailIndex].controls.emailNotifyTo)("tuiTextfieldLabelOutside",!0)}}function Tn(o,n){1&o&&(e.TgZ(0,"strong",116),e._uU(1,"How conditions work?"),e.qZA(),e._UZ(2,"hr"),e.TgZ(3,"ul",117)(4,"li")(5,"strong"),e._uU(6,"AND"),e.qZA(),e._uU(7," implies that every user of the step must provide approval"),e.qZA(),e.TgZ(8,"li",118)(9,"strong"),e._uU(10,"OR"),e.qZA(),e._uU(11," implies that any one of the users may provide approval"),e.qZA(),e.TgZ(12,"li")(13,"strong"),e._uU(14,"NONE"),e.qZA(),e._uU(15," implies that there is only one user per step and hence no conditon is necessary"),e.qZA()())}function Cn(o,n){1&o&&(e.TgZ(0,"strong",119),e._uU(1,"Admin Users"),e.qZA(),e._UZ(2,"hr"),e.TgZ(3,"p",120),e._uU(4," Admin Users have access to create, delete and modify submissions as well as child apps within a specified application "),e.qZA())}function wn(o,n){1&o&&(e.TgZ(0,"strong",119),e._uU(1,"View Only Users"),e.qZA(),e._UZ(2,"hr"),e.TgZ(3,"p",120),e._uU(4," View Only Users have read-only access. They may view submissions and child apps but may not modify or delete them "),e.qZA())}function Sn(o,n){if(1&o&&e._UZ(0,"tui-data-list-wrapper",115),2&o){const t=e.oxw(2);e.Q6J("items",t.summarySchemaFields)}}function An(o,n){if(1&o&&e._UZ(0,"tui-data-list-wrapper",115),2&o){const t=e.oxw(3);e.Q6J("items",null==t.schemaForm||null==t.schemaForm.controls.summarySchema?null:t.schemaForm.controls.summarySchema.value)}}function In(o,n){if(1&o&&e._UZ(0,"tui-data-list-wrapper",115),2&o){const t=e.oxw(3);e.Q6J("items",t.selectItems)}}function Mn(o,n){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",131)(2,"tui-select",132),e._uU(3," View schema field "),e.YNc(4,An,1,1,"tui-data-list-wrapper",111),e.qZA(),e.TgZ(5,"tui-input",133),e._UZ(6,"input",134),e.TgZ(7,"p",117),e._uU(8,"Field label"),e.qZA()(),e.TgZ(9,"tui-select",135),e._uU(10," Specify data type "),e._UZ(11,"input",136),e.YNc(12,In,1,1,"tui-data-list-wrapper",111),e.qZA(),e.TgZ(13,"button",137),e.NdJ("click",function(){const a=e.CHM(t).index,m=e.oxw(2);return e.KtG(m.deleteViewSchema(a))}),e.qZA()(),e.BQk()}if(2&o){const t=n.index;e.xp6(1),e.Q6J("formGroupName",t),e.xp6(1),e.Q6J("tuiTextfieldLabelOutside",!0),e.xp6(3),e.Q6J("tuiTextfieldLabelOutside",!0),e.xp6(1),e.Q6J("tuiTextfieldLabelOutside",!0)}}function Zn(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"h2",121),e._uU(1,"Modify Summary & View Schema"),e.qZA(),e.TgZ(2,"div",122)(3,"label",123),e._uU(4,"Summary Schema "),e.TgZ(5,"sup"),e._uU(6,"(Optional)"),e.qZA()(),e.TgZ(7,"tui-multi-select",124),e.NdJ("ngModelChange",function(r){e.CHM(t);const a=e.oxw();return e.KtG(a.applySummarySchemaValuesToViewSchema(r))}),e._uU(8," Summary schema fields "),e.YNc(9,Sn,1,1,"tui-data-list-wrapper",111),e.qZA(),e.TgZ(10,"p",125),e._uU(11,"Type the fieldname and press Enter to add. e.g. formKey.fieldValue"),e.qZA(),e.TgZ(12,"div",43),e.ynx(13,126),e.TgZ(14,"label",123),e._uU(15,"View Schema "),e.TgZ(16,"sup"),e._uU(17,"(Optional)"),e.qZA()(),e.YNc(18,Mn,14,4,"ng-container",21),e.TgZ(19,"div",127)(20,"button",128),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.addViewSchema())}),e.qZA()(),e.BQk(),e.qZA()(),e.TgZ(21,"div",129)(22,"button",130),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.setSummaryAndViewSchema())}),e._uU(23," Confirm "),e.qZA(),e.TgZ(24,"button",48),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.closeSchemaDialog())}),e._uU(25," Cancel "),e.qZA()()}if(2&o){const t=e.oxw();e.xp6(2),e.Q6J("formGroup",t.schemaForm),e.xp6(5),e.Q6J("tuiTextfieldLabelOutside",!0),e.xp6(11),e.Q6J("ngForOf",t.viewSchema.controls)}}function Dn(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"p",138),e._uU(1,"Delete Form"),e.qZA(),e.TgZ(2,"p",139),e._uU(3,"Are you sure you want to delete this form?"),e.qZA(),e.TgZ(4,"div",140)(5,"button",141),e.NdJ("click",function(){const a=e.CHM(t).$implicit;return e.oxw().deleteForm(),e.KtG(a.complete())}),e._uU(6," Confirm "),e.qZA(),e.TgZ(7,"button",113),e.NdJ("click",function(){const a=e.CHM(t).$implicit;return e.KtG(a.complete())}),e._uU(8," Cancel "),e.qZA()()}}function kn(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"h2",121),e._uU(1,"Add default data"),e.qZA(),e.TgZ(2,"div",142)(3,"formio",143),e.NdJ("change",function(r){e.CHM(t);const a=e.oxw();return e.KtG(a.onChangeForm(r))}),e.qZA()(),e.TgZ(4,"div",144)(5,"button",130),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.confirmDefaultSubmission())}),e._uU(6," Confirm "),e.qZA(),e.TgZ(7,"button",48),e.NdJ("click",function(){const a=e.CHM(t).$implicit;return e.KtG(a.complete())}),e._uU(8," Cancel "),e.qZA()()}if(2&o){const t=e.oxw();e.xp6(3),e.Q6J("options",t.options)("form",t.formForDefaultData)("submission",t.deafultFormSubmission[t.defaultFormIndex])}}const Un=function(o){return{validation:"required",message:"App Title is required",control:o}},On=function(o){return{validation:"required",message:"App code is required",control:o}},En=function(o){return{validation:"maxlength",message:"App code should not exceed 7 characters",control:o}},Nn=function(o){return{validation:"required",message:"A Description is required",control:o}},Fn=function(o){return{validation:"required",message:"Company is required",control:o}},Pn=function(o){return{validation:"required",message:"Category is required",control:o}};class Oe{constructor(n,t,s,r,a,m,E,me,be,L){this.fb=n,this.auth=t,this.transportService=s,this.router=r,this.dashboard=a,this.activatedRoute=m,this.notif=E,this.formService=me,this.dialogs=be,this.media=L,this.formComponents=[],this.activeIndex=0,this.language=new e.vpe,this.langItems=[{name:"en"},{name:"ar"}],this.languageForm=new c.cw({languages:new c.NI(this.langItems[0])}),this.conditions=["OR","AND","ANY"],this.formTabs=[],this.subModuleFormIoValue=new D.X({}),this.destroy$=new y.x,this.isCreatingSubModule=new y.x,this.isSavingAsDraft=new y.x,this.domainUrl=window.location.origin,this.userListForEmail=[],this.search$=new y.x,this.saveDialogSubscription=[],this.limit=10,this.page=0,this.showError=new y.x,this.errorIndex=0,this.items=[{name:"anyCreate"},{name:"anyCreateAndModify"},{name:"disabled"}],this.formKeysForViewSchema=[],this.summarySchemaFields=[],this.formKeys=[],this.formKeysFinal=[],this.schemaSubscription=[],this.defaultFormSubscription=[],this.selectItems=["Text","Number","Date"],this.schemaForm=new c.cw({summarySchema:new c.NI([]),viewSchema:new c.Oe([new c.cw({fieldKey:new c.NI,displayAs:new c.NI(""),type:new c.NI(this.selectItems[0])})])}),this.deafultFormSubmission=[],this.initSubModuleForm(),this.accessTypeValue=new c.NI(null),this.submoduleFromLS=this.transportService.subModuleDraft.value,this.getAllCompanies(),this.getAllCategories(),this.getSubmoduleByIDForEdit(),this.activatedRoute.queryParams.pipe((0,h.R)(this.destroy$)).subscribe(O=>{O.moduleID&&O.moduleCode&&(this.transportService.moduleID.next(O.moduleID),this.transportService.moduleCode.next(O.moduleCode))}),this.search$.pipe((0,B.w)(O=>this.dashboard.getAllUsersForListing(this.limit,this.page,O))).subscribe(O=>{O&&(this.userListForEmail=O?.results?.map(_e=>_e?.email))}),this.dashboard.getAllUsersForListing(this.limit,this.page).pipe((0,h.R)(this.destroy$)).subscribe(O=>{O&&(this.userListForEmail=O?.results?.map(_e=>_e?.email))})}ngOnInit(){this.activatedRoute.queryParams.pipe((0,h.R)(this.destroy$)).subscribe(n=>{if(0==Object.keys(n).length){const t=(0,d.rV)(d.MX.navHierarchy)||[];t.forEach(s=>{s.routerLink=`/modules/${s.code}?moduleID=${(0,d.rV)(d.MX.moduleID)}`}),this.dashboard.items=(0,K.vB)([...t,{caption:(0,d.rV)(d.MX.editmoduleTitle)||(0,d.rV)(d.MX.moduleSlug),routerLink:`/modules/edit-module/${(0,d.rV)(d.MX.moduleID)||(0,d.rV)(d.MX.editmoduleId)}`}],"caption")}else this.router.url.includes("moduleCode")||((0,d.rV)(d.MX.navHierarchy)||[]).forEach(s=>{s.routerLink=`/modules/${s.code}?moduleID=${(0,d.rV)(d.MX.moduleID)}`}),this.dashboard.items=(0,K.vB)([{caption:(0,d.rV)(d.MX.editmoduleTitle)||(0,d.rV)(d.MX.moduleSlug),routerLink:`/modules/edit-module/${(0,d.rV)(d.MX.moduleID)||(0,d.rV)(d.MX.editmoduleId)}?moduleCode=${(0,d.rV)(d.MX.moduleSlug)}`}],"caption")})}get viewSchema(){return this.schemaForm.controls.viewSchema}addViewSchema(){const n=this.fb.group({fieldKey:new c.NI(""),displayAs:new c.NI(""),type:new c.NI(this.selectItems[0])});this.viewSchema.push(n)}deleteViewSchema(n){this.viewSchema.removeAt(n)}onFileSelect(n){const t=n?.target?.files[0];1==(0,K.QG)(t)?(0,K.sl)(t).then(s=>{if(0==s)this.notif.displayNotification("Image should be of 1:1 aspect ratio","File Upload","warning");else{this.file=t;const r=new FileReader;r.readAsDataURL(t),r.onload=a=>{this.base64File=r.result}}}):this.notif.displayNotification("Allowed file types are JPG/PNG/WebP. File size cannot exceed 2MB","File Upload","warning")}openEmailNotifyModal(n,t,s){this.activeEmailIndex=s,this.currentFieldArray=t,this.saveDialogSubscription.push(this.dialogs.open(n,{dismissible:!1,closeable:!1}).subscribe())}onSearchChange(n){this.search$.next(n)}validateEmails(){let n=this.workflows.at(this.activeEmailIndex)?.get("emailNotifyTo")?.value;n=n.map(t=>!!/\S+@\S+\.\S+/.test(t)),n.includes(!1)?this.notif.displayNotification("Please provide valid email addresses","Email Notify","warning"):this.saveDialogSubscription.forEach(t=>t.unsubscribe())}cancelEmailNotify(){this.workflows.at(this.activeEmailIndex)?.get("emailNotifyTo")?.setValue([]),this.saveDialogSubscription.forEach(n=>n.unsubscribe())}getSubmoduleByIDForEdit(){this.activatedRoute.params.pipe((0,h.R)(this.destroy$)).subscribe(n=>{n.id&&(this.dashboard.excludeIdEmitter.emit(n.id),this.transportService.subModuleID.next(n.id),this.dashboard.getSubModuleByID(n.id).subscribe(t=>{if(t)if(this.workFlowId=t?.workFlowId?.id,this.categoryId=t?.categoryId?.id,this.schemaForm.controls.summarySchema?.setValue(t?.summarySchema),t.viewSchema?.length>0&&this.schemaForm.controls.viewSchema.removeAt(0),t.viewSchema?.map(s=>{const r=this.fb.group({fieldKey:new c.NI(s?.fieldKey),displayAs:new c.NI(s?.displayAs),type:new c.NI(s?.type)});this.schemaForm.controls.viewSchema.push(r)}),this.items?.forEach((s,r)=>{s?.name==t?.accessType&&this.accessTypeValue?.setValue(this.items[r])}),Object.keys(this.submoduleFromLS)?.length>0){this.initSubModuleForm(this.submoduleFromLS),this.base64File=this.submoduleFromLS?.image,this.file=this.submoduleFromLS?.file,this.formComponents=t?.formIds,this.formTabs=t?.formIds?.map(r=>r.title);let s=JSON.parse(JSON.stringify(this.formComponents));s?.map(r=>{this.formKeys?.push({[r.key]:U.cQ.flattenComponents(r?.components,!0)})}),this.summarySchemaFields=this.formKeys.flatMap(r=>(0,K.oX)(r)),this.formKeysForViewSchema=this.summarySchemaFields,s?.map((r,a)=>{r?.defaultData&&(this.defaultFormIndex=a,this.deafultFormSubmission[this.defaultFormIndex]=r?.defaultData)})}else{this.formComponents=t?.formIds,this.formTabs=t?.formIds?.map(L=>L.title);let s=JSON.parse(JSON.stringify(this.formComponents));s?.map(L=>{this.formKeys?.push({[L.key]:U.cQ.flattenComponents(L?.components,!0)})}),this.summarySchemaFields=this.formKeys.flatMap(L=>(0,K.oX)(L)),this.formKeysForViewSchema=this.summarySchemaFields,s?.map((L,O)=>{L?.defaultData&&(this.defaultFormIndex=O,this.deafultFormSubmission[this.defaultFormIndex]=L?.defaultData)});const r={value:t?.companyId?.id,label:t?.companyId?.title},a={value:t?.categoryId?.id,label:t?.categoryId?.name};this.file=t?.image,this.base64File=t?.image;const m=t?.workFlowId?.stepIds?.map(L=>({id:L?.id,approverIds:L?.approverIds?.map(O=>({name:O?.fullName,id:O?.id,control:new c.NI(!0)})),condition:L?.condition,emailNotifyTo:L?.emailNotifyToId?.notifyUsers||[],emailNotifyToId:L?.emailNotifyToId?.id})),E=t?.adminUsers?.map(L=>({name:L?.fullName,id:L?.id,control:new c.NI(!0)})),me=t?.viewOnlyUsers?.map(L=>({name:L?.fullName,id:L?.id,control:new c.NI(!0)}));delete t?.workFlowId,delete t?.url,delete t?.companyId,delete t?.categoryId;const be=Object.assign(t,{workFlowId:m},{categoryId:a},{companyId:r},{viewOnlyUsers:me},{adminUsers:E});this.transportService.saveDraftLocally(be),this.initSubModuleForm(be)}}))})}getValidityForWorkflowStep(){return this.workflows.controls[0]?.get("approverIds")?.hasError("required")&&this.workflows.controls[0]?.get("approverIds")?.touched}applySummarySchemaValuesToViewSchema(n){n?.forEach((t,s)=>{this.schemaForm?.controls.viewSchema?.value?.forEach((r,a)=>{r?.fieldKey!==t&&this.schemaForm?.controls.viewSchema?.removeAt(a)})}),0==n?.length&&this.schemaForm?.controls.viewSchema?.removeAt(0)}getAllCompanies(){this.dashboard.getAllCompanies(10,0).pipe((0,h.R)(this.destroy$)).subscribe(n=>{this.companyList=n.results?.map(t=>({value:t?.id,label:t?.title}))})}getAllCategories(){this.dashboard.getAllCategories(10).pipe((0,h.R)(this.destroy$)).subscribe(n=>{this.categoryList=n.results?.map(t=>({value:t?.id,label:t?.name}))})}get categories(){return this.f.categories}addCategory(){const n=this.fb.group({name:["",c.kI.required]});this.categories.push(n)}removeCategory(n){this.categories.removeAt(n)}initSubModuleForm(n){this.subModuleForm=this.fb.group({categoryId:[n?.categoryId?.value?n?.categoryId?.value:this.categoryList?.filter(t=>n?.categoryId===t.value)[0]?.value||null,c.kI.required],code:[n?.code,c.kI.compose([c.kI.required,c.kI.maxLength(7)]),[K.Iw.createValidator(this.dashboard,"submodule")]],companyId:[n?.companyId?.value?n?.companyId?.value:this.companyList?.filter(t=>n?.companyId===t.value)[0]?.value||null,c.kI.required],title:[n?.title||null,c.kI.compose([c.kI.required]),[K.Iw.createValidator(this.dashboard,"submodule","title")]],image:[n?.image||null,c.kI.required],description:[n?.description||null,c.kI.required],adminUsers:[n?.adminUsers||[],c.kI.required],viewOnlyUsers:[n?.viewOnlyUsers||[],c.kI.required],workFlowId:this.fb.array(n?.workFlowId?n?.workFlowId?.map(t=>this.fb.group({id:t.id,condition:[t.condition,c.kI.required],approverIds:[t.approverIds,c.kI.required],emailNotifyTo:[t.emailNotifyTo||[],c.kI.required],emailNotifyToId:t?.emailNotifyToId})):[this.fb.group({condition:["",c.kI.required],approverIds:[[],c.kI.required],emailNotifyTo:[[],c.kI.required]})])})}get f(){return this.subModuleForm.controls}setAdminUsers(n){this.subModuleForm?.get("adminUsers")?.setValue(n)}setViewUsers(n){this.subModuleForm?.get("viewOnlyUsers")?.setValue(n)}openSummarySchemaDialog(n){this.schemaSubscription.push(this.dialogs.open(n,{dismissible:!1,closeable:!1,size:"page"}).subscribe())}addDefaultData(n,t){this.formForDefaultData=this.formComponents[n],this.defaultFormIndex=n,this.defaultFormSubscription.push(this.dialogs.open(t,{dismissible:!1,closeable:!1,size:"page"}).subscribe())}onChangeForm(n){n?.data&&n?.changed&&1==n.isModified&&(n?.data?.file&&n?.data?.file?.forEach(t=>{t.url=t?.data?.baseUrl.split("v1")[0]+t?.data?.fileUrl}),this.deafultFormSubmission[this.defaultFormIndex]={data:n?.data})}confirmDefaultSubmission(){this.formComponents[this.defaultFormIndex].defaultData=this.deafultFormSubmission[this.defaultFormIndex];let n={...this.formComponents[this.defaultFormIndex],revisionNo:void 0,id:void 0,createdBy:void 0,status:void 0,updatedBy:void 0};this.formService.updateForm(this.formComponents[this.defaultFormIndex]?.id,n).pipe((0,h.R)(this.destroy$)).subscribe(),this.defaultFormSubscription.forEach(t=>t.unsubscribe())}sendFormForEdit(n,t,s){let r=this.workflows?.value?.flatMap(a=>a?.approverIds?.map(m=>({id:m.id,name:m.name})));if(0==r.length)return this.notif.displayNotification("Please create a default workflow before adding forms","Default Workflow","warning");this.transportService.editBreadcrumbs.next(this.dashboard.items),(0,d.LS)(d.MX.editBreadcrumbs,this.dashboard.items),(0,d.LS)(d.MX.approvers,r),(0,d.LS)(d.MX.formKey,s),t?((0,d.LS)(d.MX.formEdit,!0),this.transportService.saveDraftLocally({...this.subModuleForm.value,image:this.base64File,file:this.file}),this.router.navigate(["/forms/edit-form"],{queryParams:{id:t}})):((0,d.LS)(d.MX.formEdit,!0),this.transportService.isFormEdit.next(!0),this.transportService.sendFormDataForEdit.next(this.formComponents[n]),this.transportService.saveDraftLocally({...this.subModuleForm.value,image:this.base64File,file:this.file}),this.router.navigate(["/forms/edit-form"],{queryParams:{submoduleID:this.transportService.subModuleID?.value}}))}deleteFormDialog(n,t){this.delFormId=t,this.dialogs.open(n,{dismissible:!0,closeable:!0}).pipe((0,h.R)(this.destroy$)).subscribe()}deleteForm(){this.formService.deleteForm(this.delFormId).pipe((0,h.R)(this.destroy$)).subscribe(n=>{this.getSubmoduleByIDForEdit()})}saveDraft(){let n=this.workflows?.value?.flatMap(t=>t?.approverIds?.map(s=>({id:s.id,name:s.name})));if(0==n.length)return this.notif.displayNotification("Please create a default workflow before adding forms","Default Workflow","warning");(0,d.LS)(d.MX.approvers,n),this.transportService.sendFormBuilderData(this.formComponents),this.transportService.saveDraftLocally({...this.subModuleForm.value,image:this.base64File,file:this.file}),this.transportService.editBreadcrumbs.next(this.dashboard.items),(0,d.LS)(d.MX.editBreadcrumbs,this.dashboard.items),this.router.navigate(["/forms/edit-form"])}get workflows(){return this.f.workFlowId}addWorkflowStep(){const n=this.fb.group({condition:["",c.kI.required],approverIds:[[],c.kI.required],emailNotifyTo:[[],c.kI.required]});this.workflows.push(n)}removeWorkflowStep(n){this.workflows.removeAt(n)}getApproverList(n,t){this.workflows.at(t)?.get("approverIds")?.setValue(n)}validateSelection(n){return this.errorIndex=n,this.workflows.at(n)?.get("approverIds")?.value?.length<2?(this.workflows.at(n)?.get("condition")?.setValue("none"),this.notif.displayNotification('Default condition of "None" will be used if the number of approvers is less than 2',"Create Submodule","info")):this.workflows.at(n)?.get("approverIds")?.value?.length>=2&&"none"==this.workflows.at(n)?.get("condition")?.value?this.showError.next(!0):void this.showError.next(!1)}countUsers(n,t){return this.errorIndex=t,n<2?(this.workflows.at(t)?.get("condition")?.setValue("none"),this.notif.displayNotification('Default condition of "None" will be used if the number of approvers is less than 2',"Create Module","info")):n>=2&&"none"==this.workflows.at(t)?.get("condition")?.value?this.showError.next(!0):void this.showError.next(!1)}dataSubmitValidation(){return!(this.f.companyId?.invalid||0==this.workflows?.length||this.workflows.controls.map(n=>0==n.get("approverIds")?.value.length).includes(!0)||!0===this.workflows.controls.map(n=>n.get("condition")?.value).includes("")||0==Object.values(this.formComponents)[0]?.components?.length)}cancelSubmodule(){(0,d.rV)(d.MX.moduleSlug)?this.router.navigate(["/modules",(0,d.rV)(d.MX.moduleSlug)],{queryParams:{moduleID:(0,d.rV)(d.MX.moduleID)}}):this.router.navigate(["/dashboard/home"])}checkIfLabelIsUnique(){return new Set(this.schemaForm.controls.viewSchema.value?.map(t=>t?.displayAs)).size===this.schemaForm.controls.viewSchema.value?.length}setSummaryAndViewSchema(){return 0==this.checkIfLabelIsUnique()?this.notif.displayNotification("Field labels must be unique","Schema Controls","warning"):this.schemaForm?.value?.viewSchema[0]?.displayAs?(this.schemaSubscription.forEach(n=>n.unsubscribe()),void console.log(this.schemaForm.value)):this.notif.displayNotification("Please provide all data","Form Schema","warning")}closeSchemaDialog(){this.schemaSubscription.forEach(n=>n.unsubscribe())}saveSubModule(n){if(!n){if(0==this.dataSubmitValidation())return this.subModuleForm.markAllAsTouched(),this.notif.displayNotification("Please provide all data","Edit Submodule","warning");if(this.workflows.controls.map(s=>s.get("approverIds")?.value.length>1&&s.get("condition")?.value).includes("none"))return this.notif.displayNotification("Please provide valid condition for the workflow step/s","Create Submodule","warning")}n?this.isSavingAsDraft.next(!0):this.isCreatingSubModule.next(!0);let t={url:`/modules/module-details/${this.subModuleForm.get("title")?.value.replace(/\s/g,"-").toLowerCase()}`,companyId:this.subModuleForm.get("companyId")?.value,categoryId:this.subModuleForm.get("categoryId")?.value?this.subModuleForm.get("categoryId")?.value:this.categoryId,image:this.subModuleForm.get("image")?.value,title:this.subModuleForm.get("title")?.value,description:this.subModuleForm.get("description")?.value,code:this.subModuleForm.get("code")?.value,adminUsers:this.subModuleForm.get("adminUsers")?.value?.map(s=>s?.id),viewOnlyUsers:this.subModuleForm.get("viewOnlyUsers")?.value?.map(s=>s?.id),steps:this.workflows?.value?.map(s=>({id:s?.id?s?.id:void 0,approverIds:s?.approverIds?.map(r=>r.id?r.id:r),condition:s?.condition,emailNotifyTo:s?.emailNotifyTo||[],emailNotifyToId:s?.emailNotifyToId?s?.emailNotifyToId:void 0})),summarySchema:this.schemaForm.value?.summarySchema?.length>0?this.schemaForm.value?.summarySchema:void 0,viewSchema:this.schemaForm.value?.viewSchema[0]?.displayAs?this.schemaForm.value?.viewSchema:void 0,accessType:this.accessTypeValue?.value?.name};if(Object.assign(t,n?{status:n}:{status:1}),"string"==typeof this.file){const s="uploads"+t?.image.split("uploads")[1];t={...t,image:s},this.dashboard.updateSubModule(this.transportService.subModuleID?.value,t).pipe((0,h.R)(this.destroy$)).subscribe(r=>{r?(this.isCreatingSubModule.next(!1),this.isSavingAsDraft.next(!1),this.transportService.saveDraftLocally({}),this.transportService.sendFormBuilderData([{title:"",key:"",display:"",components:[]}]),this.routeToBasedOnPreviousPage()):(this.isCreatingSubModule.next(!1),this.isSavingAsDraft.next(!1))})}else this.media.uploadMedia(this.file).pipe((0,h.R)(this.destroy$)).subscribe(s=>{s.hasErrors()?(this.isCreatingSubModule.next(!1),this.isSavingAsDraft.next(!1)):(t={...t,image:s?.data?.fileUrl},this.dashboard.updateSubModule(this.transportService.subModuleID?.value,t).pipe((0,h.R)(this.destroy$)).subscribe(r=>{r?(this.isCreatingSubModule.next(!1),this.transportService.saveDraftLocally({}),this.transportService.sendFormBuilderData([{title:"",key:"",display:"",components:[]}]),this.routeToBasedOnPreviousPage()):(this.isCreatingSubModule.next(!1),this.isSavingAsDraft.next(!1))}))});(0,d.cl)(d.MX.editmoduleId),(0,d.cl)(d.MX.editmoduleSlug)}routeToBasedOnPreviousPage(){this.activatedRoute.queryParams.pipe((0,h.R)(this.destroy$)).subscribe(n=>{Object.keys(n).length>0?this.router.navigate(["/dashboard/home"]):this.router.navigate(["/modules",(0,d.rV)(d.MX.moduleSlug)||""],{queryParams:{moduleID:(0,d.rV)(d.MX.moduleID)||""}})})}ngOnDestroy(){this.destroy$.complete(),this.destroy$.unsubscribe()}}Oe.\u0275fac=function(n){return new(n||Oe)(e.Y36(c.qu),e.Y36(se.e),e.Y36($.R),e.Y36(l.F0),e.Y36(ee.s),e.Y36(l.gz),e.Y36(R.T),e.Y36(Wt.s),e.Y36(A.RO),e.Y36(H))},Oe.\u0275cmp=e.Xpm({type:Oe,selectors:[["ng-component"]],decls:126,vars:53,consts:[[1,"w-11/12","h-auto","min-h-screen","mx-auto","mt-52","pb-44"],[1,"text-xl","font-semibold","text-center"],[1,"text-lg","font-semibold","bg-[#EAE4D8]","px-2","py-2","rounded-md","mt-2"],[1,"block","pt-5",3,"formGroup"],[1,"grid","grid-cols-12","gap-3"],[1,"col-span-6","mt-3","mb-5"],[1,"block","pb-1"],[1,"text-xs","text-red-400"],["required","","formControlName","title","type","text",1,"form-control",3,"ngClass"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["class","text-xs text-red-500",4,"ngIf"],["required","","formControlName","code","type","text",1,"form-control",3,"ngClass"],[1,"col-span-6","mt-3","mb-3"],["required","","formControlName","description","type","text","rows","6",1,"form-control",3,"ngClass"],["for","dropzone-file",1,"flex","flex-col","items-center","justify-center","w-full","h-[9.85rem]","border-2","border-gray-300","border-dashed","rounded-md","cursor-pointer","bg-gray-50","hover:bg-gray-100",3,"change"],[3,"inheritColor","size","showLoader","overlay"],["class","flex justify-center",4,"ngIf"],["class","flex justify-start",4,"ngIf"],["id","dropzone-file","type","file",1,"hidden"],[1,"my-7"],["required","","formControlName","companyId","type","text",1,"form-control",3,"ngClass"],[4,"ngFor","ngForOf"],["required","","formControlName","categoryId","type","text",1,"form-control",3,"ngClass"],[1,"mt-10"],[1,"grid","grid-cols-12","gap-3","my-8"],[1,"col-span-6"],[1,"block","pb-1","text-sm"],["direction","right",1,"",3,"content"],["formControlName","adminUsers",3,"approverList"],["formControlName","viewOnlyUsers",3,"approverList"],[1,"mt-12","mb-16"],[1,"py-2","mb-3","text-lg","font-semibold"],["formArrayName","workFlowId"],["tuiIconButton","","type","button","size","m","appearance","primary","icon","tuiIconPlusLarge",3,"click"],[1,"mb-5","mt-7"],[1,"flex","justify-between","bg-[#EAE4D8]","px-2","py-2","rounded-md","mb-3"],[1,"text-lg","font-semibold","mt-1.5"],["class","px-2.5 py-2 text-white bg-blue-500 rounded-md cursor-pointer hover:text-white",3,"click",4,"ngIf"],[1,"mt-3","text-base","font-semibold","text-center"],[1,"flex","flex-col","w-full","px-5","mx-auto","mt-5","border","border-gray-400","border-dashed","rounded-md","bg-gray-50"],[4,"ngIf"],[1,"w-full","mx-auto","my-1"],[1,"text-xs","text-gray-500"],[1,"mt-7"],[1,"px-5","py-3","rounded-lg","bg-[#a58f81]","no-underline","text-white","cursor-pointer","hover:text-white",3,"click"],[1,"flex","justify-center","gap-2","mt-10"],["tuiButton","","type","button","size","m","appearance","primary",3,"showLoader","click"],["tuiButton","","type","button","size","m","appearance","secondary",3,"showLoader","click"],["tuiButton","","type","button","size","m","appearance","accent",3,"click"],["formError",""],["template",""],["hint",""],["hintAdmin",""],["hintViewOnly",""],["summarySchemaTemplate",""],["deltemplate",""],["defaultForm",""],[1,"text-xs","text-red-500"],[1,"flex","justify-center"],["alt","app_icon","width","100","height","100",1,"rounded-md",3,"src"],[1,"flex","justify-start"],[1,"mx-8","mt-1"],["src","../../../../../assets/windows.svg","width","32","height","32"],[1,"text-sm","text-gray-400","list-disc"],[3,"value"],[1,"text-base","font-semibold","mt-7"],[1,"grid","grid-cols-12","gap-3","my-4",3,"formGroupName"],[1,"col-span-3"],["formControlName","approverIds",3,"checkUsersLength","approverList"],["for","conditionSelect",1,"block","pb-1"],["formControlName","condition","aria-label","Default select example","id","conditionSelect",1,"h-10","mt-2","form-select","form-control",3,"change"],["value","or"],["value","none"],[1,"inline-flex","col-span-1","mt-8"],["direction","right",1,"mt-1","mr-4","-ml-2",3,"content"],[3,"contentTop","colorTop"],["tuiIconButton","","type","button","size","s","appearance","outline","icon","tuiIconMailLarge",3,"click"],[1,"col-span-4"],[1,"flex","justify-between","mt-8"],[1,"tui-space_bottom-3",3,"formControl","item"],[1,"mt-1","text-xxs","font-extralight"],[1,"col-span-1","mt-8"],["tuiIconButton","","type","button","size","s","appearance","secondary-destructive","icon","tuiIconTrash2Large",3,"click"],["value","and"],[1,"col-span-1","mt-8","-ml-4"],[1,"px-2.5","py-2","text-white","bg-blue-500","rounded-md","cursor-pointer","hover:text-white",3,"click"],[1,"flex","justify-between","my-8"],["tuiTabs","","vertical","left",1,"w-32","mr-5"],["tuiTab","",3,"click"],["class","w-full well jsonviewer",4,"ngIf"],[1,"w-full","well","jsonviewer"],[1,"relative","flex","justify-end","gap-x-2"],[1,"absolute","z-10","flex","justify-end","-top-[30px]","right-1","gap-x-2"],["title","Add default data",1,"rounded-md","cursor-pointer","mt-[0.5px]",3,"click"],["aria-hidden","true",1,"text-green-500","hover:text-green-600","fa","fa-table","fa-2x"],["title","Edit Form",1,"rounded-md","cursor-pointer",3,"click"],["aria-hidden","true",1,"text-blue-500","hover:text-blue-600","fa","fa-pencil-square","fa-2x"],[1,"rounded-md","cursor-pointer",3,"click"],["aria-hidden","true",1,"text-red-500","fa","fa-trash","fa-2x","hover:text-red-600"],[3,"language","options","form","submission"],[1,"grid","grid-cols-12","gap-2"],["data-placeholder","",1,"h-8","col-span-12","my-3","overflow-hidden","bg-gray-200","rounded-md"],[1,"grid","grid-cols-12","col-span-12","gap-2"],["data-placeholder","",1,"col-span-6","mb-3","overflow-hidden","bg-gray-200","rounded-md","h-28"],["data-placeholder","",1,"h-8","col-span-6","my-3","overflow-hidden","bg-gray-200","rounded-md"],[1,"w-full","mt-1","text-left","fv-plugins-message-container","text-xxs","2xl:text-xs"],["role","alert",1,"text-red-400","fv-help-block","text-xxs","2xl:text-xs","2xl:mb-2"],[1,"text-lg","font-semibold","text-center"],[1,"mt-3","text-base","font-medium","text-gray-500"],[1,"flex","flex-col","justify-center","my-5"],[1,"b-form",3,"formControl","tuiTextfieldLabelOutside","searchChange"],[3,"items",4,"tuiDataList"],[1,"flex","justify-start","gap-x-3"],["tuiButton","","type","button","size","m",3,"click"],["appearance","accent","tuiButton","","type","button","size","m",3,"click"],[3,"items"],[1,"text-base"],[1,"mt-2"],[1,"my-2"],[1,"text-base","text-center"],[1,"mt-2","leading-5"],[1,"mt-8","text-lg","font-semibold","text-center"],[1,"w-[80%]","mx-auto","my-8",3,"formGroup"],[1,"mb-2","font-medium"],["formControlName","summarySchema",3,"tuiTextfieldLabelOutside","ngModelChange"],[1,"mt-1","text-xxs"],["formArrayName","viewSchema"],[1,"flex","justify-end","my-2"],["tuiIconButton","","type","button","size","s","appearance","primary","icon","tuiIconPlus",3,"click"],[1,"flex","justify-center","gap-2"],["tuiButton","","type","button","size","m","appearance","primary",3,"click"],[1,"grid","grid-cols-12","gap-2","mb-3",3,"formGroupName"],["formControlName","fieldKey",1,"col-span-4",3,"tuiTextfieldLabelOutside"],["formControlName","displayAs",1,"col-span-4",3,"tuiTextfieldLabelOutside"],["tuiTextfield","","type","text",3,"tuiTextfieldLabelOutside"],["formControlName","type",1,"col-span-3"],["placeholder","Specify data type","tuiTextfield",""],["tuiIconButton","","type","button","size","s","appearance","secondary-destructive","icon","tuiIconTrash2",1,"col-span-1","mt-2",3,"click"],[1,"pb-2","text-xl","font-semibold","text-center","border-b","border-gray-400"],[1,"mt-4","text-base","font-medium","text-center"],[1,"flex","justify-center","mt-4"],["tuiButton","","appearance","secondary-destructive","type","button","size","m",1,"mx-3",3,"click"],[1,"w-[90%]","mx-auto"],[3,"options","form","submission","change"],[1,"flex","justify-center","gap-2","mb-5"]],template:function(n,t){if(1&n&&(e._UZ(0,"app-header"),e.TgZ(1,"section",0)(2,"section")(3,"h3",1),e._uU(4,"Edit app"),e.qZA(),e.TgZ(5,"h4",2),e._uU(6,"Basic Info"),e.qZA()(),e.TgZ(7,"form",3)(8,"div",4)(9,"div",5)(10,"label",6),e._uU(11,"App Title "),e.TgZ(12,"span",7),e._uU(13,"*"),e.qZA()(),e._UZ(14,"input",8),e.GkF(15,9),e.YNc(16,jt,2,0,"span",10),e.qZA(),e.TgZ(17,"div",5)(18,"label",6),e._uU(19,"App Code "),e.TgZ(20,"span",7),e._uU(21,"*"),e.qZA()(),e._UZ(22,"input",11),e.GkF(23,9)(24,9),e.YNc(25,Xt,2,0,"span",10),e.qZA()(),e.TgZ(26,"div",4)(27,"div",12)(28,"label",6),e._uU(29,"App Description"),e.TgZ(30,"span",7),e._uU(31,"*"),e.qZA()(),e._UZ(32,"textarea",13),e.GkF(33,9),e.qZA(),e.TgZ(34,"div",12)(35,"label",6),e._uU(36,"App Icon"),e.TgZ(37,"span",7),e._uU(38,"*"),e.qZA()(),e.TgZ(39,"label",14),e.NdJ("change",function(r){return t.onFileSelect(r)}),e.TgZ(40,"tui-loader",15),e.YNc(41,en,2,1,"div",16),e.YNc(42,tn,8,0,"div",17),e.qZA(),e._UZ(43,"input",18),e.qZA()()(),e.TgZ(44,"div",19)(45,"label",6),e._uU(46,"Company Name "),e.TgZ(47,"span",7),e._uU(48,"*"),e.qZA()(),e.TgZ(49,"select",20),e.YNc(50,nn,3,2,"ng-container",21),e.qZA(),e.GkF(51,9),e.qZA(),e.TgZ(52,"div",19)(53,"label",6),e._uU(54,"Category Name "),e.TgZ(55,"span",7),e._uU(56,"*"),e.qZA()(),e.TgZ(57,"select",22),e.YNc(58,on,3,2,"ng-container",21),e.qZA(),e.GkF(59,9),e.qZA(),e.TgZ(60,"section",23)(61,"h4",2),e._uU(62,"User Access & Control"),e.qZA()(),e.TgZ(63,"div",24)(64,"div",25)(65,"label",26),e._uU(66,"Admin users "),e._UZ(67,"tui-tooltip",27),e.TgZ(68,"sup"),e._uU(69,"(optional)"),e.qZA()(),e.TgZ(70,"custom-multi-select",28),e.NdJ("approverList",function(r){return t.setAdminUsers(r)}),e.qZA()(),e.TgZ(71,"div",25)(72,"label",26),e._uU(73,"View Only users "),e._UZ(74,"tui-tooltip",27),e.TgZ(75,"sup"),e._uU(76,"(optional)"),e.qZA()(),e.TgZ(77,"custom-multi-select",29),e.NdJ("approverList",function(r){return t.setViewUsers(r)}),e.qZA()()(),e.TgZ(78,"div",30)(79,"h4",31),e._uU(80,"Edit Workflow"),e.qZA(),e.ynx(81,32),e.YNc(82,dn,6,4,"ng-container",21),e.BQk(),e.TgZ(83,"button",33),e.NdJ("click",function(){return t.addWorkflowStep()}),e.qZA()(),e.TgZ(84,"div",34)(85,"div",35)(86,"h4",36),e._uU(87,"Dynamic Forms"),e.qZA(),e.YNc(88,mn,2,0,"a",37),e.qZA(),e.TgZ(89,"h4",38),e._uU(90,"Form/s Preview"),e.qZA(),e.TgZ(91,"div",39),e.YNc(92,fn,5,2,"ng-container",40),e.YNc(93,hn,9,0,"ng-container",40),e.qZA(),e.TgZ(94,"div",41)(95,"p",42),e._uU(96,"The form you add will appear here"),e.qZA()()(),e.TgZ(97,"div",43)(98,"a",44),e.NdJ("click",function(){return t.saveDraft()}),e._uU(99),e.qZA()(),e.TgZ(100,"div",45)(101,"button",46),e.NdJ("click",function(){return t.saveSubModule()}),e.ALo(102,"async"),e._uU(103," Update "),e.qZA(),e.TgZ(104,"button",47),e.NdJ("click",function(){return t.saveSubModule(3)}),e.ALo(105,"async"),e._uU(106," Save as Draft "),e.qZA(),e.TgZ(107,"button",48),e.NdJ("click",function(){return t.cancelSubmodule()}),e._uU(108,"Cancel"),e.qZA()()()(),e._UZ(109,"app-footer"),e.YNc(110,vn,1,1,"ng-template",null,49,e.W1O),e.YNc(112,yn,13,2,"ng-template",null,50,e.W1O),e.YNc(114,Tn,16,0,"ng-template",null,51,e.W1O),e.YNc(116,Cn,5,0,"ng-template",null,52,e.W1O),e.YNc(118,wn,5,0,"ng-template",null,53,e.W1O),e.YNc(120,Zn,26,3,"ng-template",null,54,e.W1O),e.YNc(122,Dn,9,0,"ng-template",null,55,e.W1O),e.YNc(124,kn,9,3,"ng-template",null,56,e.W1O)),2&n){const s=e.MAs(111),r=e.MAs(117),a=e.MAs(119);e.xp6(7),e.Q6J("formGroup",t.subModuleForm),e.xp6(7),e.Q6J("ngClass",null!=t.f.title&&t.f.title.invalid&&null!=t.f.title&&t.f.title.dirty?"is-invalid":""),e.xp6(1),e.Q6J("ngTemplateOutlet",s)("ngTemplateOutletContext",e.VKq(41,Un,t.f.title)),e.xp6(1),e.Q6J("ngIf",null==t.f.title?null:t.f.title.hasError("codeExists")),e.xp6(6),e.Q6J("ngClass",null!=t.f.code&&t.f.code.invalid&&null!=t.f.code&&t.f.code.dirty?"is-invalid":""),e.xp6(1),e.Q6J("ngTemplateOutlet",s)("ngTemplateOutletContext",e.VKq(43,On,t.f.code)),e.xp6(1),e.Q6J("ngTemplateOutlet",s)("ngTemplateOutletContext",e.VKq(45,En,t.f.code)),e.xp6(1),e.Q6J("ngIf",null==t.f.code?null:t.f.code.hasError("codeExists")),e.xp6(7),e.Q6J("ngClass",null!=t.f.description&&t.f.description.invalid&&null!=t.f.description&&t.f.description.dirty?"is-invalid":""),e.xp6(1),e.Q6J("ngTemplateOutlet",s)("ngTemplateOutletContext",e.VKq(47,Nn,t.f.description)),e.xp6(7),e.Q6J("inheritColor",!0)("size","l")("showLoader",!1)("overlay",!0),e.xp6(1),e.Q6J("ngIf",t.file),e.xp6(1),e.Q6J("ngIf",!t.file),e.xp6(7),e.Q6J("ngClass",null!=t.f.companyId&&t.f.companyId.invalid&&null!=t.f.companyId&&t.f.companyId.dirty?"is-invalid":""),e.xp6(1),e.Q6J("ngForOf",t.companyList),e.xp6(1),e.Q6J("ngTemplateOutlet",s)("ngTemplateOutletContext",e.VKq(49,Fn,t.f.companyId)),e.xp6(6),e.Q6J("ngClass",null!=t.f.categoryId&&t.f.categoryId.invalid&&null!=t.f.categoryId&&t.f.categoryId.dirty?"is-invalid":""),e.xp6(1),e.Q6J("ngForOf",t.categoryList),e.xp6(1),e.Q6J("ngTemplateOutlet",s)("ngTemplateOutletContext",e.VKq(51,Pn,t.f.categoryId)),e.xp6(8),e.Q6J("content",r),e.xp6(7),e.Q6J("content",a),e.xp6(8),e.Q6J("ngForOf",t.workflows.controls),e.xp6(6),e.Q6J("ngIf",(null==t.formComponents[0]||null==t.formComponents[0].components?null:t.formComponents[0].components.length)>0),e.xp6(4),e.Q6J("ngIf",(null==t.formComponents[0]||null==t.formComponents[0].components?null:t.formComponents[0].components.length)>0),e.xp6(1),e.Q6J("ngIf",0==(null==t.formComponents[0]||null==t.formComponents[0].components?null:t.formComponents[0].components.length)||0==(null==t.formComponents?null:t.formComponents.length)),e.xp6(6),e.hij(" ","Add form"," "),e.xp6(2),e.Q6J("showLoader",1==e.lcZ(102,37,t.isCreatingSubModule)),e.xp6(3),e.Q6J("showLoader",1==e.lcZ(105,39,t.isSavingAsDraft))}},dependencies:[i.mk,i.sg,i.O5,i.tP,le.G,ce.c,F.K3,F.wU,ae.MB,ve.xT,Q.eC,ye.gX,w.VT,z.uJ,z.OI,c._Y,c.YN,c.Kr,c.Fj,c.EJ,c.JJ,c.JL,c.Q7,c.oH,c.sg,c.u,c.x0,c.CE,xe.v0,Pe.k4,b,Le.e,f.p_,f.uW,f.yu,Y.V,ne.PZ,we.w,ke.kM,i.Ov]});var Ln=u(94813),Jn=u(54004),qe=u(69952),Qe=u(55314),Ye=u(78372),Ke=u(71884),Je=u(8276),Ge=u(91127),Se=u(44886),Ae=u(30243),Ve=u(67155),Be=u(82176),$e=u(87089),He=u(93422),ze=u(6229);function Bn(o,n){if(1&o&&e._UZ(0,"tui-data-list-wrapper",26),2&o){const t=e.oxw(3);e.Q6J("items",t.items)}}function Qn(o,n){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"select",30),e.NdJ("change",function(r){e.CHM(t);const a=e.oxw(5);return e.KtG(a.sendFilterValue(r))}),e.TgZ(2,"option",31),e._uU(3,"Select Status"),e.qZA(),e.TgZ(4,"option",32),e._uU(5,"Default"),e.qZA(),e.TgZ(6,"option",33),e._uU(7,"Created"),e.qZA(),e.TgZ(8,"option",34),e._uU(9,"Completed"),e.qZA(),e.TgZ(10,"option",35),e._uU(11,"In Progress"),e.qZA(),e.TgZ(12,"option",36),e._uU(13,"Draft"),e.qZA(),e.TgZ(14,"option",37),e._uU(15,"Cancelled"),e.qZA(),e.TgZ(16,"option",38),e._uU(17,"Deleted"),e.qZA()(),e.BQk()}}function Vn(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"tui-svg",43),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(4),a=r.$implicit,m=r.index,E=e.oxw(3);return e.KtG(E.sortFields(null==a?null:a.searchKey,"asc",m))}),e.qZA()}}function Rn(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"tui-svg",44),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(4),a=r.$implicit,m=r.index,E=e.oxw(3);return e.KtG(E.sortFields(null==a?null:a.searchKey,"desc",m))}),e.qZA()}}function qn(o,n){if(1&o&&(e.ynx(0),e.YNc(1,Vn,1,0,"tui-svg",41),e.YNc(2,Rn,1,0,"tui-svg",42),e.BQk()),2&o){const t=e.oxw(3).$implicit;e.xp6(1),e.Q6J("ngIf",null==t?null:t.showUpIcon),e.xp6(1),e.Q6J("ngIf",null==t?null:t.showDownIcon)}}function Yn(o,n){if(1&o&&(e.YNc(0,qn,3,2,"ng-container",39),e._UZ(1,"br")(2,"input",40)),2&o){const t=e.oxw(2).$implicit;e.Q6J("ngIf","Now Pending With"!=(null==t?null:t.key)),e.xp6(2),e.Q6J("formControl",null==t?null:t.search)}}function Kn(o,n){if(1&o&&(e.TgZ(0,"th",28),e._uU(1),e.YNc(2,Qn,18,0,"ng-container",0),e.YNc(3,Yn,3,2,"ng-template",null,29,e.W1O),e.qZA()),2&o){const t=e.MAs(4),s=e.oxw(),a=s.$implicit;e.Q6J("ngClass",s.first?"px-4 py-3 text-sm":"px-2 py-3 text-sm"),e.xp6(1),e.hij(" ",null==a?null:a.key,"\xa0 "),e.xp6(1),e.Q6J("ngIf","Status"==(null==a?null:a.key))("ngIfElse",t)}}function Gn(o,n){if(1&o&&(e.ynx(0),e.YNc(1,Kn,5,4,"th",27),e.BQk()),2&o){const t=n.$implicit;e.xp6(1),e.Q6J("ngIf",1==(null==t||null==t.isVisible?null:t.isVisible.value))}}function $n(o,n){1&o&&(e.ynx(0),e.TgZ(1,"th",45),e._uU(2," No submissions available! "),e.qZA(),e.BQk())}function Hn(o,n){if(1&o&&(e.ynx(0),e._uU(1),e.BQk()),2&o){const t=e.oxw(3).$implicit;e.xp6(1),e.hij(" ",null==t?null:t.code," ")}}function zn(o,n){if(1&o&&(e.ynx(0),e._uU(1),e.BQk()),2&o){const t=e.oxw(3).$implicit,s=e.oxw(4);e.xp6(1),e.hij(" ",s.showStatus(null==t?null:t.submissionStatus)," ")}}function Wn(o,n){if(1&o&&(e.ynx(0),e._uU(1),e.BQk()),2&o){const t=e.oxw(3).$implicit;e.xp6(1),e.hij(" ",null==t||null==t.summaryData||null==t.summaryData.lastActivityPerformedBy?null:t.summaryData.lastActivityPerformedBy.fullName," ")}}function jn(o,n){1&o&&(e.TgZ(0,"span"),e._uU(1,","),e.qZA())}function Xn(o,n){if(1&o&&(e.ynx(0),e.TgZ(1,"span"),e._uU(2),e.YNc(3,jn,2,0,"span",39),e._uU(4," \xa0"),e.qZA(),e.BQk()),2&o){const t=n.$implicit,s=n.last;e.xp6(2),e.Oqu(t),e.xp6(1),e.Q6J("ngIf",!s)}}const ei=function(){return[]};function ti(o,n){if(1&o&&(e.ynx(0),e.YNc(1,Xn,5,2,"ng-container",17),e.BQk()),2&o){const t=e.oxw(3).$implicit,s=e.oxw(4);e.xp6(1),e.Q6J("ngForOf",s.getPendingOnUsers((null==t||null==t.summaryData?null:t.summaryData.pendingOnUsers)||e.DdM(1,ei)))}}function ni(o,n){if(1&o&&(e.ynx(0),e.TgZ(1,"td",54),e._UZ(2,"progress",55),e.TgZ(3,"span"),e._uU(4),e.ALo(5,"number"),e.qZA()(),e.BQk()),2&o){const t=e.oxw(3).$implicit,s=e.oxw(4);e.xp6(1),e.Q6J("ngClass",6==(null==t?null:t.submissionStatus)?"text-red-500":""),e.xp6(1),e.Q6J("color",s.changeProgressColor(null==t||null==t.summaryData?null:t.summaryData.progress))("value",null==t||null==t.summaryData?null:t.summaryData.progress),e.xp6(2),e.hij("",e.xi3(5,4,null==t||null==t.summaryData?null:t.summaryData.progress,"1.1-2")," %")}}function ii(o,n){if(1&o&&(e.ynx(0),e._uU(1),e.BQk()),2&o){const t=e.oxw(2).$implicit,s=e.oxw().$implicit,r=e.oxw(4);e.xp6(1),e.hij(" ",r.bindValueFromSummaryData(null==s?null:s.summaryData,t.field)," ")}}const oi=function(o,n,t){return{"text-red-500":o,"pl-6":n,"px-3":t}};function si(o,n){if(1&o&&(e.ynx(0),e.TgZ(1,"td",50),e.ynx(2,51),e.YNc(3,Hn,2,1,"ng-container",52),e.YNc(4,zn,2,1,"ng-container",52),e.YNc(5,Wn,2,1,"ng-container",52),e.YNc(6,ti,2,2,"ng-container",52),e.YNc(7,ni,6,7,"ng-container",52),e.YNc(8,ii,2,1,"ng-container",53),e.BQk(),e.qZA(),e.BQk()),2&o){const t=e.oxw(),s=t.first,r=t.$implicit,a=e.oxw().$implicit;e.xp6(1),e.Q6J("ngClass",e.kEZ(7,oi,6==(null==a?null:a.submissionStatus),s,!s)),e.xp6(1),e.Q6J("ngSwitch",r.key),e.xp6(1),e.Q6J("ngSwitchCase","Code"),e.xp6(1),e.Q6J("ngSwitchCase","Status"),e.xp6(1),e.Q6J("ngSwitchCase","Last Activity By"),e.xp6(1),e.Q6J("ngSwitchCase","Now Pending With"),e.xp6(1),e.Q6J("ngSwitchCase","Progress")}}function ri(o,n){if(1&o&&(e.ynx(0),e.YNc(1,si,9,11,"ng-container",39),e.BQk()),2&o){const t=n.$implicit;e.xp6(1),e.Q6J("ngIf",null==t||null==t.isVisible?null:t.isVisible.value)}}function ai(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"a",66),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(4).$implicit,a=e.oxw(4);return e.KtG(a.editWorkflowRoute(null==r?null:r.id,null==r?null:r.code))}),e._uU(1," Edit \xa0 "),e._UZ(2,"i",67),e.qZA()}}function li(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"a",68),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(4).$implicit,a=e.oxw(4);return e.KtG(a.editWorkflowRoute(null==r?null:r.id,null==r?null:r.code))}),e._uU(1," View \xa0 "),e._UZ(2,"i",69),e.qZA()}}function ui(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"a",70),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(4).$implicit,a=e.oxw(4),m=e.MAs(8);return e.KtG(a.showDeleteDialog(m,"delete",null==r?null:r.id,null==r?null:r.workflowStatus))}),e._uU(1," Delete \xa0 "),e._UZ(2,"i",71),e.qZA()}}function ci(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"a",72),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(4).$implicit,a=e.oxw(4),m=e.MAs(8);return e.KtG(a.showDeleteDialog(m,"cancel",null==r?null:r.id,null==r?null:r.workflowStatus))}),e._uU(1," Cancel \xa0 "),e._UZ(2,"i",73),e.qZA()}}function di(o,n){if(1&o&&(e.TgZ(0,"div",61),e.YNc(1,ai,3,0,"a",62),e.YNc(2,li,3,0,"a",63),e.YNc(3,ui,3,0,"a",64),e.YNc(4,ci,3,0,"a",65),e.qZA()),2&o){const t=e.oxw(3).$implicit,s=e.oxw(4);e.xp6(1),e.Q6J("ngIf",1==s.checkEditDisableDeleteButton(t)&&2==(null==t?null:t.submissionStatus)),e.xp6(1),e.Q6J("ngIf",1==s.checkViewButtonCondition(t)),e.xp6(1),e.Q6J("ngIf",1==s.checkViewButtonCondition(t)&&2==(null==t?null:t.submissionStatus)),e.xp6(1),e.Q6J("ngIf",1==s.checkViewButtonCondition(t)&&2==(null==t?null:t.submissionStatus))}}const mi=function(o){return["/modules/edit-submission",o]};function pi(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"a",74),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(3).$implicit,a=e.oxw(4);return e.KtG(a.setWorkflowID(null==r?null:r.code,null==r?null:r.id))}),e._uU(1," Update Status \xa0 "),e._UZ(2,"i",75),e.qZA()}if(2&o){const t=e.oxw(3).$implicit;e.Q6J("routerLink",e.VKq(1,mi,null==t?null:t.id))}}function _i(o,n){if(1&o&&(e.TgZ(0,"div",58),e.YNc(1,di,5,4,"div",59),e.YNc(2,pi,3,3,"a",60),e.qZA()),2&o){const t=e.oxw(2).$implicit;e.xp6(1),e.Q6J("ngIf",4!==(null==t?null:t.submissionStatus)&&2!==(null==t?null:t.status)),e.xp6(1),e.Q6J("ngIf",4==(null==t?null:t.submissionStatus))}}function gi(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"button",56),e.NdJ("click",function(){e.CHM(t);const r=e.oxw().$implicit,a=e.oxw(4);return e.KtG(a.onClick(r))})("tuiActiveZoneChange",function(r){e.CHM(t);const a=e.oxw().$implicit,m=e.oxw(4);return e.KtG(m.onActiveZone(r,a))})("tuiObscured",function(r){e.CHM(t);const a=e.oxw().$implicit,m=e.oxw(4);return e.KtG(m.onObscured(r,a))}),e.YNc(1,_i,3,2,"ng-template",null,57,e.W1O),e.qZA()}if(2&o){const t=e.MAs(2),s=e.oxw().$implicit;e.Q6J("tuiDropdown",t)("tuiDropdownManual",null==s?null:s.menuOpen)("tuiDropdownAlign","right")}}function fi(o,n){if(1&o&&(e.ynx(0),e.TgZ(1,"tr",47),e.YNc(2,ri,2,1,"ng-container",17),e.TgZ(3,"td",48),e.YNc(4,gi,3,3,"button",49),e.qZA()(),e.BQk()),2&o){const t=n.$implicit,s=e.oxw(4);e.xp6(2),e.Q6J("ngForOf",s.tableHeaders),e.xp6(2),e.Q6J("ngIf",2!==(null==t?null:t.status))}}function hi(o,n){if(1&o&&e.YNc(0,fi,5,2,"ng-container",46),2&o){const t=e.oxw(3);e.Q6J("ngForOf",t.tableDataValue)("ngForTrackBy",t.trackByFn)}}function bi(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"div",6)(1,"div",7)(2,"div",8)(3,"tui-hosted-dropdown",9),e.NdJ("openChange",function(r){e.CHM(t);const a=e.oxw(2);return e.KtG(a.open=r)}),e._UZ(4,"button",10),e.qZA()(),e.TgZ(5,"div",8)(6,"label",11),e._uU(7,"Data to display"),e.qZA(),e.TgZ(8,"tui-select",12),e._UZ(9,"input",13),e.YNc(10,Bn,1,1,"tui-data-list-wrapper",14),e.qZA()()(),e.TgZ(11,"table",15)(12,"thead",16)(13,"tr"),e.YNc(14,Gn,2,1,"ng-container",17),e.TgZ(15,"th",18),e._uU(16," Actions "),e.qZA()()(),e.TgZ(17,"tbody"),e.YNc(18,$n,3,0,"ng-container",0),e.YNc(19,hi,1,2,"ng-template",null,19,e.W1O),e.qZA()(),e.TgZ(21,"div",20)(22,"tui-pagination",21),e.NdJ("indexChange",function(r){e.CHM(t);const a=e.oxw(2);return e.KtG(a.goToPage(r))}),e.qZA(),e.TgZ(23,"div",22)(24,"p",23),e._uU(25,"Items per page"),e.qZA(),e.TgZ(26,"select",24),e.NdJ("change",function(r){e.CHM(t);const a=e.oxw(2);return e.KtG(a.updatePagination(r))}),e.TgZ(27,"option",25),e._uU(28),e.qZA(),e.TgZ(29,"option",25),e._uU(30),e.qZA(),e.TgZ(31,"option",25),e._uU(32),e.qZA()()()()()}if(2&o){const t=e.MAs(20),s=e.oxw().ngIf,r=e.oxw(),a=e.MAs(4),m=e.MAs(6);e.xp6(3),e.Q6J("content",a)("open",r.open),e.xp6(1),e.Q6J("tuiHint",m),e.xp6(4),e.Q6J("formControl",r.showSchema)("tuiTextfieldLabelOutside",!0),e.xp6(6),e.Q6J("ngForOf",r.tableHeaders),e.xp6(4),e.Q6J("ngIf",0==(null==r.tableDataValue?null:r.tableDataValue.length))("ngIfElse",t),e.xp6(4),e.Q6J("length",(null==s?null:s.totalPages)||1)("index",(null==s?null:s.page)-1||0),e.xp6(5),e.Q6J("selected",10==r.limit)("value",10==r.limit?r.limit:"10"),e.xp6(1),e.Oqu(10==r.limit?r.limit:"10"),e.xp6(1),e.Q6J("selected",50==r.limit)("value",50==r.limit?r.limit:"50"),e.xp6(1),e.Oqu(50==r.limit?r.limit:"50"),e.xp6(1),e.Q6J("selected",100==r.limit)("value",100==r.limit?r.limit:"100"),e.xp6(1),e.Oqu(100==r.limit?r.limit:"100")}}function vi(o,n){if(1&o&&(e.ynx(0),e.YNc(1,bi,33,19,"div",5),e.ALo(2,"async"),e.BQk()),2&o){const t=e.oxw();let s;e.xp6(1),e.Q6J("ngIf",(null==(s=e.lcZ(2,1,t.moduleData))||null==s.formIds?null:s.formIds.length)>0)}}function xi(o,n){1&o&&e._UZ(0,"app-table-loader")}function yi(o,n){if(1&o&&(e.TgZ(0,"div",81),e._UZ(1,"tui-checkbox",82),e.TgZ(2,"p",83),e._uU(3),e.qZA()()),2&o){const t=n.$implicit;e.xp6(1),e.Q6J("formControl",null==t?null:t.isVisible),e.xp6(2),e.Oqu(null==t?null:t.key)}}function Ti(o,n){if(1&o&&(e.TgZ(0,"div",76)(1,"p",77),e._uU(2,"Toggle table columns:"),e.qZA(),e.YNc(3,yi,4,2,"div",78),e.TgZ(4,"p",79)(5,"span",80),e._uU(6,"Note"),e.qZA(),e._uU(7,": Select upto 4 keys to be displayed simultaneously for a better "),e.qZA()()),2&o){const t=e.oxw();e.xp6(3),e.Q6J("ngForOf",t.tableHeaders)}}function Ci(o,n){1&o&&(e.TgZ(0,"strong",84),e._uU(1,"Toggle table columns"),e.qZA())}function wi(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"p",85),e._uU(1),e.qZA(),e.TgZ(2,"p",86),e._uU(3," You are about to "),e.TgZ(4,"span",28),e._uU(5),e.qZA(),e._uU(6," this submission. Are you sure you want to continue? "),e.qZA(),e.TgZ(7,"div",87)(8,"label",88),e._uU(9,"Comments "),e.TgZ(10,"sup"),e._uU(11,"(optional)"),e.qZA()(),e._UZ(12,"textarea",89),e.qZA(),e.TgZ(13,"div",90)(14,"button",91),e.NdJ("click",function(){const a=e.CHM(t).$implicit;return e.oxw().sendDeleteOrCancelDecision(),e.KtG(a.complete())}),e.ALo(15,"async"),e._uU(16," Confirm "),e.qZA(),e.TgZ(17,"button",92),e.NdJ("click",function(){const a=e.CHM(t).$implicit;return e.oxw().remarks.reset(),e.KtG(a.complete())}),e._uU(18," Cancel "),e.qZA()()}if(2&o){const t=e.oxw();e.xp6(1),e.hij(" ",t.dialogTitle," Submission "),e.xp6(3),e.Q6J("ngClass","Delete"==t.dialogTitle?"text-red-500":"text-[#cf5c27]"),e.xp6(1),e.Oqu(t.dialogTitle),e.xp6(7),e.Q6J("formControl",t.remarks),e.xp6(2),e.Q6J("showLoader",1==e.lcZ(15,5,t.sendingDecision))}}class Ie{constructor(n,t,s,r,a,m){this.workflowService=n,this.auth=t,this.dashboard=s,this.router=r,this.activatedRoute=a,this.dialogs=m,this.subscriptions=[],this.adminUsers=[],this.createdByUsers=[],this.destroy$=new y.x,this.searchValue=new c.NI,this.items=["Display default","Display via View Schema"],this.open=!1,this.openDrop=!1,this.statusMenu=[{name:"Created",status:"idle",icon:""},{name:"Completed",status:"idle",icon:""},{name:"In Progress",status:"idle",icon:""},{name:"Draft",status:"idle",icon:""},{name:"Cancelled",status:"idle",icon:""},{name:"Deleted",status:"idle",icon:""}],this.page=1,this.limit=10,this.remarks=new c.NI(""),this.showSchema=new c.NI("Display default"),this.showUpIcon=!0,this.showDownIcon=!1,this.saveDialogSubscription=[],this.sendingDecision=new y.x,this.tableHeaders=[{key:"Code",searchKey:"code",isVisible:new c.NI(!0),showUpIcon:!0,showDownIcon:!1,type:"text",search:new c.NI(null)},{key:"Status",searchKey:"submissionStatus",isVisible:new c.NI(!0),showUpIcon:!0,showDownIcon:!1,type:"text",search:new c.NI(null)},{key:"Last Activity By",searchKey:"lastActivityPerformedBy",isVisible:new c.NI(!0),showUpIcon:!0,showDownIcon:!1,type:"text",search:new c.NI(null)},{key:"Now Pending With",searchKey:"pendingOnUsers",isVisible:new c.NI(!0),showUpIcon:!0,showDownIcon:!1,type:"text",search:new c.NI(null)},{key:"Progress",searchKey:"progress",isVisible:new c.NI(!0),showUpIcon:!0,showDownIcon:!1,type:"number",search:new c.NI(null)}],this.currentUser=this.auth.currentUserValue,this.userRoleCheckAdmin=this.auth.checkIfRolesExist("sysAdmin"),this.activatedRoute.queryParams.subscribe(E=>{E.moduleID&&(this.submoduleId=E.moduleID,this.fetchDataAndPopulate(),this.moduleData=this.dashboard.getSubModuleByID(E.moduleID),this.moduleData.subscribe(me=>{0==me.viewSchema?.length&&(this.items=["Display default"])}))}),this.showSchema.valueChanges.pipe((0,h.R)(this.destroy$)).subscribe(E=>{"Display default"==E&&(this.tableHeaders=[{key:"Code",searchKey:"code",isVisible:new c.NI(!0),showUpIcon:!0,showDownIcon:!1,type:"text",search:new c.NI(null)},{key:"Status",searchKey:"submissionStatus",isVisible:new c.NI(!0),showUpIcon:!0,showDownIcon:!1,type:"text",search:new c.NI(null)},{key:"Last Activity By",searchKey:"lastActivityPerformedBy",isVisible:new c.NI(!0),showUpIcon:!0,showDownIcon:!1,type:"text",search:new c.NI(null)},{key:"Now Pending With",searchKey:"pendingOnUsers",isVisible:new c.NI(!0),showUpIcon:!0,showDownIcon:!1,type:"text",search:new c.NI(null)},{key:"Progress",searchKey:"progress",isVisible:new c.NI(!0),showUpIcon:!0,showDownIcon:!1,type:"number",search:new c.NI(null)}],this.fetchDataAndPopulate()),"Display via View Schema"==E&&this.subscriptions.push(this.dashboard.getSubModuleByID(this.submoduleId).subscribe(me=>{this.submoduleData=me;let be=this.submoduleData?.viewSchema?.map((L,O)=>({key:L?.displayAs,field:L?.fieldKey,formKey:L?.formKey,searchKey:L.fieldKey,isVisible:new c.NI(O<4),showUpIcon:!0,showDownIcon:!1,type:L?.type,search:new c.NI(null)}));this.tableHeaders=be,this.tableHeaders.forEach(L=>{L.search&&L.search.valueChanges.pipe((0,Ye.b)(400),(0,Ke.x)(),(0,h.R)(this.destroy$)).subscribe(O=>{let _e;if(O){if(["lastActivityPerformedBy","pendingOnUsers"].includes(L?.searchKey)&&(_e={summaryData:{[L?.searchKey]:{fullName:O}}}),"progress"==L?.searchKey&&(_e={summaryData:{[L?.searchKey]:Number(O)}}),!["lastActivityPerformedBy","pendingOnUsers","progress"].includes(L?.searchKey))if("Number"==L?.type){let Fe=[];Fe.push({key:L?.field,value:Number(L?.search?.value)}),_e={summaryData:{forms:Fe}}}else{let Fe=[];Fe.push({key:L?.field,value:L?.search?.value}),_e={summaryData:{forms:Fe}}}}else _e={};this.sendSearchCallForFilters(_e)})})}))})}setWorkflowID(n,t){(0,d.LS)(d.MX.formKey,n),(0,d.LS)(d.MX.editSubmissionId,t)}onClick(n){n.menuOpen=!n.menuOpen}onObscured(n,t){n&&(t.menuOpen=!1)}onActiveZone(n,t){t.menuOpen=n&&t.menuOpen}updatePagination(n){this.limit=Number(n?.target?.value),this.fetchDataAndPopulate()}checkViewButtonCondition(n){return!(this.currentUser&&!this.currentUser.roles.includes("sysAdmin")&&"disabled"==n.subModuleId.accessType&&!n.workFlowUsers.includes(this.currentUser.id))}checkEditDisableDeleteButton(n){return!(!this.currentUser.roles.includes("sysAdmin")&&"disabled"==n.subModuleId.accessType&&!n.activeStepUsers.includes(this.currentUser.id))}fetchDataAndPopulate(){this.subscriptions.push(this.workflowService.getSubmissionFromSubModule(this.submoduleId,this.limit,this.page).subscribe(n=>{this.submissionData=n,this.tableDataValue=n?.results?.map(t=>({...t,isVisible:!0,menuOpen:!1})),this.createdByUsers=n?.results?.map(t=>t?.subModuleId?.createdBy),this.tableHeaders.forEach(t=>{t.search&&t.search.valueChanges.pipe((0,Ye.b)(400),(0,Ke.x)()).subscribe(s=>{let r;s?(["lastActivityPerformedBy","pendingOnUsers"].includes(t?.searchKey)&&(r={summaryData:{[t?.searchKey]:{fullName:s}}}),"progress"==t?.searchKey&&(r={summaryData:{[t?.searchKey]:Number(s)}}),"code"==t?.searchKey&&(r={[t?.searchKey]:s}),["lastActivityPerformedBy","pendingOnUsers","progress","code"].includes(t?.searchKey)||(r={summaryData:{[t?.searchKey]:s}})):r={},this.sendSearchCallForFilters(r)})})}))}showDeleteDialog(n,t,s,r){r?.map(a=>{"inProgress"==a?.status&&(this.currentStepId=a?.stepId)}),this.isDeleting=t,this.workflowID=s,"delete"==t&&(this.dialogTitle="Delete"),"cancel"==t&&(this.dialogTitle="Cancel"),"enable"==t&&(this.dialogTitle="Enable"),this.saveDialogSubscription.push(this.dialogs.open(n,{dismissible:!0,closeable:!0}).subscribe())}sendDeleteOrCancelDecision(){this.sendingDecision.next(!0);let n={stepId:this.currentStepId,userId:this.currentUser?.id,remarks:this.remarks?.value||void 0,type:"submittal"};"delete"==this.isDeleting&&(Object.assign(n,{status:2}),this.workflowService.updateSubmissionWorkflow(this.workflowID,n).pipe((0,h.R)(this.destroy$)).subscribe(t=>{t&&(this.sendingDecision.next(!1),this.saveDialogSubscription.forEach(s=>s.unsubscribe()),this.fetchDataAndPopulate())})),"cancel"==this.isDeleting&&(Object.assign(n,{submissionStatus:5}),this.workflowService.updateSubmissionWorkflow(this.workflowID,n).pipe((0,h.R)(this.destroy$)).subscribe(t=>{t&&(this.sendingDecision.next(!1),this.saveDialogSubscription.forEach(s=>s.unsubscribe),this.remarks.reset(),this.fetchDataAndPopulate())})),"enable"==this.isDeleting&&(Object.assign(n,{submissionStatus:2}),this.workflowService.updateSubmissionWorkflow(this.workflowID,n).pipe((0,h.R)(this.destroy$)).subscribe(t=>{t&&(this.sendingDecision.next(!1),this.saveDialogSubscription.forEach(s=>s.unsubscribe),this.fetchDataAndPopulate())}))}sendSearchCallForFilters(n){this.workflowService.getSubmissionFromSubModule(this.submoduleId,this.limit,this.page,void 0,void 0,void 0,n).pipe((0,h.R)(this.destroy$)).subscribe(t=>{this.submissionData=t,this.tableDataValue=t?.results?.map(s=>({...s,isVisible:!0})),this.createdByUsers=t?.results?.map(s=>s?.subModuleId?.createdBy)})}fetchSummaryDataForValues(n,t){this.subscriptions.push(this.workflowService.getSubmissionFromSubModule(this.submoduleId,this.limit,this.page).subscribe(s=>{this.summaryData=s.results[n]?.summaryData,this.bindValueFromSummaryData(this.summaryData,t)}))}checkIfUserisAdmin(n){return n?.map(t=>t?.id).includes(this.currentUser?.id)}checkIfUserIsFirstUser(n){if("inProgress"==n[0]?.status)return n[0]?.activeUsers?.includes(this.currentUser?.id)}checkIfUserisViewOnly(n){return n?.map(t=>t?.id).includes(this.currentUser?.id)}changeProgressColor(n){return n<=49?"#F15B41":n>49&&n<75?"#F9B71A":n>=75?"#32de84":"#fff"}showStatus(n){return 1===n?"Created":3===n?"Completed":2===n?"In Progress":4===n?"Draft":5===n?"Cancelled":6===n?"Deleted":"Rejected"}checkIfUserisPartofWorkflow(n){return n?.map(t=>t?._id)?.includes(this.currentUser?.id)}checkIfUserisActiveUser(n){return n?.flatMap(t=>"inProgress"==t?.status?t.activeUsers:null)?.filter(t=>t).includes(this.currentUser?.id)}checkIfUserisApprovedUser(n){return n?.flatMap(t=>t.approvedUsers)?.includes(this.currentUser?.id)}checkIfUserisCreator(){return this.createdByUsers?.includes(this.currentUser?.id)}getPendingOnUsers(n){return n?.map(t=>t?.fullName)}bindValueFromSummaryData(n,t){const s=this.tableHeaders.find(r=>r.field===t);if(s){let r=s?.key.split(" ")?.map(a=>a.toLowerCase()).join("-");return n[r]}return""}sendFilterValue(n){switch(Number(n?.target?.value)){case 0:this.workflowService.getSubmissionFromSubModule(this.submoduleId,this.limit,this.page).pipe((0,h.R)(this.destroy$)).subscribe(t=>{this.submissionData=t,this.tableDataValue=t?.results});break;case 1:this.workflowService.getSubmissionFromSubModule(this.submoduleId,this.limit,this.page,1).pipe((0,h.R)(this.destroy$)).subscribe(t=>{this.submissionData=t,this.tableDataValue=t?.results});break;case 3:this.workflowService.getSubmissionFromSubModule(this.submoduleId,this.limit,this.page,3).pipe((0,h.R)(this.destroy$)).subscribe(t=>{this.submissionData=t,this.tableDataValue=t?.results});break;case 2:this.workflowService.getSubmissionFromSubModule(this.submoduleId,this.limit,this.page,2).pipe((0,h.R)(this.destroy$)).subscribe(t=>{this.submissionData=t,this.tableDataValue=t?.results});break;case 4:this.workflowService.getSubmissionFromSubModule(this.submoduleId,this.limit,this.page,4).pipe((0,h.R)(this.destroy$)).subscribe(t=>{this.submissionData=t,this.tableDataValue=t?.results});break;case 5:this.workflowService.getSubmissionFromSubModule(this.submoduleId,this.limit,this.page,5).pipe((0,h.R)(this.destroy$)).subscribe(t=>{this.submissionData=t,this.tableDataValue=t?.results});break;case 6:this.workflowService.getSubmissionFromSubModule(this.submoduleId,this.limit,this.page,6).pipe((0,h.R)(this.destroy$)).subscribe(t=>{this.submissionData=t,this.tableDataValue=t?.results})}}searchViaFilter(n){console.log(n)}sortFields(n,t,s){"asc"==t&&(this.workflowService.getSubmissionFromSubModule(this.submoduleId,this.limit,this.page,void 0,n,"asc").pipe((0,h.R)(this.destroy$)).subscribe(r=>{this.submissionData=r,this.tableDataValue=r?.results?.map(a=>({...a,isVisible:!0})),this.createdByUsers=r?.results?.map(a=>a?.subModuleId?.createdBy)}),this.tableHeaders[s].showUpIcon=!1,this.tableHeaders[s].showDownIcon=!0),"desc"==t&&(this.workflowService.getSubmissionFromSubModule(this.submoduleId,this.limit,this.page,void 0,n).pipe((0,h.R)(this.destroy$)).subscribe(r=>{this.submissionData=r,this.tableDataValue=r?.results?.map(a=>({...a,isVisible:!0})),this.createdByUsers=r?.results?.map(a=>a?.subModuleId?.createdBy)}),this.tableHeaders[s].showUpIcon=!0,this.tableHeaders[s].showDownIcon=!1)}resetFilterValues(n){n&&this.workflowService.getSubmissionFromSubModule(this.submoduleId,this.limit,this.page).pipe((0,h.R)(this.destroy$)).subscribe(t=>{this.submissionData=t,this.tableDataValue=t?.results})}trackByFn(n,t){return t?.id}addSubmissionRoute(){this.router.navigate([`/modules/${(0,d.rV)(d.MX.moduleSlug)}/add-submission`,this.submoduleId])}editWorkflowRoute(n,t){(0,d.LS)(d.MX.formKey,t),(0,d.LS)(d.MX.formID,n),this.router.navigate(["/modules",(0,d.rV)(d.MX.moduleSlug),t,n])}goToPage(n){this.page=n+1,this.workflowService.getSubmissionFromSubModule(this.submoduleId,this.limit,this.page).pipe((0,h.R)(this.destroy$)).subscribe(t=>{this.submissionData=t,this.tableDataValue=t?.results})}ngOnDestroy(){this.destroy$.complete(),this.destroy$.unsubscribe(),this.subscriptions.forEach(n=>n.unsubscribe())}}function Si(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"div",9)(1,"a",10),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.addSubmissionRoute())}),e._uU(2,"+ Add submission"),e.qZA()()}}function Ai(o,n){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"app-table-view",3),e.NdJ("emitPagination",function(r){e.CHM(t);const a=e.oxw();return e.KtG(a.sendPagination(r))})("emitDeleteEvent",function(r){e.CHM(t);const a=e.oxw();return e.KtG(a.itemDeleted(r))})("emitPageChange",function(r){e.CHM(t);const a=e.oxw();return e.KtG(a.fetchFreshData(r))}),e.qZA(),e.TgZ(2,"div",4),e._UZ(3,"hr"),e.qZA(),e.TgZ(4,"div",5)(5,"div",6),e.YNc(6,Si,3,0,"div",7),e.ALo(7,"async"),e.ALo(8,"async"),e.ALo(9,"async"),e.ALo(10,"async"),e.ALo(11,"async"),e.ALo(12,"async"),e.qZA(),e._UZ(13,"app-submission-table",8),e.qZA(),e.BQk()}if(2&o){const t=n.ngIf,s=e.oxw();let r;e.xp6(1),e.Q6J("moduleData",s.moduleData)("tableData",t),e.xp6(5),e.Q6J("ngIf",(null==(r=e.lcZ(7,4,s.moduleData))||null==r.formIds?null:r.formIds.length)>0&&(1==s.checkIfAdminUserIsOnFirstStep(null==(r=e.lcZ(8,6,s.moduleData))||null==r.workFlowId||null==r.workFlowId.stepIds[0]?null:r.workFlowId.stepIds[0].approverIds)||s.checkIfUserisAdmin(null==(r=e.lcZ(9,8,s.moduleData))?null:r.adminUsers)||1==s.userRoleCheckSys||0==(null==s.currentUser||null==s.currentUser.roles?null:s.currentUser.roles.length)||0==s.disableModify(null==(r=e.lcZ(10,10,s.moduleData))?null:r.accessType,null==(r=e.lcZ(11,12,s.moduleData))?null:r.adminUsers)||(null==s.currentUser?null:s.currentUser.id)==(null==(r=e.lcZ(12,14,s.moduleData))?null:r.createdBy))),e.xp6(7),e.Q6J("moduleData",s.moduleData)}}function Ii(o,n){1&o&&e._UZ(0,"app-table-loader")}Ie.\u0275fac=function(n){return new(n||Ie)(e.Y36(ze.C),e.Y36(se.e),e.Y36(ee.s),e.Y36(l.F0),e.Y36(l.gz),e.Y36(A.RO))},Ie.\u0275cmp=e.Xpm({type:Ie,selectors:[["app-submission-table"]],inputs:{submissionData:"submissionData",moduleData:"moduleData"},standalone:!0,features:[e.jDz],decls:9,vars:2,consts:[[4,"ngIf","ngIfElse"],["noData",""],["dropdown",""],["hint",""],["dialog",""],["class","relative overflow-x-auto rounded-lg shadow-lg border border-[#a58f81]",4,"ngIf"],[1,"relative","overflow-x-auto","rounded-lg","shadow-lg","border","border-[#a58f81]"],[1,"text-sm","text-white","bg-[#a58f81]","px-4","py-5","w-full","flex","justify-between"],[1,"w-1/3"],["tuiDropdownAlign","left",3,"content","open","openChange"],["tuiIconButton","","type","button","size","m","appearance","custom","icon","tuiIconMenuLarge","tuiHintDirection","right",1,"tui-space_left-3","tui-space_top-2","border","border-[#a58f81]","bg-white",3,"tuiHint"],[1,"mb-1","text-base","font-medium"],[3,"formControl","tuiTextfieldLabelOutside"],["tuiTextfield","","placeholder","Choose data to display"],[3,"items",4,"tuiDataList"],[1,"w-full","text-sm","text-left","text-gray-500"],[1,"text-xs","text-white","uppercase","bg-[#a58f81]"],[4,"ngFor","ngForOf"],["scope","col",1,"px-6","py-3","mb-1","text-sm"],["showSubmissions",""],[1,"flex","justify-between","pt-10","pb-6"],[1,"mx-5","mt-1",3,"length","index","indexChange"],[1,"flex","mx-5","gap-x-2"],[1,"w-full","mt-2"],["aria-label","Default select example 2",1,"form-select","form-control","w-[68%]",3,"change"],[3,"selected","value"],[3,"items"],[3,"ngClass",4,"ngIf"],[3,"ngClass"],["otherFilters",""],["aria-label","Default select example",1,"form-select","form-control",3,"change"],["selected","","disabled",""],["value","0"],["value","1"],["value","3"],["value","2"],["value","4"],["value","5"],["value","6"],[4,"ngIf"],["type","text",1,"form-control",3,"formControl"],["new","","src","tuiIconArrowUp","class","-mt-1 -ml-2 cursor-pointer",3,"click",4,"ngIf"],["new","","src","tuiIconArrowDown","class","-mt-1 -ml-2 cursor-pointer",3,"click",4,"ngIf"],["new","","src","tuiIconArrowUp",1,"-mt-1","-ml-2","cursor-pointer",3,"click"],["new","","src","tuiIconArrowDown",1,"-mt-1","-ml-2","cursor-pointer",3,"click"],["colspan","12","role","row",1,"px-5","py-10","text-lg","text-center"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"bg-white","border-b","border-gray-300"],[1,"px-5","py-4"],["icon","tuiIconMoreVerticalLarge","tuiIconButton","","type","button","size","s","appearance","secondary","class","ml-3",3,"tuiDropdown","tuiDropdownManual","tuiDropdownAlign","click","tuiActiveZoneChange","tuiObscured",4,"ngIf"],[1,"py-4",3,"ngClass"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],[1,"flex","justify-between","px-2","py-4",3,"ngClass"],["tuiProgressBar","","max","100","size","s",1,"w-9/12","mt-1.5",3,"color","value"],["icon","tuiIconMoreVerticalLarge","tuiIconButton","","type","button","size","s","appearance","secondary",1,"ml-3",3,"tuiDropdown","tuiDropdownManual","tuiDropdownAlign","click","tuiActiveZoneChange","tuiObscured"],["dropdownContent",""],[1,"px-2","py-5","bg-white"],["class","flex flex-col items-center gap-3",4,"ngIf"],["title","Edit Submission","class","px-3 py-2 ml-2 text-xs font-medium text-black no-underline bg-white cursor-pointer hover:text-black",3,"routerLink","click",4,"ngIf"],[1,"flex","flex-col","items-center","gap-3"],["title","Perform Workflow Action","class","w-20 h-6 px-1 py-1 text-xs font-medium text-center text-black no-underline bg-white cursor-pointer hover:text-black",3,"click",4,"ngIf"],["title","View Submission","class","w-20 h-6 px-1 py-1 text-center ml-1.5 text-xs font-medium text-black no-underline bg-white cursor-pointer hover:text-black",3,"click",4,"ngIf"],["title","Delete Submission","class","w-20 h-6 px-1 py-1 text-center ml-1.5 text-xs font-medium text-black no-underline bg-white rounded-md cursor-pointer hover:text-black",3,"click",4,"ngIf"],["title","Cancel Submission","class","w-20 h-6 px-1 py-1 text-center ml-1.5 text-xs font-medium text-black no-underline bg-white rounded-md cursor-pointer hover:text-black",3,"click",4,"ngIf"],["title","Perform Workflow Action",1,"w-20","h-6","px-1","py-1","text-xs","font-medium","text-center","text-black","no-underline","bg-white","cursor-pointer","hover:text-black",3,"click"],["aria-hidden","true",1,"fa","fa-pencil"],["title","View Submission",1,"w-20","h-6","px-1","py-1","text-center","ml-1.5","text-xs","font-medium","text-black","no-underline","bg-white","cursor-pointer","hover:text-black",3,"click"],["aria-hidden","true",1,"fa","fa-eye","fa-lg"],["title","Delete Submission",1,"w-20","h-6","px-1","py-1","text-center","ml-1.5","text-xs","font-medium","text-black","no-underline","bg-white","rounded-md","cursor-pointer","hover:text-black",3,"click"],["aria-hidden","true",1,"fa","fa-trash","fa-lg"],["title","Cancel Submission",1,"w-20","h-6","px-1","py-1","text-center","ml-1.5","text-xs","font-medium","text-black","no-underline","bg-white","rounded-md","cursor-pointer","hover:text-black",3,"click"],["aria-hidden","true",1,"fa","fa-ban","fa-lg"],["title","Edit Submission",1,"px-3","py-2","ml-2","text-xs","font-medium","text-black","no-underline","bg-white","cursor-pointer","hover:text-black",3,"routerLink","click"],["aria-hidden","true",1,"fa","fa-edit","fa-lg"],[1,"flex","flex-col","items-start","justify-center","px-3","py-3","rounded-lg","shadow-lg","gap-y-4"],[1,"text-base","font-semibold"],["class","flex mt-4 gap-x-2",4,"ngFor","ngForOf"],[1,"invisible","mt-2","text-xxs"],[1,"underline"],[1,"flex","mt-4","gap-x-2"],[1,"mt-0.5",3,"formControl"],[1,"capitalize"],[1,"text-sm"],[1,"mb-5","text-lg","font-semibold","text-center"],[1,"text-base","font-semibold","text-center"],[1,"flex","flex-col","justify-center","my-5"],["for","Textarea1",1,"block"],["id","Textarea1","rows","4",1,"form-control",3,"formControl"],[1,"flex","justify-start","gap-2"],["tuiButton","","type","button","size","m",3,"showLoader","click"],["tuiButton","","appearance","secondary-destructive","type","button","size","m",3,"click"]],template:function(n,t){if(1&n&&(e.YNc(0,vi,3,3,"ng-container",0),e.YNc(1,xi,1,0,"ng-template",null,1,e.W1O),e.YNc(3,Ti,8,1,"ng-template",null,2,e.W1O),e.YNc(5,Ci,2,0,"ng-template",null,3,e.W1O),e.YNc(7,wi,19,7,"ng-template",null,4,e.W1O)),2&n){const s=e.MAs(2);e.Q6J("ngIf",t.submissionData)("ngIfElse",s)}},dependencies:[i.ez,i.mk,i.sg,i.O5,i.RF,i.n9,i.ED,i.Ov,i.JJ,Ve.V5,Ve.iv,Be.i,Be.r,Qe.X,c.UX,c.YN,c.Kr,c.Fj,c.JJ,c.oH,xe.fN,xe.v0,l.Bz,l.rH,$e.x,$e.f,F.Qf,ae.MB,ve.cn,ve.xT,Je.EI,Je.PN,Q.zX,Q.eC,ye.gX,z.Jy,z.uJ,z.OI,Ge.jh,Ge.o1,Ae.Ek,Se.go,Se.D,Se.xn,Se.t6,Se.DM,Ae.dp,Ae.td,Ae.VC,Ae.Tp,Ae.A9,He.A,He.e]});class Ee{constructor(n,t,s,r,a){this.dashBoardService=n,this.activatedRoute=t,this.transport=s,this.router=r,this.auth=a,this.limit=7,this.page=1,this.searchValue=new c.NI,this.destroy$=new y.x,this.currentUser=this.auth.currentUserValue,this.userRoleCheckAdmin=this.auth.checkIfRolesExist("admin"),this.userRoleCheckUser=this.auth.checkIfRolesExist("user"),this.userRoleCheckSys=this.auth.checkIfRolesExist("sysAdmin"),this.activatedRoute.params.pipe((0,Ln.j)("name"),(0,Jn.U)(m=>((0,d.LS)(d.MX.moduleSlug,m),this.moduleSlug=m,m)),(0,h.R)(this.destroy$)).subscribe(m=>{this.subModuleData=this.dashBoardService.getSubModuleByModuleSlug(m,this.limit,this.page)}),this.activatedRoute.queryParams.pipe((0,h.R)(this.destroy$)).subscribe(m=>{m.moduleID&&((0,d.LS)(d.MX.moduleID,m.moduleID),this.transport.moduleID.next(m.moduleID),this.moduleData=this.dashBoardService.getSubModuleByID(m.moduleID))})}checkAccess(n){return!(0==this.userRoleCheckSys&&"disabled"==n?.accessType&&!n?.submissionCreators.includes(this.currentUser?.id))}disableModify(n,t){return!!("disabled"==n||t?.length>0&&t?.map(s=>s?.id).includes(this.currentUser?.id))}addSubmissionRoute(){this.router.navigate([`/modules/${(0,d.rV)(d.MX.moduleSlug)}/add-submission`,this.transport.moduleID?.value])}checkIfUserisAdmin(n){return n?.map(t=>t?.id).includes(this.currentUser?.id)}fetchFreshData(n){n&&(this.subModuleData=this.dashBoardService.getSubModuleByModuleSlug((0,d.rV)(d.MX.moduleSlug),this.limit,1),this.moduleData=this.dashBoardService.getSubModuleByID((0,d.rV)(d.MX.moduleID)))}itemDeleted(n){1==n&&(this.subModuleData=this.dashBoardService.getSubModuleByModuleSlug(this.moduleSlug,this.limit,this.page))}sendPagination(n){n&&(this.page=n,this.subModuleData=this.dashBoardService.getSubModuleByModuleSlug(this.moduleSlug,this.limit,this.page))}checkIfAdminUserIsOnFirstStep(n){return n?.map(t=>t?.id)?.includes(this.currentUser?.id)}ngOnDestroy(){this.destroy$.complete(),this.destroy$.unsubscribe()}}Ee.\u0275fac=function(n){return new(n||Ee)(e.Y36(ee.s),e.Y36(l.gz),e.Y36($.R),e.Y36(l.F0),e.Y36(se.e))},Ee.\u0275cmp=e.Xpm({type:Ee,selectors:[["ng-component"]],decls:7,vars:4,consts:[[1,"w-11/12","h-auto","min-h-screen","mx-auto","mt-48","mb-10"],[4,"ngIf","ngIfElse"],["noData",""],[3,"moduleData","tableData","emitPagination","emitDeleteEvent","emitPageChange"],[1,"mt-8"],[1,"my-8"],[1,"flex","justify-end","mb-5"],["class","mt-2 cursor-pointer",4,"ngIf"],[3,"moduleData"],[1,"mt-2","cursor-pointer"],[1,"px-6","py-3","rounded-md","bg-[#a58f81]","text-white","no-underline","hover:text-white","text-base",3,"click"]],template:function(n,t){if(1&n&&(e._UZ(0,"app-header"),e.TgZ(1,"section",0),e.YNc(2,Ai,14,16,"ng-container",1),e.ALo(3,"async"),e.YNc(4,Ii,1,0,"ng-template",null,2,e.W1O),e.qZA(),e._UZ(6,"app-footer")),2&n){const s=e.MAs(5);e.xp6(2),e.Q6J("ngIf",e.lcZ(3,2,t.subModuleData))("ngIfElse",s)}},dependencies:[i.O5,le.G,ce.c,qe.x,Qe.X,Ie,i.Ov]});class Me{resolve(n){return(0,d.rV)(d.MX.moduleSlug)}}Me.\u0275fac=function(n){return new(n||Me)},Me.\u0275prov=e.Yz7({token:Me,factory:Me.\u0275fac,providedIn:"root"});var We=u(35601),Re=u(29093),Mi=u(82210);const Zi=["formioForm"];function Di(o,n){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",23),e.NdJ("click",function(){const a=e.CHM(t).index,m=e.oxw();return e.KtG(m.activeIndex=a)}),e._uU(2),e.qZA(),e.BQk()}if(2&o){const t=n.$implicit;e.xp6(2),e.Oqu(t)}}function ki(o,n){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",24)(2,"div",25)(3,"a",26),e.NdJ("click",function(){const r=e.CHM(t),a=r.index,m=r.$implicit,E=e.oxw();return e.KtG(E.sendFormForEdit(a,null==m?null:m._id,null==m?null:m.key))}),e._UZ(4,"i",27),e.qZA()(),e.TgZ(5,"formio",28,29),e.NdJ("change",function(r){const m=e.CHM(t).index,E=e.oxw();return e.KtG(E.onChange(r,m))}),e.qZA()(),e.BQk()}if(2&o){const t=n.$implicit,s=n.index,r=e.oxw();e.xp6(1),e.Q6J("ngClass",r.activeIndex==s?"block":"hidden"),e.xp6(4),e.Q6J("submission",r.formValues[s]||t)("options",r.options)("form",t)}}function Ui(o,n){1&o&&(e.TgZ(0,"span",51),e._uU(1,"Please select either AND or OR as the condition"),e.qZA())}function Oi(o,n){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"p",33),e._uU(2),e.qZA(),e.TgZ(3,"div",34)(4,"div",35)(5,"label",36),e._uU(6),e.TgZ(7,"span",37),e._uU(8,"*"),e.qZA()(),e.TgZ(9,"custom-multi-select",38),e.NdJ("checkUsersLength",function(r){const m=e.CHM(t).index,E=e.oxw(2);return e.KtG(E.countUsers(r,m))})("approverList",function(r){const m=e.CHM(t).index,E=e.oxw(2);return e.KtG(E.getApproverList(r,m))}),e.qZA(),e.YNc(10,Ui,2,0,"span",39),e.ALo(11,"async"),e.qZA(),e.TgZ(12,"div",35)(13,"label",40),e._uU(14,"Condition "),e.TgZ(15,"span",37),e._uU(16,"*"),e.qZA()(),e.TgZ(17,"select",41),e.NdJ("change",function(){const a=e.CHM(t).index,m=e.oxw(2);return e.KtG(m.validateSelection(a))}),e.TgZ(18,"option",42),e._uU(19,"AND"),e.qZA(),e.TgZ(20,"option",43),e._uU(21,"OR"),e.qZA(),e.TgZ(22,"option",44),e._uU(23,"NONE"),e.qZA()()(),e.TgZ(24,"div",45),e._UZ(25,"tui-tooltip",46),e.TgZ(26,"tui-badged-content",47)(27,"button",48),e.NdJ("click",function(){const a=e.CHM(t).index,m=e.oxw(2),E=e.MAs(36);return e.KtG(m.openEmailNotifyModal(E,m.workflows,a))}),e.qZA()()(),e.TgZ(28,"div",49)(29,"button",50),e.NdJ("click",function(){const a=e.CHM(t).index,m=e.oxw(2);return e.KtG(m.removeWorkflowStep(a))}),e.qZA()()(),e.BQk()}if(2&o){const t=n.index,s=n.first,r=e.oxw(2),a=e.MAs(38);let m;e.xp6(2),e.hij("Step ",0===t?"1":t+1,""),e.xp6(1),e.Q6J("formGroupName",t),e.xp6(3),e.hij("",s?"Creators":"Approvers"," "),e.xp6(4),e.Q6J("ngIf",e.lcZ(11,7,r.showError)&&t===r.errorIndex),e.xp6(15),e.Q6J("content",a),e.xp6(1),e.Q6J("contentTop",null==(m=r.workflows.at(t).get("emailNotifyTo"))||null==m.value?null:m.value.length)("colorTop","green")}}function Ei(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"div",30)(1,"h4",1),e._uU(2,"Modify submodule workflow"),e.qZA(),e.ynx(3,31),e.YNc(4,Oi,30,9,"ng-container",5),e.BQk(),e.TgZ(5,"button",32),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.addWorkflowStep())}),e.qZA()()}if(2&o){const t=e.oxw();e.Q6J("formGroup",t.workflowForm),e.xp6(4),e.Q6J("ngForOf",t.workflows.controls)}}function Ni(o,n){if(1&o&&(e.TgZ(0,"ul",64)(1,"li",65),e._uU(2),e.qZA()()),2&o){const t=n.$implicit;e.xp6(2),e.Oqu(t)}}function Fi(o,n){1&o&&e._UZ(0,"i",66)}function Pi(o,n){if(1&o&&(e.TgZ(0,"div",57)(1,"div",58)(2,"p",59),e._uU(3),e.qZA(),e.YNc(4,Ni,3,1,"ul",60),e.TgZ(5,"div",61),e._uU(6),e.qZA()(),e.TgZ(7,"div",62),e.YNc(8,Fi,1,0,"i",63),e.qZA()()),2&o){const t=e.oxw(),s=t.index,r=t.$implicit,a=t.last;e.xp6(3),e.hij("Step ",s+1,""),e.xp6(1),e.Q6J("ngForOf",null==r?null:r.approvers),e.xp6(2),e.hij(" ",null==r?null:r.condition," "),e.xp6(2),e.Q6J("ngIf",!a)}}function Li(o,n){1&o&&(e.ynx(0),e.YNc(1,Pi,9,4,"div",56),e.BQk())}function Ji(o,n){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"tui-island",52)(2,"h4",53),e._uU(3,"Workflow Steps"),e.qZA(),e.TgZ(4,"tui-carousel",54),e.NdJ("indexChange",function(r){e.CHM(t);const a=e.oxw();return e.KtG(a.carouselIndex=r)}),e.YNc(5,Li,2,0,"ng-container",5),e.qZA(),e.TgZ(6,"tui-pagination",55),e.NdJ("indexChange",function(r){e.CHM(t);const a=e.oxw();return e.KtG(a.carouselIndex=r)}),e.qZA()(),e.BQk()}if(2&o){const t=e.oxw();e.xp6(4),e.Q6J("draggable",!0)("itemsCount",3)("index",t.carouselIndex),e.xp6(1),e.Q6J("ngForOf",t.items),e.xp6(1),e.Q6J("length",(null==t.items?null:t.items.length)>2?(null==t.items?null:t.items.length)-2:null==t.items?null:t.items.length)("index",t.carouselIndex)}}function Bi(o,n){1&o&&(e.ynx(0),e.TgZ(1,"p",67),e._uU(2,"Approval logs are empty!"),e.qZA(),e.BQk())}function Qi(o,n){if(1&o&&(e.ynx(0),e.TgZ(1,"div",68)(2,"p",69),e._uU(3,"Performed by: \xa0 "),e.TgZ(4,"span",70),e._uU(5),e.qZA()(),e.TgZ(6,"p",71),e._uU(7,"Action: \xa0 "),e.TgZ(8,"span",72),e._uU(9),e.qZA()(),e.TgZ(10,"p",73),e._uU(11," Approved On: "),e.TgZ(12,"span",70),e._uU(13),e.ALo(14,"date"),e.qZA()(),e.TgZ(15,"p",69),e._uU(16,"Comments: "),e.TgZ(17,"span",70),e._uU(18),e.qZA()()(),e.BQk()),2&o){const t=n.$implicit;e.xp6(4),e.Q6J("ngClass","approved"==(null==t?null:t.approvalStatus)?"text-green-500":"text-gray-600"),e.xp6(1),e.Oqu(null!=t&&t.onBehalfOf?(null==t||null==t.onBehalfOf?null:t.onBehalfOf.fullName)+" on behalf of "+(null==t||null==t.performedById?null:t.performedById.fullName):null==t||null==t.performedById?null:t.performedById.fullName),e.xp6(3),e.Q6J("ngClass","approved"==(null==t?null:t.approvalStatus)?"text-green-500":"text-gray-600"),e.xp6(1),e.Oqu(null==t?null:t.approvalStatus),e.xp6(3),e.Q6J("ngClass","approved"==(null==t?null:t.approvalStatus)?"text-green-500":"text-gray-600"),e.xp6(1),e.hij("\xa0",e.xi3(14,8,null==t?null:t.approvedOn,"medium"),""),e.xp6(4),e.Q6J("ngClass","approved"==(null==t?null:t.approvalStatus)?"text-green-500":"text-gray-600"),e.xp6(1),e.hij("\xa0",null==t?null:t.remarks,"")}}function Vi(o,n){if(1&o&&e._UZ(0,"tui-data-list-wrapper",82),2&o){const t=e.oxw(2);e.Q6J("items",t.userListForEmail)}}function Ri(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"p",74),e._uU(1,"Email Notification Users"),e.qZA(),e.TgZ(2,"p",75),e._uU(3," Please specify the users you want to send the notification email to "),e.qZA(),e.TgZ(4,"div",76)(5,"tui-input-tag",77),e.NdJ("searchChange",function(r){e.CHM(t);const a=e.oxw();return e.KtG(a.onSearchChange(r))}),e._uU(6," Type to search and press Enter to select... "),e.YNc(7,Vi,1,1,"tui-data-list-wrapper",78),e.qZA()(),e.TgZ(8,"div",79)(9,"button",80),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.validateEmails())}),e._uU(10," Confirm & Close "),e.qZA(),e.TgZ(11,"button",81),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.cancelEmailNotify())}),e._uU(12," Remove Users & Close "),e.qZA()()}if(2&o){const t=e.oxw();e.xp6(5),e.Q6J("formControl",null==t.currentFieldArray||null==t.currentFieldArray.controls[t.activeEmailIndex]?null:t.currentFieldArray.controls[t.activeEmailIndex].controls.emailNotifyTo)("tuiTextfieldLabelOutside",!0)}}function qi(o,n){1&o&&(e.TgZ(0,"strong",83),e._uU(1,"How conditions work?"),e.qZA(),e._UZ(2,"hr"),e.TgZ(3,"ul",84)(4,"li")(5,"strong"),e._uU(6,"AND"),e.qZA(),e._uU(7," implies that every user of the step must provide approval"),e.qZA(),e.TgZ(8,"li",85)(9,"strong"),e._uU(10,"OR"),e.qZA(),e._uU(11," implies that any one of the users may provide approval"),e.qZA(),e.TgZ(12,"li")(13,"strong"),e._uU(14,"NONE"),e.qZA(),e._uU(15," implies that there is only one user per step and hence no conditon is necessary"),e.qZA()())}class Ne{constructor(n,t,s,r,a,m,E,me,be,L){this.auth=n,this.notif=t,this.router=s,this.fb=r,this.dashboard=a,this.workflowService=m,this.dialogs=E,this.activatedRoute=me,this.location=be,this.transportService=L,this.formTabs=[],this.activeIndex=0,this.options={disableAlerts:!0,noDefaultSubmitButton:!0},this.items=[],this.activeItemIndex=0,this.limit=10,this.page=0,this.destroy$=new y.x,this.search$=new y.x,this.userListForEmail=[],this.saveDialogSubscription=[],this.creatingSubmission=new y.x,this.carouselIndex=0,this.errorIndex=0,this.showError=new y.x,this.formSubmission=new D.X([]),this.formValues=[],this.approvalLogs=[],this.currentUser=this.auth.currentUserValue,this.userRoleCheck=this.auth.checkIfRolesExist("sysAdmin"),this.initWorkflowForm(),this.activatedRoute.params.pipe((0,h.R)(this.destroy$)).subscribe(O=>{this.subModuleId=O.id,this.fetchAndPopulateData(this.subModuleId)}),this.search$.pipe((0,B.w)(O=>this.dashboard.getAllUsersForListing(this.limit,this.page,O))).subscribe(O=>{O&&(this.userListForEmail=O?.results?.map(_e=>_e?.email))}),this.dashboard.getAllUsersForListing(this.limit,this.page).pipe((0,h.R)(this.destroy$)).subscribe(O=>{O&&(this.userListForEmail=O?.results?.map(_e=>_e?.email))})}ngOnInit(){const n=(0,d.rV)(d.MX.navHierarchy);n.forEach(t=>{t.routerLink=`/modules/${t.code}?moduleID=${(0,d.rV)(d.MX.moduleID)}`}),this.dashboard.items=[...n,{caption:(0,d.rV)(d.MX.formKey)||"Edit Submission",routerLink:`/modules/edit-submission/${(0,d.rV)(d.MX.editSubmissionId)}`}]}fetchAndPopulateData(n){this.workflowService.getWorkflowSubmission(n).pipe((0,h.R)(this.destroy$)).subscribe(t=>{if(t){this.subModuleData=t,this.workFlowId=t?.workFlowId?._id,this.approvalLogs=t?.approvalLog,this.forms=t?.formIds?.map(r=>(U.cQ.eachComponent(r?.components,a=>{"select"==a?.type&&(a.template=a.template?.replace(/&lt;/g,"<").replace(/&gt;/g,">")),a?.wysiwyg&&1==a?.wysiwyg&&(r.sanitize=!0)},!0),{...r,components:r?.components?.map(a=>(a?.label&&"Submit"==a?.label&&(a.hidden=!0),a)),formDataId:t?.formDataIds?.map(a=>{if(a.formId==r?._id)return a?._id}).filter(a=>a)[0],data:t?.formDataIds?.map(a=>{if(a.formId==r?._id)return a?.data}).filter(a=>a)[0]})),U.cQ.eachComponent(this.forms,r=>{if(r?.permissions&&r?.permissions?.length>0)return r?.permissions?.map(a=>{this.currentUser?.id==a?.id&&(r.disabled=1!=a.canEdit,r.hidden=0==a.canView)})},!0),this.formTabs=t?.formIds?.map(r=>r.title),this.items=t?.workFlowId?.stepIds?.map(r=>({approvers:r?.approverIds?.map(a=>a?.fullName),condition:r?.condition,emailNotifyTo:r?.emailNotifyToId?.notifyUsers||[]}));const s=t?.workFlowId?.stepIds?.map(r=>({id:r?.id,approverIds:r?.approverIds?.map(a=>({name:a?.fullName,id:a?._id,control:new c.NI(!0)})),condition:r?.condition,emailNotifyTo:r?.emailNotifyToId?.notifyUsers||[],emailNotifyToId:r?.emailNotifyToId?.id}));delete this.subModuleData?.workFlowId,Object.assign(this.subModuleData,{workFlowId:s}),this.initWorkflowForm(s)}})}checkApprovalLogs(){return this.approvalLogs?.map(n=>n?.approvalStatus)?.includes("approved")||this.approvalLogs?.map(n=>n?.approvalStatus)?.includes("created")}initWorkflowForm(n){this.workflowForm=this.fb.group(n?{workflows:this.fb.array(n?.map(t=>this.fb.group({id:t.id,condition:[t.condition,c.kI.required],approverIds:[t.approverIds,c.kI.required],emailNotifyTo:[t.emailNotifyTo||[],c.kI.required],emailNotifyToId:t?.emailNotifyToId})))}:{workflows:this.fb.array([this.fb.group({condition:["",c.kI.required],approverIds:[[],c.kI.required],emailNotifyTo:[[],c.kI.required]})])})}get workflows(){return this.workflowForm.controls.workflows}addWorkflowStep(){const n=this.fb.group({approverIds:[[],c.kI.required],condition:[{value:"",disabled:""},c.kI.required],emailNotifyTo:[[],c.kI.required]});this.workflows.push(n)}removeWorkflowStep(n){this.workflows.removeAt(n)}getApproverList(n,t){this.workflows.at(t)?.get("approverIds")?.setValue(n)}sendFormForEdit(n,t,s){if(t){let r=this.workflows?.value?.flatMap(a=>a?.approverIds?.map(m=>({id:m.id,name:m.name})));if(0==r.length)return this.notif.displayNotification("Please create a default workflow before adding forms","Default Workflow","warning");this.transportService.editBreadcrumbs.next(this.dashboard.items),(0,d.LS)(d.MX.editBreadcrumbs,this.dashboard.items),(0,d.LS)(d.MX.formKey,s),(0,d.LS)(d.MX.approvers,r),this.router.navigate(["/forms/edit-form"],{queryParams:{id:t}})}}dataSubmitValidation(){return!(0==this.workflows?.length||this.workflows.controls.map(n=>0==n.get("approverIds")?.value.length).includes(!0)||!0===this.workflows.controls.map(n=>n.get("condition")?.value).includes(""))}openEmailNotifyModal(n,t,s){this.activeEmailIndex=s,this.currentFieldArray=t,this.saveDialogSubscription.push(this.dialogs.open(n,{dismissible:!1,closeable:!1}).subscribe())}onSearchChange(n){this.search$.next(n)}validateEmails(){let n=this.workflows.at(this.activeEmailIndex)?.get("emailNotifyTo")?.value;n=n.map(t=>!!/\S+@\S+\.\S+/.test(t)),n.includes(!1)?this.notif.displayNotification("Please provide valid email addresses","Email Notify","warning"):this.saveDialogSubscription.forEach(t=>t.unsubscribe())}cancelEmailNotify(){this.workflows.at(this.activeEmailIndex)?.get("emailNotifyTo")?.setValue([]),this.saveDialogSubscription.forEach(n=>n.unsubscribe())}countUsers(n,t){return this.errorIndex=t,n<2?(this.workflows.at(t)?.get("condition")?.setValue("none"),this.notif.displayNotification('Default condition of "None" will be used if the number of approvers is less than 2',"Create Module","info"),this.showError.next(!1)):n>=2&&"none"==this.workflows.at(t)?.get("condition")?.value?this.showError.next(!0):void this.showError.next(!1)}validateSelection(n){return this.errorIndex=n,this.workflows.at(n)?.get("approverIds")?.value?.length<2?(this.workflows.at(n)?.get("condition")?.setValue("none"),this.notif.displayNotification('Default condition of "None" will be used if the number of approvers is less than 2',"Create Module","info"),this.showError.next(!1)):this.workflows.at(n)?.get("approverIds")?.value?.length>=2&&"none"==this.workflows.at(n)?.get("condition")?.value?this.showError.next(!0):void this.showError.next(!1)}cancelSubmission(){this.router.navigate(["/modules",(0,d.rV)(d.MX.moduleSlug)||""],{queryParams:{moduleID:(0,d.rV)(d.MX.moduleID)||""}})}onChange(n,t){if(n?.data&&n?.changed){if(n?.changed&&"file"==n?.changed?.component?.type){let a=n?.changed?.component?.key;n?.data[a]?.forEach(m=>{m.url=m?.data?.baseUrl.split("v1")[0]+m?.data?.fileUrl})}const s=this.subModuleData?.formDataIds[t]?._id,r=this.subModuleData?.formDataIds[t]?.formId;this.formValues[t]={...n,formId:s,id:r}}}editSubmission(n){let t=JSON.parse(JSON.stringify(this.forms)),s=[];if(t?.forEach((m,E)=>{this.formioForms.toArray()[E].formio?.components?.forEach((me,be)=>{!0===me?._disabled&&this.formioForms.toArray()[E].formio?.components?.splice(be,1)})}),t?.forEach((m,E)=>{this.formioForms.toArray()[E].formio?.components?.forEach((me,be)=>{let L=this.formioForms.toArray()[E].formio.checkValidity(me.key,!0,null,!1);s.push(L)})}),s.includes(!1))return this.notif.displayNotification("Please provide valid data for all required fields","Form Validation","warning");if(0==this.dataSubmitValidation())return this.notif.displayNotification("Please provide valid condition for the workflow step/s","Create Submission","warning");if(this.workflows.controls.map(m=>m.get("approverIds")?.value.length>1&&m.get("condition")?.value).includes("none"))return this.notif.displayNotification("Please provide valid condition for the workflow step/s","Create Submission","warning");this.creatingSubmission.next(!0);let r=[];t?.forEach((m,E)=>{r=this.formValues[E]?this.formValues?.map(me=>({formId:me?._id||me?.id,data:me?.data||me?.defaultData?.data||{},id:me?.formDataId||me?.formId})):[...r,{formId:m._id,id:m?.formDataId,data:m?.defaultData?.data||{}}],this.formSubmission.next(r)});const a={workFlowId:this.workFlowId,formDataIds:this.formSubmission?.value,submissionStatus:n||1,type:"edit",steps:this.workflows?.value?.map(m=>({id:m?.id?m?.id:void 0,approverIds:m?.approverIds?.map(E=>E.id?E.id:E),condition:m?.condition,emailNotifyTo:m?.emailNotifyTo||[],emailNotifyToId:m?.emailNotifyToId?m?.emailNotifyToId:void 0}))};this.workflowService.updateSubmissionWorkflow(this.subModuleId,a).pipe((0,h.R)(this.destroy$)).subscribe(m=>{m&&(this.creatingSubmission.next(!0),this.location.back())})}ngOnDestroy(){this.destroy$.complete(),this.destroy$.unsubscribe()}}Ne.\u0275fac=function(n){return new(n||Ne)(e.Y36(se.e),e.Y36(R.T),e.Y36(l.F0),e.Y36(c.qu),e.Y36(ee.s),e.Y36(ze.C),e.Y36(A.RO),e.Y36(l.gz),e.Y36(i.Ye),e.Y36($.R))},Ne.\u0275cmp=e.Xpm({type:Ne,selectors:[["ng-component"]],viewQuery:function(n,t){if(1&n&&e.Gf(Zi,5),2&n){let s;e.iGM(s=e.CRH())&&(t.formioForms=s)}},decls:39,vars:13,consts:[[1,"w-11/12","h-auto","min-h-screen","mx-auto","mt-52","pb-44"],[1,"text-lg","font-semibold"],[1,"flex","flex-col","w-full","px-5","mx-auto","mt-5","border","border-gray-400","border-dashed","rounded-md","bg-gray-50"],[1,"relative","flex","justify-between","my-8"],["tuiTabs","","vertical","left",1,"w-32","mr-5"],[4,"ngFor","ngForOf"],[3,"activeItemIndex","activeItemIndexChange"],["tuiTab",""],["src","tuiIconEye",1,"tui-space_right-2"],["src","tuiIconEdit",1,"tui-space_right-2"],["class","mt-12",3,"formGroup",4,"ngIf"],[4,"ngIf"],[1,"flex","justify-end","gap-5","mt-8"],["tuiButton","","type","button","size","m","appearance","primary",3,"showLoader","click"],["tuiButton","","type","button","size","m","appearance","secondary",3,"showLoader","click"],["tuiButton","","type","button","size","m","appearance","accent",3,"click"],[1,"my-4"],[1,"mb-5","text-lg","font-semibold"],[1,"grid","grid-cols-12"],[1,"col-span-12","w-[97.5%]"],["size","l",1,"w-full","shadow-lg"],["template",""],["hint",""],["tuiTab","",3,"click"],[1,"w-full","well","jsonviewer",3,"ngClass"],[1,"absolute","z-10","-top-8","right-1"],["title","Edit Form",1,"rounded-md","cursor-pointer",3,"click"],["aria-hidden","true",1,"text-blue-500","fa","fa-pencil-square","fa-2x","hover:text-blue-600"],[3,"submission","options","form","change"],["formioForm",""],[1,"mt-12",3,"formGroup"],["formArrayName","workflows"],["tuiIconButton","","type","button","size","m","appearance","primary","icon","tuiIconPlusLarge",3,"click"],[1,"text-base","font-semibold","mt-7"],[1,"grid","grid-cols-12","gap-3","my-4",3,"formGroupName"],[1,"col-span-4"],[1,"block","pb-1"],[1,"text-xs","text-red-400"],["formControlName","approverIds",3,"checkUsersLength","approverList"],["class","text-xs text-red-500",4,"ngIf"],["for","conditionSelect",1,"block","pb-1"],["formControlName","condition","aria-label","Default select example","id","conditionSelect",1,"h-10","form-select","form-control",3,"change"],["value","and"],["value","or"],["value","none"],[1,"inline-flex","col-span-1","mt-8"],["direction","right",1,"mt-1","mr-4","-ml-2",3,"content"],[3,"contentTop","colorTop"],["tuiIconButton","","type","button","size","s","appearance","outline","icon","tuiIconMailLarge",3,"click"],[1,"col-span-1","mt-8","-ml-8"],["tuiIconButton","","type","button","size","s","appearance","secondary-destructive","icon","tuiIconTrash2Large",3,"click"],[1,"text-xs","text-red-500"],["size","l",1,"w-[97.5%]","my-4","shadow-lg","border","border-[#F15B41]","px-5","mx-auto"],[1,"mb-5","text-base","font-semibold","text-gray-700"],[3,"draggable","itemsCount","index","indexChange"],["size","s",1,"my-5","pagination",3,"length","index","indexChange"],["class","flex justify-between w-full",4,"tuiItem"],[1,"flex","justify-between","w-full"],[1,"relative","w-full","px-4","py-4","text-left","border","border-gray-200","rounded-md","bg-gray-50"],[1,"mb-2","text-lg","font-semibold","text-gray-700"],["class","px-5",4,"ngFor","ngForOf"],[1,"absolute","top-0","right-0","px-3","py-1","text-sm","font-semibold","bg-gray-200","rounded-b-none","text-slate-700","rounded-r-md"],[1,"ml-4","mt-7"],["class","fa fa-long-arrow-right fa-lg","aria-hidden","true",4,"ngIf"],[1,"px-5"],[1,"list-disc"],["aria-hidden","true",1,"fa","fa-long-arrow-right","fa-lg"],[1,"py-5","text-base","font-semibold","text-center","text-gray-500"],[1,"grid","grid-cols-12","py-3","border-b","border-gray-300","gap-x-3"],[1,"col-span-3","font-normal"],[1,"font-semibold",3,"ngClass"],[1,"col-span-2","font-normal"],[1,"font-semibold","capitalize",3,"ngClass"],[1,"col-span-4","font-normal"],[1,"text-lg","font-semibold","text-center"],[1,"mt-3","text-base","font-medium","text-gray-500"],[1,"flex","flex-col","justify-center","my-5"],[1,"b-form",3,"formControl","tuiTextfieldLabelOutside","searchChange"],[3,"items",4,"tuiDataList"],[1,"flex","justify-start","gap-x-3"],["tuiButton","","type","button","size","m",3,"click"],["appearance","accent","tuiButton","","type","button","size","m",3,"click"],[3,"items"],[1,"text-base"],[1,"mt-2"],[1,"my-2"]],template:function(n,t){1&n&&(e._UZ(0,"app-header"),e.TgZ(1,"section",0)(2,"p",1),e._uU(3,"Forms"),e.qZA(),e.TgZ(4,"div",2)(5,"section",3)(6,"nav",4),e.YNc(7,Di,3,1,"ng-container",5),e.qZA(),e.YNc(8,ki,7,4,"ng-container",5),e.qZA()(),e.TgZ(9,"tui-tabs",6),e.NdJ("activeItemIndexChange",function(r){return t.activeItemIndex=r}),e.TgZ(10,"button",7),e._UZ(11,"tui-svg",8),e._uU(12," Approval Workflow "),e.qZA(),e.TgZ(13,"button",7),e._UZ(14,"tui-svg",9),e._uU(15," Modify Workflow "),e.qZA()(),e.YNc(16,Ei,6,2,"div",10),e.YNc(17,Ji,7,6,"ng-container",11),e.TgZ(18,"div",12)(19,"button",13),e.NdJ("click",function(){return t.editSubmission()}),e.ALo(20,"async"),e._uU(21," Update Submission "),e.qZA(),e.TgZ(22,"button",14),e.NdJ("click",function(){return t.editSubmission(4)}),e.ALo(23,"async"),e._uU(24," Save as Draft "),e.qZA(),e.TgZ(25,"button",15),e.NdJ("click",function(){return t.cancelSubmission()}),e._uU(26," Cancel "),e.qZA()(),e.TgZ(27,"section",16)(28,"p",17),e._uU(29,"Approval Logs"),e.qZA(),e.TgZ(30,"div",18)(31,"div",19)(32,"tui-island",20),e.YNc(33,Bi,3,0,"ng-container",11),e.YNc(34,Qi,19,11,"ng-container",5),e.qZA()()()()(),e.YNc(35,Ri,13,2,"ng-template",null,21,e.W1O),e.YNc(37,qi,16,0,"ng-template",null,22,e.W1O)),2&n&&(e.xp6(7),e.Q6J("ngForOf",t.formTabs),e.xp6(1),e.Q6J("ngForOf",t.forms),e.xp6(1),e.Q6J("activeItemIndex",t.activeItemIndex),e.xp6(7),e.Q6J("ngIf",1==t.activeItemIndex),e.xp6(1),e.Q6J("ngIf",0==t.activeItemIndex),e.xp6(2),e.Q6J("showLoader",e.lcZ(20,9,t.creatingSubmission)),e.xp6(3),e.Q6J("showLoader",e.lcZ(23,11,t.creatingSubmission)),e.xp6(11),e.Q6J("ngIf",0==(null==t.approvalLogs?null:t.approvalLogs.length)),e.xp6(1),e.Q6J("ngForOf",t.approvalLogs))},dependencies:[i.mk,i.sg,i.O5,le.G,ve.xT,Q.eC,ye.gX,c.YN,c.Kr,c.EJ,c.JJ,c.JL,c.oH,c.sg,c.u,c.x0,c.CE,xe.v0,Pe.k4,Le.e,f.H9,f.p_,f.uW,f.yu,Mi.w,We.h,Re.VF,Re.EB,Be.r,Y.V,ne.PZ,we.w,Je.PN,i.Ov,i.uU]});const Yi=[{path:"",component:V,resolve:{breadcrumb:Me},children:[{path:":name",component:Ee,canActivate:[zt.v]},{path:"add-module/:id",component:Ue,data:{breadcrumb:"Add App"}},{path:"edit-module/:id",component:Oe,data:{breadcrumb:"Edit App"}},{path:"edit-submission/:id",component:Ne,data:{breadcrumb:"Edit Submission"}},{path:":name",data:{preload:!0},loadChildren:()=>u.e(169).then(u.bind(u,99169)).then(o=>o.WorkflowsModule)},{path:"",component:V}]}];class Ze{}Ze.\u0275fac=function(n){return new(n||Ze)},Ze.\u0275mod=e.oAB({type:Ze}),Ze.\u0275inj=e.cJS({imports:[l.Bz.forChild(Yi),l.Bz]});var Ki=u(14375),Gi=u(73347),$i=u(6110);class De{}De.\u0275fac=function(n){return new(n||De)},De.\u0275mod=e.oAB({type:De}),De.\u0275inj=e.cJS({imports:[i.ez,Ze,le.G,ce.c,qe.x,Ki.N,F.Qf,ve.cn,Q.zX,w.lm,z.Jy,c.UX,c.u5,xe.fN,Pe.XI,_,$i.z,Le.e,f.$$,We.y,Re.Xj,Be.i,Ve.V5,Y.f,ne.cB,Qe.X,we.Q,Se.go,ke.dS,Ie,Je.EI,ne.cB,ye.pc,Gi.s]})},6229:(ge,oe,u)=>{u.d(oe,{C:()=>U});var i=u(34782),l=u(54004),d=u(61005),e=u(94650),V=u(80529),c=u(22603);class U extends d.s{constructor(D,y){super(D),this.http=D,this.notif=y}getWorkflowSubmission(D){return this.get(`/submissions/${D}`).pipe((0,i.d)(),(0,l.U)(y=>{if(!y.hasErrors())return y.data;y.errors[0].code&&![401,403].includes(y.errors[0].code)&&this.notif.displayNotification("Failed to fetch workflow","Get Submodule workflow","error")}))}getSubmissionFromSubModule(D,y,h,B,q,K,se){const $={subModuleId:D,limit:y,page:h,sortKey:q||void 0,sortBy:K||void 0,submissionStatus:B||void 0};return null==$.submissionStatus&&delete $.submissionStatus,null==$.sortKey&&delete $.sortKey,null==$.sortBy&&delete $.sortBy,this.post("/submissions",se||{},$).pipe((0,i.d)(),(0,l.U)(ee=>ee.hasErrors()?ee.errors[0].code&&![401,403].includes(ee.errors[0].code)?this.notif.displayNotification(ee.errors[0]?.error?.message||"Failed to fetch submissions","Get Submissions","error"):void 0:ee.data))}updateSubmissionWorkflow(D,y){return this.patch(`/submissions/${D}`,y).pipe((0,i.d)(),(0,l.U)(h=>h.hasErrors()?h.errors[0].code&&![401,403].includes(h.errors[0].code)?this.notif.displayNotification(h.errors[0]?.error?.message,"Update Submission","error"):void 0:(this.notif.displayNotification("Action complete. Submission updated","Update Submission","success"),h.data)))}addNewSubmission(D){return this.post("/submissions/create",D).pipe((0,i.d)(),(0,l.U)(y=>y.hasErrors()?y.errors[0].code&&![401,403].includes(y.errors[0].code)?this.notif.displayNotification(y.errors[0]?.error?.message,"Create Submission","error"):void 0:(this.notif.displayNotification("Submission created successfully","Create Submission","success"),y.data)))}updateFormsData(D,y){return this.patch(`/formsData/${y}`,D).pipe((0,i.d)(),(0,l.U)(h=>h.hasErrors()?h.errors[0].code&&![401,403].includes(h.errors[0].code)?this.notif.displayNotification(h.errors[0]?.error?.message,"Update Forms Data","error"):void 0:(this.notif.displayNotification("Form data updated successfully","Update Forms data","success"),h.data)))}updateMultipleFormsData(D){return this.patch("/formsData/multiple",D).pipe((0,i.d)(),(0,l.U)(y=>y.hasErrors()?y.errors[0].code&&![401,403].includes(y.errors[0].code)?this.notif.displayNotification(y.errors[0]?.error?.message,"Update Forms Data","error"):void 0:(this.notif.displayNotification("Form data updated successfully","Update Forms data","success"),y.data)))}updateWorkflowStep(D,y){return this.patch(`/submissions/workflow/${y}`,D).pipe((0,i.d)(),(0,l.U)(h=>h.hasErrors()?h.errors[0].code&&![401,403].includes(h.errors[0].code)?this.notif.displayNotification(h.errors[0]?.error?.message,"Update Workflow Step","error"):void 0:(this.notif.displayNotification(h?.data?.message,"Update Workflow Step","success"),h.data)))}}U.\u0275fac=function(D){return new(D||U)(e.LFG(V.eN),e.LFG(c.T))},U.\u0275prov=e.Yz7({token:U,factory:U.\u0275fac,providedIn:"root"})},55314:(ge,oe,u)=>{u.d(oe,{X:()=>e});var i=u(36895),l=u(94650);function d(V,c){1&V&&(l.ynx(0),l.TgZ(1,"tr",12)(2,"td",13),l._UZ(3,"span",14),l.qZA(),l.TgZ(4,"td",13),l._UZ(5,"span",14)(6,"br")(7,"span",15),l.qZA(),l.TgZ(8,"td",13),l._UZ(9,"span",14),l.qZA(),l.TgZ(10,"td",13),l._UZ(11,"span",14),l.qZA(),l.TgZ(12,"td",13),l._UZ(13,"span",16)(14,"br")(15,"span",15),l.qZA(),l.TgZ(16,"td",13),l._UZ(17,"span",17),l.qZA()(),l.BQk())}class e{constructor(){this.Arr=Array,this.num=6}}e.\u0275fac=function(c){return new(c||e)},e.\u0275cmp=l.Xpm({type:e,selectors:[["app-table-loader"]],standalone:!0,features:[l.jDz],decls:25,vars:1,consts:[["role","status",1,"w-full","animate-pulse","flex","justify-between"],[1,"my-4"],[1,"h-3","bg-gray-200","rounded-full","w-48","mb-4"],[1,"h-3","bg-gray-200","rounded-full","w-[360px]","my-2.5"],[1,"sr-only"],[1,"h-10","bg-gray-200","rounded-md","w-32","mt-8"],[1,"rounded-lg","shadow-lg"],[1,"w-full","mt-10"],[1,"text-center","border-b-2","border-gray-300","border-dotted","bg-[#eae4d8]"],[1,"py-2"],[1,"inline-block","py-1","mt-2","mb-2","bg-gray-300","border-2","rounded-sm","px-14"],[4,"ngFor","ngForOf"],[1,"z-50","h-16","text-center","bg-white","border-b-2","border-gray-300","border-dotted","rounded-lg","animate-pulse"],[1,"shadow-lg"],[1,"z-50","inline-block","px-16","py-2","mt-2","mb-2","bg-gray-300","rounded-sm"],[1,"z-50","inline-block","px-10","py-1","mt-1","mb-1","bg-gray-300","rounded-sm"],[1,"z-50","inline-block","px-16","py-2","mt-1","mb-1","bg-gray-300","rounded-sm"],[1,"z-50","inline-block","px-12","py-4","mt-2","mb-2","bg-gray-300","rounded-2xl"]],template:function(c,U){1&c&&(l.TgZ(0,"div",0)(1,"div",1),l._UZ(2,"div",2)(3,"div",2)(4,"div",3),l.TgZ(5,"span",4),l._uU(6,"Loading..."),l.qZA()(),l.TgZ(7,"div",1),l._UZ(8,"div",5),l.qZA()(),l.TgZ(9,"div",6)(10,"table",7)(11,"thead",8)(12,"th",9),l._UZ(13,"span",10),l.qZA(),l.TgZ(14,"th",9),l._UZ(15,"span",10),l.qZA(),l.TgZ(16,"th",9),l._UZ(17,"span",10),l.qZA(),l.TgZ(18,"th",9),l._UZ(19,"span",10),l.qZA(),l.TgZ(20,"th",9),l._UZ(21,"span",10),l.qZA(),l.TgZ(22,"th",9),l._UZ(23,"span",10),l.qZA()(),l.YNc(24,d,18,0,"ng-container",11),l.qZA()()),2&c&&(l.xp6(24),l.Q6J("ngForOf",U.Arr(U.num).fill(1)))},dependencies:[i.ez,i.sg],changeDetection:0})},6110:(ge,oe,u)=>{u.d(oe,{z:()=>ce});var i=u(94650),l=u(36895),d=u(91127),e=u(39367),V=u(44886),c=u(71115),U=u(56772),A=u(86679),D=u(77579),y=u(61135),h=u(78372),B=u(71884),q=u(82722),K=u(24006),se=u(60117);function $(F,Q){if(1&F&&(i.TgZ(0,"div",7)(1,"tui-input",10)(2,"p",11),i._uU(3,"Search here..."),i.qZA(),i._UZ(4,"input",12),i.qZA()()),2&F){const w=i.oxw(2);i.xp6(1),i.Q6J("formControl",w.searchValue)("tuiTextfieldCleaner",!0)}}function ee(F,Q){if(1&F){const w=i.EpF();i.TgZ(0,"li",16),i.NdJ("click",function(){i.CHM(w);const j=i.oxw(2),re=j.index,k=j.$implicit,ie=i.oxw(2);return i.KtG(ie.setFilterAndApplyActive({index:re,sortType:k.name,applyOn:ie.filterBy}))}),i.TgZ(1,"div",17)(2,"span"),i._uU(3),i.qZA(),i._UZ(4,"i",18),i.qZA()()}if(2&F){const w=i.oxw(2).$implicit;i.Q6J("ngClass","active"===w.status?"bg-blue-100 hover:bg-blue-100":"bg-white hover:bg-gray-100"),i.xp6(3),i.Oqu(w.name),i.xp6(1),i.Q6J("ngClass",w.icon)}}function R(F,Q){if(1&F&&(i.ynx(0),i.YNc(1,ee,5,3,"li",15),i.BQk()),2&F){const w=i.oxw(3);i.xp6(1),i.Q6J("ngIf",1==w.showSortCategories)}}function I(F,Q){if(1&F){const w=i.EpF();i.TgZ(0,"li",16),i.NdJ("click",function(){i.CHM(w);const j=i.oxw(),re=j.index,k=j.$implicit,ie=i.oxw(2);return i.KtG(ie.setFilterAndApplyActive({index:re,sortType:k.name,applyOn:ie.filterBy}))}),i.TgZ(1,"div",17)(2,"span"),i._uU(3),i.qZA(),i._UZ(4,"i",18),i.qZA()()}if(2&F){const w=i.oxw().$implicit;i.Q6J("ngClass","active"===w.status?"bg-blue-100 hover:bg-blue-100":"bg-white hover:bg-gray-100"),i.xp6(3),i.Oqu(w.name),i.xp6(1),i.Q6J("ngClass",w.icon)}}function M(F,Q){if(1&F&&(i.ynx(0),i.YNc(1,R,2,1,"ng-container",13),i.YNc(2,I,5,3,"ng-template",null,14,i.W1O),i.BQk()),2&F){const w=Q.$implicit,z=i.MAs(3);i.xp6(1),i.Q6J("ngIf","Sort by Ascending"==(null==w?null:w.name)||"Sort by Descending"==(null==w?null:w.name))("ngIfElse",z)}}function N(F,Q){if(1&F){const w=i.EpF();i.TgZ(0,"div",19)(1,"a",20),i.NdJ("click",function(){i.CHM(w);const j=i.oxw(2);return i.KtG(j.resetFilterValue())}),i._uU(2,"Reset Filters"),i.qZA()()}}function H(F,Q){if(1&F&&(i.TgZ(0,"div",4)(1,"h4",5),i._uU(2),i.qZA(),i.YNc(3,$,5,2,"div",6),i.TgZ(4,"ul",7),i.YNc(5,M,4,2,"ng-container",8),i.qZA(),i.YNc(6,N,3,0,"div",9),i.qZA()),2&F){const w=i.oxw();i.xp6(2),i.hij("Filter by ",w.filterBy,""),i.xp6(1),i.Q6J("ngIf",1==w.searchEnabled),i.xp6(2),i.Q6J("ngForOf",w.items)("ngForTrackBy",w.trackByFn),i.xp6(1),i.Q6J("ngIf",!0===w.isFilterApplied)}}function le(F,Q){if(1&F&&(i.TgZ(0,"p"),i._uU(1),i.qZA()),2&F){const w=i.oxw();i.xp6(1),i.Oqu(w.isFilterApplied?"This filter is currently active":"Apply filters")}}class ce{constructor(){this.open=!1,this.destroy$=new D.x,this.searchEnabled=!0,this.showSortCategories=!0,this.disabled=!1,this.applyStatus=new i.vpe,this.resetFilters=new i.vpe,this.sendSearchToTable=new i.vpe,this.isFilterApplied=!1,this.previousFilterValues=new y.X([]),this.searchValue=new K.NI,this.searchValue.valueChanges.pipe((0,h.b)(400),(0,B.x)(),(0,q.R)(this.destroy$)).subscribe(Q=>{this.sendSearchToTable.emit(Q||null)})}searchTableData(Q,w){this.sendSearchToTable.emit({search:Q,searchBy:w}),this.isFilterApplied=!0}setFilterAndApplyActive(Q){1!=this.disabled&&(this.applyStatus.emit(Q),this.items?.some(w=>w.name===Q.sortType)&&(this.items.forEach(w=>{w.status=Q.sortType===w.name?"active":"idle"}),this.isFilterApplied=!0))}areArraysEqual(Q,w){if(Q.length!==w.length)return!1;const z=Q.slice().sort((re,k)=>re.id-k.id),j=w.slice().sort((re,k)=>re.id-k.id);for(let re=0;re<z.length;re++){const k=z[re],ie=j[re];for(let G in k)if(k[G]!==ie[G])return!1}return!0}resetFilterValue(){this.isFilterApplied=!1,this.items.forEach(Q=>Q.status="idle"),this.resetFilters.emit("reset")}trackByFn(Q,w){return w}ngOnDestroy(){this.destroy$.complete(),this.destroy$.unsubscribe()}}ce.\u0275fac=function(Q){return new(Q||ce)},ce.\u0275cmp=i.Xpm({type:ce,selectors:[["filter"]],inputs:{items:"items",searchEnabled:"searchEnabled",showSortCategories:"showSortCategories",filterBy:"filterBy",disabled:"disabled"},outputs:{applyStatus:"applyStatus",resetFilters:"resetFilters",sendSearchToTable:"sendSearchToTable"},standalone:!0,features:[i.jDz],decls:6,vars:4,consts:[[3,"content","open","openChange"],["tuiIconButton","","tuiHintDirection","right","size","xs","icon","tuiIconFilter",3,"tuiHint","appearance"],["dropdown",""],["tooltip",""],[1,"px-5","py-3","w-80"],[1,"text-sm","font-semibold","my-3"],["class","my-3",4,"ngIf"],[1,"my-3"],[4,"ngFor","ngForOf","ngForTrackBy"],["class","cursor-pointer mt-5 mb-3 text-center",4,"ngIf"],["tuiTextfieldIconLeft","tuiIconSearchLarge",1,"w-full",3,"formControl","tuiTextfieldCleaner"],[1,"mt-2"],["tuiTextfield","","placeholder","Type to start searching..."],[4,"ngIf","ngIfElse"],["otherFilter",""],["class","px-2 py-3 my-1 text-sm rounded-lg cursor-pointer",3,"ngClass","click",4,"ngIf"],[1,"px-2","py-3","my-1","text-sm","rounded-lg","cursor-pointer",3,"ngClass","click"],[1,"flex","justify-between"],["aria-hidden","true",3,"ngClass"],[1,"cursor-pointer","mt-5","mb-3","text-center"],[1,"px-3","py-2","rounded-md","bg-[#ac2224]","text-white","text-sm","no-underline","hover:text-white",3,"click"]],template:function(Q,w){if(1&Q&&(i.TgZ(0,"tui-hosted-dropdown",0),i.NdJ("openChange",function(j){return w.open=j}),i._UZ(1,"button",1),i.YNc(2,H,7,5,"ng-template",null,2,i.W1O),i.qZA(),i.YNc(4,le,2,1,"ng-template",null,3,i.W1O)),2&Q){const z=i.MAs(3),j=i.MAs(5);i.Q6J("content",z)("open",w.open),i.xp6(1),i.Q6J("tuiHint",j)("appearance",w.isFilterApplied?"primary":"secondary")}},dependencies:[l.ez,l.mk,l.sg,l.O5,d.jh,d.o1,e.fN,e.v0,U.zX,A.Qf,A.K3,A.wU,se.MB,V.go,V.D,V.xn,V.t6,V.DM,K.UX,K.JJ,K.oH,c.cn,c.be,c.aR],changeDetection:0})},14375:(ge,oe,u)=>{u.d(oe,{N:()=>h});var i=u(94650),l=u(36895),d=u(86679),e=u(24006),V=u(77579),c=u(78372),U=u(71884),A=u(82722),D=u(71115),y=u(60117);class h{constructor(){this.searchValue=new e.NI,this.destroy$=new V.x,this.searchStr=new i.vpe,this.searchValue.valueChanges.pipe((0,c.b)(400),(0,U.x)(),(0,A.R)(this.destroy$)).subscribe(q=>{this.searchStr.emit(q||null)})}ngOnDestroy(){this.destroy$.complete(),this.destroy$.unsubscribe()}}h.\u0275fac=function(q){return new(q||h)},h.\u0275cmp=i.Xpm({type:h,selectors:[["app-search-bar"]],outputs:{searchStr:"searchStr"},standalone:!0,features:[i.jDz],decls:4,vars:2,consts:[["tuiTextfieldIconLeft","tuiIconSearchLarge",1,"shadow-md",3,"formControl","tuiTextfieldCleaner"],[1,"mt-2"],["tuiTextfield","","placeholder","Type to start searching..."]],template:function(q,K){1&q&&(i.TgZ(0,"tui-input",0)(1,"p",1),i._uU(2,"Search by app title"),i.qZA(),i._UZ(3,"input",2),i.qZA()),2&q&&i.Q6J("formControl",K.searchValue)("tuiTextfieldCleaner",!0)},dependencies:[l.ez,d.Qf,d.K3,d.wU,y.MB,e.UX,e.JJ,e.oH,e.u5,D.cn,D.be,D.aR],changeDetection:0})},69952:(ge,oe,u)=>{u.d(oe,{x:()=>fe});var i=u(94650),l=u(36895),d=u(14375),e=u(19132),V=u(82176),c=u(80311),U=u(87819),A=u(39367),D=u(44886),y=u(13675),h=u(1163),B=u(4266),q=u(77579),K=u(61135),se=u(82722),$=u(59835),ee=u(46954),R=u(20696),I=u(15274);const M=["preview"],N=function(S){return["/modules/add-module",S]};function H(S,v){if(1&S&&(i.TgZ(0,"a",10),i._uU(1,"+ Add app "),i.qZA()),2&S){const g=i.oxw(2);i.Q6J("routerLink",i.VKq(1,N,g.moduleId))}}function le(S,v){if(1&S&&(i.TgZ(0,"span",11),i.ALo(1,"async"),i._uU(2," You can add new apps by clicking on this button "),i.qZA()),2&S){const g=i.oxw(2);i.Q6J("ngClass",0==(null==g.tableData||null==g.tableData.results?null:g.tableData.results.length)&&0==i.lcZ(1,1,g.showEmptyMessage)?"visible":"invisible")}}function ce(S,v){if(1&S&&(i.ynx(0),i.TgZ(1,"div",7),i.YNc(2,H,2,3,"a",8),i.YNc(3,le,3,3,"span",9),i.qZA(),i.BQk()),2&S){const g=v.ngIf,Z=i.oxw();i.xp6(2),i.Q6J("ngIf",Z.currentUser.id==(null==g?null:g.createdBy)||Z.checkIfUserisAdmin(null==g?null:g.adminUsers)||1==Z.userRoleCheck),i.xp6(1),i.Q6J("ngIf",Z.currentUser.id==(null==g?null:g.createdBy)||Z.checkIfUserisAdmin(null==g?null:g.adminUsers)||1==Z.userRoleCheck)}}function F(S,v){1&S&&(i.ynx(0),i.TgZ(1,"div",12),i._UZ(2,"img",13),i.qZA(),i.TgZ(3,"p",14),i._uU(4," No results found! "),i.qZA(),i.BQk())}function Q(S,v){1&S&&(i.ynx(0),i._UZ(1,"p"),i.BQk())}function w(S,v){if(1&S){const g=i.EpF();i.TgZ(0,"a",29),i.NdJ("click",function(){i.CHM(g);const W=i.oxw(2).$implicit,ue=i.oxw(2);return i.KtG(ue.setSubmoduleSlug(null==W?null:W.code,null==W?null:W.id))}),i._UZ(1,"i",30),i.qZA()}}const z=function(S){return["/modules/edit-module",S]};function j(S,v){if(1&S){const g=i.EpF();i.TgZ(0,"a",31),i.NdJ("click",function(){i.CHM(g);const W=i.oxw(2).$implicit,ue=i.oxw(2);return i.KtG(ue.setEditSlug(null==W?null:W.code,null==W?null:W.id,null==W?null:W.title))}),i._UZ(1,"i",32),i.qZA()}if(2&S){const g=i.oxw(2).$implicit;i.Q6J("routerLink",i.VKq(1,z,null==g?null:g.id))}}function re(S,v){if(1&S){const g=i.EpF();i.TgZ(0,"a",33),i.NdJ("click",function(){i.CHM(g);const W=i.oxw(2).$implicit,ue=i.oxw(2),he=i.MAs(13);return i.KtG(ue.showDialog(null==W?null:W.id,he))}),i._UZ(1,"i",34),i.qZA()}}function k(S,v){if(1&S&&(i.ynx(0),i.TgZ(1,"div",18)(2,"div",19)(3,"div",20),i._UZ(4,"img",21),i.qZA(),i.TgZ(5,"div",22)(6,"h3",23),i._uU(7),i.qZA(),i.TgZ(8,"p",24),i._uU(9),i.qZA()()(),i.TgZ(10,"div",25),i.YNc(11,w,2,0,"a",26),i.YNc(12,j,2,3,"a",27),i.YNc(13,re,2,0,"a",28),i.qZA()(),i.BQk()),2&S){const g=i.oxw().$implicit,Z=i.oxw(2);i.xp6(4),i.Q6J("src",null==g?null:g.image,i.LSH),i.xp6(3),i.hij(" ",null==g?null:g.title," "),i.xp6(2),i.Oqu(null==g?null:g.description),i.xp6(2),i.Q6J("ngIf",3!==(null==g?null:g.status)&&1==Z.checkAccessMain(g)),i.xp6(1),i.Q6J("ngIf",(null==Z.currentUser?null:Z.currentUser.id)==(null==g?null:g.createdBy)||1==Z.userRoleCheck||Z.checkIfUserisAdmin(null==g?null:g.adminUsers)),i.xp6(1),i.Q6J("ngIf",(null==Z.currentUser?null:Z.currentUser.id)==(null==g?null:g.createdBy)||1==Z.userRoleCheck&&0==Z.checkIfUserisViewOnly(null==g?null:g.viewOnlyUsers)||Z.checkIfUserisAdmin(null==g?null:g.adminUsers))}}function ie(S,v){1&S&&(i.ynx(0),i._UZ(1,"tui-badge",36),i.BQk())}function G(S,v){if(1&S){const g=i.EpF();i.TgZ(0,"a",29),i.NdJ("click",function(){i.CHM(g);const W=i.oxw(3).$implicit,ue=i.oxw(2);return i.KtG(ue.setSubmoduleSlug(null==W?null:W.code,null==W?null:W.id))}),i._UZ(1,"i",30),i.qZA()}}function de(S,v){if(1&S&&(i.TgZ(0,"a",37),i._UZ(1,"i",32),i.qZA()),2&S){const g=i.oxw(3).$implicit;i.Q6J("routerLink",i.VKq(1,z,null==g?null:g.id))}}function C(S,v){if(1&S){const g=i.EpF();i.TgZ(0,"a",33),i.NdJ("click",function(){i.CHM(g);const W=i.oxw(3).$implicit,ue=i.oxw(2),he=i.MAs(13);return i.KtG(ue.showDialog(null==W?null:W.id,he))}),i._UZ(1,"i",34),i.qZA()}}function te(S,v){if(1&S&&(i.ynx(0),i.TgZ(1,"div",18)(2,"div",19)(3,"div",20),i._UZ(4,"img",21),i.qZA(),i.TgZ(5,"div",22)(6,"h3",23),i._uU(7),i.YNc(8,ie,2,0,"ng-container",2),i.qZA(),i.TgZ(9,"p",24),i._uU(10),i.qZA()()(),i.TgZ(11,"div",25),i.YNc(12,G,2,0,"a",26),i.YNc(13,de,2,3,"a",35),i.YNc(14,C,2,0,"a",28),i.qZA()(),i.BQk()),2&S){const g=i.oxw(2).$implicit,Z=i.oxw(2);i.xp6(4),i.Q6J("src",null==g?null:g.image,i.LSH),i.xp6(3),i.hij(" ",null==g?null:g.title," "),i.xp6(1),i.Q6J("ngIf",3===(null==g?null:g.status)),i.xp6(2),i.Oqu(null==g?null:g.description),i.xp6(2),i.Q6J("ngIf",3!==(null==g?null:g.status)),i.xp6(1),i.Q6J("ngIf",(null==Z.currentUser?null:Z.currentUser.id)==(null==g?null:g.createdBy)),i.xp6(1),i.Q6J("ngIf",(null==Z.currentUser?null:Z.currentUser.id)==(null==g?null:g.createdBy))}}function T(S,v){if(1&S&&(i.ynx(0),i.YNc(1,te,15,7,"ng-container",2),i.BQk()),2&S){const g=i.oxw().$implicit,Z=i.oxw(2);i.xp6(1),i.Q6J("ngIf",(null==Z.currentUser?null:Z.currentUser.id)==(null==g?null:g.createdBy))}}function J(S,v){if(1&S&&(i.ynx(0),i.YNc(1,k,14,6,"ng-container",2),i.YNc(2,T,2,1,"ng-container",2),i.BQk()),2&S){const g=v.$implicit;i.xp6(1),i.Q6J("ngIf",3!==(null==g?null:g.status)),i.xp6(1),i.Q6J("ngIf",3==(null==g?null:g.status))}}function X(S,v){if(1&S){const g=i.EpF();i.TgZ(0,"div",38)(1,"tui-pagination",39),i.NdJ("indexChange",function(W){i.CHM(g);const ue=i.oxw(2);return i.KtG(ue.goToPage(W))}),i.qZA()()}if(2&S){const g=i.oxw(2);i.xp6(1),i.Q6J("length",(null==g.tableData?null:g.tableData.totalPages)||1)("index",(null==g.tableData?null:g.tableData.page)-1||0)}}function pe(S,v){if(1&S&&(i.TgZ(0,"section",15),i.YNc(1,J,3,2,"ng-container",16),i.qZA(),i.YNc(2,X,2,2,"div",17),i.ALo(3,"async")),2&S){const g=i.oxw();i.xp6(1),i.Q6J("ngForOf",null==g.tableData?null:g.tableData.results),i.xp6(1),i.Q6J("ngIf",0==i.lcZ(3,2,g.showEmptyMessage))}}function Te(S,v){if(1&S){const g=i.EpF();i.TgZ(0,"p",40),i._uU(1,"Delete App"),i.qZA(),i.TgZ(2,"p",41),i._uU(3,"Are you sure you want to delete this app?"),i.qZA(),i.TgZ(4,"div",42)(5,"button",43),i.NdJ("click",function(){const ue=i.CHM(g).$implicit;return i.oxw().deleteModule(),i.KtG(ue.complete())}),i._uU(6," Confirm "),i.qZA(),i.TgZ(7,"button",44),i.NdJ("click",function(){const ue=i.CHM(g).$implicit;return i.KtG(ue.complete())}),i._uU(8," Cancel "),i.qZA()()}}class fe{constructor(v,g,Z,W,ue,he,Ce){this.activatedRoute=v,this.dialogs=g,this.dashboardService=Z,this.transport=W,this.auth=ue,this.router=he,this.previewDialogService=Ce,this.tableColumns=["Title","Company Name","Status"],this.tableData=[],this.fetchingTableData=new q.x,this.filterMenuCompany=[{name:"Sort by Acsending",status:"idle",icon:"fa fa-sort-alpha-asc fa-lg",sortBy:"Company Name"},{name:"Sort by Descending",status:"idle",icon:"fa fa-sort-alpha-desc fa-lg",sortBy:"Company Name"},{name:"Sort by Latest",status:"idle",icon:"fa fa-calendar-check-o fa-lg",sortBy:"Company Name"},{name:"Sort by Oldest",status:"idle",icon:"fa fa-calendar-times-o fa-lg",sortBy:"Company Name"}],this.filterMenuSubmodule=[{name:"Sort by Acsending",status:"idle",icon:"fa fa-sort-alpha-asc fa-lg",sortBy:"Submodule Code"},{name:"Sort by Descending",status:"idle",icon:"fa fa-sort-alpha-desc fa-lg",sortBy:"Submodule Code"},{name:"Sort by Latest",status:"idle",icon:"fa fa-calendar-check-o fa-lg",sortBy:"Submodule Code"},{name:"Sort by Oldest",status:"idle",icon:"fa fa-calendar-times-o fa-lg",sortBy:"Submodule Code"}],this.filterMenuModule=[{name:"Sort by Acsending",status:"idle",icon:"fa fa-sort-alpha-asc fa-lg"},{name:"Sort by Descending",status:"idle",icon:"fa fa-sort-alpha-desc fa-lg"},{name:"Sort by Latest",status:"idle",icon:"fa fa-calendar-check-o fa-lg"},{name:"Sort by Oldest",status:"idle",icon:"fa fa-calendar-times-o fa-lg"}],this.statusMenu=[{name:"Draft",status:"idle",icon:""},{name:"Published",status:"idle",icon:""}],this.page=1,this.destroy$=new q.x,this.isFilterApplied=!1,this.showEmptyMessage=new K.X(!1),this.emitDeleteEvent=new i.vpe,this.emitPagination=new i.vpe,this.emitFilters=new i.vpe,this.emitSearch=new i.vpe,this.emitPageChange=new i.vpe,this.currentUser=this.auth.currentUserValue,this.userRoleCheck=this.auth.checkIfRolesExist("sysAdmin"),this.activatedRoute.queryParams.subscribe(x=>this.moduleId=x.moduleID),this.activatedRoute.params.subscribe(x=>{this.transport.moduleCode.next(x.name),this.moduleCode=x.name})}showDialog(v,g){v&&(this.submoduleID=v,this.dialogs.open(g).subscribe())}deleteModule(){this.dashboardService.deleteSubModule(this.submoduleID).subscribe(v=>{this.emitDeleteEvent.emit(!0)})}showImage(v){this.currentImg=v,this.previewDialogService.open(this.preview).pipe((0,se.R)(this.destroy$)).subscribe()}checkAccessMain(v){return!(0==this.userRoleCheck&&"disabled"==v?.accessType&&!v.authorizedUsers.includes(this.currentUser.id))}showStatus(v){return 1==v?"Published":3==v?"Draft":"Deleted"}splitURL(v){return v.split("/").at(-1)}checkIfUserisViewOnly(v){return v.includes(this.currentUser?.id)}checkIfUserisAdmin(v){return v?.includes(this.currentUser?.id)}goToPage(v){this.page=v+1,this.emitPagination.emit(this.page)}floorNumber(v){return Math.round(v)}getSortType(v){return"Sort by Latest"==v?.sortType?"latest":"Sort by Oldest"==v?.sortType?"oldest":"Sort by Descending"==v?.sortType?"desc":"asc"}sendFilters(v){if(v){this.fetchingTableData.next(!0);const g={field:"Submodule Code"==v?.applyOn?"subModuleCode":"companyName",sortByTime:1==["latest","oldest"].includes(this.getSortType(v))?this.getSortType(v):void 0,sortBy:1==["asc","desc"].includes(this.getSortType(v))?this.getSortType(v):void 0};null==g.sortBy&&delete g.sortBy,null==g.sortByTime&&delete g.sortByTime,this.dashboardService.getSubModuleByModuleSlug((0,B.rV)(B.MX.moduleSlug),7,this.page,g).pipe((0,se.R)(this.destroy$)).subscribe(Z=>{this.tableData=Z,this.fetchingTableData.next(!1)})}}checkAccess(v){return!("disabled"==v?.accessType&&!v?.allUsers?.includes(this.currentUser?.id))}sendSearchValue(v){this.fetchingTableData.next(!0);const g={field:"subModuleTitle",search:v};null==g.search&&delete g.search,this.dashboardService.getSubModuleByModuleSlug((0,B.rV)(B.MX.moduleSlug),7,this.page,g).pipe((0,se.R)(this.destroy$)).subscribe(Z=>{0==Z?.results?.length&&this.showEmptyMessage.next(!0),v||this.showEmptyMessage.next(!1),this.tableData=Z,this.fetchingTableData.next(!1)})}resetFilterValues(v){this.fetchingTableData.next(!0),v&&this.dashboardService.getSubModuleByModuleSlug((0,B.rV)(B.MX.moduleSlug),7,this.page).pipe((0,se.R)(this.destroy$)).subscribe(g=>{this.tableData=g,this.fetchingTableData.next(!1)})}setSubmoduleSlug(v,g){(0,B.LS)(B.MX.moduleSlug,v),(0,B.LS)(B.MX.moduleID,g),this.emitPageChange.emit({code:v,id:g}),this.router.navigate(["/modules",v],{queryParams:{moduleID:g||""}})}setEditSlug(v,g,Z){(0,B.LS)(B.MX.editmoduleSlug,v),(0,B.LS)(B.MX.editmoduleTitle,Z),(0,B.LS)(B.MX.editmoduleId,g)}ngOnDestroy(){this.destroy$.complete(),this.destroy$.unsubscribe()}}fe.\u0275fac=function(v){return new(v||fe)(i.Y36(e.gz),i.Y36(h.RO),i.Y36(ee.s),i.Y36(R.R),i.Y36(I.e),i.Y36(e.F0),i.Y36($.iK))},fe.\u0275cmp=i.Xpm({type:fe,selectors:[["app-table-view"]],viewQuery:function(v,g){if(1&v&&i.Gf(M,5),2&v){let Z;i.iGM(Z=i.CRH())&&(g.preview=Z.first)}},inputs:{tableColumns:"tableColumns",tableData:"tableData",moduleData:"moduleData"},outputs:{emitDeleteEvent:"emitDeleteEvent",emitPagination:"emitPagination",emitFilters:"emitFilters",emitSearch:"emitSearch",emitPageChange:"emitPageChange"},standalone:!0,features:[i.jDz],decls:14,vars:14,consts:[[1,"flex","justify-between","mt-5","mb-2"],[1,"w-1/3","mb-2",3,"searchStr"],[4,"ngIf"],["size","xl",3,"overlay","showLoader"],[4,"ngIf","ngIfElse"],["showSubModules",""],["template",""],[1,"relative","mt-5","cursor-pointer"],["class","px-6 py-3 rounded-md bg-[#F15B41] text-white no-underline hover:text-white text-base",3,"routerLink",4,"ngIf"],["class","tooltiptext",3,"ngClass",4,"ngIf"],[1,"px-6","py-3","rounded-md","bg-[#F15B41]","text-white","no-underline","hover:text-white","text-base",3,"routerLink"],[1,"tooltiptext",3,"ngClass"],[1,"flex","items-center","justify-center"],["src","../../../assets/empty-box.svg","alt","empty_box","width","240","height","240"],[1,"px-5","text-lg","font-semibold","text-center","text-gray-500"],[1,"grid","grid-cols-12","gap-4"],[4,"ngFor","ngForOf"],["class","py-6",4,"ngIf"],[1,"bg-white","rounded-md","shadow-lg","h-auto","drop-shadow-lg","flex","flex-col","col-span-4","border-t-8","border-t-[#F15B41]"],[1,"flex","px-4","pt-5","pb-3","space-x-8"],[1,"flex","items-center","justify-center","border","border-gray-200","rounded-lg","w-[13rem]","h-[8rem]"],["alt","top_app_icon","loading","eager",1,"object-cover","w-full","h-full","rounded-lg",3,"src"],[1,"w-full","h-full"],[1,"mb-2","text-lg","font-semibold"],[1,"leading-6","line-clamp-4"],[1,"flex","items-center","justify-center","w-full","h-8","py-5","bg-gradient-to-r","from-orange-200","to-slate-200","rounded-br-md","rounded-bl-md"],["title","Apps and Submissions","class","px-2 py-1 text-white bg-green-500 rounded-md cursor-pointer hover:text-white",3,"click",4,"ngIf"],["title","Edit","class","px-2 py-1 mx-2 text-white bg-blue-400 rounded-md cursor-pointer hover:text-white",3,"routerLink","click",4,"ngIf"],["title","Delete","class","px-2 py-1 text-white bg-red-500 rounded-md cursor-pointer hover:text-white",3,"click",4,"ngIf"],["title","Apps and Submissions",1,"px-2","py-1","text-white","bg-green-500","rounded-md","cursor-pointer","hover:text-white",3,"click"],["aria-hidden","true",1,"fa","fa-sitemap","fa-lg"],["title","Edit",1,"px-2","py-1","mx-2","text-white","bg-blue-400","rounded-md","cursor-pointer","hover:text-white",3,"routerLink","click"],["aria-hidden","true",1,"fa","fa-pencil-square-o","fa-lg"],["title","Delete",1,"px-2","py-1","text-white","bg-red-500","rounded-md","cursor-pointer","hover:text-white",3,"click"],["aria-hidden","true",1,"fa","fa-trash","fa-lg"],["title","Edit","class","px-2 py-1 mx-2 text-white bg-blue-400 rounded-md cursor-pointer hover:text-white",3,"routerLink",4,"ngIf"],["status","primary","value","Draft","size","s",1,"tui-space_left-1"],["title","Edit",1,"px-2","py-1","mx-2","text-white","bg-blue-400","rounded-md","cursor-pointer","hover:text-white",3,"routerLink"],[1,"py-6"],[3,"length","index","indexChange"],[1,"pb-2","text-xl","font-semibold","text-center","border-b","border-gray-400"],[1,"mt-4","text-base","font-medium","text-center"],[1,"flex","justify-center","mt-4"],["tuiButton","","appearance","secondary-destructive","type","button","size","m",1,"mx-3",3,"click"],["tuiButton","","type","button","size","m",3,"click"]],template:function(v,g){if(1&v&&(i.TgZ(0,"div",0)(1,"app-search-bar",1),i.NdJ("searchStr",function(W){return g.sendSearchValue(W)}),i.qZA(),i.YNc(2,ce,4,2,"ng-container",2),i.ALo(3,"async"),i.qZA(),i.YNc(4,F,5,0,"ng-container",2),i.ALo(5,"async"),i.TgZ(6,"tui-loader",3),i.ALo(7,"async"),i.YNc(8,Q,2,0,"ng-container",4),i.ALo(9,"async"),i.YNc(10,pe,4,4,"ng-template",null,5,i.W1O),i.qZA(),i.YNc(12,Te,9,0,"ng-template",null,6,i.W1O)),2&v){const Z=i.MAs(11);i.xp6(2),i.Q6J("ngIf",i.lcZ(3,6,g.moduleData)),i.xp6(2),i.Q6J("ngIf",0==(null==g.tableData||null==g.tableData.results?null:g.tableData.results.length)&&1==i.lcZ(5,8,g.showEmptyMessage)),i.xp6(2),i.Q6J("overlay",!0)("showLoader",i.lcZ(7,10,g.fetchingTableData)),i.xp6(2),i.Q6J("ngIf",0==(null==g.tableData||null==g.tableData.results?null:g.tableData.results.length)&&0==i.lcZ(9,12,g.showEmptyMessage))("ngIfElse",Z)}},dependencies:[l.ez,l.mk,l.sg,l.O5,l.Ov,d.N,e.Bz,e.rH,V.i,V.r,U.dS,U.kM,A.fN,A.v0,c.f,c.g,D.go,y.Q],styles:['.tooltiptext[_ngcontent-%COMP%]{width:170px;background-color:#6c86e2;color:#fff;text-align:center;border-radius:6px;padding:5px 2px;position:absolute;font-size:11px;z-index:1;top:-11px;right:110%}.tooltiptext[_ngcontent-%COMP%]:after{content:"";position:absolute;top:50%;left:100%;margin-top:-5px;border-width:5px;border-style:solid;border-color:transparent transparent transparent #6C86E2}'],changeDetection:0})},68341:(ge,oe,u)=>{u.d(oe,{Ii:()=>q,Mt:()=>ee});var i=u(94650),l=u(8276),d=u(19040),e=u(91127),V=u(71115),c=u(89740),U=u(36895);function A(R,I){1&R&&i._UZ(0,"tui-svg",2),2&R&&i.Q6J("src",I.polymorpheusOutlet)}function D(R,I){1&R&&i.GkF(0)}const y={iconSmall:"tuiIconChevronDown",iconLarge:"tuiIconChevronDownLarge"},h=new i.OlP("[TUI_ARROW_OPTIONS]",{factory:()=>y}),q=new i.OlP("[TUI_ARROW_MODE]",{factory:()=>({interactive:$,disabled:$})}),$=new c.Al((()=>{class R{constructor(M,N,H){this.dropdown=M,this.textfieldSize=N,this.options=H}get rotated(){return this.dropdown.open}get arrowIcon(){return(0,d.R9)(this.textfieldSize.size)?this.options.iconLarge:this.options.iconSmall}}return R.\u0275fac=function(M){return new(M||R)(i.Y36(e.o1),i.Y36(V.kI),i.Y36(h))},R.\u0275cmp=i.Xpm({type:R,selectors:[["tui-arrow"]],hostVars:2,hostBindings:function(M,N){2&M&&i.ekj("_rotated",N.rotated)},decls:3,vars:4,consts:[[3,"src",4,"polymorpheusOutlet"],[4,"ngIf"],[3,"src"]],template:function(M,N){1&M&&(i.YNc(0,A,1,1,"tui-svg",0),i.YNc(1,D,1,0,"ng-container",1),i.ALo(2,"async")),2&M&&(i.Q6J("polymorpheusOutlet",N.arrowIcon),i.xp6(1),i.Q6J("ngIf",i.lcZ(2,2,N.dropdown.openChange)))},dependencies:[l.PN,c.Li,U.O5,U.Ov],styles:["[_nghost-%COMP%]{transition-property:transform;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out;display:block;cursor:pointer;pointer-events:none}._rotated[_nghost-%COMP%]{transform:rotate(180deg)}"],changeDetection:0}),R})());let ee=(()=>{class R{}return R.\u0275fac=function(M){return new(M||R)},R.\u0275mod=i.oAB({type:R}),R.\u0275inj=i.cJS({imports:[[U.ez,l.EI,c.wq]]}),R})()},29093:(ge,oe,u)=>{u.d(oe,{VF:()=>ie,EB:()=>re,Xj:()=>de});var i=u(70655),l=u(94650),d=u(66307),e=u(47776);let V=(()=>{class C{constructor(T){this.tuiSwipe=T}}return C.\u0275fac=function(T){return new(T||C)(l.Y36(e.$D))},C.\u0275dir=l.lG2({type:C,selectors:[["","tuiSwipe",""]],outputs:{tuiSwipe:"tuiSwipe"},features:[l._Bn([e.$D])]}),C})(),c=(()=>{class C{}return C.\u0275fac=function(T){return new(T||C)},C.\u0275mod=l.oAB({type:C}),C.\u0275inj=l.cJS({}),C})();var U=u(38355),A=u(78535),D=u(71225),y=u(37414),h=u(82210),B=u(68923),q=u(36895),K=u(39300),se=u(59468),$=u(54004),ee=u(18505),R=u(63900),I=u(80702),M=u(9892),N=u(69751),H=u(61135),le=u(56451),ce=u(39841),F=u(17445),Q=u(60515);function w(C,te){1&C&&l.GkF(0)}function z(C,te){if(1&C){const T=l.EpF();l.TgZ(0,"fieldset",5),l.NdJ("waIntersectionObservee",function(X){const Te=l.CHM(T).index,fe=l.oxw();return l.KtG(fe.onIntersection(X[0],Te))}),l.GkF(1,6),l.qZA()}if(2&C){const T=te.$implicit,J=te.index,X=l.oxw();l.Q6J("disabled",X.isDisabled(J))("ngStyle",X.getStyle(X.itemsCount)),l.xp6(1),l.Q6J("ngTemplateOutlet",T)}}let j=(()=>{class C{constructor(T){this.elementRef=T,this.tuiCarouselScroll=(0,U.mL)(this.elementRef.nativeElement,"wheel").pipe((0,K.h)(({deltaX:J})=>Math.abs(J)>20),(0,se.p)(500),(0,$.U)(({deltaX:J})=>Math.sign(J)),(0,ee.b)(()=>{this.elementRef.nativeElement.scrollLeft=10}))}}return C.\u0275fac=function(T){return new(T||C)(l.Y36(l.SBq))},C.\u0275dir=l.lG2({type:C,selectors:[["","tuiCarouselScroll",""]],outputs:{tuiCarouselScroll:"tuiCarouselScroll"}}),C})(),re=(()=>{class C extends N.y{constructor(T,J){super(X=>this.output$.subscribe(X)),this.elementRef=T,this.visible$=J,this.duration$=new H.X(0),this.running$=(0,le.T)((0,U.mL)(this.elementRef.nativeElement,"mouseenter").pipe((0,$.U)(A.Iy)),(0,U.mL)(this.elementRef.nativeElement,"touchstart").pipe((0,$.U)(A.Iy)),(0,U.mL)(this.elementRef.nativeElement,"touchend").pipe((0,$.U)(A.Ye)),(0,U.mL)(this.elementRef.nativeElement,"mouseleave").pipe((0,$.U)(A.Ye)),this.visible$),this.output$=(0,ce.a)([this.duration$,this.running$]).pipe((0,R.w)(([X,pe])=>X&&pe?(0,F.F)(X):Q.E))}set duration(T){this.duration$.next(T)}set index(T){this.duration$.next(this.duration$.value)}}return C.\u0275fac=function(T){return new(T||C)(l.Y36(l.SBq),l.Y36(M.de))},C.\u0275dir=l.lG2({type:C,selectors:[["tui-carousel"]],inputs:{duration:"duration",index:"index"},features:[l.qOj]}),C})(),k=(()=>{class C{constructor(T){this.tuiCarouselAutoscroll=T}}return C.\u0275fac=function(T){return new(T||C)(l.Y36(re))},C.\u0275dir=l.lG2({type:C,selectors:[["","tuiCarouselAutoscroll",""]],outputs:{tuiCarouselAutoscroll:"tuiCarouselAutoscroll"}}),C})(),ie=(()=>{class C{constructor(T,J,X){this.changeDetectorRef=T,this.elementRef=J,this.isMobile=X,this.translate=0,this.draggable=!1,this.itemsCount=1,this.index=0,this.indexChange=new l.vpe,this.items=A.Mm,this.transitioned=!0}get transform(){return`translateX(${100*(this.transitioned?this.computedTranslate:this.translate)}%)`}onTransitioned(T){this.transitioned=T,T||(this.translate=this.computedTranslate)}getStyle(T){const J=100/T+"%";return{flexBasis:J,minWidth:J,maxWidth:J}}next(){this.updateIndex(this.index+1)}prev(){this.updateIndex(this.index-1)}isDisabled(T){return T<this.index||T>this.index+this.itemsCount}onIntersection({intersectionRatio:T},J){T&&1!==T&&!this.transitioned&&this.updateIndex(J-Math.floor(this.itemsCount/2))}onScroll(T){this.isMobile||this.updateIndex(this.index+T)}onPan(T){if(!this.computedDraggable)return;const{clientWidth:J}=this.elementRef.nativeElement;this.translate=(0,D.Ki)(T/J+this.translate,1-this.items.length/this.itemsCount,0)}onSwipe(T){"left"===T?this.next():"right"===T&&this.prev()}onAutoscroll(){this.updateIndex(this.index===this.items.length-1?0:this.index+1)}get computedTranslate(){return-this.index/this.itemsCount}get computedDraggable(){return this.isMobile||this.draggable}updateIndex(T){this.index=(0,D.Ki)(T,0,this.items.length-1),this.indexChange.emit(this.index),this.changeDetectorRef.markForCheck()}}return C.\u0275fac=function(T){return new(T||C)(l.Y36(l.sBO),l.Y36(l.SBq),l.Y36(y.fL))},C.\u0275cmp=l.Xpm({type:C,selectors:[["tui-carousel"]],contentQueries:function(T,J,X){if(1&T&&l.Suo(X,h.w,4,l.Rgc),2&T){let pe;l.iGM(pe=l.CRH())&&(J.items=pe)}},hostVars:4,hostBindings:function(T,J){1&T&&l.NdJ("touchstart",function(){return J.onTransitioned(!1)})("touchend",function(){return J.onTransitioned(!0)})("mousedown",function(){return J.onTransitioned(!1)})("mouseup.silent",function(){return J.onTransitioned(!0)},!1,l.evT),2&T&&l.ekj("_draggable",J.draggable)("_transitioned",J.transitioned)},inputs:{draggable:"draggable",itemsCount:"itemsCount",index:"index"},outputs:{indexChange:"indexChange"},decls:6,vars:6,consts:[[4,"ngIf"],[1,"t-scroller",3,"tuiCarouselScroll"],["waIntersectionRoot","","waIntersectionObserver","","waIntersectionThreshold","0,1","waIntersectionRootMargin","100px 1000000px 100px -51%",1,"t-wrapper"],[1,"t-items",3,"tuiPan","tuiSwipe","tuiCarouselAutoscroll"],["class","t-item",3,"disabled","ngStyle","waIntersectionObservee",4,"ngFor","ngForOf"],[1,"t-item",3,"disabled","ngStyle","waIntersectionObservee"],[3,"ngTemplateOutlet"]],template:function(T,J){1&T&&(l.YNc(0,w,1,0,"ng-container",0),l.ALo(1,"async"),l.TgZ(2,"div",1),l.NdJ("tuiCarouselScroll",function(pe){return J.onScroll(pe)}),l.TgZ(3,"div",2)(4,"div",3),l.NdJ("tuiPan",function(pe){return J.onPan(pe[0])})("tuiSwipe",function(pe){return J.onSwipe(pe.direction)})("tuiCarouselAutoscroll",function(){return J.onAutoscroll()}),l.YNc(5,z,2,3,"fieldset",4),l.qZA()()()),2&T&&(l.Q6J("ngIf",l.lcZ(1,4,J.items.changes)),l.xp6(4),l.Udp("transform",J.transform),l.xp6(1),l.Q6J("ngForOf",J.items))},dependencies:[q.O5,j,I.Q7,I.Z7,d.g,V,k,q.sg,q.PC,I.AY,q.tP,q.Ov],styles:['[_nghost-%COMP%]{position:relative;display:block;overflow:hidden}._draggable[_nghost-%COMP%]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}._draggable[_nghost-%COMP%]:hover{cursor:-webkit-grab;cursor:grab}._draggable[_nghost-%COMP%]:active{cursor:-webkit-grabbing;cursor:grabbing}.t-items[_ngcontent-%COMP%]{display:flex}._transitioned[_nghost-%COMP%]   .t-items[_ngcontent-%COMP%]{transition-property:transform;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out}.t-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;padding:var(--tui-carousel-padding, 0 1.25rem);flex:1;min-width:100%;max-width:100%;box-sizing:border-box;border:none;margin:0}.t-wrapper[_ngcontent-%COMP%]{position:-webkit-sticky;position:sticky;left:0;right:0;min-width:100%;overflow:hidden}.t-scroller[_ngcontent-%COMP%]{scrollbar-width:none;-ms-overflow-style:none;display:flex;overflow:auto;overscroll-behavior-x:none;padding-bottom:2rem;margin-bottom:-2rem}.t-scroller[_ngcontent-%COMP%]::-webkit-scrollbar, .t-scroller[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:transparent;width:0;height:0}.t-scroller[_ngcontent-%COMP%]:before, .t-scroller[_ngcontent-%COMP%]:after{content:"";display:block;min-width:1rem}'],changeDetection:0}),(0,i.gn)([(0,B.TH)()],C.prototype,"draggable",void 0),(0,i.gn)([(0,B.TH)()],C.prototype,"itemsCount",void 0),(0,i.gn)([(0,B.TH)()],C.prototype,"index",void 0),(0,i.gn)([B.UM],C.prototype,"getStyle",null),C})(),de=(()=>{class C{}return C.\u0275fac=function(T){return new(T||C)},C.\u0275mod=l.oAB({type:C}),C.\u0275inj=l.cJS({imports:[[q.ez,I.$v,d.N,c,h.H]]}),C})()},35601:(ge,oe,u)=>{u.d(oe,{h:()=>c,y:()=>U});var i=u(70655),l=u(94650),d=u(68923),e=u(36895);const V=["*"];let c=(()=>{class A{constructor(){this.size="m",this.textAlign="left",this.hoverable=!1,this.transparent=!1}get sizeS(){return"s"===this.size}get sizeM(){return"m"===this.size}get sizeL(){return"l"===this.size}get textAlignLeft(){return"left"===this.textAlign}get textAlignCenter(){return"center"===this.textAlign}get textAlignRight(){return"right"===this.textAlign}}return A.\u0275fac=function(y){return new(y||A)},A.\u0275cmp=l.Xpm({type:A,selectors:[["tui-island"],["a","tuiIsland",""]],hostAttrs:[1,"tui-island"],hostVars:16,hostBindings:function(y,h){2&y&&l.ekj("tui-island_hoverable",h.hoverable)("tui-island_transparent",h.transparent)("tui-island_size_s",h.sizeS)("tui-island_size_m",h.sizeM)("tui-island_size_l",h.sizeL)("tui-island_text-align_left",h.textAlignLeft)("tui-island_text-align_center",h.textAlignCenter)("tui-island_text-align_right",h.textAlignRight)},inputs:{size:"size",textAlign:"textAlign",hoverable:"hoverable",transparent:"transparent"},ngContentSelectors:V,decls:1,vars:0,template:function(y,h){1&y&&(l.F$t(),l.Hsn(0))},styles:["[_nghost-%COMP%]{display:block}"],changeDetection:0}),(0,i.gn)([(0,d.TH)()],A.prototype,"size",void 0),(0,i.gn)([(0,d.TH)()],A.prototype,"textAlign",void 0),(0,i.gn)([(0,d.TH)()],A.prototype,"hoverable",void 0),(0,i.gn)([(0,d.TH)()],A.prototype,"transparent",void 0),A})(),U=(()=>{class A{}return A.\u0275fac=function(y){return new(y||A)},A.\u0275mod=l.oAB({type:A}),A.\u0275inj=l.cJS({imports:[[e.ez]]}),A})()},77975:(ge,oe,u)=>{u.d(oe,{VT:()=>W,Qp:()=>x,lm:()=>P});var i=u(70655),l=u(94650),d=u(93422),e=u(66437),V=u(77721),c=u(1054),U=u(78535),A=u(55753),D=u(39255),y=u(37414),h=u(68923),B=u(54227),q=u(24006),K=u(91127),se=u(71115),$=u(47846),ee=u(31947),R=u(53861),I=u(8276),M=u(79791);class le{constructor(b,_){this.item=b,this.stringify=_}toString(){return this.stringify(this.item)}}var ce=u(68341),F=u(4053),Q=u(87377),w=u(15135),z=u(36895),j=u(89740),re=u(74606),k=u(42973);let ie=(()=>{class p extends re.TA{get size(){var _;return"l"===this.option.size||"l"===(null===(_=this.dataList)||void 0===_?void 0:_.size)&&!this.option.size?"l":"m"}get selected(){const{value:_}=this.option;return(0,A.Pc)(_)&&(0,A.Pc)(this.value)&&this.value.some(f=>this.matcher(f,_))}}return p.\u0275fac=function(){let b;return function(f){return(b||(b=l.n5z(p)))(f||p)}}(),p.\u0275cmp=l.Xpm({type:p,selectors:[["tui-multi-select-option"]],features:[l.qOj],decls:3,vars:5,consts:[[1,"t-checkbox",3,"size","value"],[3,"ngTemplateOutlet"]],template:function(_,f){1&_&&(l._UZ(0,"tui-primitive-checkbox",0),l.ALo(1,"async"),l.GkF(2,1)),2&_&&(l.Q6J("size",f.size)("value",l.lcZ(1,3,f.selected$)),l.xp6(2),l.Q6J("ngTemplateOutlet",f.context.$implicit))},dependencies:[k.r3,z.tP,z.Ov],styles:["@keyframes _ngcontent-%COMP%_retrigger{0%{left:1px}to{left:2px}}[_nghost-%COMP%]{display:flex;flex:1;align-items:center;overflow:hidden;animation:_ngcontent-%COMP%_retrigger 1s}.t-checkbox[_ngcontent-%COMP%]{margin-right:.75rem}"],changeDetection:0}),p})(),G=(()=>{class p{}return p.\u0275fac=function(_){return new(_||p)},p.\u0275mod=l.oAB({type:p}),p.\u0275inj=l.cJS({imports:[[z.ez,k.fB]]}),p})();function de(p,b){if(1&p&&(l.ynx(0),l._uU(1),l.BQk()),2&p){const _=b.polymorpheusOutlet;l.xp6(1),l.hij(" ",_," ")}}const C=function(p){return{$implicit:p}};function te(p,b){if(1&p&&(l.TgZ(0,"div",6),l.YNc(1,de,2,1,"ng-container",7),l.qZA()),2&p){const _=l.oxw(),f=l.MAs(2);l.ekj("t-group_fullsize",f.labelOutside),l.xp6(1),l.Q6J("polymorpheusOutlet",_.valueContent)("polymorpheusOutletContext",l.VKq(4,C,_.value))}}function T(p,b){if(1&p&&(l.ynx(0),l._uU(1),l.BQk()),2&p){const _=b.polymorpheusOutlet;l.xp6(1),l.hij(" ",_," ")}}function J(p,b){if(1&p&&(l.TgZ(0,"div",9),l.YNc(1,T,2,1,"ng-container",10),l.qZA()),2&p){const _=l.oxw(2);l.xp6(1),l.Q6J("polymorpheusOutlet",_.arrow)}}function X(p,b){if(1&p&&l.YNc(0,J,2,1,"div",8),2&p){const _=l.oxw();l.Q6J("ngIf",_.arrow)}}const pe=["*"],v={expandable:!0,valueContent:""},g=new l.OlP("[TUI_MULTI_SELECT_OPTIONS]",{factory:()=>v});let W=(()=>{class p extends c.m6{constructor(_,f,Y,ne,ae,ve){super(_,f),this.arrowMode=Y,this.itemsHandlers=ne,this.options=ae,this.controller=ve,this.stringify=this.itemsHandlers.stringify,this.identityMatcher=this.itemsHandlers.identityMatcher,this.expandable=this.options.expandable,this.search="",this.placeholder="",this.editable=!0,this.disabledItemHandler=this.itemsHandlers.disabledItemHandler,this.valueContent=this.options.valueContent,this.rows=1/0,this.searchChange=new l.vpe,this.datalist="",this.open=!1,this.valueMapper=(ye,xe,we)=>we?U.LZ:ye.map(ke=>new le(ke,xe)),this.disabledItemHandlerWrapper=ye=>xe=>(0,A.Aj)(xe)||ye(xe.item)}get size(){return this.controller.size}get arrow(){return this.interactive?this.arrowMode.interactive:this.arrowMode.disabled}get nativeFocusableElement(){var _,f;return null!==(f=null===(_=this.input)||void 0===_?void 0:_.nativeFocusableElement)&&void 0!==f?f:null}get focused(){var _,f;return!(null===(_=this.input)||void 0===_||!_.focused)||!(null===(f=this.hostedDropdown)||void 0===f||!f.focused)}get computedValue(){return this.computedGroup?U.LZ:this.value}get searchOrSpace(){return this.computedGroup?" ":this.searchString}get searchString(){return null===this.search?"":this.search}get computedGroup(){return!!this.valueContent&&this.value.length>0&&(!this.focused||!this.editable)}getStringifier(_){return({$implicit:f})=>_(f)}onSpace(_){this.editable||_.preventDefault(),this.readOnly||(this.open=!0)}handleOption(_){const{value:f,identityMatcher:Y}=this,ne=f.findIndex(ae=>Y(ae,_));this.updateValue(-1===ne?[...f,_]:f.filter((ae,ve)=>ve!==ne)),this.updateSearch(null)}onEnter(_){const{value:f}=this,Y=this.accessor?this.accessor.getOptions():[];1===Y.length&&(_.preventDefault(),this.updateValue((0,A.jp)(f,Y[0])),this.updateSearch(null))}onClick({nativeFocusableElement:_}){var f;this.interactive&&_&&(0,D.V8)(_)&&(null===(f=this.hostedDropdown)||void 0===f||f.updateOpen(!this.open))}onInput(_){this.updateValue(_.map(({item:f})=>f))}onSearch(_){this.open=!0,this.updateSearch(_)}onActiveZone(_){this.updateFocused(_)}setDisabledState(){super.setDisabledState(),this.open=!1}updateSearch(_){this.search!==_&&(this.search=_,this.searchChange.emit(_))}}return p.\u0275fac=function(_){return new(_||p)(l.Y36(q.a5,10),l.Y36(l.sBO),l.Y36(ce.Ii),l.Y36(w.Ys),l.Y36(g),l.Y36(se.Cs))},p.\u0275cmp=l.Xpm({type:p,selectors:[["tui-multi-select"]],contentQueries:function(_,f,Y){if(1&_&&(l.Suo(Y,ee.Cc,5),l.Suo(Y,R.gX,5,l.Rgc)),2&_){let ne;l.iGM(ne=l.CRH())&&(f.accessor=ne.first),l.iGM(ne=l.CRH())&&(f.datalist=ne.first)}},viewQuery:function(_,f){if(1&_&&(l.Gf(K.o1,5),l.Gf(F.PZ,5)),2&_){let Y;l.iGM(Y=l.CRH())&&(f.hostedDropdown=Y.first),l.iGM(Y=l.CRH())&&(f.input=Y.first)}},hostVars:3,hostBindings:function(_,f){2&_&&(l.uIk("data-size",f.size),l.ekj("_editable",f.editable))},inputs:{stringify:"stringify",identityMatcher:"identityMatcher",expandable:"expandable",search:"search",placeholder:"placeholder",editable:"editable",disabledItemHandler:"disabledItemHandler",valueContent:"valueContent",rows:"rows"},outputs:{searchChange:"searchChange"},features:[l._Bn([(0,y.FT)(p),(0,c.wB)(p),(0,ee.oE)(p),se.Y0],[Q.yn]),l.qOj],ngContentSelectors:pe,decls:10,vars:28,consts:[[1,"t-hosted",3,"canOpen","content","open","openChange","tuiActiveZoneChange"],["automation-id","tui-multi-select__input",1,"t-input",3,"nativeId","tuiTextfieldIcon","disabled","disabledItemHandler","readOnly","inputHidden","pseudoHover","placeholder","pseudoFocus","pseudoInvalid","editable","expandable","search","rows","ngModel","ngModelChange","searchChange","keydown.space","keydown.enter","click.prevent"],["inputTag",""],[1,"t-wrapper"],["class","t-group",3,"t-group_fullsize",4,"ngIf"],["icon",""],[1,"t-group"],[4,"polymorpheusOutlet","polymorpheusOutletContext"],["tuiWrapper","","appearance","icon","automation-id","tui-multi-select__arrow","tuiPreventDefault","mousedown","class","t-arrow",4,"ngIf"],["tuiWrapper","","appearance","icon","automation-id","tui-multi-select__arrow","tuiPreventDefault","mousedown",1,"t-arrow"],[4,"polymorpheusOutlet"]],template:function(_,f){if(1&_){const Y=l.EpF();l.F$t(),l.TgZ(0,"tui-hosted-dropdown",0),l.NdJ("openChange",function(ae){return f.open=ae})("tuiActiveZoneChange",function(ae){return f.onActiveZone(ae)}),l.TgZ(1,"tui-input-tag",1,2),l.NdJ("ngModelChange",function(ae){return f.onInput(ae)})("searchChange",function(ae){return f.onSearch(ae)})("keydown.space",function(ae){return f.onSpace(ae)})("keydown.enter",function(ae){return f.onEnter(ae)})("click.prevent",function(){l.CHM(Y);const ae=l.MAs(2);return l.KtG(f.onClick(ae))}),l.ALo(3,"tuiMapper"),l.ALo(4,"tuiMapper"),l.Hsn(5),l.qZA(),l.TgZ(6,"div",3),l.YNc(7,te,2,6,"div",4),l.YNc(8,X,1,1,"ng-template",null,5,l.W1O),l.qZA()()}if(2&_){const Y=l.MAs(9);l.Q6J("canOpen",f.interactive)("content",f.datalist||"")("open",f.open),l.xp6(1),l.Q6J("nativeId",f.nativeId)("tuiTextfieldIcon",Y)("disabled",f.disabled)("disabledItemHandler",l.xi3(3,21,f.disabledItemHandler,f.disabledItemHandlerWrapper))("readOnly",f.readOnly)("inputHidden",!f.editable)("pseudoHover",f.pseudoHover)("placeholder",f.placeholder)("pseudoFocus",f.computedFocused)("pseudoInvalid",f.computedInvalid)("editable",!1)("expandable",f.expandable)("search",f.searchOrSpace)("rows",f.rows)("ngModel",l.Dn7(4,24,f.computedValue,f.valueMapper,f.stringify)),l.xp6(5),l.ekj("t-wrapper_disabled",f.disabled),l.xp6(1),l.Q6J("ngIf",f.computedGroup)}},dependencies:[K.o1,F.PZ,d.e,se.AW,q.JJ,q.On,z.O5,j.Li,$.o,e.A,V.c],styles:["[_nghost-%COMP%]{position:relative;display:block;border-radius:var(--tui-radius-m)}._disabled[_nghost-%COMP%]{pointer-events:none}.t-hosted[_ngcontent-%COMP%]{display:block;border-radius:inherit}.t-input[_ngcontent-%COMP%]{border-radius:inherit}[_nghost-%COMP%]:not(._editable):not(._readonly)   .t-input[_ngcontent-%COMP%]{cursor:pointer}.t-wrapper[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;display:flex;pointer-events:none;justify-content:flex-end}.t-wrapper_disabled[_ngcontent-%COMP%]{opacity:var(--tui-disabled-opacity)}[data-size=s][_nghost-%COMP%]   .t-wrapper[_ngcontent-%COMP%]{height:var(--tui-height-s)}[data-size=m][_nghost-%COMP%]   .t-wrapper[_ngcontent-%COMP%]{height:var(--tui-height-m)}[data-size=l][_nghost-%COMP%]   .t-wrapper[_ngcontent-%COMP%]{height:var(--tui-height-l)}.t-group[_ngcontent-%COMP%]{display:flex;flex:1;align-items:center;padding:1.6875rem 0 .5625rem 1rem;overflow:hidden}.t-group_fullsize[_ngcontent-%COMP%]{padding-top:.0625rem;padding-bottom:0}[data-size=m][_nghost-%COMP%]   .t-group_fullsize.t-group_fullsize[_ngcontent-%COMP%]{padding-top:0}[data-size=m][_nghost-%COMP%]   .t-group[_ngcontent-%COMP%]{padding:1.1875rem 0 0 .75rem;font-size:.8125rem}.t-arrow[_ngcontent-%COMP%]{pointer-events:auto;cursor:pointer}"],changeDetection:0}),(0,i.gn)([(0,h.TH)()],p.prototype,"stringify",void 0),(0,i.gn)([(0,h.TH)()],p.prototype,"identityMatcher",void 0),(0,i.gn)([(0,h.TH)()],p.prototype,"expandable",void 0),(0,i.gn)([(0,h.TH)()],p.prototype,"search",void 0),(0,i.gn)([(0,h.TH)()],p.prototype,"placeholder",void 0),(0,i.gn)([(0,h.TH)()],p.prototype,"editable",void 0),(0,i.gn)([(0,h.TH)()],p.prototype,"disabledItemHandler",void 0),(0,i.gn)([(0,h.TH)()],p.prototype,"valueContent",void 0),(0,i.gn)([h.UM],p.prototype,"getStringifier",null),p})();const Ce=new j.Al(ie);let x=(()=>{class p{}return p.\u0275fac=function(_){return new(_||p)},p.\u0275dir=l.lG2({type:p,selectors:[["","tuiMultiSelectGroup",""]],features:[l._Bn([(0,ee.P7)(Ce),{provide:ee.N1,deps:[q.a5,[new l.FiY,(0,l.Gpc)(()=>W)]],useFactory:(b,_)=>_||{handleOption:f=>{var Y;return null===(Y=b.control)||void 0===Y?void 0:Y.setValue((0,A.jp)(b.value||[],f))}}},{provide:q.JU,multi:!0,useValue:{writeValue:U.iD,registerOnChange:U.iD,registerOnTouched:U.iD}}])]}),p})(),P=(()=>{class p{}return p.\u0275fac=function(_){return new(_||p)},p.\u0275mod=l.oAB({type:p}),p.\u0275inj=l.cJS({imports:[[z.ez,q.u5,j.wq,$.W,e.Z,d.A,ce.Mt,B.WD,V.I,I.EI,K.jh,F.cB,G,M.j,R.pc,se.cn]]}),p})()},67155:(ge,oe,u)=>{u.d(oe,{V5:()=>R,iv:()=>B,vV:()=>$});var i=u(36895),l=u(94650),d=u(68923),e=u(58459),V=u(70655);const c=["tuiProgressBar",""],A=["tuiProgressLabel",""],D=[[["progress"]],[["tui-progress-circle"]],"*"],y=["progress","tui-progress-circle","*"];let B=(()=>{class I{constructor(){this.size="m"}}return I.\u0275fac=function(N){return new(N||I)},I.\u0275cmp=l.Xpm({type:I,selectors:[["progress","tuiProgressBar",""]],hostVars:3,hostBindings:function(N,H){2&N&&(l.uIk("data-size",H.size),l.Udp("--tui-progress-color",H.color))},inputs:{color:"color",size:"size"},attrs:c,decls:0,vars:0,template:function(N,H){},styles:["@keyframes _ngcontent-%COMP%_tuiIndeterminateAnimation{50%{background-position:left}}[_nghost-%COMP%]{-webkit-appearance:none;-moz-appearance:none;appearance:none;border:none;background-color:var(--tui-base-03);display:block;width:100%;color:var(--tui-primary);border-radius:var(--tui-radius-xs);overflow:hidden}[_nghost-%COMP%]::-webkit-progress-value{-webkit-transition:width var(--tui-duration) linear;transition:width var(--tui-duration) linear}[_nghost-%COMP%]::-webkit-progress-value{background:var(--tui-progress-color, currentColor)}[_nghost-%COMP%]::-moz-progress-bar{background:var(--tui-progress-color, currentColor)}[_nghost-%COMP%]::-webkit-progress-bar{background-color:var(--tui-base-03)}[data-size=m][_nghost-%COMP%]{height:1.5rem}[data-size=s][_nghost-%COMP%]{height:.5rem}[data-size=s][_nghost-%COMP%]::-webkit-progress-value{border-radius:var(--tui-radius-xs)}[data-size=s][_nghost-%COMP%]::-moz-progress-bar{border-radius:var(--tui-radius-xs)}[_nghost-%COMP%]:indeterminate{background:transparent;background-image:linear-gradient(to right,var(--tui-base-03) 0 45%,var(--tui-progress-color, currentColor) 45% 55%,var(--tui-base-03) 55% 100%);background-size:225%;background-position:right;animation:_ngcontent-%COMP%_tuiIndeterminateAnimation 3s infinite ease-in-out}[_nghost-%COMP%]:indeterminate::-webkit-progress-bar{background:transparent}[_nghost-%COMP%]:indeterminate::-webkit-progress-value{background:transparent}[_nghost-%COMP%]:indeterminate::-moz-progress-bar{background:transparent}label[tuiProgressLabel][_nghost-%COMP%]:not(:first-child), label[tuiProgressLabel]   [_nghost-%COMP%]:not(:first-child){position:absolute;top:0;left:0;width:100%;height:100%;background-color:transparent}label[tuiProgressLabel][_nghost-%COMP%]:not(:first-child)::-webkit-progress-bar, label[tuiProgressLabel]   [_nghost-%COMP%]:not(:first-child)::-webkit-progress-bar{background-color:transparent}"],changeDetection:0}),(0,V.gn)([(0,d.TH)()],I.prototype,"size",void 0),I})(),$=(()=>{class I{}return I.\u0275fac=function(N){return new(N||I)},I.\u0275cmp=l.Xpm({type:I,selectors:[["label","tuiProgressLabel",""]],attrs:A,ngContentSelectors:y,decls:4,vars:0,consts:[[1,"t-label"]],template:function(N,H){1&N&&(l.F$t(D),l.Hsn(0),l.Hsn(1,1),l.TgZ(2,"span",0),l.Hsn(3,2),l.qZA())},styles:["[_nghost-%COMP%]{position:relative;display:inline-block}.t-label[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;display:flex;font:var(--tui-font-text-s);color:var(--tui-text-01);flex-direction:column;justify-content:center;align-items:center}"],changeDetection:0}),I})(),R=(()=>{class I{}return I.\u0275fac=function(N){return new(N||I)},I.\u0275mod=l.oAB({type:I}),I.\u0275inj=l.cJS({imports:[[i.ez,e.Ih]]}),I})()},74606:(ge,oe,u)=>{u.d(oe,{Q4:()=>j,TA:()=>z,Ig:()=>re});var i=u(94650),l=u(24006),d=u(38355),e=u(78535),V=u(55753),c=u(1054),U=u(8276),A=u(70655),D=u(47776),y=u(68923),h=u(95825),B=u(5963),q=u(82722);let K=(()=>{class k{constructor(G,de){this.elementRef=G,this.destroy$=de}set tuiScrollIntoView(G){G&&(0,B.H)(0).pipe((0,q.R)(this.destroy$)).subscribe(()=>{this.elementRef.nativeElement.dispatchEvent(new CustomEvent(h.fe,{bubbles:!0,detail:this.elementRef.nativeElement}))})}}return k.\u0275fac=function(G){return new(G||k)(i.Y36(i.SBq),i.Y36(D.a3,2))},k.\u0275dir=i.lG2({type:k,selectors:[["","tuiScrollIntoView",""]],inputs:{tuiScrollIntoView:"tuiScrollIntoView"},features:[i._Bn([D.a3])]}),(0,A.gn)([(0,y.NH)()],k.prototype,"tuiScrollIntoView",null),k})(),se=(()=>{class k{}return k.\u0275fac=function(G){return new(G||k)},k.\u0275mod=i.oAB({type:k}),k.\u0275inj=i.cJS({}),k})();var $=u(31947),ee=u(53861),R=u(89740),I=u(77579),M=u(56451),N=u(60515),H=u(68675),le=u(54004),ce=u(71884),F=u(36895);function Q(k,ie){1&k&&i._UZ(0,"tui-svg",3),2&k&&i.Q6J("tuiScrollIntoView",!0)}function w(k,ie){1&k&&i._UZ(0,"span",4)}let z=(()=>{class k{constructor(G,de,C,te,T,J,X){this.context=G,this.host=de,this.elementRef=C,this.option=te,this.dataList=T,this.control=J,this.abstractControl=X,this.changeDetection$=new I.x,this.selected$=(0,M.T)(this.changeDetection$,this.control.valueChanges||N.E,(0,d.mL)(this.elementRef.nativeElement,"animationstart")).pipe((0,H.O)(null),(0,le.U)(()=>this.selected),(0,ce.x)())}get matcher(){return this.host.identityMatcher||e.bg}ngDoCheck(){this.changeDetection$.next()}ngOnInit(){Promise.resolve().then(()=>{(0,V.Pc)(this.option.value)&&this.host.checkOption&&this.host.checkOption(this.option.value)})}get value(){var G,de;return null!==(de=null===(G=this.abstractControl)||void 0===G?void 0:G.value)&&void 0!==de?de:this.control.value}get selected(){return(0,V.Pc)(this.option.value)&&(0,V.Pc)(this.value)&&this.matcher(this.value,this.option.value)}}return k.\u0275fac=function(G){return new(G||k)(i.Y36(R.yf),i.Y36($.N1),i.Y36(i.SBq),i.Y36(ee.vK),i.Y36(ee.qi,8),i.Y36(l.a5),i.Y36(c.M$,8))},k.\u0275cmp=i.Xpm({type:k,selectors:[["tui-select-option"]],decls:5,vars:5,consts:[[3,"ngTemplateOutlet"],["automation-id","tui-select-option__checkmark","src","tuiIconCheckLarge","class","t-checkmark",3,"tuiScrollIntoView",4,"ngIf","ngIfElse"],["dummy",""],["automation-id","tui-select-option__checkmark","src","tuiIconCheckLarge",1,"t-checkmark",3,"tuiScrollIntoView"],[1,"t-dummy"]],template:function(G,de){if(1&G&&(i.GkF(0,0),i.YNc(1,Q,1,1,"tui-svg",1),i.ALo(2,"async"),i.YNc(3,w,1,0,"ng-template",null,2,i.W1O)),2&G){const C=i.MAs(4);i.Q6J("ngTemplateOutlet",de.context.$implicit),i.xp6(1),i.Q6J("ngIf",i.lcZ(2,3,de.selected$))("ngIfElse",C)}},dependencies:[U.PN,F.tP,F.O5,K,F.Ov],styles:["@keyframes _ngcontent-%COMP%_retrigger{0%{left:1px}to{left:2px}}[_nghost-%COMP%]{display:flex;flex:1;align-items:center;max-width:100%;animation:_ngcontent-%COMP%_retrigger 1s}.t-checkmark[_ngcontent-%COMP%]{margin:0 -.375rem 0 auto;border-left:5px solid transparent}.t-dummy[_ngcontent-%COMP%]{width:1.5rem}"],changeDetection:0}),k})();const j=new R.Al(z);let re=(()=>{class k{}return k.\u0275fac=function(G){return new(G||k)},k.\u0275mod=i.oAB({type:k}),k.\u0275inj=i.cJS({imports:[[F.ez,U.EI,se]]}),k})()},21469:(ge,oe,u)=>{u.d(oe,{Jy:()=>Ce,OI:()=>he,uJ:()=>ue});var i=u(94650),l=u(93422),d=u(1054),e=u(47776),V=u(39255),c=u(37414),U=u(68923),A=u(91127),D=u(60117),y=u(71115),h=u(47846),B=u(31947),q=u(53861),K=u(96966),se=u(56772),$=u(36895),ee=u(70655),R=u(24006),I=u(68341),M=u(74606),N=u(87377),H=u(15135),le=u(89740);function ie(x,P){1&x&&(i.ynx(0),i.Hsn(1,2,["ngProjectAs","select",5,["select"]]),i.BQk())}function G(x,P){if(1&x&&i.YNc(0,ie,2,0,"ng-container",6),2&x){const p=i.oxw();i.Q6J("ngIf",p.isMobile)}}function de(x,P){1&x&&i.GkF(0,7)}function C(x,P){1&x&&i._UZ(0,"div",10),2&x&&i.Q6J("textContent",P.polymorpheusOutlet)}const te=function(x,P){return{$implicit:x,active:P}};function T(x,P){if(1&x&&(i.TgZ(0,"div",8),i.YNc(1,C,1,1,"div",9),i.qZA()),2&x){const p=i.oxw();i.xp6(1),i.Q6J("polymorpheusOutlet",p.computedContent)("polymorpheusOutletContext",i.WLB(2,te,p.value,p.computedFocused))}}function J(x,P){1&x&&i.GkF(0)}function X(x,P){if(1&x&&(i.TgZ(0,"div",11),i.YNc(1,J,1,0,"ng-container",12),i.qZA()),2&x){const p=i.oxw();i.xp6(1),i.Q6J("polymorpheusOutlet",p.arrow)}}const pe=["*",[["input"]],[["select"]]],Te=["*","input","select"];let fe=(()=>{class x{constructor(p,b,_,f){this.host=p,this.control=b,this.elementRef=_,this.idService=f,this.datalist=null,this.host.process(this.elementRef.nativeElement)}get id(){return this.elementRef.nativeElement.id||this.idService.generate()}}return x.\u0275fac=function(p){return new(p||x)(i.Y36(B.S0),i.Y36(d.M$),i.Y36(i.SBq),i.Y36(e.ll))},x.\u0275dir=i.lG2({type:x,viewQuery:function(p,b){if(1&p&&i.Gf(q.gX,7,i.Rgc),2&p){let _;i.iGM(_=i.CRH())&&(b.datalist=_.first)}},hostVars:1,hostBindings:function(p,b){2&p&&i.Ikx("id",b.id)}}),x})();const g={valueContent:""},Z=new i.OlP("[TUI_SELECT_OPTIONS]",{factory:()=>g});let ue=(()=>{class x extends d.F9{constructor(p,b,_,f,Y,ne,ae){super(p,b),this.textfieldCleaner=_,this.arrowMode=f,this.itemsHandlers=Y,this.options=ne,this.isMobile=ae,this.stringify=this.itemsHandlers.stringify,this.identityMatcher=this.itemsHandlers.identityMatcher,this.valueContent=this.options.valueContent,this.datalist=""}get arrow(){return this.interactive?this.arrowMode.interactive:this.arrowMode.disabled}get nativeFocusableElement(){return this.textfield?this.textfield.nativeFocusableElement:null}get focused(){return(0,V.V8)(this.nativeFocusableElement)||!!this.hostedDropdown&&this.hostedDropdown.focused}get nativeDropdownMode(){return!!this.nativeSelect&&this.isMobile}get computedValue(){return null===this.value?"":this.stringify(this.value)||" "}get computedContent(){return this.valueContent||this.computedValue}onValueChange(p){this.updateValue(p&&p||null)}onActiveZone(p){this.updateFocused(p)}onKeyDownDelete(){this.textfieldCleaner.cleaner&&this.updateValue(null)}handleOption(p){var b;this.focusInput(),this.updateValue(p),null===(b=this.hostedDropdown)||void 0===b||b.updateOpen(!1)}focusInput(p=!1){this.nativeFocusableElement&&this.nativeFocusableElement.focus({preventScroll:p})}}return x.\u0275fac=function(p){return new(p||x)(i.Y36(R.a5,10),i.Y36(i.sBO),i.Y36(y.Ym),i.Y36(I.Ii),i.Y36(H.Ys),i.Y36(Z),i.Y36(c.fL))},x.\u0275cmp=i.Xpm({type:x,selectors:[["tui-select"]],contentQueries:function(p,b,_){if(1&p&&(i.Suo(_,fe,7),i.Suo(_,q.gX,5,i.Rgc)),2&p){let f;i.iGM(f=i.CRH())&&(b.nativeSelect=f.first),i.iGM(f=i.CRH())&&(b.datalist=f.first)}},viewQuery:function(p,b){if(1&p&&(i.Gf(D.yc,5),i.Gf(A.o1,5)),2&p){let _;i.iGM(_=i.CRH())&&(b.textfield=_.first),i.iGM(_=i.CRH())&&(b.hostedDropdown=_.first)}},inputs:{stringify:"stringify",identityMatcher:"identityMatcher",valueContent:"valueContent"},features:[i._Bn([(0,c.FT)(x),(0,d.wB)(x),(0,B.oE)(x),(0,B.P7)(M.Q4)],[N.yn]),i.qOj],ngContentSelectors:Te,decls:10,vars:15,consts:[[1,"t-hosted",3,"canOpen","content","tuiActiveZoneChange"],["automation-id","tui-select__textfield",1,"t-textfield",3,"tuiTextfieldIcon","editable","pseudoFocus","pseudoHover","pseudoActive","invalid","nativeId","readOnly","disabled","focusable","value","valueChange","keydown.delete.prevent","keydown.backspace.prevent"],["select",""],["ngProjectAs","select",5,["select"],4,"ngTemplateOutlet"],["ngProjectAs","tuiContent","automation-id","tui-select__value","class","t-value",5,["tuiContent"],4,"ngIf"],["icon",""],[4,"ngIf"],["ngProjectAs","select",5,["select"]],["ngProjectAs","tuiContent","automation-id","tui-select__value",5,["tuiContent"],1,"t-value"],["class","t-primitive-value",3,"textContent",4,"polymorpheusOutlet","polymorpheusOutletContext"],[1,"t-primitive-value",3,"textContent"],["tuiWrapper","","appearance","icon",1,"t-icon"],[4,"polymorpheusOutlet"]],template:function(p,b){if(1&p&&(i.F$t(pe),i.TgZ(0,"tui-hosted-dropdown",0),i.NdJ("tuiActiveZoneChange",function(f){return b.onActiveZone(f)}),i.TgZ(1,"tui-primitive-textfield",1),i.NdJ("valueChange",function(f){return b.onValueChange(f)})("keydown.delete.prevent",function(){return b.onKeyDownDelete()})("keydown.backspace.prevent",function(){return b.onKeyDownDelete()}),i.Hsn(2),i.Hsn(3,1,["ngProjectAs","input",5,["input"]]),i.YNc(4,G,1,1,"ng-template",null,2,i.W1O),i.YNc(6,de,1,0,"ng-container",3),i.YNc(7,T,2,5,"div",4),i.qZA(),i.YNc(8,X,2,1,"ng-template",null,5,i.W1O),i.qZA()),2&p){const _=i.MAs(5),f=i.MAs(9);i.Q6J("canOpen",b.interactive&&!b.nativeDropdownMode)("content",b.datalist||""),i.xp6(1),i.Q6J("tuiTextfieldIcon",b.arrow?f:"")("editable",!1)("pseudoFocus",b.computedFocused)("pseudoHover",b.pseudoHover)("pseudoActive",b.pseudoActive)("invalid",b.computedInvalid)("nativeId",b.nativeId)("readOnly",b.readOnly)("disabled",b.computedDisabled)("focusable",b.computedFocusable)("value",b.computedValue),i.xp6(5),i.Q6J("ngTemplateOutlet",_),i.xp6(1),i.Q6J("ngIf",null!==b.value)}},dependencies:[A.o1,D.yc,l.e,D.B1,y.AW,$.O5,$.tP,le.Li,h.o],styles:["[_nghost-%COMP%]{display:block;border-radius:var(--tui-radius-m);text-align:left}[_nghost-%COMP%]:not(._readonly)     input:not(:disabled){cursor:pointer}._readonly[_nghost-%COMP%]     input{cursor:default}.t-hosted[_ngcontent-%COMP%]{display:block;border-radius:inherit}.t-textfield[_ngcontent-%COMP%]{border-radius:inherit;text-align:inherit}.t-value[_ngcontent-%COMP%]{display:flex;width:100%;align-items:center}.t-primitive-value[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}"],changeDetection:0}),(0,ee.gn)([(0,U.TH)()],x.prototype,"stringify",void 0),(0,ee.gn)([(0,U.TH)()],x.prototype,"identityMatcher",void 0),(0,ee.gn)([(0,U.TH)()],x.prototype,"valueContent",void 0),x})(),he=(()=>{class x extends K.D1{get readOnly(){return!0}get value(){return this.host.computedValue}onValueChange(p){this.host.onValueChange(p)}}return x.\u0275fac=function(){let P;return function(b){return(P||(P=i.n5z(x)))(b||x)}}(),x.\u0275dir=i.lG2({type:x,selectors:[["tui-select"]],features:[i._Bn([(0,B.cp)(x)]),i.qOj]}),x})(),Ce=(()=>{class x{}return x.\u0275fac=function(p){return new(p||x)},x.\u0275mod=i.oAB({type:x}),x.\u0275inj=i.cJS({imports:[[$.ez,le.wq,l.A,D.KW,A.jh,M.Ig,I.Mt,h.W,y.cn,se.zX,q.pc]]}),x})()},94813:(ge,oe,u)=>{u.d(oe,{j:()=>l});var i=u(54004);function l(...d){const e=d.length;if(0===e)throw new Error("list of properties cannot be empty.");return(0,i.U)(V=>{let c=V;for(let U=0;U<e;U++){const A=c?.[d[U]];if(!(typeof A<"u"))return;c=A}return c})}}}]);