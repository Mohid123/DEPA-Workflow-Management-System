"use strict";(self.webpackChunkDEPA_FRONTEND=self.webpackChunkDEPA_FRONTEND||[]).push([[559],{55559:(J,h,o)=>{o.r(h),o.d(h,{AuthModule:()=>p});var m=o(36895),g=o(19132),t=o(94650);class l{}l.\u0275fac=function(n){return new(n||l)},l.\u0275cmp=t.Xpm({type:l,selectors:[["app-auth"]],decls:1,vars:0,template:function(n,e){1&n&&t._UZ(0,"router-outlet")},dependencies:[g.lC]});var c=o(90433),y=o(77579),P=o(61135),f=o(82722),v=o(50590),x=o(57505),D=o(15274),b=o(22603),_=o(87089),T=o(60101);function A(i,n){if(1&i){const e=t.EpF();t.ynx(0),t.TgZ(1,"formio",13),t.NdJ("change",function(r){t.CHM(e);const a=t.oxw();return t.KtG(a.onChange(r))})("submit",function(r){t.CHM(e);const a=t.oxw();return t.KtG(a.onSubmit(r))}),t.qZA(),t.BQk()}if(2&i){const e=t.oxw();t.xp6(1),t.Q6J("submission",e.submission)("form",e.emailLoginForm)("options",e.options)}}function O(i,n){if(1&i){const e=t.EpF();t.ynx(0),t.TgZ(1,"formio",13),t.NdJ("change",function(r){t.CHM(e);const a=t.oxw();return t.KtG(a.onChange(r))})("submit",function(r){t.CHM(e);const a=t.oxw();return t.KtG(a.onSubmit(r))}),t.qZA(),t.BQk()}if(2&i){const e=t.oxw();t.xp6(1),t.Q6J("submission",e.submission)("form",e.activeDirectoryLoginForm)("options",e.options)}}function S(i,n){if(1&i&&(t.ynx(0),t.TgZ(1,"div",14)(2,"span",15),t._uU(3),t.qZA()(),t.BQk()),2&i){const e=t.oxw().message;t.xp6(3),t.hij(" ",e," ")}}function F(i,n){if(1&i&&t.YNc(0,S,4,1,"ng-container",9),2&i){const e=n.control;t.Q6J("ngIf",e.hasError(n.validation)&&(e.dirty||e.touched))}}class d{constructor(n,e,s){this.auth=n,this.notif=e,this.router=s,this.isLoggingIn$=this.auth.isLoading$,this.destroy$=new y.x,this.credentialStore=new P.X({}),this.loginViaActiveDir=new c.NI(!0),this.emailLoginForm=x.yA,this.activeDirectoryLoginForm=x.zS,this.options={disableAlerts:!0}}onSubmit(n){if(!0===this.loginViaActiveDir?.value){const e={username:n?.data?.username,password:n?.data?.password};e.username&&e.password&&this.auth.loginWithActiveDirectory(e).pipe((0,f.R)(this.destroy$),(0,v.P)()).subscribe(s=>{s.hasErrors()||(this.notif.displayNotification("Successfully authenticated","Login","success"),this.router.navigate(["/dashboard/home"]))})}else{const e={email:n?.data?.email,password:n?.data?.password};e.email&&e.password&&this.auth.login(e).pipe((0,v.P)(),(0,f.R)(this.destroy$)).subscribe(s=>{s.hasErrors()||(this.notif.displayNotification("Successfully authenticated","Login","success"),this.router.navigate(["/dashboard/home"]))})}}onChange(n){n?.data&&n?.changed&&this.credentialStore.next(n?.data)}changeForm(){this.submission={data:{username:this.credentialStore?.value?.username?this.credentialStore?.value?.username:this.credentialStore?.value?.email,email:this.credentialStore?.value?.email?this.credentialStore?.value?.email:this.credentialStore?.value?.username,password:this.credentialStore?.value?.password}}}ngOnDestroy(){this.destroy$.complete(),this.destroy$.unsubscribe()}}d.\u0275fac=function(n){return new(n||d)(t.Y36(D.e),t.Y36(b.T),t.Y36(g.F0))},d.\u0275cmp=t.Xpm({type:d,selectors:[["ng-component"]],decls:19,vars:4,consts:[[1,"relative","bg_img"],[1,"absolute","left-0","right-0","mx-auto","text-center","top-20"],[1,"flex","flex-col","items-center","justify-center"],[1,""],["ngSrc","../../../../../assets/depa_logo.svg","width","100","height","97"],[1,"card"],[1,"pt-4","pb-2","text-2xl","font-bold"],[1,"text-lg","text-[#B5B5C3]"],[1,"px-4","pt-2","text-left"],[4,"ngIf"],[1,"inline-flex","pb-2","gap-x-3"],[1,"mt-0.5",3,"formControl","click"],["formError",""],[3,"submission","form","options","change","submit"],[1,"w-full","mt-1","text-left","fv-plugins-message-container","text-xxs","2xl:text-xs"],["role","alert",1,"text-red-400","fv-help-block","text-xxs","2xl:text-xs","2xl:mb-2"]],template:function(n,e){1&n&&(t.TgZ(0,"div",0)(1,"section",1)(2,"div",2)(3,"div",3),t._UZ(4,"img",4),t.qZA(),t.TgZ(5,"div",5)(6,"p",6),t._uU(7,"Welcome to Depa App Store"),t.qZA(),t.TgZ(8,"p",7),t._uU(9),t.qZA(),t.TgZ(10,"div",8),t.YNc(11,A,2,3,"ng-container",9),t.YNc(12,O,2,3,"ng-container",9),t.TgZ(13,"div",10)(14,"tui-checkbox",11),t.NdJ("click",function(){return e.changeForm()}),t.qZA(),t.TgZ(15,"label"),t._uU(16,"Login via Windows Credentials"),t.qZA()()()()()()(),t.YNc(17,F,1,1,"ng-template",null,12,t.W1O)),2&n&&(t.xp6(9),t.hij("Enter your ",!1===(null==e.loginViaActiveDir?null:e.loginViaActiveDir.value)?"Login":"Windows"," credentials"),t.xp6(2),t.Q6J("ngIf",!1===(null==e.loginViaActiveDir?null:e.loginViaActiveDir.value)),t.xp6(1),t.Q6J("ngIf",!0===(null==e.loginViaActiveDir?null:e.loginViaActiveDir.value)),t.xp6(2),t.Q6J("formControl",e.loginViaActiveDir))},dependencies:[m.O5,c.JJ,c.oH,m.Zd,_.f,T.k4],styles:[".bg_img[_ngcontent-%COMP%]{height:100vh;width:100vw;background-image:url(login_bg.749483d234866eab.svg);background-size:contain;background-position:bottom;background-repeat:no-repeat}.card[_ngcontent-%COMP%]{max-height:37.5rem;width:29rem;border-radius:.375rem;--tw-border-opacity: 1;border-color:rgb(255 255 255 / var(--tw-border-opacity));--tw-bg-opacity: 1;background-color:rgb(255 255 255 / var(--tw-bg-opacity));padding:1.25rem;--tw-shadow: 0 20px 25px -5px rgb(0 0 0 / .1), 0 8px 10px -6px rgb(0 0 0 / .1);--tw-shadow-colored: 0 20px 25px -5px var(--tw-shadow-color), 0 8px 10px -6px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}"]});const E=[{path:"",component:l,children:[{path:"",redirectTo:"login",pathMatch:"full"},{path:"login",component:d}]}];class u{}u.\u0275fac=function(n){return new(n||u)},u.\u0275mod=t.oAB({type:u}),u.\u0275inj=t.cJS({imports:[g.Bz.forChild(E),g.Bz]});var H=o(47846),L=o(8276),M=o(44886),$=o(60117),w=o(71115),N=o(89740);const I={icons:{hide:({$implicit:i})=>"s"===i?"tuiIconEyeOff":"tuiIconEyeOffLarge",show:({$implicit:i})=>"s"===i?"tuiIconEye":"tuiIconEyeLarge"}};new t.OlP("[TUI_INPUT_PASSWORD_OPTIONS]",{factory:()=>I});let R=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[m.ez,c.u5,N.wq,H.W,L.EI,M.go,$.KW,w.cn]]}),i})();var W=o(86679),B=o(39367);class p{}p.\u0275fac=function(n){return new(n||p)},p.\u0275mod=t.oAB({type:p}),p.\u0275inj=t.cJS({imports:[m.ez,u,c.UX,c.u5,R,W.Qf,w.cn,B.fN,_.x,T.XI]})}}]);