"use strict";(self.webpackChunkDEPA_FRONTEND=self.webpackChunkDEPA_FRONTEND||[]).push([[487],{53487:(ue,Y,l)=>{l.r(Y),l.d(Y,{AppListingModule:()=>Te});var n=l(36895),a=l(19132),_=l(4266),e=l(94650);class N{constructor(i,t){this.ac=i,this.router=t;let o=(0,_.rV)(_.MX.moduleSlug)||"",r=(0,_.rV)(_.MX.moduleID)||"";"/modules"==this.router.url&&this.router.navigate(["/modules",o],{queryParams:{moduleID:r}})}}N.\u0275fac=function(i){return new(i||N)(e.Y36(a.gz),e.Y36(a.F0))},N.\u0275cmp=e.Xpm({type:N,selectors:[["app-app-listing"]],decls:1,vars:0,template:function(i,t){1&i&&e._UZ(0,"router-outlet")},dependencies:[a.lC]});var c=l(90433),Z=l(1163),A=l(61135),M=l(77579),f=l(82722),w=l(63900),z=l(17820),U=l(15274),W=l(20696),H=l(46954),J=l(22603),F=l(18505),I=l(61005),g=l(80529);class x extends I.s{constructor(i,t){super(i),this.http=i,this.notif=t}uploadMedia(i){const t=new FormData;return t.append("file",i),this.postMedia("/upload",t).pipe((0,F.b)(o=>{if(o.hasErrors())return this.notif.displayNotification(o.errors[0]?.error?.message,"Image Upload","error")}))}}x.\u0275fac=function(i){return new(i||x)(e.LFG(g.eN),e.LFG(J.T))},x.\u0275prov=e.Yz7({token:x,factory:x.\u0275fac,providedIn:"root"});var S=l(56546),E=l(5754),Q=l(71115),X=l(53861),K=l(39367),ce=l(13675),de=l(87819),re=l(56772),ae=l(70655),le=l(1054),P=l(78535),ne=l(37414),R=l(68923),ee=l(79982),C=l(88261),V=l(82302),T=l(68702),k=l(80063),B=l(39255),y=l(47846),b=l(31947),d=l(53281);const D=["*"];let q=(()=>{class s{constructor(){this.name="tui-radio-group-"+s.index++}}return s.index=0,s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["tui-radio-group"]],inputs:{name:"name"},ngContentSelectors:D,decls:1,vars:0,template:function(t,o){1&t&&(e.F$t(),e.Hsn(0))},encapsulation:2,changeDetection:0}),(0,ae.gn)([(0,R.TH)()],s.prototype,"name",void 0),s})();const me=["focusableElement"];function fe(s,i){if(1&s&&e._UZ(0,"div",4),2&s){const t=e.oxw();e.Q6J("@tuiScaleIn",t.animation)}}const ge={size:"m",appearances:{unchecked:"outline",checked:"primary"}},Me=new e.OlP("[TUI_RADIO_OPTIONS]",{factory:()=>ge});let Ae=(()=>{class s extends le.F9{constructor(t,o,r,u,h){super(t,o),this.animationOptions=r,this.options=u,this.radioGroup=h,this.identityMatcher=P.bg,this.name=null,this.size=this.options.size,this.pseudoDisabled=!1,this.animation=Object.assign({value:""},this.animationOptions)}get appearance(){return this.checked?this.options.appearances.checked:this.options.appearances.unchecked}get computedDisabled(){return this.disabled||this.pseudoDisabled}get nativeFocusableElement(){return!this.focusableElement||this.computedDisabled?null:this.focusableElement.nativeElement}get focused(){return(0,B.V8)(this.nativeFocusableElement)}get checked(){return null===this.value?null===this.item:null!=this.item&&this.identityMatcher(this.value,this.item)}get computedName(){return this.name||this.radioGroupName||this.controlName||""}get isFocusable(){return!this.readOnly&&this.computedFocusable}onChecked(t){t&&this.updateValue(void 0!==this.item?this.item:this.fallbackValue)}onFocused(t){this.updateFocused(t)}onFocusVisible(t){this.updateFocusVisible(t)}get radioGroupName(){return null===this.radioGroup?null:this.radioGroup.name}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(c.a5,10),e.Y36(e.sBO),e.Y36(b.Pw),e.Y36(Me),e.Y36(q,8))},s.\u0275cmp=e.Xpm({type:s,selectors:[["tui-radio"]],viewQuery:function(t,o){if(1&t&&e.Gf(me,5),2&t){let r;e.iGM(r=e.CRH())&&(o.focusableElement=r.first)}},hostVars:3,hostBindings:function(t,o){2&t&&(e.uIk("data-size",o.size),e.ekj("_disabled",o.computedDisabled))},inputs:{item:"item",identityMatcher:"identityMatcher",name:"name",size:"size",pseudoDisabled:"pseudoDisabled"},features:[e._Bn([(0,ne.FT)(s),(0,le.wB)(s)]),e.qOj],decls:4,vars:12,consts:[["tuiWrapper","",3,"appearance","disabled","focus","hover","active","invalid"],["class","t-mark",4,"ngIf"],["type","radio",1,"t-native",3,"id","disabled","tuiChecked","tuiFocusable","tuiFocusedChange","tuiCheckedChange","tuiFocusVisibleChange"],["focusableElement",""],[1,"t-mark"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0),e.YNc(1,fe,1,1,"div",1),e.TgZ(2,"input",2,3),e.NdJ("tuiFocusedChange",function(u){return o.onFocused(u)})("tuiCheckedChange",function(u){return o.onChecked(u)})("tuiFocusVisibleChange",function(u){return o.onFocusVisible(u)}),e.qZA()()),2&t&&(e.Q6J("appearance",o.appearance)("disabled",o.computedDisabled)("focus",o.computedFocusVisible)("hover",o.pseudoHover)("active",o.pseudoActive)("invalid",o.computedInvalid),e.xp6(1),e.Q6J("ngIf",o.checked),e.xp6(1),e.Q6J("id",o.id)("disabled",o.computedDisabled)("tuiChecked",o.checked)("tuiFocusable",o.isFocusable),e.uIk("name",o.computedName))},dependencies:[y.o,n.O5,T.t,ee.t,C.U,k.q],styles:["[_nghost-%COMP%]{font:var(--tui-font-text-s);color:var(--tui-text-01);position:relative;display:block;flex-shrink:0;border-radius:100%}[data-size=m][_nghost-%COMP%]{width:1rem;height:1rem}[data-size=l][_nghost-%COMP%]{width:1.5rem;height:1.5rem}._readonly[_nghost-%COMP%]{pointer-events:none}.t-mark[_ngcontent-%COMP%]{position:absolute;background-color:currentColor;border-radius:100%}[data-size=m][_nghost-%COMP%]   .t-mark[_ngcontent-%COMP%]{margin:.25rem;width:.5rem;height:.5rem}[data-size=l][_nghost-%COMP%]   .t-mark[_ngcontent-%COMP%]{margin:.4375rem;width:.625rem;height:.625rem}.t-native[_ngcontent-%COMP%]{padding:0;margin:0;border:0;border-radius:inherit;background:none;font-size:inherit;line-height:inherit;font-weight:inherit;color:inherit;caret-color:currentColor;outline:none;-webkit-appearance:none;-moz-appearance:none;appearance:none;word-break:keep-all;-webkit-text-fill-color:currentColor;position:absolute;top:0;left:0;width:100%;height:100%;opacity:0;cursor:pointer}.t-native[_ngcontent-%COMP%]:-webkit-autofill, .t-native[_ngcontent-%COMP%]:-webkit-autofill:hover, .t-native[_ngcontent-%COMP%]:-webkit-autofill:focus{caret-color:var(--tui-base-09);border-radius:inherit;color:inherit!important;background-color:transparent!important;-webkit-text-fill-color:var(--tui-text-01)!important;border-color:var(--tui-autofill);-webkit-box-shadow:0 0 0 100rem var(--tui-autofill) inset!important}._disabled[_nghost-%COMP%]   .t-native[_ngcontent-%COMP%]{cursor:default}"],data:{animation:[d.gI]},changeDetection:0}),(0,ae.gn)([(0,R.TH)()],s.prototype,"identityMatcher",void 0),(0,ae.gn)([(0,R.TH)()],s.prototype,"name",void 0),(0,ae.gn)([(0,R.TH)()],s.prototype,"size",void 0),(0,ae.gn)([(0,R.TH)()],s.prototype,"pseudoDisabled",void 0),s})(),De=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[[n.ez,T.S,ee.u,C.F,k.c,y.W]]}),s})();const v=["*"];let O=(()=>{class s extends le.F9{constructor(t,o,r,u){super(t,o),this.modeDirective=r,this.options=u,this.size=this.options.size,this.identityMatcher=P.bg,this.pseudoDisabled=!1}get nativeFocusableElement(){return this.radio?this.radio.nativeFocusableElement:null}get focused(){return!!this.radio&&this.radio.focused}get computedDisabled(){return this.disabled||this.pseudoDisabled}get mode(){return this.modeDirective?this.modeDirective.mode:null}onFocused(t){this.updateFocused(t)}onModelChange(t){this.updateValue(t)}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(c.a5,10),e.Y36(e.sBO),e.Y36(V.w,8),e.Y36(Me))},s.\u0275cmp=e.Xpm({type:s,selectors:[["tui-radio-labeled"]],viewQuery:function(t,o){if(1&t&&e.Gf(Ae,5),2&t){let r;e.iGM(r=e.CRH())&&(o.radio=r.first)}},hostVars:4,hostBindings:function(t,o){2&t&&(e.uIk("data-size",o.size)("data-mode",o.mode),e.ekj("_disabled",o.computedDisabled))},inputs:{item:"item",size:"size",identityMatcher:"identityMatcher",pseudoDisabled:"pseudoDisabled"},features:[e._Bn([(0,ne.FT)(s),(0,le.wB)(s)]),e.qOj],ngContentSelectors:v,decls:4,vars:15,consts:[[1,"t-wrapper"],[3,"focusable","identityMatcher","name","nativeId","readOnly","pseudoDisabled","pseudoInvalid","pseudoFocus","pseudoHover","pseudoActive","size","item","ngModel","ngModelChange","focusedChange"],[1,"t-content"]],template:function(t,o){1&t&&(e.F$t(),e.TgZ(0,"label",0)(1,"tui-radio",1),e.NdJ("ngModelChange",function(u){return o.onModelChange(u)})("focusedChange",function(u){return o.onFocused(u)}),e.qZA(),e.TgZ(2,"div",2),e.Hsn(3),e.qZA()()),2&t&&(e.xp6(1),e.Q6J("focusable",o.focusable)("identityMatcher",o.identityMatcher)("name",o.computedName||"")("nativeId",o.nativeId)("readOnly",o.readOnly)("pseudoDisabled",o.computedDisabled)("pseudoInvalid",o.computedInvalid)("pseudoFocus",o.pseudoFocus)("pseudoHover",o.pseudoHover)("pseudoActive",o.pseudoActive)("size",o.size)("item",o.item)("ngModel",o.value),e.xp6(1),e.ekj("t-content_disabled",o.computedDisabled))},dependencies:[Ae,c.JJ,c.On],styles:["[_nghost-%COMP%]{position:relative;display:block;font:var(--tui-font-text-s);line-height:1rem}._readonly[_nghost-%COMP%]{pointer-events:none}.t-wrapper[_ngcontent-%COMP%]{display:inline-flex;max-width:100%;cursor:pointer;vertical-align:top}._disabled[_nghost-%COMP%]   .t-wrapper[_ngcontent-%COMP%]{cursor:default}[data-mode=onDark][_nghost-%COMP%]   .t-wrapper[_ngcontent-%COMP%]{color:var(--tui-text-01-night)}.t-content[_ngcontent-%COMP%]{word-wrap:break-word;min-width:0}.t-content_disabled[_ngcontent-%COMP%]{opacity:var(--tui-disabled-opacity)}[data-size=m][_nghost-%COMP%]   .t-content[_ngcontent-%COMP%]{margin-left:.5rem}[data-size=l][_nghost-%COMP%]   .t-content[_ngcontent-%COMP%]{font:var(--tui-font-text-m);margin-left:.75rem}"],changeDetection:0}),(0,ae.gn)([(0,R.TH)()],s.prototype,"size",void 0),(0,ae.gn)([(0,R.TH)()],s.prototype,"identityMatcher",void 0),(0,ae.gn)([(0,R.TH)()],s.prototype,"pseudoDisabled",void 0),s})(),p=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[[n.ez,c.u5,ee.u,C.F,De]]}),s})();var m=l(60946),L=l(37378),G=l(4053),j=l(60101),pe=l(77915);function xe(s,i){1&s&&(e.TgZ(0,"span",47),e._uU(1," An app by this title already exists. Please select another name "),e.qZA())}function he(s,i){if(1&s&&(e.TgZ(0,"div",48),e._UZ(1,"img",49),e.qZA()),2&s){const t=e.oxw();e.xp6(1),e.Q6J("src",t.base64File,e.LSH)}}function ke(s,i){1&s&&(e.TgZ(0,"div",50)(1,"div",51),e._UZ(2,"img",52),e.qZA(),e.TgZ(3,"div",53)(4,"p",54),e._uU(5," App Icon "),e.qZA(),e.TgZ(6,"ul",55)(7,"li"),e._uU(8,"Only (JPEG, PNG, WEBP) extensions are allowed"),e.qZA(),e.TgZ(9,"li"),e._uU(10,"Up to 2MB file size is allowed"),e.qZA()()()())}function Oe(s,i){if(1&s&&(e.ynx(0),e.TgZ(1,"option",56),e._uU(2),e.qZA(),e.BQk()),2&s){const t=i.$implicit;e.xp6(1),e.Q6J("value",null==t?null:t.value),e.xp6(1),e.Oqu(null==t?null:t.label)}}function qe(s,i){1&s&&(e.TgZ(0,"label",66),e._uU(1,"Add new companies"),e.qZA())}function Ge(s,i){if(1&s){const t=e.EpF();e.TgZ(0,"button",67),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.submitNewCompany())}),e._uU(1,"Submit"),e.qZA()}}function $e(s,i){if(1&s){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",57)(2,"div",58)(3,"div",59),e.YNc(4,qe,2,0,"label",60),e._UZ(5,"input",61),e.qZA(),e.TgZ(6,"div",62)(7,"button",63),e.NdJ("click",function(){const u=e.CHM(t).index,h=e.oxw();return e.KtG(h.removeCompany(u))}),e.qZA()()(),e.TgZ(8,"div",64),e.YNc(9,Ge,2,0,"button",65),e.qZA()(),e.BQk()}if(2&s){const t=i.index,o=i.first,r=i.last;e.xp6(1),e.Q6J("formGroupName",t),e.xp6(3),e.Q6J("ngIf",0==t),e.xp6(2),e.Q6J("ngClass",o?"mt-7":"mt-0"),e.xp6(3),e.Q6J("ngIf",r)}}function Ye(s,i){if(1&s&&(e.ynx(0),e.TgZ(1,"option",56),e._uU(2),e.qZA(),e.BQk()),2&s){const t=i.$implicit;e.xp6(1),e.Q6J("value",null==t?null:t.value),e.xp6(1),e.Oqu(null==t?null:t.label)}}function ze(s,i){1&s&&(e.TgZ(0,"label",66),e._uU(1,"Add new categories"),e.qZA())}function He(s,i){if(1&s){const t=e.EpF();e.TgZ(0,"button",67),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(3);return e.KtG(r.submitNewCategory())}),e._uU(1,"Submit"),e.qZA()}}function je(s,i){if(1&s){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",57)(2,"div",58)(3,"div",59),e.YNc(4,ze,2,0,"label",60),e._UZ(5,"input",70),e.qZA(),e.TgZ(6,"div",62)(7,"button",63),e.NdJ("click",function(){const u=e.CHM(t).index,h=e.oxw(2);return e.KtG(h.removeCategory(u))}),e.qZA()()(),e.TgZ(8,"div",64),e.YNc(9,He,2,0,"button",65),e.qZA()(),e.BQk()}if(2&s){const t=i.index,o=i.first,r=i.last;e.xp6(1),e.Q6J("formGroupName",t),e.xp6(3),e.Q6J("ngIf",0==t),e.xp6(2),e.Q6J("ngClass",o?"mt-7":"mt-0"),e.xp6(3),e.Q6J("ngIf",r)}}const We=function(s){return{validation:"required",message:"Category is required",control:s}};function Ke(s,i){if(1&s){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",16)(2,"label",4),e._uU(3,"Category Name "),e.TgZ(4,"span",5),e._uU(5,"*"),e.qZA()(),e.TgZ(6,"select",68),e.YNc(7,Ye,3,2,"ng-container",18),e.qZA(),e.GkF(8,7),e.qZA(),e.TgZ(9,"div",19)(10,"p",20),e._uU(11,"If your desired category isn't listed, you can add it below"),e.qZA()(),e.ynx(12,69),e.YNc(13,je,10,4,"ng-container",18),e.BQk(),e.TgZ(14,"button",22),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.addCategory())}),e.qZA(),e.BQk()}if(2&s){const t=e.oxw(),o=e.MAs(90);e.xp6(6),e.Q6J("ngClass",null!=t.f.categoryName&&t.f.categoryName.invalid&&null!=t.f.categoryName&&t.f.categoryName.dirty?"is-invalid":""),e.xp6(1),e.Q6J("ngForOf",t.categoryList),e.xp6(1),e.Q6J("ngTemplateOutlet",o)("ngTemplateOutletContext",e.VKq(5,We,t.f.categoryName)),e.xp6(5),e.Q6J("ngForOf",t.categories.controls)}}function Xe(s,i){if(1&s){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",73),e.NdJ("click",function(){const u=e.CHM(t).index,h=e.oxw(2);return e.KtG(h.activeIndex=u)}),e._uU(2),e.qZA(),e.BQk()}if(2&s){const t=i.$implicit;e.xp6(2),e.Oqu(t)}}function et(s,i){if(1&s){const t=e.EpF();e.TgZ(0,"div",75)(1,"div",64)(2,"a",76),e.NdJ("click",function(){e.CHM(t);const r=e.oxw().index,u=e.oxw(2);return e.KtG(u.sendFormForEdit(r))}),e._UZ(3,"i",77),e.qZA()(),e._UZ(4,"formio",78),e.qZA()}if(2&s){const t=e.oxw().$implicit,o=e.oxw(2);e.xp6(4),e.Q6J("language",o.language)("options",o.options)("form",t)}}function tt(s,i){if(1&s&&(e.ynx(0),e.YNc(1,et,5,3,"div",74),e.BQk()),2&s){const t=i.index,o=e.oxw(2);e.xp6(1),e.Q6J("ngIf",o.activeIndex==t)}}function it(s,i){if(1&s&&(e.ynx(0),e.TgZ(1,"section",71)(2,"nav",72),e.YNc(3,Xe,3,1,"ng-container",18),e.qZA(),e.YNc(4,tt,2,1,"ng-container",18),e.qZA(),e.BQk()),2&s){const t=e.oxw();e.xp6(3),e.Q6J("ngForOf",t.formTabs),e.xp6(1),e.Q6J("ngForOf",t.formComponents)}}function nt(s,i){1&s&&(e.ynx(0),e.TgZ(1,"div",79),e._UZ(2,"div",80)(3,"div",80)(4,"div",81),e.qZA(),e.BQk())}function ot(s,i){1&s&&(e.TgZ(0,"span",100),e._uU(1,"Please select either AND or OR as the condition"),e.qZA())}function st(s,i){1&s&&(e.ynx(0),e.TgZ(1,"option",101),e._uU(2,"AND"),e.qZA(),e.BQk())}function rt(s,i){if(1&s){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",84)(2,"label",4),e._uU(3,"Approvers "),e.TgZ(4,"span",5),e._uU(5,"*"),e.qZA()(),e.TgZ(6,"custom-multi-select",85),e.NdJ("checkUsersLength",function(r){e.CHM(t);const u=e.oxw().index,h=e.oxw();return e.KtG(h.countUsers(r,u))})("approverList",function(r){e.CHM(t);const u=e.oxw().index,h=e.oxw();return e.KtG(h.getApproverList(r,u))}),e.qZA(),e.YNc(7,ot,2,0,"span",86),e.ALo(8,"async"),e.qZA(),e.TgZ(9,"div",84)(10,"label",87),e._uU(11,"Condition "),e.TgZ(12,"span",5),e._uU(13,"*"),e.qZA()(),e.TgZ(14,"select",88),e.NdJ("change",function(){e.CHM(t);const r=e.oxw().index,u=e.oxw();return e.KtG(u.validateSelection(r))}),e.YNc(15,st,3,0,"ng-container",23),e.TgZ(16,"option",89),e._uU(17,"OR"),e.qZA(),e.TgZ(18,"option",90),e._uU(19,"NONE"),e.qZA()()(),e.TgZ(20,"div",91),e._UZ(21,"tui-tooltip",92),e.TgZ(22,"tui-badged-content",93)(23,"button",94),e.NdJ("click",function(){e.CHM(t);const r=e.oxw().index,u=e.oxw(),h=e.MAs(92);return e.KtG(u.openEmailNotifyModal(h,u.workflows,r))}),e.qZA()()(),e.TgZ(24,"div",95)(25,"div",96)(26,"tui-radio-labeled",97)(27,"div"),e._uU(28,"Any (Create)"),e.qZA(),e.TgZ(29,"div",98),e._uU(30,"Any user can create a new submission"),e.qZA()(),e.TgZ(31,"tui-radio-labeled",97)(32,"div"),e._uU(33,"Any (Create & Modify)"),e.qZA(),e.TgZ(34,"div",98),e._uU(35,"Any user can create a new submission and modify it's workflow"),e.qZA()(),e.TgZ(36,"tui-radio-labeled",97)(37,"div"),e._uU(38,"Disabled"),e.qZA(),e.TgZ(39,"div",98),e._uU(40,"Only Admin users can create and modify submissions"),e.qZA()()()(),e.TgZ(41,"div",99)(42,"button",63),e.NdJ("click",function(){e.CHM(t);const r=e.oxw().index,u=e.oxw();return e.KtG(u.removeWorkflowStep(r))}),e.qZA()(),e.BQk()}if(2&s){const t=e.oxw().index,o=e.oxw(),r=e.MAs(94);let u;e.xp6(7),e.Q6J("ngIf",e.lcZ(8,11,o.showError)&&t===o.errorIndex),e.xp6(8),e.Q6J("ngIf",t>0),e.xp6(6),e.Q6J("content",r),e.xp6(1),e.Q6J("contentTop",null==(u=o.workflows.at(t).get("emailNotifyTo"))||null==u.value?null:u.value.length)("colorTop","green"),e.xp6(4),e.Q6J("formControl",o.accessTypeValue)("item",o.items[0]),e.xp6(5),e.Q6J("formControl",o.accessTypeValue)("item",o.items[1]),e.xp6(5),e.Q6J("formControl",o.accessTypeValue)("item",o.items[2])}}function at(s,i){1&s&&(e.TgZ(0,"span",100),e._uU(1,"Please select either AND or OR as the condition"),e.qZA())}function lt(s,i){if(1&s){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",95)(2,"label",4),e._uU(3,"Approvers "),e.TgZ(4,"span",5),e._uU(5,"*"),e.qZA()(),e.TgZ(6,"custom-multi-select",85),e.NdJ("checkUsersLength",function(r){e.CHM(t);const u=e.oxw().index,h=e.oxw();return e.KtG(h.countUsers(r,u))})("approverList",function(r){e.CHM(t);const u=e.oxw().index,h=e.oxw();return e.KtG(h.getApproverList(r,u))}),e.qZA(),e.YNc(7,at,2,0,"span",86),e.ALo(8,"async"),e.qZA(),e.TgZ(9,"div",95)(10,"label",87),e._uU(11,"Condition "),e.TgZ(12,"span",5),e._uU(13,"*"),e.qZA()(),e.TgZ(14,"select",88),e.NdJ("change",function(){e.CHM(t);const r=e.oxw().index,u=e.oxw();return e.KtG(u.validateSelection(r))}),e.TgZ(15,"option",101),e._uU(16,"AND"),e.qZA(),e.TgZ(17,"option",89),e._uU(18,"OR"),e.qZA(),e.TgZ(19,"option",90),e._uU(20,"NONE"),e.qZA()()(),e.TgZ(21,"div",91),e._UZ(22,"tui-tooltip",92),e.TgZ(23,"tui-badged-content",93)(24,"button",94),e.NdJ("click",function(){e.CHM(t);const r=e.oxw().index,u=e.oxw(),h=e.MAs(92);return e.KtG(u.openEmailNotifyModal(h,u.workflows,r))}),e.qZA()()(),e.TgZ(25,"div",102)(26,"button",63),e.NdJ("click",function(){e.CHM(t);const r=e.oxw().index,u=e.oxw();return e.KtG(u.removeWorkflowStep(r))}),e.qZA()(),e.BQk()}if(2&s){const t=e.oxw().index,o=e.oxw(),r=e.MAs(94);let u;e.xp6(7),e.Q6J("ngIf",e.lcZ(8,4,o.showError)&&t===o.errorIndex),e.xp6(15),e.Q6J("content",r),e.xp6(1),e.Q6J("contentTop",null==(u=o.workflows.at(t).get("emailNotifyTo"))||null==u.value?null:u.value.length)("colorTop","green")}}function ut(s,i){if(1&s&&(e.ynx(0),e.TgZ(1,"p",82),e._uU(2),e.qZA(),e.TgZ(3,"div",83),e.YNc(4,rt,43,13,"ng-container",23),e.YNc(5,lt,27,6,"ng-container",23),e.qZA(),e.BQk()),2&s){const t=i.index;e.xp6(2),e.hij("Step ",0===t?"1":t+1,""),e.xp6(1),e.Q6J("formGroupName",t),e.xp6(1),e.Q6J("ngIf",0==t),e.xp6(1),e.Q6J("ngIf",t>0)}}function ct(s,i){if(1&s&&(e.ynx(0),e.TgZ(1,"div",103)(2,"span",104),e._uU(3),e.qZA()(),e.BQk()),2&s){const t=e.oxw().message;e.xp6(3),e.hij(" ",t," ")}}function dt(s,i){if(1&s&&e.YNc(0,ct,4,1,"ng-container",23),2&s){const t=i.control;e.Q6J("ngIf",t.hasError(i.validation)&&(t.dirty||t.touched))}}function pt(s,i){if(1&s&&e._UZ(0,"tui-data-list-wrapper",113),2&s){const t=e.oxw(2);e.Q6J("items",t.userListForEmail)}}function mt(s,i){if(1&s){const t=e.EpF();e.TgZ(0,"p",105),e._uU(1,"Email Notification Users"),e.qZA(),e.TgZ(2,"p",106),e._uU(3," Please specify the users you want to send the notification email to "),e.qZA(),e.TgZ(4,"div",107)(5,"tui-input-tag",108),e.NdJ("searchChange",function(r){e.CHM(t);const u=e.oxw();return e.KtG(u.onSearchChange(r))}),e._uU(6," Type to search and press Enter to select... "),e.YNc(7,pt,1,1,"tui-data-list-wrapper",109),e.qZA()(),e.TgZ(8,"div",110)(9,"button",111),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.validateEmails())}),e._uU(10," Confirm & Close "),e.qZA(),e.TgZ(11,"button",112),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.cancelEmailNotify())}),e._uU(12," Remove Users & Close "),e.qZA()()}if(2&s){const t=e.oxw();e.xp6(5),e.Q6J("formControl",null==t.currentFieldArray||null==t.currentFieldArray.controls[t.activeEmailIndex]?null:t.currentFieldArray.controls[t.activeEmailIndex].controls.emailNotifyTo)("tuiTextfieldLabelOutside",!0)}}function _t(s,i){1&s&&(e.TgZ(0,"strong",114),e._uU(1,"How conditions work?"),e.qZA(),e._UZ(2,"hr"),e.TgZ(3,"ul",115)(4,"li")(5,"strong"),e._uU(6,"AND"),e.qZA(),e._uU(7," implies that every user of the step must provide approval"),e.qZA(),e.TgZ(8,"li",19)(9,"strong"),e._uU(10,"OR"),e.qZA(),e._uU(11," implies that any one of the users may provide approval"),e.qZA(),e.TgZ(12,"li")(13,"strong"),e._uU(14,"NONE"),e.qZA(),e._uU(15," implies that there is only one user per step and hence no conditon is necessary"),e.qZA()())}const gt=function(s){return{validation:"required",message:"App Title is required",control:s}},ft=function(s){return{validation:"required",message:"A Description is required",control:s}},ht=function(s){return{validation:"required",message:"Company is required",control:s}};class Ce{constructor(i,t,o,r,u,h,te,_e,se){this.fb=i,this.auth=t,this.transportService=o,this.router=r,this.dashboard=u,this.activatedRoute=h,this.notif=te,this.dialogs=_e,this.media=se,this.formComponents=[],this.activeIndex=0,this.language=new e.vpe,this.langItems=[{name:"en"},{name:"ar"}],this.languageForm=new c.cw({languages:new c.NI(this.langItems[0])}),this.conditions=["OR","AND","ANY"],this.formTabs=[],this.subModuleFormIoValue=new A.X({}),this.destroy$=new M.x,this.isCreatingSubModule=new M.x,this.domainURL=window.location.origin,this.userListForEmail=[],this.search$=new M.x,this.saveDialogSubscription=[],this.limit=10,this.page=0,this.showError=new M.x,this.errorIndex=0,this.parentIDUnAssigned=!1,this.items=[{name:"anyCreate"},{name:"anyCreateAndModify"},{name:"disabled"}],this.initSubModuleForm(),this.accessTypeValue=new c.NI(this.items[2]),this.submoduleFromLS=this.transportService.subModuleDraft.value,this.activatedRoute.queryParams.pipe((0,f.R)(this.destroy$)).subscribe($=>{Object.keys($).length>0?(this.parentIDUnAssigned=!0,this.getDefaultWorkflowByModule(),this.getAllCategories(),this.categoryIdForMatch=$.parentID):this.getDefaultWorkflowBySubModule()}),this.formComponents=this.transportService.formBuilderData.value,this.formTabs=this.formComponents.map($=>$.title),this.getAllCompanies(),this.search$.pipe((0,w.w)($=>this.dashboard.getAllUsersForListing(this.limit,this.page,$))).subscribe($=>{$&&(this.userListForEmail=$?.results?.map(ie=>ie?.email))}),this.dashboard.getAllUsersForListing(this.limit,this.page).pipe((0,f.R)(this.destroy$)).subscribe($=>{$&&(this.userListForEmail=$?.results?.map(ie=>ie?.email))})}ngOnInit(){this.activatedRoute.queryParams.pipe((0,f.R)(this.destroy$)).subscribe(i=>{if(0==Object.keys(i).length){const t=(0,_.rV)(_.MX.navHierarchy);t.forEach(o=>{o.routerLink=`/modules/${o.caption}?moduleID=${(0,_.rV)(_.MX.moduleID)}`}),this.dashboard.items=[...t,{caption:"Add App",routerLink:`/modules/add-module/${(0,_.rV)(_.MX.moduleID)}`}]}})}getDefaultWorkflowByModule(){this.activatedRoute.params.pipe((0,f.R)(this.destroy$)).subscribe(i=>{i.id&&(!1===this.parentIDUnAssigned&&(this.parentID=i.id),this.redirectToModuleID=i.id,this.transportService.moduleID.next(i.id),Object.keys(this.submoduleFromLS)?.length>0&&(this.initSubModuleForm(this.submoduleFromLS),this.base64File=this.submoduleFromLS?.image,this.file=this.submoduleFromLS?.file))})}getDefaultWorkflowBySubModule(){this.activatedRoute.params.pipe((0,f.R)(this.destroy$)).subscribe(i=>{i.id&&(!1===this.parentIDUnAssigned&&(this.parentID=i.id),this.redirectToModuleID=i.id,this.transportService.moduleID.next(i.id),this.dashboard.getWorkflowFromSubModule(i.id).pipe((0,f.R)(this.destroy$)).subscribe(t=>{t&&(this.categoryId=t?.categoryId,this.initSubModuleForm(t?.response)),Object.keys(this.submoduleFromLS)?.length>0&&(this.initSubModuleForm(this.submoduleFromLS),this.base64File=this.submoduleFromLS?.image,this.file=this.submoduleFromLS?.file)}))})}openEmailNotifyModal(i,t,o){this.activeEmailIndex=o,this.currentFieldArray=t,this.saveDialogSubscription.push(this.dialogs.open(i,{dismissible:!1,closeable:!1}).subscribe())}onSearchChange(i){this.search$.next(i)}validateEmails(){let i=this.workflows.at(this.activeEmailIndex)?.get("emailNotifyTo")?.value;i=i.map(t=>!!/\S+@\S+\.\S+/.test(t)),i.includes(!1)?this.notif.displayNotification("Please provide valid email addresses","Email Notify","warning"):this.saveDialogSubscription.forEach(t=>t.unsubscribe())}cancelEmailNotify(){this.workflows.at(this.activeEmailIndex)?.get("emailNotifyTo")?.setValue([]),this.saveDialogSubscription.forEach(i=>i.unsubscribe())}getAllCompanies(){this.dashboard.getAllCompanies(10,0).pipe((0,f.R)(this.destroy$)).subscribe(i=>{this.companyList=i.results?.map(t=>({value:t?.id,label:t?.title}))})}getAllCategories(){this.dashboard.getAllCategories(10).pipe((0,f.R)(this.destroy$)).subscribe(i=>{this.categoryList=i.results?.map(r=>({value:r?.id,label:r?.name}));let t=this.categoryList;t=t?.filter(r=>r?.value==this.categoryIdForMatch)[0],this.subModuleForm?.get("categoryName")?.value||this.subModuleForm?.get("categoryName")?.setValue(t?.value)})}initSubModuleForm(i){this.subModuleForm=this.fb.group({companies:this.fb.array([]),categories:this.fb.array([]),code:[{value:i?.code,disabled:!0}],companyName:[i?.companyName||null,c.kI.required],categoryName:[i?.categoryName||null,c.kI.required],adminUsers:[i?.adminUsers||[],c.kI.required],viewOnlyUsers:[i?.viewOnlyUsers||[],c.kI.required],title:[i?.title||null,c.kI.compose([c.kI.required]),[z.Iw.createValidator(this.dashboard)]],image:[i?.image||null,c.kI.required],description:[i?.description||null,c.kI.required],workflows:this.fb.array(i?.workflows?i?.workflows?.map(t=>this.fb.group({condition:[t.condition,c.kI.required],approverIds:[t.approverIds,c.kI.required],emailNotifyTo:[t.emailNotifyTo||[],c.kI.required]})):i?.map(t=>this.fb.group({condition:[t.condition,c.kI.required],approverIds:[t.approverIds,c.kI.required],emailNotifyTo:[t.emailNotifyTo||[],c.kI.required]}))||[this.fb.group({condition:[null,c.kI.required],approverIds:[[],c.kI.required],emailNotifyTo:[[],c.kI.required]})])})}onFileSelect(i){const t=i?.target?.files[0];if(1==(0,z.QG)(t)){this.file=t;const o=new FileReader;o.readAsDataURL(t),o.onload=r=>{this.base64File=o.result}}else this.notif.displayNotification("Allowed file types are JPG/PNG/WebP. File size cannot exceed 2MB","File Upload","warning")}get f(){return this.subModuleForm.controls}get companies(){return this.f.companies}addCompany(){const i=this.fb.group({title:["",c.kI.required]});this.companies.push(i)}removeCompany(i){this.companies.removeAt(i)}get categories(){return this.f.categories}addCategory(){const i=this.fb.group({name:["",c.kI.required]});this.categories.push(i)}removeCategory(i){this.categories.removeAt(i)}get workflows(){return this.f.workflows}addWorkflowStep(){const i=this.fb.group({condition:["",c.kI.required],approverIds:[[],c.kI.required],emailNotifyTo:[[],c.kI.required]});this.workflows.push(i)}removeWorkflowStep(i){this.workflows.removeAt(i)}getApproverList(i,t){this.workflows.at(t)?.get("approverIds")?.setValue(i)}submitNewCompany(){const i={title:this.f.companies?.value[0]?.title,groupCode:this.f.companies?.value[0]?.title.replace(/\s/g,"-")};this.dashboard.addCompany(i).pipe((0,f.R)(this.destroy$)).subscribe(t=>{t&&(this.companies.reset(),this.companies.removeAt(0),this.getAllCompanies())})}submitNewCategory(){this.dashboard.addCategory({name:this.f.categories?.value[0]?.name}).pipe((0,f.R)(this.destroy$)).subscribe(t=>{t&&(this.categories.reset(),this.categories.removeAt(0),this.getAllCategories())})}saveDraft(){this.transportService.isFormEdit.next(!1),this.transportService.saveDraftLocally({...this.subModuleForm.value,image:this.base64File,file:this.file}),this.router.navigate(["/forms/form-builder"])}sendFormForEdit(i){this.transportService.isFormEdit.next(!0),this.transportService.sendFormDataForEdit.next(this.formComponents[i]),this.transportService.saveDraftLocally({...this.subModuleForm.value,image:this.base64File,file:this.file}),this.router.navigate(["/forms/form-builder"])}changeLanguage(i){this.language.emit(i)}saveSubModule(i){if(0==this.dataSubmitValidation())return this.subModuleForm.markAllAsTouched(),this.notif.displayNotification("Please provide complete data for all fields","Create module","warning");if(this.workflows.controls.map(o=>o.get("approverIds")?.value.length>1&&o.get("condition")?.value).includes("none"))return this.notif.displayNotification("Please provide valid condition for the workflow step/s","Create module","warning");let t={title:this.subModuleForm.get("title")?.value,description:this.subModuleForm.get("description")?.value,url:`/modules/module-details/${this.subModuleForm.get("title")?.value.replace(/\s/g,"-").toLowerCase()}`,companyId:this.subModuleForm.get("companyName")?.value,categoryId:this.subModuleForm.get("categoryName")?.value?this.subModuleForm.get("categoryName")?.value:this.categoryId,code:this.subModuleForm.get("title")?.value.replace(/\s/g,"-").toLowerCase(),adminUsers:this.subModuleForm.get("adminUsers")?.value?.map(o=>o?.id),viewOnlyUsers:this.subModuleForm.get("viewOnlyUsers")?.value?.map(o=>o?.id),formIds:this.formComponents,parentId:!0===this.parentIDUnAssigned?void 0:this.parentID,steps:this.workflows?.value?.map(o=>({approverIds:o?.approverIds?.map(r=>r.id?r.id:r),condition:o?.condition,emailNotifyTo:o?.emailNotifyTo||[]})),accessType:"disabled"!==this.accessTypeValue?.value?.name?this.accessTypeValue?.value?.name:void 0};this.isCreatingSubModule.next(!0),this.media.uploadMedia(this.file).pipe((0,f.R)(this.destroy$)).subscribe(o=>{o.hasErrors()||(t={...t,image:o?.data?.fileUrl},i&&Object.assign(t,{status:i}),this.dashboard.createSubModule(t).pipe((0,f.R)(this.destroy$)).subscribe(r=>{r?(this.isCreatingSubModule.next(!1),this.transportService.saveDraftLocally({}),this.transportService.sendFormBuilderData([{title:"",key:"",display:"",components:[]}]),this.routeToBasedOnPreviousPage()):this.isCreatingSubModule.next(!1)}))})}routeToBasedOnPreviousPage(){this.activatedRoute.queryParams.pipe((0,f.R)(this.destroy$)).subscribe(i=>{Object.keys(i).length>0?this.router.navigate(["/dashboard/home"]):this.router.navigate(["/modules",(0,_.rV)(_.MX.moduleSlug)||""],{queryParams:{moduleID:(0,_.rV)(_.MX.moduleID)||""}})})}cancelSubmodule(){this.routeToBasedOnPreviousPage()}dataSubmitValidation(){return!(this.f.companyName?.invalid||0==this.workflows?.length||this.workflows.controls.map(i=>0==i.get("approverIds")?.value.length).includes(!0)||!0===this.workflows.controls.map(i=>i.get("condition")?.value).includes("")||0==Object.values(this.formComponents)[0]?.components?.length)}validateSelection(i){return this.errorIndex=i,this.workflows.at(i)?.get("approverIds")?.value?.length<2?(this.workflows.at(i)?.get("condition")?.setValue("none"),this.notif.displayNotification('Default condition of "None" will be used if the number of approvers is less than 2',"Create module","info"),this.showError.next(!1)):this.workflows.at(i)?.get("approverIds")?.value?.length>=2&&"none"==this.workflows.at(i)?.get("condition")?.value?this.showError.next(!0):void this.showError.next(!1)}countUsers(i,t){return this.errorIndex=t,i<2?(this.workflows.at(t)?.get("condition")?.setValue("none"),this.notif.displayNotification('Default condition of "None" will be used if the number of approvers is less than 2',"Create Module","info"),this.showError.next(!1)):i>=2&&"none"==this.workflows.at(t)?.get("condition")?.value?this.showError.next(!0):void this.showError.next(!1)}setAdminUsers(i){this.subModuleForm?.get("adminUsers")?.setValue(i)}setViewUsers(i){this.subModuleForm?.get("viewOnlyUsers")?.setValue(i)}ngOnDestroy(){this.destroy$.complete(),this.destroy$.unsubscribe()}}Ce.\u0275fac=function(i){return new(i||Ce)(e.Y36(c.qu),e.Y36(U.e),e.Y36(W.R),e.Y36(a.F0),e.Y36(H.s),e.Y36(a.gz),e.Y36(J.T),e.Y36(Z.RO),e.Y36(x))},Ce.\u0275cmp=e.Xpm({type:Ce,selectors:[["ng-component"]],decls:95,vars:36,consts:[[1,"w-11/12","h-auto","min-h-screen","mx-auto","mt-52","pb-44"],[1,"text-xl","font-semibold"],[1,"block","pt-5",3,"formGroup"],[1,"mt-3","mb-5"],[1,"block","pb-1"],[1,"text-xs","text-red-400"],["required","","formControlName","title","type","text",1,"form-control",3,"ngClass"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["class","text-red-500 text-xs",4,"ngIf"],["required","","formControlName","description","type","text","rows","4",1,"form-control",3,"ngClass"],[1,"my-5"],["for","dropzone-file",1,"flex","flex-col","items-center","justify-center","w-full","h-64","border-2","border-gray-300","border-dashed","rounded-lg","cursor-pointer","bg-gray-50","dark:hover:bg-bray-800","dark:bg-gray-700","hover:bg-gray-100","dark:border-gray-600","dark:hover:border-gray-500","dark:hover:bg-gray-600",3,"change"],[3,"inheritColor","size","showLoader","overlay"],["class","flex justify-center",4,"ngIf"],["class","flex justify-start",4,"ngIf"],["id","dropzone-file","type","file",1,"hidden"],[1,"my-7"],["required","","formControlName","companyName","type","text",1,"form-control",3,"ngClass"],[4,"ngFor","ngForOf"],[1,"my-2"],[1,"text-xs","text-gray-500"],["formArrayName","companies"],["tuiIconButton","","type","button","size","m","appearance","secondary","icon","tuiIconPlusLarge",3,"click"],[4,"ngIf"],[1,"grid","grid-cols-12","gap-3","my-8"],[1,"col-span-6"],[1,"block","pb-1","text-sm"],["formControlName","adminUsers",3,"approverList"],["formControlName","viewOnlyUsers",3,"approverList"],[1,"mb-5","mt-7"],[1,"mb-5","text-lg","font-semibold"],[1,"text-base","font-semibold","text-center"],[1,"flex","flex-col","w-full","px-5","mx-auto","mt-5","border","border-gray-400","border-dashed","rounded-md","bg-gray-50"],[1,"w-full","mx-auto","my-1"],[1,"mt-7"],[1,"px-5","py-3","rounded-lg","bg-[#a58f81]","no-underline","text-white","cursor-pointer","hover:text-white",3,"click"],[1,"mt-12"],[1,"text-lg","font-semibold"],["formArrayName","workflows"],["tuiIconButton","","type","button","size","m","appearance","primary","icon","tuiIconPlusLarge",3,"click"],[1,"flex","justify-center","gap-2","mt-10"],["tuiButton","","type","button","size","m","appearance","primary",3,"showLoader","click"],["tuiButton","","type","button","size","m","appearance","secondary",3,"showLoader","click"],["tuiButton","","type","button","size","m","appearance","accent",3,"click"],["formError",""],["template",""],["hint",""],[1,"text-red-500","text-xs"],[1,"flex","justify-center"],["alt","app_icon","width","200","height","200",1,"rounded-md",3,"src"],[1,"flex","justify-start"],[1,"mx-8"],["src","../../../../../assets/windows.svg","width","32","height","32"],[1,"flex","flex-col"],[1,"mb-3","text-lg","font-semibold","text-black"],[1,"text-sm","text-gray-400","list-disc"],[3,"value"],[1,"w-7/12","px-8",3,"formGroupName"],[1,"flex","items-center","justify-between","w-full","gap-2","mb-3"],[1,"w-full"],["class","block pb-2 text-xs font-semibold",4,"ngIf"],["formControlName","title","type","text",1,"form-control"],[3,"ngClass"],["tuiIconButton","","type","button","size","s","appearance","secondary-destructive","icon","tuiIconTrash2Large",3,"click"],[1,"flex","justify-end"],["tuiButton","","type","button","class","mb-3","size","m",3,"click",4,"ngIf"],[1,"block","pb-2","text-xs","font-semibold"],["tuiButton","","type","button","size","m",1,"mb-3",3,"click"],["required","","formControlName","categoryName","type","text",1,"form-control",3,"ngClass"],["formArrayName","categories"],["formControlName","name","type","text",1,"form-control"],[1,"flex","justify-between","my-8"],["tuiTabs","","vertical","left",1,"w-32","mr-5"],["tuiTab","",3,"click"],["class","w-full well jsonviewer",4,"ngIf"],[1,"w-full","well","jsonviewer"],[1,"px-2","py-1","rounded-md","cursor-pointer","bg-slate-200",3,"click"],["aria-hidden","true",1,"fa","fa-pencil-square","fa-2x","text-slate-500","hover:text-slate-600"],[3,"language","options","form"],[1,"grid","grid-cols-12","gap-2"],["data-placeholder","",1,"h-8","col-span-6","my-3","overflow-hidden","bg-gray-200","rounded-md"],["data-placeholder","",1,"h-32","col-span-12","mb-3","overflow-hidden","bg-gray-200","rounded-md"],[1,"text-base","font-semibold","mt-7"],[1,"grid","grid-cols-12","gap-3","my-4",3,"formGroupName"],[1,"col-span-3"],["formControlName","approverIds",3,"checkUsersLength","approverList"],["class","text-xs text-red-500",4,"ngIf"],["for","conditionSelect",1,"block","pb-1"],["formControlName","condition","aria-label","Default select example","id","conditionSelect",1,"h-10","mt-2","form-select","form-control",3,"change"],["value","or"],["value","none"],[1,"col-span-1","mt-8","inline-flex"],["direction","right",1,"mr-4","mt-1","-ml-2",3,"content"],[3,"contentTop","colorTop"],["tuiIconButton","","type","button","size","s","appearance","outline","icon","tuiIconMailLarge",3,"click"],[1,"col-span-4"],[1,"flex","justify-between","mt-8"],[1,"tui-space_bottom-3",3,"formControl","item"],[1,"text-xxs","font-extralight","mt-1"],[1,"col-span-1","mt-8"],[1,"text-xs","text-red-500"],["value","and"],[1,"col-span-1","mt-8","-ml-4"],[1,"w-full","mt-1","text-left","fv-plugins-message-container","text-xxs","2xl:text-xs"],["role","alert",1,"text-red-400","fv-help-block","text-xxs","2xl:text-xs","2xl:mb-2"],[1,"text-lg","font-semibold","text-center"],[1,"mt-3","text-base","font-medium","text-gray-500"],[1,"flex","flex-col","justify-center","my-5"],[1,"b-form",3,"formControl","tuiTextfieldLabelOutside","searchChange"],[3,"items",4,"tuiDataList"],[1,"flex","justify-start","gap-x-3"],["tuiButton","","type","button","size","m",3,"click"],["appearance","accent","tuiButton","","type","button","size","m",3,"click"],[3,"items"],[1,"text-base"],[1,"mt-2"]],template:function(i,t){if(1&i&&(e._UZ(0,"app-header"),e.TgZ(1,"section",0)(2,"section")(3,"h3",1),e._uU(4,"Create a new app"),e.qZA()(),e.TgZ(5,"form",2)(6,"div",3)(7,"label",4),e._uU(8,"App Title "),e.TgZ(9,"span",5),e._uU(10,"*"),e.qZA()(),e._UZ(11,"input",6),e.GkF(12,7),e.YNc(13,xe,2,0,"span",8),e.qZA(),e.TgZ(14,"div",3)(15,"label",4),e._uU(16,"App Description"),e.TgZ(17,"span",5),e._uU(18,"*"),e.qZA()(),e._UZ(19,"textarea",9),e.GkF(20,7),e.qZA(),e.TgZ(21,"div",10)(22,"label",4),e._uU(23,"App Icon"),e.TgZ(24,"span",5),e._uU(25,"*"),e.qZA()(),e.TgZ(26,"label",11),e.NdJ("change",function(r){return t.onFileSelect(r)}),e.TgZ(27,"tui-loader",12),e.YNc(28,he,2,1,"div",13),e.YNc(29,ke,11,0,"div",14),e.qZA(),e._UZ(30,"input",15),e.qZA()(),e.TgZ(31,"div",16)(32,"label",4),e._uU(33,"Company Name "),e.TgZ(34,"span",5),e._uU(35,"*"),e.qZA()(),e.TgZ(36,"select",17),e.YNc(37,Oe,3,2,"ng-container",18),e.qZA(),e.GkF(38,7),e.qZA(),e.TgZ(39,"div",19)(40,"p",20),e._uU(41,"If your company isn't listed, you can add it below"),e.qZA()(),e.ynx(42,21),e.YNc(43,$e,10,4,"ng-container",18),e.BQk(),e.TgZ(44,"button",22),e.NdJ("click",function(){return t.addCompany()}),e.qZA(),e.YNc(45,Ke,15,7,"ng-container",23),e.TgZ(46,"div",24)(47,"div",25)(48,"label",26),e._uU(49,"Admin users "),e.TgZ(50,"sup"),e._uU(51,"(optional)"),e.qZA()(),e.TgZ(52,"custom-multi-select",27),e.NdJ("approverList",function(r){return t.setAdminUsers(r)}),e.qZA()(),e.TgZ(53,"div",25)(54,"label",26),e._uU(55,"View Only users "),e.TgZ(56,"sup"),e._uU(57,"(optional)"),e.qZA()(),e.TgZ(58,"custom-multi-select",28),e.NdJ("approverList",function(r){return t.setViewUsers(r)}),e.qZA()()(),e.TgZ(59,"div",29)(60,"h3",30),e._uU(61,"Create Form"),e.qZA(),e.TgZ(62,"h4",31),e._uU(63,"Form/s Preview"),e.qZA(),e.TgZ(64,"div",32),e.YNc(65,it,5,2,"ng-container",23),e.YNc(66,nt,5,0,"ng-container",23),e.qZA(),e.TgZ(67,"div",33)(68,"p",20),e._uU(69,"The form you add will appear here"),e.qZA()()(),e.TgZ(70,"div",34)(71,"a",35),e.NdJ("click",function(){return t.saveDraft()}),e._uU(72),e.qZA()(),e.TgZ(73,"div",36)(74,"h4",37),e._uU(75,"Create workflow"),e.qZA(),e.ynx(76,38),e.YNc(77,ut,6,4,"ng-container",18),e.BQk(),e.TgZ(78,"button",39),e.NdJ("click",function(){return t.addWorkflowStep()}),e.qZA()(),e.TgZ(79,"div",40)(80,"button",41),e.NdJ("click",function(){return t.saveSubModule()}),e.ALo(81,"async"),e._uU(82," Publish "),e.qZA(),e.TgZ(83,"button",42),e.NdJ("click",function(){return t.saveSubModule(3)}),e.ALo(84,"async"),e._uU(85," Save as Draft "),e.qZA(),e.TgZ(86,"button",43),e.NdJ("click",function(){return t.cancelSubmodule()}),e._uU(87,"Cancel"),e.qZA()()()(),e._UZ(88,"app-footer"),e.YNc(89,dt,1,1,"ng-template",null,44,e.W1O),e.YNc(91,mt,13,2,"ng-template",null,45,e.W1O),e.YNc(93,_t,16,0,"ng-template",null,46,e.W1O)),2&i){const o=e.MAs(90);e.xp6(5),e.Q6J("formGroup",t.subModuleForm),e.xp6(6),e.Q6J("ngClass",null!=t.f.title&&t.f.title.invalid&&null!=t.f.title&&t.f.title.dirty?"is-invalid":""),e.xp6(1),e.Q6J("ngTemplateOutlet",o)("ngTemplateOutletContext",e.VKq(30,gt,t.f.title)),e.xp6(1),e.Q6J("ngIf",null==t.f.title?null:t.f.title.hasError("codeExists")),e.xp6(6),e.Q6J("ngClass",null!=t.f.description&&t.f.description.invalid&&null!=t.f.description&&t.f.description.dirty?"is-invalid":""),e.xp6(1),e.Q6J("ngTemplateOutlet",o)("ngTemplateOutletContext",e.VKq(32,ft,t.f.description)),e.xp6(7),e.Q6J("inheritColor",!0)("size","l")("showLoader",!1)("overlay",!0),e.xp6(1),e.Q6J("ngIf",t.file),e.xp6(1),e.Q6J("ngIf",!t.file),e.xp6(7),e.Q6J("ngClass",null!=t.f.companyName&&t.f.companyName.invalid&&null!=t.f.companyName&&t.f.companyName.dirty?"is-invalid":""),e.xp6(1),e.Q6J("ngForOf",t.companyList),e.xp6(1),e.Q6J("ngTemplateOutlet",o)("ngTemplateOutletContext",e.VKq(34,ht,t.f.companyName)),e.xp6(5),e.Q6J("ngForOf",t.companies.controls),e.xp6(2),e.Q6J("ngIf",1==t.parentIDUnAssigned),e.xp6(20),e.Q6J("ngIf",(null==t.formComponents[0]||null==t.formComponents[0].components?null:t.formComponents[0].components.length)>0),e.xp6(1),e.Q6J("ngIf",0==(null==t.formComponents[0]||null==t.formComponents[0].components?null:t.formComponents[0].components.length)),e.xp6(6),e.hij(" ",0==(null==t.formComponents[0]||null==t.formComponents[0].components?null:t.formComponents[0].components.length)?"Add form":"Add another"," "),e.xp6(5),e.Q6J("ngForOf",t.workflows.controls),e.xp6(3),e.Q6J("showLoader",1==e.lcZ(81,26,t.isCreatingSubModule)),e.xp6(3),e.Q6J("showLoader",1==e.lcZ(84,28,t.isCreatingSubModule))}},dependencies:[n.mk,n.sg,n.O5,n.tP,S.G,E.c,Q.xT,re.eC,X.gX,c._Y,c.YN,c.Kr,c.Fj,c.EJ,c.JJ,c.JL,c.Q7,c.oH,c.sg,c.u,c.x0,c.CE,K.v0,j.k4,O,pe.e,m.p_,m.uW,m.yu,L.V,G.PZ,ce.w,de.kM,n.Ov]});var vt=l(68538),bt=l(94051);function yt(s,i){if(1&s&&(e.TgZ(0,"div",44),e._UZ(1,"img",45),e.qZA()),2&s){const t=e.oxw();e.xp6(1),e.Q6J("src",t.base64File,e.LSH)}}function Tt(s,i){1&s&&(e.TgZ(0,"div",46)(1,"div",47),e._UZ(2,"img",48),e.qZA(),e.TgZ(3,"div",49)(4,"p",50),e._uU(5," App Icon "),e.qZA(),e.TgZ(6,"ul",51)(7,"li"),e._uU(8,"Icon should be 1:1 ratio"),e.qZA(),e.TgZ(9,"li"),e._uU(10,"Only (JPEG, PNG, WEBP) extensions are allowed"),e.qZA(),e.TgZ(11,"li"),e._uU(12,"Up to 2MB file size is allowed"),e.qZA()()()())}function xt(s,i){if(1&s&&(e.ynx(0),e.TgZ(1,"option",52),e._uU(2),e.qZA(),e.BQk()),2&s){const t=i.$implicit;e.xp6(1),e.Q6J("value",null==t?null:t.value),e.xp6(1),e.Oqu(null==t?null:t.label)}}function Ct(s,i){if(1&s&&(e.ynx(0),e.TgZ(1,"option",52),e._uU(2),e.qZA(),e.BQk()),2&s){const t=i.$implicit;e.xp6(1),e.Q6J("value",null==t?null:t.value),e.xp6(1),e.Oqu(null==t?null:t.label)}}function wt(s,i){if(1&s){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",55),e.NdJ("click",function(){const u=e.CHM(t).index,h=e.oxw(2);return e.KtG(h.activeIndex=u)}),e._uU(2),e.qZA(),e.BQk()}if(2&s){const t=i.$implicit;e.xp6(2),e.Oqu(t)}}function St(s,i){if(1&s){const t=e.EpF();e.TgZ(0,"div",57)(1,"div",58)(2,"a",59),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(),u=r.index,h=r.$implicit,te=e.oxw(2);return e.KtG(te.sendFormForEdit(u,null==h?null:h.id))}),e._UZ(3,"i",60),e.qZA(),e.TgZ(4,"a",61),e.NdJ("click",function(){e.CHM(t);const r=e.oxw().$implicit,u=e.oxw(2);return e.KtG(u.deleteForm(null==r?null:r.id))}),e._UZ(5,"i",62),e.qZA()(),e._UZ(6,"formio",63),e.qZA()}if(2&s){const t=e.oxw().$implicit,o=e.oxw(2);e.xp6(6),e.Q6J("language",o.language)("options",o.options)("form",t)}}function It(s,i){if(1&s&&(e.ynx(0),e.YNc(1,St,7,3,"div",56),e.BQk()),2&s){const t=i.index,o=e.oxw(2);e.xp6(1),e.Q6J("ngIf",o.activeIndex==t)}}function Mt(s,i){if(1&s&&(e.ynx(0),e.TgZ(1,"section",53)(2,"nav",54),e.YNc(3,wt,3,1,"ng-container",17),e.qZA(),e.YNc(4,It,2,1,"ng-container",17),e.qZA(),e.BQk()),2&s){const t=e.oxw();e.xp6(3),e.Q6J("ngForOf",t.formTabs),e.xp6(1),e.Q6J("ngForOf",t.formComponents)}}function At(s,i){1&s&&(e.ynx(0),e.TgZ(1,"div",64),e._UZ(2,"div",65)(3,"div",65)(4,"div",66),e.qZA(),e.BQk())}function Zt(s,i){1&s&&(e.TgZ(0,"span",86),e._uU(1,"Please select either AND or OR as the condition"),e.qZA())}function Dt(s,i){1&s&&(e.ynx(0),e.TgZ(1,"option",87),e._uU(2,"AND"),e.qZA(),e.BQk())}function kt(s,i){if(1&s){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",69)(2,"label",4),e._uU(3,"Approvers "),e.TgZ(4,"span",5),e._uU(5,"*"),e.qZA()(),e.TgZ(6,"custom-multi-select",70),e.NdJ("checkUsersLength",function(r){e.CHM(t);const u=e.oxw().index,h=e.oxw();return e.KtG(h.countUsers(r,u))})("approverList",function(r){e.CHM(t);const u=e.oxw().index,h=e.oxw();return e.KtG(h.getApproverList(r,u))}),e.qZA(),e.YNc(7,Zt,2,0,"span",71),e.ALo(8,"async"),e.qZA(),e.TgZ(9,"div",69)(10,"label",72),e._uU(11,"Condition "),e.TgZ(12,"span",5),e._uU(13,"*"),e.qZA()(),e.TgZ(14,"select",73),e.NdJ("change",function(){e.CHM(t);const r=e.oxw().index,u=e.oxw();return e.KtG(u.validateSelection(r))}),e.YNc(15,Dt,3,0,"ng-container",28),e.TgZ(16,"option",74),e._uU(17,"OR"),e.qZA(),e.TgZ(18,"option",75),e._uU(19,"NONE"),e.qZA()()(),e.TgZ(20,"div",76),e._UZ(21,"tui-tooltip",77),e.TgZ(22,"tui-badged-content",78)(23,"button",79),e.NdJ("click",function(){e.CHM(t);const r=e.oxw().index,u=e.oxw(),h=e.MAs(92);return e.KtG(u.openEmailNotifyModal(h,u.workflows,r))}),e.qZA()()(),e.TgZ(24,"div",80)(25,"div",81)(26,"tui-radio-labeled",82)(27,"div"),e._uU(28,"Any (Create)"),e.qZA(),e.TgZ(29,"div",83),e._uU(30,"Any user can create a new submission"),e.qZA()(),e.TgZ(31,"tui-radio-labeled",82)(32,"div"),e._uU(33,"Any (Create & Modify)"),e.qZA(),e.TgZ(34,"div",83),e._uU(35,"Any user can create a new submission and modify it's workflow"),e.qZA()(),e.TgZ(36,"tui-radio-labeled",82)(37,"div"),e._uU(38,"Disabled"),e.qZA(),e.TgZ(39,"div",83),e._uU(40,"Only Admin users can create and modify submissions"),e.qZA()()()(),e.TgZ(41,"div",84)(42,"button",85),e.NdJ("click",function(){e.CHM(t);const r=e.oxw().index,u=e.oxw();return e.KtG(u.removeWorkflowStep(r))}),e.qZA()(),e.BQk()}if(2&s){const t=e.oxw().index,o=e.oxw(),r=e.MAs(94);let u;e.xp6(7),e.Q6J("ngIf",e.lcZ(8,11,o.showError)&&t===o.errorIndex),e.xp6(8),e.Q6J("ngIf",t>0),e.xp6(6),e.Q6J("content",r),e.xp6(1),e.Q6J("contentTop",null==(u=o.workflows.at(t).get("emailNotifyTo"))||null==u.value?null:u.value.length)("colorTop","green"),e.xp6(4),e.Q6J("formControl",o.accessTypeValue)("item",o.items[0]),e.xp6(5),e.Q6J("formControl",o.accessTypeValue)("item",o.items[1]),e.xp6(5),e.Q6J("formControl",o.accessTypeValue)("item",o.items[2])}}function Ot(s,i){1&s&&(e.TgZ(0,"span",86),e._uU(1,"Please select either AND or OR as the condition"),e.qZA())}function Ut(s,i){if(1&s){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",80)(2,"label",4),e._uU(3,"Approvers "),e.TgZ(4,"span",5),e._uU(5,"*"),e.qZA()(),e.TgZ(6,"custom-multi-select",70),e.NdJ("checkUsersLength",function(r){e.CHM(t);const u=e.oxw().index,h=e.oxw();return e.KtG(h.countUsers(r,u))})("approverList",function(r){e.CHM(t);const u=e.oxw().index,h=e.oxw();return e.KtG(h.getApproverList(r,u))}),e.qZA(),e.YNc(7,Ot,2,0,"span",71),e.ALo(8,"async"),e.qZA(),e.TgZ(9,"div",80)(10,"label",72),e._uU(11,"Condition "),e.TgZ(12,"span",5),e._uU(13,"*"),e.qZA()(),e.TgZ(14,"select",73),e.NdJ("change",function(){e.CHM(t);const r=e.oxw().index,u=e.oxw();return e.KtG(u.validateSelection(r))}),e.TgZ(15,"option",87),e._uU(16,"AND"),e.qZA(),e.TgZ(17,"option",74),e._uU(18,"OR"),e.qZA(),e.TgZ(19,"option",75),e._uU(20,"NONE"),e.qZA()()(),e.TgZ(21,"div",76),e._UZ(22,"tui-tooltip",77),e.TgZ(23,"tui-badged-content",78)(24,"button",79),e.NdJ("click",function(){e.CHM(t);const r=e.oxw().index,u=e.oxw(),h=e.MAs(92);return e.KtG(u.openEmailNotifyModal(h,u.workflows,r))}),e.qZA()()(),e.TgZ(25,"div",88)(26,"button",85),e.NdJ("click",function(){e.CHM(t);const r=e.oxw().index,u=e.oxw();return e.KtG(u.removeWorkflowStep(r))}),e.qZA()(),e.BQk()}if(2&s){const t=e.oxw().index,o=e.oxw(),r=e.MAs(94);let u;e.xp6(7),e.Q6J("ngIf",e.lcZ(8,4,o.showError)&&t===o.errorIndex),e.xp6(15),e.Q6J("content",r),e.xp6(1),e.Q6J("contentTop",null==(u=o.workflows.at(t).get("emailNotifyTo"))||null==u.value?null:u.value.length)("colorTop","green")}}function Et(s,i){if(1&s&&(e.ynx(0),e.TgZ(1,"p",67),e._uU(2),e.qZA(),e.TgZ(3,"div",68),e.YNc(4,kt,43,13,"ng-container",28),e.YNc(5,Ut,27,6,"ng-container",28),e.qZA(),e.BQk()),2&s){const t=i.index;e.xp6(2),e.hij("Step ",0===t?"1":t+1,""),e.xp6(1),e.Q6J("formGroupName",t),e.xp6(1),e.Q6J("ngIf",0==t),e.xp6(1),e.Q6J("ngIf",t>0)}}function Nt(s,i){if(1&s&&(e.ynx(0),e.TgZ(1,"div",89)(2,"span",90),e._uU(3),e.qZA()(),e.BQk()),2&s){const t=e.oxw().message;e.xp6(3),e.hij(" ",t," ")}}function Pt(s,i){if(1&s&&e.YNc(0,Nt,4,1,"ng-container",28),2&s){const t=i.control;e.Q6J("ngIf",t.hasError(i.validation)&&(t.dirty||t.touched))}}function Ft(s,i){if(1&s&&e._UZ(0,"tui-data-list-wrapper",99),2&s){const t=e.oxw(2);e.Q6J("items",t.userListForEmail)}}function Lt(s,i){if(1&s){const t=e.EpF();e.TgZ(0,"p",91),e._uU(1,"Email Notification Users"),e.qZA(),e.TgZ(2,"p",92),e._uU(3," Please specify the users you want to send the notification email to "),e.qZA(),e.TgZ(4,"div",93)(5,"tui-input-tag",94),e.NdJ("searchChange",function(r){e.CHM(t);const u=e.oxw();return e.KtG(u.onSearchChange(r))}),e._uU(6," Type to search and press Enter to select... "),e.YNc(7,Ft,1,1,"tui-data-list-wrapper",95),e.qZA()(),e.TgZ(8,"div",96)(9,"button",97),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.validateEmails())}),e._uU(10," Confirm & Close "),e.qZA(),e.TgZ(11,"button",98),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.cancelEmailNotify())}),e._uU(12," Remove Users & Close "),e.qZA()()}if(2&s){const t=e.oxw();e.xp6(5),e.Q6J("formControl",null==t.currentFieldArray||null==t.currentFieldArray.controls[t.activeEmailIndex]?null:t.currentFieldArray.controls[t.activeEmailIndex].controls.emailNotifyTo)("tuiTextfieldLabelOutside",!0)}}function Bt(s,i){1&s&&(e.TgZ(0,"strong",100),e._uU(1,"How conditions work?"),e.qZA(),e._UZ(2,"hr"),e.TgZ(3,"ul",101)(4,"li")(5,"strong"),e._uU(6,"AND"),e.qZA(),e._uU(7," implies that every user of the step must provide approval"),e.qZA(),e.TgZ(8,"li",102)(9,"strong"),e._uU(10,"OR"),e.qZA(),e._uU(11," implies that any one of the users may provide approval"),e.qZA(),e.TgZ(12,"li")(13,"strong"),e._uU(14,"NONE"),e.qZA(),e._uU(15," implies that there is only one user per step and hence no conditon is necessary"),e.qZA()())}const Rt=function(s){return{validation:"required",message:"App Title is required",control:s}},Jt=function(s){return{validation:"required",message:"A Description is required",control:s}},Qt=function(s){return{validation:"required",message:"Company is required",control:s}},Vt=function(s){return{validation:"required",message:"Category is required",control:s}};class we{constructor(i,t,o,r,u,h,te,_e,se,$){this.fb=i,this.auth=t,this.transportService=o,this.router=r,this.dashboard=u,this.activatedRoute=h,this.notif=te,this.formService=_e,this.dialogs=se,this.media=$,this.formComponents=[],this.activeIndex=0,this.language=new e.vpe,this.langItems=[{name:"en"},{name:"ar"}],this.languageForm=new c.cw({languages:new c.NI(this.langItems[0])}),this.conditions=["OR","AND","ANY"],this.formTabs=[],this.subModuleFormIoValue=new A.X({}),this.destroy$=new M.x,this.isCreatingSubModule=new M.x,this.domainUrl=window.location.origin,this.userListForEmail=[],this.search$=new M.x,this.saveDialogSubscription=[],this.limit=10,this.page=0,this.showError=new M.x,this.errorIndex=0,this.items=[{name:"anyCreate"},{name:"anyCreateAndModify"},{name:"disabled"}],this.initSubModuleForm(),this.accessTypeValue=new c.NI(null),this.submoduleFromLS=this.transportService.subModuleDraft.value,this.getAllCompanies(),this.getAllCategories(),this.getSubmoduleByIDForEdit(),this.activatedRoute.queryParams.pipe((0,f.R)(this.destroy$)).subscribe(ie=>{ie.moduleID&&ie.moduleCode&&(this.transportService.moduleID.next(ie.moduleID),this.transportService.moduleCode.next(ie.moduleCode))}),this.search$.pipe((0,w.w)(ie=>this.dashboard.getAllUsersForListing(this.limit,this.page,ie))).subscribe(ie=>{ie&&(this.userListForEmail=ie?.results?.map(Pe=>Pe?.email))}),this.dashboard.getAllUsersForListing(this.limit,this.page).pipe((0,f.R)(this.destroy$)).subscribe(ie=>{ie&&(this.userListForEmail=ie?.results?.map(Pe=>Pe?.email))})}ngOnInit(){this.activatedRoute.queryParams.pipe((0,f.R)(this.destroy$)).subscribe(i=>{if(0==Object.keys(i).length){const t=(0,_.rV)(_.MX.navHierarchy);t.forEach(o=>{o.routerLink=`/modules/${o.caption}?moduleID=${(0,_.rV)(_.MX.moduleID)}`}),this.dashboard.items=[...t,{caption:"Edit Module",routerLink:`/modules/edit-module/${(0,_.rV)(_.MX.moduleID)}`}]}})}onFileSelect(i){const t=i?.target?.files[0];1==(0,z.QG)(t)?(0,z.sl)(t).then(o=>{if(0==o)this.notif.displayNotification("Image should be of 1:1 aspect ratio","File Upload","warning");else{this.file=t;const r=new FileReader;r.readAsDataURL(t),r.onload=u=>{this.base64File=r.result}}}):this.notif.displayNotification("Allowed file types are JPG/PNG/WebP. File size cannot exceed 2MB","File Upload","warning")}openEmailNotifyModal(i,t,o){this.activeEmailIndex=o,this.currentFieldArray=t,this.saveDialogSubscription.push(this.dialogs.open(i,{dismissible:!1,closeable:!1}).subscribe())}onSearchChange(i){this.search$.next(i)}validateEmails(){let i=this.workflows.at(this.activeEmailIndex)?.get("emailNotifyTo")?.value;i=i.map(t=>!!/\S+@\S+\.\S+/.test(t)),i.includes(!1)?this.notif.displayNotification("Please provide valid email addresses","Email Notify","warning"):this.saveDialogSubscription.forEach(t=>t.unsubscribe())}cancelEmailNotify(){this.workflows.at(this.activeEmailIndex)?.get("emailNotifyTo")?.setValue([]),this.saveDialogSubscription.forEach(i=>i.unsubscribe())}getSubmoduleByIDForEdit(){this.activatedRoute.params.pipe((0,f.R)(this.destroy$)).subscribe(i=>{i.id&&(this.transportService.subModuleID.next(i.id),this.dashboard.getSubModuleByID(i.id).subscribe(t=>{if(t)if(this.workFlowId=t?.workFlowId?.id,this.categoryId=t?.categoryId?.id,this.items?.forEach((o,r)=>{o?.name==t?.accessType&&this.accessTypeValue?.setValue(this.items[r])}),Object.keys(this.submoduleFromLS)?.length>0)this.initSubModuleForm(this.submoduleFromLS),this.base64File=this.submoduleFromLS?.image,this.file=this.submoduleFromLS?.file,this.formComponents=t?.formIds,this.formTabs=t?.formIds?.map(o=>o.title);else{this.formComponents=t?.formIds,this.formTabs=t?.formIds?.map(se=>se.title);const o={value:t?.companyId?.id,label:t?.companyId?.title},r={value:t?.categoryId?.id,label:t?.categoryId?.name};this.file=t?.image,this.base64File=t?.image;const u=t?.workFlowId?.stepIds?.map(se=>({id:se?.id,approverIds:se?.approverIds?.map($=>({name:$?.fullName,id:$?.id,control:new c.NI(!0)})),condition:se?.condition,emailNotifyTo:se?.emailNotifyToId?.notifyUsers||[],emailNotifyToId:se?.emailNotifyToId?.id})),h=t?.adminUsers?.map(se=>({name:se?.fullName,id:se?.id,control:new c.NI(!0)})),te=t?.viewOnlyUsers?.map(se=>({name:se?.fullName,id:se?.id,control:new c.NI(!0)}));delete t?.workFlowId,delete t?.url,delete t?.companyId,delete t?.categoryId;const _e=Object.assign(t,{workFlowId:u},{categoryId:r},{companyId:o},{viewOnlyUsers:te},{adminUsers:h});this.transportService.saveDraftLocally(_e),this.initSubModuleForm(_e)}}))})}getAllCompanies(){this.dashboard.getAllCompanies(10,0).pipe((0,f.R)(this.destroy$)).subscribe(i=>{this.companyList=i.results?.map(t=>({value:t?.id,label:t?.title}))})}getAllCategories(){this.dashboard.getAllCategories(10).pipe((0,f.R)(this.destroy$)).subscribe(i=>{this.categoryList=i.results?.map(t=>({value:t?.id,label:t?.name}))})}get categories(){return this.f.categories}addCategory(){const i=this.fb.group({name:["",c.kI.required]});this.categories.push(i)}removeCategory(i){this.categories.removeAt(i)}initSubModuleForm(i){this.subModuleForm=this.fb.group({categoryId:[i?.categoryId?.value?i?.categoryId?.value:this.categoryList?.filter(t=>i?.categoryId===t.value)[0]?.value||null,c.kI.required],code:[{value:i?.code||null,disabled:!0}],companyId:[i?.companyId?.value?i?.companyId?.value:this.companyList?.filter(t=>i?.companyId===t.value)[0]?.value||null,c.kI.required],title:[i?.title||null,c.kI.required],image:[i?.image||null,c.kI.required],description:[i?.description||null,c.kI.required],adminUsers:[i?.adminUsers||[],c.kI.required],viewOnlyUsers:[i?.viewOnlyUsers||[],c.kI.required],workFlowId:this.fb.array(i?.workFlowId?i?.workFlowId?.map(t=>this.fb.group({id:t.id,condition:[t.condition,c.kI.required],approverIds:[t.approverIds,c.kI.required],emailNotifyTo:[t.emailNotifyTo||[],c.kI.required],emailNotifyToId:t?.emailNotifyToId})):[this.fb.group({condition:["",c.kI.required],approverIds:[[],c.kI.required],emailNotifyTo:[[],c.kI.required]})])})}get f(){return this.subModuleForm.controls}setAdminUsers(i){this.subModuleForm?.get("adminUsers")?.setValue(i)}setViewUsers(i){this.subModuleForm?.get("viewOnlyUsers")?.setValue(i)}sendFormForEdit(i,t){t?((0,_.LS)(_.MX.formEdit,!0),this.transportService.saveDraftLocally({...this.subModuleForm.value,image:this.base64File,file:this.file}),this.router.navigate(["/forms/edit-form"],{queryParams:{id:t}})):((0,_.LS)(_.MX.formEdit,!0),this.transportService.isFormEdit.next(!0),this.transportService.sendFormDataForEdit.next(this.formComponents[i]),this.transportService.saveDraftLocally({...this.subModuleForm.value,image:this.base64File,file:this.file}),this.router.navigate(["/forms/edit-form"],{queryParams:{submoduleID:this.transportService.subModuleID?.value}}))}deleteForm(i){this.formService.deleteForm(i).pipe((0,f.R)(this.destroy$)).subscribe(t=>{this.getSubmoduleByIDForEdit()})}saveDraft(){this.transportService.sendFormBuilderData(this.formComponents),this.transportService.saveDraftLocally({...this.subModuleForm.value,image:this.base64File,file:this.file}),this.router.navigate(["/forms/edit-form"])}get workflows(){return this.f.workFlowId}addWorkflowStep(){const i=this.fb.group({condition:["",c.kI.required],approverIds:[[],c.kI.required],emailNotifyTo:[[],c.kI.required]});this.workflows.push(i)}removeWorkflowStep(i){this.workflows.removeAt(i)}getApproverList(i,t){this.workflows.at(t)?.get("approverIds")?.setValue(i)}validateSelection(i){return this.errorIndex=i,this.workflows.at(i)?.get("approverIds")?.value?.length<2?(this.workflows.at(i)?.get("condition")?.setValue("none"),this.notif.displayNotification('Default condition of "None" will be used if the number of approvers is less than 2',"Create Submodule","info")):this.workflows.at(i)?.get("approverIds")?.value?.length>=2&&"none"==this.workflows.at(i)?.get("condition")?.value?this.showError.next(!0):void this.showError.next(!1)}countUsers(i,t){return this.errorIndex=t,i<2?(this.workflows.at(t)?.get("condition")?.setValue("none"),this.notif.displayNotification('Default condition of "None" will be used if the number of approvers is less than 2',"Create Module","info")):i>=2&&"none"==this.workflows.at(t)?.get("condition")?.value?this.showError.next(!0):void this.showError.next(!1)}dataSubmitValidation(){return!(this.f.companyId?.invalid||0==this.workflows?.length||this.workflows.controls.map(i=>0==i.get("approverIds")?.value.length).includes(!0)||!0===this.workflows.controls.map(i=>i.get("condition")?.value).includes("")||0==Object.values(this.formComponents)[0]?.components?.length)}cancelSubmodule(){(0,_.rV)(_.MX.moduleSlug)?this.router.navigate(["/modules",(0,_.rV)(_.MX.moduleSlug)],{queryParams:{moduleID:(0,_.rV)(_.MX.moduleID)}}):this.router.navigate(["/dashboard/home"])}saveSubModule(i){if(0==this.dataSubmitValidation())return this.subModuleForm.markAllAsTouched(),this.notif.displayNotification("Please provide all data","Edit Submodule","warning");if(this.workflows.controls.map(o=>o.get("approverIds")?.value.length>1&&o.get("condition")?.value).includes("none"))return this.notif.displayNotification("Please provide valid condition for the workflow step/s","Create Submodule","warning");this.isCreatingSubModule.next(!0);let t={url:`/modules/module-details/${this.subModuleForm.get("title")?.value.replace(/\s/g,"-").toLowerCase()}`,companyId:this.subModuleForm.get("companyId")?.value,categoryId:this.subModuleForm.get("categoryId")?.value?this.subModuleForm.get("categoryId")?.value:this.categoryId,image:this.subModuleForm.get("image")?.value,workFlowId:this.workFlowId,title:this.subModuleForm.get("title")?.value,description:this.subModuleForm.get("description")?.value,code:this.subModuleForm.get("title")?.value.replace(/\s/g,"-").toLowerCase(),adminUsers:this.subModuleForm.get("adminUsers")?.value?.map(o=>o?.id),viewOnlyUsers:this.subModuleForm.get("viewOnlyUsers")?.value?.map(o=>o?.id),steps:this.workflows?.value?.map(o=>({id:o?.id?o?.id:void 0,approverIds:o?.approverIds?.map(r=>r.id?r.id:r),condition:o?.condition,emailNotifyTo:o?.emailNotifyTo||[],emailNotifyToId:o?.emailNotifyToId?o?.emailNotifyToId:void 0})),accessType:this.accessTypeValue?.value?.name};if(Object.assign(t,i?{status:i}:{status:1}),"string"==typeof this.file){const o="uploads"+t?.image.split("uploads")[1];t={...t,image:o},this.dashboard.updateSubModule(this.transportService.subModuleID?.value,t).pipe((0,f.R)(this.destroy$)).subscribe(r=>{r?(this.isCreatingSubModule.next(!1),this.transportService.saveDraftLocally({}),this.transportService.sendFormBuilderData([{title:"",key:"",display:"",components:[]}]),this.routeToBasedOnPreviousPage()):this.isCreatingSubModule.next(!1)})}else this.media.uploadMedia(this.file).pipe((0,f.R)(this.destroy$)).subscribe(o=>{o.hasErrors()||(t={...t,image:o?.data?.fileUrl},this.dashboard.updateSubModule(this.transportService.subModuleID?.value,t).pipe((0,f.R)(this.destroy$)).subscribe(r=>{r?(this.isCreatingSubModule.next(!1),this.transportService.saveDraftLocally({}),this.transportService.sendFormBuilderData([{title:"",key:"",display:"",components:[]}]),this.routeToBasedOnPreviousPage()):this.isCreatingSubModule.next(!1)}))})}routeToBasedOnPreviousPage(){this.activatedRoute.queryParams.pipe((0,f.R)(this.destroy$)).subscribe(i=>{Object.keys(i).length>0?this.router.navigate(["/dashboard/home"]):this.router.navigate(["/modules",(0,_.rV)(_.MX.moduleSlug)||""],{queryParams:{moduleID:(0,_.rV)(_.MX.moduleID)||""}})})}ngOnDestroy(){this.destroy$.complete(),this.destroy$.unsubscribe()}}we.\u0275fac=function(i){return new(i||we)(e.Y36(c.qu),e.Y36(U.e),e.Y36(W.R),e.Y36(a.F0),e.Y36(H.s),e.Y36(a.gz),e.Y36(J.T),e.Y36(bt.s),e.Y36(Z.RO),e.Y36(x))},we.\u0275cmp=e.Xpm({type:we,selectors:[["ng-component"]],decls:95,vars:39,consts:[[1,"w-11/12","h-auto","min-h-screen","mx-auto","mt-52","pb-44"],[1,"text-xl","font-semibold"],[1,"block","pt-5",3,"formGroup"],[1,"mt-3","mb-5"],[1,"block","pb-1"],[1,"text-xs","text-red-400"],["required","","formControlName","title","type","text",1,"form-control",3,"ngClass"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["required","","formControlName","description","type","text","rows","4",1,"form-control",3,"ngClass"],[1,"my-5"],["for","dropzone-file",1,"flex","flex-col","items-center","justify-center","w-full","h-64","border-2","border-gray-300","border-dashed","rounded-lg","cursor-pointer","bg-gray-50","dark:hover:bg-bray-800","dark:bg-gray-700","hover:bg-gray-100","dark:border-gray-600","dark:hover:border-gray-500","dark:hover:bg-gray-600",3,"change"],[3,"inheritColor","size","showLoader","overlay"],["class","flex justify-center",4,"ngIf"],["class","flex justify-start",4,"ngIf"],["id","dropzone-file","type","file",1,"hidden"],[1,"my-7"],["required","","formControlName","companyId","type","text",1,"form-control",3,"ngClass"],[4,"ngFor","ngForOf"],["required","","formControlName","categoryId","type","text",1,"form-control",3,"ngClass"],[1,"grid","grid-cols-12","gap-3","my-8"],[1,"col-span-6"],[1,"block","pb-1","text-sm"],["formControlName","adminUsers",3,"approverList"],["formControlName","viewOnlyUsers",3,"approverList"],[1,"mb-5","mt-7"],[1,"mb-5","text-lg","font-semibold"],[1,"text-base","font-semibold","text-center"],[1,"flex","flex-col","w-full","px-5","mx-auto","mt-5","border","border-gray-400","border-dashed","rounded-md","bg-gray-50"],[4,"ngIf"],[1,"w-full","mx-auto","my-1"],[1,"text-xs","text-gray-500"],[1,"mt-7"],[1,"px-5","py-3","rounded-lg","bg-[#a58f81]","no-underline","text-white","cursor-pointer","hover:text-white",3,"click"],[1,"mt-12"],[1,"text-lg","font-semibold"],["formArrayName","workFlowId"],["tuiIconButton","","type","button","size","m","appearance","primary","icon","tuiIconPlusLarge",3,"click"],[1,"flex","justify-center","gap-2","mt-10"],["tuiButton","","type","button","size","m","appearance","primary",3,"showLoader","click"],["tuiButton","","type","button","size","m","appearance","secondary",3,"showLoader","click"],["tuiButton","","type","button","size","m","appearance","accent",3,"click"],["formError",""],["template",""],["hint",""],[1,"flex","justify-center"],["alt","app_icon","width","200","height","200",1,"rounded-md",3,"src"],[1,"flex","justify-start"],[1,"mx-8"],["src","../../../../../assets/windows.svg","width","32","height","32"],[1,"flex","flex-col"],[1,"mb-3","text-lg","font-semibold","text-black"],[1,"text-sm","text-gray-400","list-disc"],[3,"value"],[1,"flex","justify-between","my-8"],["tuiTabs","","vertical","left",1,"w-32","mr-5"],["tuiTab","",3,"click"],["class","w-full well jsonviewer",4,"ngIf"],[1,"w-full","well","jsonviewer"],[1,"flex","justify-end","gap-x-2"],[1,"px-2","py-1","rounded-md","cursor-pointer","bg-slate-200",3,"click"],["aria-hidden","true",1,"fa","fa-pencil-square","fa-2x","text-slate-500","hover:text-slate-600"],[1,"px-2","py-1","bg-red-100","rounded-md","cursor-pointer",3,"click"],["aria-hidden","true",1,"text-red-500","fa","fa-trash","fa-2x","hover:text-red-600"],[3,"language","options","form"],[1,"grid","grid-cols-12","gap-2"],["data-placeholder","",1,"h-8","col-span-6","my-3","overflow-hidden","bg-gray-200","rounded-md"],["data-placeholder","",1,"h-32","col-span-12","mb-3","overflow-hidden","bg-gray-200","rounded-md"],[1,"text-base","font-semibold","mt-7"],[1,"grid","grid-cols-12","gap-3","my-4",3,"formGroupName"],[1,"col-span-3"],["formControlName","approverIds",3,"checkUsersLength","approverList"],["class","text-xs text-red-500",4,"ngIf"],["for","conditionSelect",1,"block","pb-1"],["formControlName","condition","aria-label","Default select example","id","conditionSelect",1,"h-10","mt-2","form-select","form-control",3,"change"],["value","or"],["value","none"],[1,"col-span-1","mt-8","inline-flex"],["direction","right",1,"mr-4","mt-1","-ml-2",3,"content"],[3,"contentTop","colorTop"],["tuiIconButton","","type","button","size","s","appearance","outline","icon","tuiIconMailLarge",3,"click"],[1,"col-span-4"],[1,"flex","justify-between","mt-8"],[1,"tui-space_bottom-3",3,"formControl","item"],[1,"text-xxs","font-extralight","mt-1"],[1,"col-span-1","mt-8"],["tuiIconButton","","type","button","size","s","appearance","secondary-destructive","icon","tuiIconTrash2Large",3,"click"],[1,"text-xs","text-red-500"],["value","and"],[1,"col-span-1","mt-8","-ml-4"],[1,"w-full","mt-1","text-left","fv-plugins-message-container","text-xxs","2xl:text-xs"],["role","alert",1,"text-red-400","fv-help-block","text-xxs","2xl:text-xs","2xl:mb-2"],[1,"text-lg","font-semibold","text-center"],[1,"mt-3","text-base","font-medium","text-gray-500"],[1,"flex","flex-col","justify-center","my-5"],[1,"b-form",3,"formControl","tuiTextfieldLabelOutside","searchChange"],[3,"items",4,"tuiDataList"],[1,"flex","justify-start","gap-x-3"],["tuiButton","","type","button","size","m",3,"click"],["appearance","accent","tuiButton","","type","button","size","m",3,"click"],[3,"items"],[1,"text-base"],[1,"mt-2"],[1,"my-2"]],template:function(i,t){if(1&i&&(e._UZ(0,"app-header"),e.TgZ(1,"section",0)(2,"section")(3,"h3",1),e._uU(4,"Edit app"),e.qZA()(),e.TgZ(5,"form",2)(6,"div",3)(7,"label",4),e._uU(8,"App Title "),e.TgZ(9,"span",5),e._uU(10,"*"),e.qZA()(),e._UZ(11,"input",6),e.GkF(12,7),e.qZA(),e.TgZ(13,"div",3)(14,"label",4),e._uU(15,"App Description"),e.TgZ(16,"span",5),e._uU(17,"*"),e.qZA()(),e._UZ(18,"textarea",8),e.GkF(19,7),e.qZA(),e.TgZ(20,"div",9)(21,"label",4),e._uU(22,"App Icon"),e.TgZ(23,"span",5),e._uU(24,"*"),e.qZA()(),e.TgZ(25,"label",10),e.NdJ("change",function(r){return t.onFileSelect(r)}),e.TgZ(26,"tui-loader",11),e.YNc(27,yt,2,1,"div",12),e.YNc(28,Tt,13,0,"div",13),e.qZA(),e._UZ(29,"input",14),e.qZA()(),e.TgZ(30,"div",15)(31,"label",4),e._uU(32,"Company Name "),e.TgZ(33,"span",5),e._uU(34,"*"),e.qZA()(),e.TgZ(35,"select",16),e.YNc(36,xt,3,2,"ng-container",17),e.qZA(),e.GkF(37,7),e.qZA(),e.TgZ(38,"div",15)(39,"label",4),e._uU(40,"Category Name "),e.TgZ(41,"span",5),e._uU(42,"*"),e.qZA()(),e.TgZ(43,"select",18),e.YNc(44,Ct,3,2,"ng-container",17),e.qZA(),e.GkF(45,7),e.qZA(),e.TgZ(46,"div",19)(47,"div",20)(48,"label",21),e._uU(49,"Admin users "),e.TgZ(50,"sup"),e._uU(51,"(optional)"),e.qZA()(),e.TgZ(52,"custom-multi-select",22),e.NdJ("approverList",function(r){return t.setAdminUsers(r)}),e.qZA()(),e.TgZ(53,"div",20)(54,"label",21),e._uU(55,"View Only users "),e.TgZ(56,"sup"),e._uU(57,"(optional)"),e.qZA()(),e.TgZ(58,"custom-multi-select",23),e.NdJ("approverList",function(r){return t.setViewUsers(r)}),e.qZA()()(),e.TgZ(59,"div",24)(60,"h3",25),e._uU(61,"Edit Form/s"),e.qZA(),e.TgZ(62,"h4",26),e._uU(63,"Form/s Preview"),e.qZA(),e.TgZ(64,"div",27),e.YNc(65,Mt,5,2,"ng-container",28),e.YNc(66,At,5,0,"ng-container",28),e.qZA(),e.TgZ(67,"div",29)(68,"p",30),e._uU(69,"The form you add will appear here"),e.qZA()()(),e.TgZ(70,"div",31)(71,"a",32),e.NdJ("click",function(){return t.saveDraft()}),e._uU(72),e.qZA()(),e.TgZ(73,"div",33)(74,"h4",34),e._uU(75,"Edit workflow"),e.qZA(),e.ynx(76,35),e.YNc(77,Et,6,4,"ng-container",17),e.BQk(),e.TgZ(78,"button",36),e.NdJ("click",function(){return t.addWorkflowStep()}),e.qZA()(),e.TgZ(79,"div",37)(80,"button",38),e.NdJ("click",function(){return t.saveSubModule()}),e.ALo(81,"async"),e._uU(82," Publish "),e.qZA(),e.TgZ(83,"button",39),e.NdJ("click",function(){return t.saveSubModule(3)}),e.ALo(84,"async"),e._uU(85," Save as Draft "),e.qZA(),e.TgZ(86,"button",40),e.NdJ("click",function(){return t.cancelSubmodule()}),e._uU(87,"Cancel"),e.qZA()()()(),e._UZ(88,"app-footer"),e.YNc(89,Pt,1,1,"ng-template",null,41,e.W1O),e.YNc(91,Lt,13,2,"ng-template",null,42,e.W1O),e.YNc(93,Bt,16,0,"ng-template",null,43,e.W1O)),2&i){const o=e.MAs(90);e.xp6(5),e.Q6J("formGroup",t.subModuleForm),e.xp6(6),e.Q6J("ngClass",null!=t.f.title&&t.f.title.invalid&&null!=t.f.title&&t.f.title.dirty?"is-invalid":""),e.xp6(1),e.Q6J("ngTemplateOutlet",o)("ngTemplateOutletContext",e.VKq(31,Rt,t.f.title)),e.xp6(6),e.Q6J("ngClass",null!=t.f.description&&t.f.description.invalid&&null!=t.f.description&&t.f.description.dirty?"is-invalid":""),e.xp6(1),e.Q6J("ngTemplateOutlet",o)("ngTemplateOutletContext",e.VKq(33,Jt,t.f.description)),e.xp6(7),e.Q6J("inheritColor",!0)("size","l")("showLoader",!1)("overlay",!0),e.xp6(1),e.Q6J("ngIf",t.file),e.xp6(1),e.Q6J("ngIf",!t.file),e.xp6(7),e.Q6J("ngClass",null!=t.f.companyId&&t.f.companyId.invalid&&null!=t.f.companyId&&t.f.companyId.dirty?"is-invalid":""),e.xp6(1),e.Q6J("ngForOf",t.companyList),e.xp6(1),e.Q6J("ngTemplateOutlet",o)("ngTemplateOutletContext",e.VKq(35,Qt,t.f.companyId)),e.xp6(6),e.Q6J("ngClass",null!=t.f.categoryId&&t.f.categoryId.invalid&&null!=t.f.categoryId&&t.f.categoryId.dirty?"is-invalid":""),e.xp6(1),e.Q6J("ngForOf",t.categoryList),e.xp6(1),e.Q6J("ngTemplateOutlet",o)("ngTemplateOutletContext",e.VKq(37,Vt,t.f.categoryId)),e.xp6(20),e.Q6J("ngIf",(null==t.formComponents[0]||null==t.formComponents[0].components?null:t.formComponents[0].components.length)>0),e.xp6(1),e.Q6J("ngIf",0==(null==t.formComponents[0]||null==t.formComponents[0].components?null:t.formComponents[0].components.length)),e.xp6(6),e.hij(" ",0==(null==t.formComponents[0]||null==t.formComponents[0].components?null:t.formComponents[0].components.length)?"Add form":"Add another"," "),e.xp6(5),e.Q6J("ngForOf",t.workflows.controls),e.xp6(3),e.Q6J("showLoader",1==e.lcZ(81,27,t.isCreatingSubModule)),e.xp6(3),e.Q6J("showLoader",1==e.lcZ(84,29,t.isCreatingSubModule))}},dependencies:[n.mk,n.sg,n.O5,n.tP,S.G,E.c,Q.xT,re.eC,X.gX,c._Y,c.YN,c.Kr,c.Fj,c.EJ,c.JJ,c.JL,c.Q7,c.oH,c.sg,c.u,c.x0,c.CE,K.v0,j.k4,O,pe.e,m.p_,m.uW,m.yu,L.V,G.PZ,ce.w,de.kM,n.Ov]});var qt=l(94813),Gt=l(54004),Le=l(69952),Ue=l(55314),Be=l(6110),Ee=l(67155),Ze=l(82176),Re=l(6229);function $t(s,i){1&s&&(e.ynx(0),e.TgZ(1,"th",12),e._uU(2," No submissions available! "),e.qZA(),e.BQk())}function Yt(s,i){1&s&&(e.TgZ(0,"span"),e._uU(1,","),e.qZA())}function zt(s,i){if(1&s&&(e.ynx(0),e.TgZ(1,"span"),e._uU(2),e.YNc(3,Yt,2,0,"span",24),e._uU(4," \xa0"),e.qZA(),e.BQk()),2&s){const t=i.$implicit,o=i.last;e.xp6(2),e.Oqu(t),e.xp6(1),e.Q6J("ngIf",!o)}}function Ht(s,i){if(1&s){const t=e.EpF();e.TgZ(0,"a",28),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2).$implicit,u=e.oxw(3);return e.KtG(u.editWorkflowRoute(null==r?null:r.id,null==r||null==r.formIds[0]?null:r.formIds[0].key))}),e._UZ(1,"i",29),e.qZA()}}function jt(s,i){if(1&s){const t=e.EpF();e.TgZ(0,"a",30),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2).$implicit,u=e.oxw(3);return e.KtG(u.editWorkflowRoute(null==r?null:r.id,null==r||null==r.formIds[0]?null:r.formIds[0].key))}),e._UZ(1,"i",31),e.qZA()}}function Wt(s,i){if(1&s&&(e.TgZ(0,"div",25),e.YNc(1,Ht,2,0,"a",26),e.ALo(2,"async"),e.ALo(3,"async"),e.ALo(4,"async"),e.ALo(5,"async"),e.ALo(6,"async"),e.ALo(7,"async"),e.ALo(8,"async"),e.ALo(9,"async"),e.YNc(10,jt,2,0,"a",27),e.ALo(11,"async"),e.ALo(12,"async"),e.ALo(13,"async"),e.ALo(14,"async"),e.ALo(15,"async"),e.ALo(16,"async"),e.qZA()),2&s){const t=e.oxw().$implicit,o=e.oxw(3);let r,u;e.xp6(1),e.Q6J("ngIf",1==o.checkIfUserisActiveUser(null==t?null:t.workflowStatus)&&0==o.checkIfUserisAdmin(null==(r=e.lcZ(2,2,o.moduleData))?null:r.adminUsers)&&0==o.checkIfUserisViewOnly(null==(r=e.lcZ(3,4,o.moduleData))?null:r.viewOnlyUsers)&&(null==t||null==t.summaryData?null:t.summaryData.progress)<100||0==o.checkIfUserisActiveUser(null==t?null:t.workflowStatus)&&1==o.checkIfUserisAdmin(null==(r=e.lcZ(4,6,o.moduleData))?null:r.adminUsers)&&0==o.checkIfUserisViewOnly(null==(r=e.lcZ(5,8,o.moduleData))?null:r.viewOnlyUsers)&&(null==t||null==t.summaryData?null:t.summaryData.progress)<100||1==o.checkIfUserisActiveUser(null==t?null:t.workflowStatus)&&1==o.checkIfUserisAdmin(null==(r=e.lcZ(6,10,o.moduleData))?null:r.adminUsers)&&0==o.checkIfUserisViewOnly(null==(r=e.lcZ(7,12,o.moduleData))?null:r.viewOnlyUsers)&&(null==t||null==t.summaryData?null:t.summaryData.progress)<100||0==o.checkIfUserisActiveUser(null==t?null:t.workflowStatus)&&0==o.checkIfUserisAdmin(null==(r=e.lcZ(8,14,o.moduleData))?null:r.adminUsers)&&0==o.checkIfUserisViewOnly(null==(r=e.lcZ(9,16,o.moduleData))?null:r.viewOnlyUsers)&&(null==t||null==t.summaryData?null:t.summaryData.progress)<100&&1==o.userRoleCheckAdmin),e.xp6(9),e.Q6J("ngIf",0==o.checkIfUserisApprovedUser(null==t?null:t.workflowStatus)&&1==o.checkIfUserisViewOnly(null==(u=e.lcZ(11,18,o.moduleData))?null:u.viewOnlyUsers)&&0==o.checkIfUserisAdmin(null==(u=e.lcZ(12,20,o.moduleData))?null:u.adminUsers)&&0==o.checkIfUserisActiveUser(null==t?null:t.workflowStatus)&&(null==t||null==t.summaryData?null:t.summaryData.progress)<=100||1==o.checkIfUserisApprovedUser(null==t?null:t.workflowStatus)&&0==o.checkIfUserisViewOnly(null==(u=e.lcZ(13,22,o.moduleData))?null:u.viewOnlyUsers)&&0==o.checkIfUserisAdmin(null==(u=e.lcZ(14,24,o.moduleData))?null:u.adminUsers)&&0==o.checkIfUserisActiveUser(null==t?null:t.workflowStatus)&&(null==t||null==t.summaryData?null:t.summaryData.progress)<=100||0==o.checkIfUserisApprovedUser(null==t?null:t.workflowStatus)&&0==o.checkIfUserisViewOnly(null==(u=e.lcZ(15,26,o.moduleData))?null:u.viewOnlyUsers)&&0==o.checkIfUserisAdmin(null==(u=e.lcZ(16,28,o.moduleData))?null:u.adminUsers)&&0==o.checkIfUserisActiveUser(null==t?null:t.workflowStatus)&&100==(null==t||null==t.summaryData?null:t.summaryData.progress)&&1==o.userRoleCheckAdmin)}}const Kt=function(s){return["/modules/edit-submission",s]};function Xt(s,i){if(1&s){const t=e.EpF();e.TgZ(0,"a",32),e.NdJ("click",function(){e.CHM(t);const r=e.oxw().$implicit,u=e.oxw(3);return e.KtG(u.setWorkflowID(null==r?null:r.id))}),e._UZ(1,"i",33),e.qZA()}if(2&s){const t=e.oxw().$implicit;e.Q6J("routerLink",e.VKq(1,Kt,null==t?null:t.id))}}const ei=function(){return[]};function ti(s,i){if(1&s&&(e.ynx(0),e.TgZ(1,"tr",14)(2,"td",15),e._uU(3),e.qZA(),e.TgZ(4,"td",16),e._uU(5),e.qZA(),e.TgZ(6,"td",17),e.YNc(7,zt,5,2,"ng-container",18),e.qZA(),e.TgZ(8,"td",19),e._UZ(9,"progress",20),e.TgZ(10,"span"),e._uU(11),e.ALo(12,"number"),e.qZA()(),e.TgZ(13,"td",21),e.YNc(14,Wt,17,30,"div",22),e.YNc(15,Xt,2,3,"a",23),e.qZA()(),e.BQk()),2&s){const t=i.$implicit,o=e.oxw(3);e.xp6(2),e.Q6J("ngClass",6==(null==t?null:t.submissionStatus)?"text-red-500":""),e.xp6(1),e.hij(" ",o.showStatus(null==t?null:t.submissionStatus)," "),e.xp6(1),e.Q6J("ngClass",6==(null==t?null:t.submissionStatus)?"text-red-500":""),e.xp6(1),e.hij(" ",1===(null==t?null:t.submissionStatus)||4===(null==t?null:t.submissionStatus)?null==t||null==t.createdBy?null:t.createdBy.fullName:(null==t||null==t.summaryData?null:t.summaryData.userName)||""," "),e.xp6(1),e.Q6J("ngClass",6==(null==t?null:t.submissionStatus)?"text-red-500":""),e.xp6(1),e.Q6J("ngForOf",o.getPendingOnUsers((null==t||null==t.summaryData?null:t.summaryData.pendingOnUsers)||e.DdM(15,ei))),e.xp6(1),e.Q6J("ngClass",6==(null==t?null:t.submissionStatus)?"text-red-500":""),e.xp6(1),e.Q6J("color",o.changeProgressColor(null==t||null==t.summaryData?null:t.summaryData.progress))("value",null==t||null==t.summaryData?null:t.summaryData.progress),e.xp6(2),e.hij("",e.xi3(12,12,null==t||null==t.summaryData?null:t.summaryData.progress,"1.1-2")," %"),e.xp6(3),e.Q6J("ngIf",4!==(null==t?null:t.submissionStatus)&&2!==(null==t?null:t.status)),e.xp6(1),e.Q6J("ngIf",(null==o.currentUser?null:o.currentUser.id)==(null==t||null==t.createdBy?null:t.createdBy.id)&&4==(null==t?null:t.submissionStatus)&&5!==(null==t?null:t.submissionStatus))}}function ii(s,i){if(1&s&&e.YNc(0,ti,16,16,"ng-container",13),2&s){const t=e.oxw(2);e.Q6J("ngForOf",t.tableDataValue)("ngForTrackBy",t.trackByFn)}}function ni(s,i){if(1&s){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",2)(2,"table",3)(3,"thead",4)(4,"tr")(5,"th",5),e._uU(6," Submission Status\xa0 "),e.TgZ(7,"filter",6),e.NdJ("applyStatus",function(r){e.CHM(t);const u=e.oxw();return e.KtG(u.sendFilterValue(r))})("resetFilters",function(r){e.CHM(t);const u=e.oxw();return e.KtG(u.resetFilterValues(r))}),e.qZA()(),e.TgZ(8,"th",7),e._uU(9,"Last Activity By"),e.qZA(),e.TgZ(10,"th",7),e._uU(11,"Now Pending With"),e.qZA(),e.TgZ(12,"th",7),e._uU(13,"Workflow progress"),e.qZA(),e.TgZ(14,"th",8),e._uU(15," Actions "),e.qZA()()(),e.TgZ(16,"tbody"),e.YNc(17,$t,3,0,"ng-container",0),e.YNc(18,ii,1,2,"ng-template",null,9,e.W1O),e.qZA()(),e.TgZ(20,"div",10)(21,"tui-pagination",11),e.NdJ("indexChange",function(r){e.CHM(t);const u=e.oxw();return e.KtG(u.goToPage(r))}),e.qZA()()(),e.BQk()}if(2&s){const t=i.ngIf,o=e.MAs(19),r=e.oxw();e.xp6(7),e.Q6J("filterBy","Status")("items",r.statusMenu)("searchEnabled",!1),e.xp6(10),e.Q6J("ngIf",0==(null==r.tableDataValue?null:r.tableDataValue.length))("ngIfElse",o),e.xp6(4),e.Q6J("length",(null==t?null:t.totalPages)||1)("index",(null==t?null:t.page)-1||0)}}function oi(s,i){1&s&&e._UZ(0,"app-table-loader")}class ve{constructor(i,t,o,r,u){this.workflowService=i,this.auth=t,this.dashboard=o,this.router=r,this.activatedRoute=u,this.subscriptions=[],this.adminUsers=[],this.createdByUsers=[],this.destroy$=new M.x,this.searchValue=new c.NI,this.filterMenuCompany=[{name:"Sort by Acsending",status:"idle",icon:"fa fa-sort-alpha-asc fa-lg"},{name:"Sort by Decsending",status:"idle",icon:"fa fa-sort-alpha-desc fa-lg"},{name:"Sort by Latest",status:"idle",icon:"fa fa-calendar-check-o fa-lg"},{name:"Sort by Oldest",status:"idle",icon:"fa fa-calendar-times-o fa-lg"}],this.statusMenu=[{name:"Created",status:"idle",icon:""},{name:"Completed",status:"idle",icon:""},{name:"In Progress",status:"idle",icon:""},{name:"Draft",status:"idle",icon:""},{name:"Cancelled",status:"idle",icon:""},{name:"Deleted",status:"idle",icon:""}],this.page=1,this.limit=7,this.remarks=new c.NI(""),this.currentUser=this.auth.currentUserValue,this.userRoleCheckAdmin=this.auth.checkIfRolesExist("sysAdmin"),this.activatedRoute.queryParams.subscribe(h=>{h.moduleID&&(this.submoduleId=h.moduleID,this.subscriptions.push(this.dashboard.getSubModuleByID(this.submoduleId).subscribe(te=>{this.submoduleData=te})),this.fetchDataAndPopulate())})}setWorkflowID(i){(0,_.LS)(_.MX.workflowID,i)}fetchDataAndPopulate(){this.subscriptions.push(this.workflowService.getSubmissionFromSubModule(this.submoduleId,this.limit,this.page).subscribe(i=>{this.submissionData=i,this.tableDataValue=i?.results,this.createdByUsers=i?.results?.map(t=>t?.subModuleId?.createdBy)}))}checkIfUserisAdmin(i){return i?.map(t=>t?.id).includes(this.currentUser?.id)}checkIfUserisViewOnly(i){return i?.map(t=>t?.id).includes(this.currentUser?.id)}changeProgressColor(i){return i<=49?"#F15B41":i>49&&i<75?"#F9B71A":i>=75?"#32de84":"#fff"}showStatus(i){return 1===i?"Created":3===i?"Completed":2===i?"In Progress":4===i?"Draft":5===i?"Cancelled":6===i?"Deleted":"Rejected"}checkIfUserisPartofWorkflow(i){return i?.map(t=>t?._id)?.includes(this.currentUser?.id)}checkIfUserisActiveUser(i){return i?.flatMap(t=>"inProgress"==t?.status?t.activeUsers:null)?.filter(t=>t).includes(this.currentUser?.id)}checkIfUserisApprovedUser(i){return i?.flatMap(t=>t.approvedUsers)?.includes(this.currentUser?.id)}checkIfUserisCreator(){return this.createdByUsers?.includes(this.currentUser?.id)}getPendingOnUsers(i){return i?.map(t=>t?.fullName)}sendFilterValue(i){switch(i?.sortType){case"Created":this.workflowService.getSubmissionFromSubModule(this.submoduleId,this.limit,this.page,1).pipe((0,f.R)(this.destroy$)).subscribe(t=>{this.submissionData=t,this.tableDataValue=t?.results});break;case"Completed":this.workflowService.getSubmissionFromSubModule(this.submoduleId,this.limit,this.page,3).pipe((0,f.R)(this.destroy$)).subscribe(t=>{this.submissionData=t,this.tableDataValue=t?.results});break;case"In Progress":this.workflowService.getSubmissionFromSubModule(this.submoduleId,this.limit,this.page,2).pipe((0,f.R)(this.destroy$)).subscribe(t=>{this.submissionData=t,this.tableDataValue=t?.results});break;case"Draft":this.workflowService.getSubmissionFromSubModule(this.submoduleId,this.limit,this.page,4).pipe((0,f.R)(this.destroy$)).subscribe(t=>{this.submissionData=t,this.tableDataValue=t?.results});break;case"Cancelled":this.workflowService.getSubmissionFromSubModule(this.submoduleId,this.limit,this.page,5).pipe((0,f.R)(this.destroy$)).subscribe(t=>{this.submissionData=t,this.tableDataValue=t?.results});break;case"Deleted":this.workflowService.getSubmissionFromSubModule(this.submoduleId,this.limit,this.page,6).pipe((0,f.R)(this.destroy$)).subscribe(t=>{this.submissionData=t,this.tableDataValue=t?.results});break;case"Sort by Latest":this.workflowService.getSubmissionFromSubModule(this.submoduleId,this.limit,this.page,void 0,"latest").pipe((0,f.R)(this.destroy$)).subscribe(t=>{this.submissionData=t,this.tableDataValue=t?.results});break;case"Sort by Oldest":this.workflowService.getSubmissionFromSubModule(this.submoduleId,this.limit,this.page,void 0,"oldest").pipe((0,f.R)(this.destroy$)).subscribe(t=>{this.submissionData=t,this.tableDataValue=t?.results})}}resetFilterValues(i){i&&this.workflowService.getSubmissionFromSubModule(this.submoduleId,this.limit,this.page).pipe((0,f.R)(this.destroy$)).subscribe(t=>{this.submissionData=t,this.tableDataValue=t?.results})}trackByFn(i,t){return t?.id}addSubmissionRoute(){this.router.navigate([`/modules/${(0,_.rV)(_.MX.moduleSlug)}/add-submission`,this.submoduleId])}editWorkflowRoute(i,t){(0,_.LS)(_.MX.formKey,t),this.router.navigate(["/modules",(0,_.rV)(_.MX.moduleSlug),t,i])}goToPage(i){this.page=i+1,this.workflowService.getSubmissionFromSubModule(this.submoduleId,this.limit,this.page).pipe((0,f.R)(this.destroy$)).subscribe(t=>{this.submissionData=t,this.tableDataValue=t?.results})}ngOnDestroy(){this.destroy$.complete(),this.destroy$.unsubscribe(),this.subscriptions.forEach(i=>i.unsubscribe())}}function si(s,i){if(1&s){const t=e.EpF();e.TgZ(0,"div",9)(1,"a",10),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2);return e.KtG(r.addSubmissionRoute())}),e._uU(2,"+ Add submission"),e.qZA()()}}function ri(s,i){if(1&s){const t=e.EpF();e.ynx(0),e.TgZ(1,"app-table-view",3),e.NdJ("emitPagination",function(r){e.CHM(t);const u=e.oxw();return e.KtG(u.sendPagination(r))})("emitDeleteEvent",function(r){e.CHM(t);const u=e.oxw();return e.KtG(u.itemDeleted(r))})("emitPageChange",function(r){e.CHM(t);const u=e.oxw();return e.KtG(u.fetchFreshData(r))}),e.qZA(),e.TgZ(2,"div",4),e._UZ(3,"hr"),e.qZA(),e.TgZ(4,"div",5)(5,"div",6),e.YNc(6,si,3,0,"div",7),e.ALo(7,"async"),e.ALo(8,"async"),e.ALo(9,"async"),e.ALo(10,"async"),e.qZA(),e._UZ(11,"app-submission-table",8),e.qZA(),e.BQk()}if(2&s){const t=i.ngIf,o=e.oxw();let r;e.xp6(1),e.Q6J("moduleData",o.moduleData)("tableData",t),e.xp6(5),e.Q6J("ngIf",1==o.userRoleCheckAdmin&&1==o.checkIfAdminUserIsOnFirstStep(null==(r=e.lcZ(7,4,o.moduleData))||null==r.workFlowId||null==r.workFlowId.stepIds[0]?null:r.workFlowId.stepIds[0].approverIds)||o.checkIfUserisAdmin(null==(r=e.lcZ(8,6,o.moduleData))?null:r.adminUsers)||1==o.userRoleCheckSys||0==(null==o.currentUser||null==o.currentUser.roles?null:o.currentUser.roles.length)||0==o.disableModify(null==(r=e.lcZ(9,8,o.moduleData))?null:r.accessType,null==(r=e.lcZ(10,10,o.moduleData))?null:r.adminUsers)),e.xp6(5),e.Q6J("moduleData",o.moduleData)}}function ai(s,i){1&s&&e._UZ(0,"app-table-loader")}ve.\u0275fac=function(i){return new(i||ve)(e.Y36(Re.C),e.Y36(U.e),e.Y36(H.s),e.Y36(a.F0),e.Y36(a.gz))},ve.\u0275cmp=e.Xpm({type:ve,selectors:[["app-submission-table"]],inputs:{submissionData:"submissionData",moduleData:"moduleData"},standalone:!0,features:[e.jDz],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["noData",""],[1,"relative","overflow-x-auto","rounded-lg","shadow-lg"],[1,"w-full","text-sm","text-left","text-gray-500"],[1,"text-xs","text-white","uppercase","bg-[#a58f81]"],[1,"px-4","py-3","text-sm"],[3,"filterBy","items","searchEnabled","applyStatus","resetFilters"],[1,"px-2","py-3","text-sm"],["scope","col",1,"px-6","py-3","text-sm"],["showSubmissions",""],[1,"pt-10","pb-6"],[3,"length","index","indexChange"],["colspan","12","role","row",1,"px-5","py-10","text-lg","text-center"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"bg-white","border-b","border-gray-300"],[1,"px-4","py-4",3,"ngClass"],[1,"pr-4","pl-2","py-4",3,"ngClass"],[1,"px-2","py-4","max-w-60",3,"ngClass"],[4,"ngFor","ngForOf"],[1,"flex","justify-between","px-2","py-4",3,"ngClass"],["tuiProgressBar","","max","100","size","s",1,"w-9/12","mt-1.5",3,"color","value"],[1,"px-5","py-4"],["style","all: unset;",4,"ngIf"],["title","Edit Submission","class","px-2 py-1 ml-2 text-xs font-medium text-white no-underline bg-blue-400 rounded-md cursor-pointer hover:text-white",3,"routerLink","click",4,"ngIf"],[4,"ngIf"],[2,"all","unset"],["title","Perform Workflow Action","class","px-2 py-1 ml-2 text-xs font-medium text-white no-underline bg-green-400 rounded-md cursor-pointer hover:text-white",3,"click",4,"ngIf"],["title","View Submission","class","px-2 py-1 ml-2 text-xs font-medium text-white no-underline bg-green-400 rounded-md cursor-pointer hover:text-white",3,"click",4,"ngIf"],["title","Perform Workflow Action",1,"px-2","py-1","ml-2","text-xs","font-medium","text-white","no-underline","bg-green-400","rounded-md","cursor-pointer","hover:text-white",3,"click"],["aria-hidden","true",1,"fa","fa-pencil"],["title","View Submission",1,"px-2","py-1","ml-2","text-xs","font-medium","text-white","no-underline","bg-green-400","rounded-md","cursor-pointer","hover:text-white",3,"click"],["aria-hidden","true",1,"fa","fa-eye","fa-lg"],["title","Edit Submission",1,"px-2","py-1","ml-2","text-xs","font-medium","text-white","no-underline","bg-blue-400","rounded-md","cursor-pointer","hover:text-white",3,"routerLink","click"],["aria-hidden","true",1,"fa","fa-edit","fa-lg"]],template:function(i,t){if(1&i&&(e.YNc(0,ni,22,7,"ng-container",0),e.YNc(1,oi,1,0,"ng-template",null,1,e.W1O)),2&i){const o=e.MAs(2);e.Q6J("ngIf",t.submissionData)("ngIfElse",o)}},dependencies:[n.ez,n.mk,n.sg,n.O5,n.Ov,n.JJ,Be.z,Ee.V5,Ee.iv,Ze.i,Ze.r,Ue.X,c.UX,K.fN,a.Bz,a.rH]});class Se{constructor(i,t,o,r,u){this.dashBoardService=i,this.activatedRoute=t,this.transport=o,this.router=r,this.auth=u,this.limit=7,this.page=1,this.searchValue=new c.NI,this.currentUser=this.auth.currentUserValue,this.userRoleCheckAdmin=this.auth.checkIfRolesExist("admin"),this.userRoleCheckUser=this.auth.checkIfRolesExist("user"),this.userRoleCheckSys=this.auth.checkIfRolesExist("sysAdmin"),this.activatedRoute.params.pipe((0,qt.j)("name"),(0,Gt.U)(h=>((0,_.LS)(_.MX.moduleSlug,h),this.moduleSlug=h,h))).subscribe(h=>{this.subModuleData=this.dashBoardService.getSubModuleByModuleSlug(h,this.limit,this.page)}),this.activatedRoute.queryParams.subscribe(h=>{h.moduleID&&((0,_.LS)(_.MX.moduleID,h.moduleID),this.transport.moduleID.next(h.moduleID),this.moduleData=this.dashBoardService.getSubModuleByID(h.moduleID))})}disableModify(i,t){return!!("disabled"==i||t?.length>0&&t?.map(o=>o?.id).includes(this.currentUser?.id))}addSubmissionRoute(){this.router.navigate([`/modules/${(0,_.rV)(_.MX.moduleSlug)}/add-submission`,this.transport.moduleID?.value])}checkIfUserisAdmin(i){return i?.map(t=>t?.id).includes(this.currentUser?.id)}fetchFreshData(i){i&&(this.subModuleData=this.dashBoardService.getSubModuleByModuleSlug((0,_.rV)(_.MX.moduleSlug),this.limit,1),this.moduleData=this.dashBoardService.getSubModuleByID((0,_.rV)(_.MX.moduleID)))}itemDeleted(i){1==i&&(this.subModuleData=this.dashBoardService.getSubModuleByModuleSlug(this.moduleSlug,this.limit,this.page))}sendPagination(i){i&&(this.page=i,this.subModuleData=this.dashBoardService.getSubModuleByModuleSlug(this.moduleSlug,this.limit,this.page))}checkIfAdminUserIsOnFirstStep(i){return i?.map(t=>t?.id)?.includes(this.currentUser?.id)}}Se.\u0275fac=function(i){return new(i||Se)(e.Y36(H.s),e.Y36(a.gz),e.Y36(W.R),e.Y36(a.F0),e.Y36(U.e))},Se.\u0275cmp=e.Xpm({type:Se,selectors:[["ng-component"]],decls:7,vars:4,consts:[[1,"w-11/12","h-auto","min-h-screen","mx-auto","mt-48","mb-10"],[4,"ngIf","ngIfElse"],["noData",""],[3,"moduleData","tableData","emitPagination","emitDeleteEvent","emitPageChange"],[1,"mt-8"],[1,"my-8"],[1,"flex","justify-end","mb-5"],["class","mt-2 cursor-pointer",4,"ngIf"],[3,"moduleData"],[1,"mt-2","cursor-pointer"],[1,"px-6","py-3","rounded-md","bg-[#a58f81]","text-white","no-underline","hover:text-white","text-base",3,"click"]],template:function(i,t){if(1&i&&(e._UZ(0,"app-header"),e.TgZ(1,"section",0),e.YNc(2,ri,12,12,"ng-container",1),e.ALo(3,"async"),e.YNc(4,ai,1,0,"ng-template",null,2,e.W1O),e.qZA(),e._UZ(6,"app-footer")),2&i){const o=e.MAs(5);e.xp6(2),e.Q6J("ngIf",e.lcZ(3,2,t.subModuleData))("ngIfElse",o)}},dependencies:[n.O5,S.G,E.c,Le.x,Ue.X,ve,n.Ov]});class be{resolve(i){return(0,_.rV)(_.MX.moduleSlug)}}be.\u0275fac=function(i){return new(i||be)},be.\u0275prov=e.Yz7({token:be,factory:be.\u0275fac,providedIn:"root"});var Je=l(8276),Qe=l(35601),Ne=l(29093),li=l(82210);function ui(s,i){if(1&s){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",17),e.NdJ("click",function(){const u=e.CHM(t).index,h=e.oxw();return e.KtG(h.activeIndex=u)}),e._uU(2),e.qZA(),e.BQk()}if(2&s){const t=i.$implicit;e.xp6(2),e.Oqu(t)}}function ci(s,i){if(1&s){const t=e.EpF();e.TgZ(0,"div",22)(1,"a",23),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2),u=r.index,h=r.$implicit,te=e.oxw();return e.KtG(te.sendFormForEdit(u,null==h?null:h._id))}),e._UZ(2,"i",24),e.qZA()()}}function di(s,i){if(1&s){const t=e.EpF();e.TgZ(0,"div",19),e.YNc(1,ci,3,0,"div",20),e.TgZ(2,"formio",21),e.NdJ("change",function(r){e.CHM(t);const u=e.oxw().index,h=e.oxw();return e.KtG(h.onChange(r,u))}),e.qZA()()}if(2&s){const t=e.oxw().$implicit,o=e.oxw();e.xp6(1),e.Q6J("ngIf",o.userRoleCheck("admin")),e.xp6(1),e.Q6J("submission",t||o.formValues[o.activeIndex])("options",o.options)("form",t)}}function pi(s,i){if(1&s&&(e.ynx(0),e.YNc(1,di,3,4,"div",18),e.BQk()),2&s){const t=i.index,o=e.oxw();e.xp6(1),e.Q6J("ngIf",o.activeIndex==t)}}function mi(s,i){1&s&&(e.TgZ(0,"span",47),e._uU(1,"Please select either AND or OR as the condition"),e.qZA())}function _i(s,i){if(1&s){const t=e.EpF();e.ynx(0),e.TgZ(1,"p",29),e._uU(2),e.qZA(),e.TgZ(3,"div",30)(4,"div",31)(5,"label",32),e._uU(6,"Approvers "),e.TgZ(7,"span",33),e._uU(8,"*"),e.qZA()(),e.TgZ(9,"custom-multi-select",34),e.NdJ("checkUsersLength",function(r){const h=e.CHM(t).index,te=e.oxw(2);return e.KtG(te.countUsers(r,h))})("approverList",function(r){const h=e.CHM(t).index,te=e.oxw(2);return e.KtG(te.getApproverList(r,h))}),e.qZA(),e.YNc(10,mi,2,0,"span",35),e.ALo(11,"async"),e.qZA(),e.TgZ(12,"div",31)(13,"label",36),e._uU(14,"Condition "),e.TgZ(15,"span",33),e._uU(16,"*"),e.qZA()(),e.TgZ(17,"select",37),e.NdJ("change",function(){const u=e.CHM(t).index,h=e.oxw(2);return e.KtG(h.validateSelection(u))}),e.TgZ(18,"option",38),e._uU(19,"AND"),e.qZA(),e.TgZ(20,"option",39),e._uU(21,"OR"),e.qZA(),e.TgZ(22,"option",40),e._uU(23,"NONE"),e.qZA()()(),e.TgZ(24,"div",41),e._UZ(25,"tui-tooltip",42),e.TgZ(26,"tui-badged-content",43)(27,"button",44),e.NdJ("click",function(){const u=e.CHM(t).index,h=e.oxw(2),te=e.MAs(26);return e.KtG(h.openEmailNotifyModal(te,h.workflows,u))}),e.qZA()()(),e.TgZ(28,"div",45)(29,"button",46),e.NdJ("click",function(){const u=e.CHM(t).index,h=e.oxw(2);return e.KtG(h.removeWorkflowStep(u))}),e.qZA()()(),e.BQk()}if(2&s){const t=i.index,o=e.oxw(2),r=e.MAs(28);let u;e.xp6(2),e.hij("Step ",0===t?"1":t+1,""),e.xp6(1),e.Q6J("formGroupName",t),e.xp6(7),e.Q6J("ngIf",e.lcZ(11,6,o.showError)&&t===o.errorIndex),e.xp6(15),e.Q6J("content",r),e.xp6(1),e.Q6J("contentTop",null==(u=o.workflows.at(t).get("emailNotifyTo"))||null==u.value?null:u.value.length)("colorTop","green")}}function gi(s,i){if(1&s){const t=e.EpF();e.TgZ(0,"div",25)(1,"h4",26),e._uU(2,"Modify submodule workflow"),e.qZA(),e.ynx(3,27),e.YNc(4,_i,30,8,"ng-container",4),e.BQk(),e.TgZ(5,"button",28),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.addWorkflowStep())}),e.qZA()()}if(2&s){const t=e.oxw();e.Q6J("formGroup",t.workflowForm),e.xp6(4),e.Q6J("ngForOf",t.workflows.controls)}}function fi(s,i){if(1&s&&(e.TgZ(0,"ul",60)(1,"li",61),e._uU(2),e.qZA()()),2&s){const t=i.$implicit;e.xp6(2),e.Oqu(t)}}function hi(s,i){1&s&&e._UZ(0,"i",62)}function vi(s,i){if(1&s&&(e.TgZ(0,"div",53)(1,"div",54)(2,"p",55),e._uU(3),e.qZA(),e.YNc(4,fi,3,1,"ul",56),e.TgZ(5,"div",57),e._uU(6),e.qZA()(),e.TgZ(7,"div",58),e.YNc(8,hi,1,0,"i",59),e.qZA()()),2&s){const t=e.oxw(),o=t.index,r=t.$implicit,u=t.last;e.xp6(3),e.hij("Step ",o+1,""),e.xp6(1),e.Q6J("ngForOf",null==r?null:r.approvers),e.xp6(2),e.hij(" ",null==r?null:r.condition," "),e.xp6(2),e.Q6J("ngIf",!u)}}function bi(s,i){1&s&&(e.ynx(0),e.YNc(1,vi,9,4,"div",52),e.BQk())}function yi(s,i){if(1&s){const t=e.EpF();e.ynx(0),e.TgZ(1,"tui-island",48)(2,"h4",49),e._uU(3,"Workflow Steps"),e.qZA(),e.TgZ(4,"tui-carousel",50),e.NdJ("indexChange",function(r){e.CHM(t);const u=e.oxw();return e.KtG(u.carouselIndex=r)}),e.YNc(5,bi,2,0,"ng-container",4),e.qZA(),e.TgZ(6,"tui-pagination",51),e.NdJ("indexChange",function(r){e.CHM(t);const u=e.oxw();return e.KtG(u.carouselIndex=r)}),e.qZA()(),e.BQk()}if(2&s){const t=e.oxw();e.xp6(4),e.Q6J("draggable",!0)("itemsCount",3)("index",t.carouselIndex),e.xp6(1),e.Q6J("ngForOf",t.items),e.xp6(1),e.Q6J("length",(null==t.items?null:t.items.length)>2?(null==t.items?null:t.items.length)-2:null==t.items?null:t.items.length)("index",t.carouselIndex)}}function Ti(s,i){if(1&s&&e._UZ(0,"tui-data-list-wrapper",71),2&s){const t=e.oxw(2);e.Q6J("items",t.userListForEmail)}}function xi(s,i){if(1&s){const t=e.EpF();e.TgZ(0,"p",63),e._uU(1,"Email Notification Users"),e.qZA(),e.TgZ(2,"p",64),e._uU(3," Please specify the users you want to send the notification email to "),e.qZA(),e.TgZ(4,"div",65)(5,"tui-input-tag",66),e.NdJ("searchChange",function(r){e.CHM(t);const u=e.oxw();return e.KtG(u.onSearchChange(r))}),e._uU(6," Type to search and press Enter to select... "),e.YNc(7,Ti,1,1,"tui-data-list-wrapper",67),e.qZA()(),e.TgZ(8,"div",68)(9,"button",69),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.validateEmails())}),e._uU(10," Confirm & Close "),e.qZA(),e.TgZ(11,"button",70),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.cancelEmailNotify())}),e._uU(12," Remove Users & Close "),e.qZA()()}if(2&s){const t=e.oxw();e.xp6(5),e.Q6J("formControl",null==t.currentFieldArray||null==t.currentFieldArray.controls[t.activeEmailIndex]?null:t.currentFieldArray.controls[t.activeEmailIndex].controls.emailNotifyTo)("tuiTextfieldLabelOutside",!0)}}function Ci(s,i){1&s&&(e.TgZ(0,"strong",72),e._uU(1,"How conditions work?"),e.qZA(),e._UZ(2,"hr"),e.TgZ(3,"ul",73)(4,"li")(5,"strong"),e._uU(6,"AND"),e.qZA(),e._uU(7," implies that every user of the step must provide approval"),e.qZA(),e.TgZ(8,"li",74)(9,"strong"),e._uU(10,"OR"),e.qZA(),e._uU(11," implies that any one of the users may provide approval"),e.qZA(),e.TgZ(12,"li")(13,"strong"),e._uU(14,"NONE"),e.qZA(),e._uU(15," implies that there is only one user per step and hence no conditon is necessary"),e.qZA()())}class Ie{constructor(i,t,o,r,u,h,te,_e,se){this.auth=i,this.notif=t,this.router=o,this.fb=r,this.dashboard=u,this.workflowService=h,this.dialogs=te,this.activatedRoute=_e,this.location=se,this.formTabs=[],this.activeIndex=0,this.options={disableAlerts:!0,noDefaultSubmitButton:!0},this.items=[],this.activeItemIndex=0,this.limit=10,this.page=0,this.destroy$=new M.x,this.search$=new M.x,this.userListForEmail=[],this.saveDialogSubscription=[],this.creatingSubmission=new M.x,this.carouselIndex=0,this.errorIndex=0,this.showError=new M.x,this.formSubmission=new A.X([]),this.formValues=[],this.currentUser=this.auth.currentUserValue,this.userRoleCheck=this.auth.checkIfRolesExist,this.initWorkflowForm(),this.activatedRoute.params.pipe((0,f.R)(this.destroy$)).subscribe($=>{this.subModuleId=$.id,this.fetchAndPopulateData(this.subModuleId)}),this.search$.pipe((0,w.w)($=>this.dashboard.getAllUsersForListing(this.limit,this.page,$))).subscribe($=>{$&&(this.userListForEmail=$?.results?.map(ie=>ie?.email))}),this.dashboard.getAllUsersForListing(this.limit,this.page).pipe((0,f.R)(this.destroy$)).subscribe($=>{$&&(this.userListForEmail=$?.results?.map(ie=>ie?.email))})}ngOnInit(){const i=(0,_.rV)(_.MX.navHierarchy);i.forEach(t=>{t.routerLink=`/modules/${t.caption}?moduleID=${(0,_.rV)(_.MX.moduleID)}`}),this.dashboard.items=[...i,{caption:"Edit Submission",routerLink:`/modules/edit-submission/${(0,_.rV)(_.MX.workflowID)}`}]}fetchAndPopulateData(i){this.workflowService.getWorkflowSubmission(i).pipe((0,f.R)(this.destroy$)).subscribe(t=>{if(t){this.subModuleData=t,this.workFlowId=t?.workFlowId?._id,this.forms=t?.formIds?.map(r=>({...r,components:r?.components?.map(u=>(u?.label&&"Submit"==u?.label&&(u.hidden=!0),u)),formDataId:t?.formDataIds?.map(u=>{if(u.formId==r?._id)return u?._id}).filter(u=>u)[0],data:t?.formDataIds?.map(u=>{if(u.formId==r?._id)return u?.data}).filter(u=>u)[0]})),this.formTabs=t?.formIds?.map(r=>r.title),this.items=t?.workFlowId?.stepIds?.map(r=>({approvers:r?.approverIds?.map(u=>u?.fullName),condition:r?.condition,emailNotifyTo:r?.emailNotifyToId?.notifyUsers||[]}));const o=t?.workFlowId?.stepIds?.map(r=>({id:r?.id,approverIds:r?.approverIds?.map(u=>({name:u?.fullName,id:u?._id,control:new c.NI(!0)})),condition:r?.condition,emailNotifyTo:r?.emailNotifyToId?.notifyUsers||[],emailNotifyToId:r?.emailNotifyToId?.id}));delete this.subModuleData?.workFlowId,Object.assign(this.subModuleData,{workFlowId:o}),this.initWorkflowForm(o)}})}initWorkflowForm(i){this.workflowForm=this.fb.group(i?{workflows:this.fb.array(i?.map(t=>this.fb.group({id:t.id,condition:[t.condition,c.kI.required],approverIds:[t.approverIds,c.kI.required],emailNotifyTo:[t.emailNotifyTo||[],c.kI.required],emailNotifyToId:t?.emailNotifyToId})))}:{workflows:this.fb.array([this.fb.group({condition:["",c.kI.required],approverIds:[[],c.kI.required],emailNotifyTo:[[],c.kI.required]})])})}get workflows(){return this.workflowForm.controls.workflows}addWorkflowStep(){const i=this.fb.group({approverIds:[[],c.kI.required],condition:[{value:"",disabled:""},c.kI.required],emailNotifyTo:[[],c.kI.required]});this.workflows.push(i)}removeWorkflowStep(i){this.workflows.removeAt(i)}getApproverList(i,t){this.workflows.at(t)?.get("approverIds")?.setValue(i)}sendFormForEdit(i,t){t&&this.router.navigate(["/forms/edit-form"],{queryParams:{id:t}})}dataSubmitValidation(){return!(0==this.workflows?.length||this.workflows.controls.map(i=>0==i.get("approverIds")?.value.length).includes(!0)||!0===this.workflows.controls.map(i=>i.get("condition")?.value).includes(""))}openEmailNotifyModal(i,t,o){this.activeEmailIndex=o,this.currentFieldArray=t,this.saveDialogSubscription.push(this.dialogs.open(i,{dismissible:!1,closeable:!1}).subscribe())}onSearchChange(i){this.search$.next(i)}validateEmails(){let i=this.workflows.at(this.activeEmailIndex)?.get("emailNotifyTo")?.value;i=i.map(t=>!!/\S+@\S+\.\S+/.test(t)),i.includes(!1)?this.notif.displayNotification("Please provide valid email addresses","Email Notify","warning"):this.saveDialogSubscription.forEach(t=>t.unsubscribe())}cancelEmailNotify(){this.workflows.at(this.activeEmailIndex)?.get("emailNotifyTo")?.setValue([]),this.saveDialogSubscription.forEach(i=>i.unsubscribe())}countUsers(i,t){return this.errorIndex=t,i<2?(this.workflows.at(t)?.get("condition")?.setValue("none"),this.notif.displayNotification('Default condition of "None" will be used if the number of approvers is less than 2',"Create Module","info"),this.showError.next(!1)):i>=2&&"none"==this.workflows.at(t)?.get("condition")?.value?this.showError.next(!0):void this.showError.next(!1)}validateSelection(i){return this.errorIndex=i,this.workflows.at(i)?.get("approverIds")?.value?.length<2?(this.workflows.at(i)?.get("condition")?.setValue("none"),this.notif.displayNotification('Default condition of "None" will be used if the number of approvers is less than 2',"Create Module","info"),this.showError.next(!1)):this.workflows.at(i)?.get("approverIds")?.value?.length>=2&&"none"==this.workflows.at(i)?.get("condition")?.value?this.showError.next(!0):void this.showError.next(!1)}cancelSubmission(){this.router.navigate(["/modules",(0,_.rV)(_.MX.moduleSlug)||""],{queryParams:{moduleID:(0,_.rV)(_.MX.moduleID)||""}})}onChange(i,t){if(i?.data&&i?.changed){i?.data?.file&&i?.data?.file?.forEach(u=>{u.url=u?.data?.baseUrl.split("v1")[0]+u?.data?.fileUrl});const o=this.subModuleData?.formDataIds[this.activeIndex]?._id;this.formValues[this.activeIndex]={...i,id:o};const r=this.formValues?.map(u=>({_id:u?.id,data:u?.data}));this.formSubmission.next(r)}}editSubmission(i){if(0==this.dataSubmitValidation())return this.notif.displayNotification("Please provide valid condition for the workflow step/s","Create Submission","warning");if(this.workflows.controls.map(o=>o.get("approverIds")?.value.length>1&&o.get("condition")?.value).includes("none"))return this.notif.displayNotification("Please provide valid condition for the workflow step/s","Create Submission","warning");if(this.formSubmission?.value?.length!==this.forms?.length)return this.notif.displayNotification("Please provide data for all form fields","Create Submission","warning");this.creatingSubmission.next(!0);const t={workFlowId:this.workFlowId,formDataIds:this.formSubmission?.value,submissionStatus:i||1,type:"edit",steps:this.workflows?.value?.map(o=>({id:o?.id?o?.id:void 0,approverIds:o?.approverIds?.map(r=>r.id?r.id:r),condition:o?.condition,emailNotifyTo:o?.emailNotifyTo||[],emailNotifyToId:o?.emailNotifyToId?o?.emailNotifyToId:void 0}))};this.workflowService.updateSubmissionWorkflow(this.subModuleId,t).pipe((0,f.R)(this.destroy$)).subscribe(o=>{o&&(this.creatingSubmission.next(!0),this.location.back())})}ngOnDestroy(){this.destroy$.complete(),this.destroy$.unsubscribe()}}Ie.\u0275fac=function(i){return new(i||Ie)(e.Y36(U.e),e.Y36(J.T),e.Y36(a.F0),e.Y36(c.qu),e.Y36(H.s),e.Y36(Re.C),e.Y36(Z.RO),e.Y36(a.gz),e.Y36(n.Ye))},Ie.\u0275cmp=e.Xpm({type:Ie,selectors:[["ng-component"]],decls:29,vars:11,consts:[[1,"w-11/12","h-auto","min-h-screen","mx-auto","mt-52","pb-44"],[1,"flex","flex-col","w-full","px-5","mx-auto","mt-5","border","border-gray-400","border-dashed","rounded-md","bg-gray-50"],[1,"flex","justify-between","my-8"],["tuiTabs","","vertical","left",1,"w-32","mr-5"],[4,"ngFor","ngForOf"],[3,"activeItemIndex","activeItemIndexChange"],["tuiTab",""],["src","tuiIconEye",1,"tui-space_right-2"],["src","tuiIconEdit",1,"tui-space_right-2"],["class","mt-12",3,"formGroup",4,"ngIf"],[4,"ngIf"],[1,"flex","justify-end","gap-5","mt-8"],["tuiButton","","type","button","size","m","appearance","primary",3,"showLoader","click"],["tuiButton","","type","button","size","m","appearance","secondary",3,"showLoader","click"],["tuiButton","","type","button","size","m","appearance","accent",3,"click"],["template",""],["hint",""],["tuiTab","",3,"click"],["class","w-full well jsonviewer",4,"ngIf"],[1,"w-full","well","jsonviewer"],["class","flex justify-end gap-x-2",4,"ngIf"],[3,"submission","options","form","change"],[1,"flex","justify-end","gap-x-2"],[1,"px-2","py-1","rounded-md","cursor-pointer","bg-slate-200",3,"click"],["aria-hidden","true",1,"fa","fa-pencil-square","fa-2x","text-slate-500","hover:text-slate-600"],[1,"mt-12",3,"formGroup"],[1,"text-lg","font-semibold"],["formArrayName","workflows"],["tuiIconButton","","type","button","size","m","appearance","primary","icon","tuiIconPlusLarge",3,"click"],[1,"text-base","font-semibold","mt-7"],[1,"grid","grid-cols-12","gap-3","my-4",3,"formGroupName"],[1,"col-span-4"],[1,"block","pb-1"],[1,"text-xs","text-red-400"],["formControlName","approverIds",3,"checkUsersLength","approverList"],["class","text-xs text-red-500",4,"ngIf"],["for","conditionSelect",1,"block","pb-1"],["formControlName","condition","aria-label","Default select example","id","conditionSelect",1,"h-10","form-select","form-control",3,"change"],["value","and"],["value","or"],["value","none"],[1,"col-span-1","mt-8","inline-flex"],["direction","right",1,"mr-4","mt-1","-ml-2",3,"content"],[3,"contentTop","colorTop"],["tuiIconButton","","type","button","size","s","appearance","outline","icon","tuiIconMailLarge",3,"click"],[1,"col-span-1","mt-8","-ml-8"],["tuiIconButton","","type","button","size","s","appearance","secondary-destructive","icon","tuiIconTrash2Large",3,"click"],[1,"text-xs","text-red-500"],["size","l",1,"w-full","my-4","shadow-lg","border","border-[#F15B41]","px-5","mx-auto"],[1,"mb-5","text-base","font-semibold","text-gray-700"],[3,"draggable","itemsCount","index","indexChange"],["size","s",1,"my-5","pagination",3,"length","index","indexChange"],["class","flex justify-between w-full",4,"tuiItem"],[1,"flex","justify-between","w-full"],[1,"relative","w-full","px-4","py-4","text-left","border","border-gray-200","rounded-md","bg-gray-50"],[1,"mb-2","text-lg","font-semibold","text-gray-700"],["class","px-5",4,"ngFor","ngForOf"],[1,"absolute","top-0","right-0","px-3","py-1","text-sm","font-semibold","bg-gray-200","rounded-b-none","text-slate-700","rounded-r-md"],[1,"ml-4","mt-7"],["class","fa fa-long-arrow-right fa-lg","aria-hidden","true",4,"ngIf"],[1,"px-5"],[1,"list-disc"],["aria-hidden","true",1,"fa","fa-long-arrow-right","fa-lg"],[1,"text-lg","font-semibold","text-center"],[1,"mt-3","text-base","font-medium","text-gray-500"],[1,"flex","flex-col","justify-center","my-5"],[1,"b-form",3,"formControl","tuiTextfieldLabelOutside","searchChange"],[3,"items",4,"tuiDataList"],[1,"flex","justify-start","gap-x-3"],["tuiButton","","type","button","size","m",3,"click"],["appearance","accent","tuiButton","","type","button","size","m",3,"click"],[3,"items"],[1,"text-base"],[1,"mt-2"],[1,"my-2"]],template:function(i,t){1&i&&(e._UZ(0,"app-header"),e.TgZ(1,"section",0)(2,"div",1)(3,"section",2)(4,"nav",3),e.YNc(5,ui,3,1,"ng-container",4),e.qZA(),e.YNc(6,pi,2,1,"ng-container",4),e.qZA()(),e.TgZ(7,"tui-tabs",5),e.NdJ("activeItemIndexChange",function(r){return t.activeItemIndex=r}),e.TgZ(8,"button",6),e._UZ(9,"tui-svg",7),e._uU(10," Approval Workflow "),e.qZA(),e.TgZ(11,"button",6),e._UZ(12,"tui-svg",8),e._uU(13," Modify Workflow "),e.qZA()(),e.YNc(14,gi,6,2,"div",9),e.YNc(15,yi,7,6,"ng-container",10),e.TgZ(16,"div",11)(17,"button",12),e.NdJ("click",function(){return t.editSubmission()}),e.ALo(18,"async"),e._uU(19," Publish "),e.qZA(),e.TgZ(20,"button",13),e.NdJ("click",function(){return t.editSubmission(4)}),e.ALo(21,"async"),e._uU(22," Save as Draft "),e.qZA(),e.TgZ(23,"button",14),e.NdJ("click",function(){return t.cancelSubmission()}),e._uU(24," Cancel "),e.qZA()()(),e.YNc(25,xi,13,2,"ng-template",null,15,e.W1O),e.YNc(27,Ci,16,0,"ng-template",null,16,e.W1O)),2&i&&(e.xp6(5),e.Q6J("ngForOf",t.formTabs),e.xp6(1),e.Q6J("ngForOf",t.forms),e.xp6(1),e.Q6J("activeItemIndex",t.activeItemIndex),e.xp6(7),e.Q6J("ngIf",1==t.activeItemIndex),e.xp6(1),e.Q6J("ngIf",0==t.activeItemIndex),e.xp6(2),e.Q6J("showLoader",e.lcZ(18,7,t.creatingSubmission)),e.xp6(3),e.Q6J("showLoader",e.lcZ(21,9,t.creatingSubmission)))},dependencies:[n.sg,n.O5,S.G,Q.xT,re.eC,X.gX,c.YN,c.Kr,c.EJ,c.JJ,c.JL,c.oH,c.sg,c.u,c.x0,c.CE,K.v0,j.k4,pe.e,m.H9,m.p_,m.uW,m.yu,li.w,Qe.h,Ne.VF,Ne.EB,Ze.r,L.V,G.PZ,ce.w,Je.PN,n.Ov]});const wi=[{path:"",component:N,resolve:{breadcrumb:be},children:[{path:":name",component:Se,canActivate:[vt.v]},{path:"add-module/:id",component:Ce,data:{breadcrumb:"Add App"}},{path:"edit-module/:id",component:we,data:{breadcrumb:"Edit App"}},{path:"edit-submission/:id",component:Ie,data:{breadcrumb:"Edit Submission"}},{path:":name",data:{preload:!0},loadChildren:()=>l.e(169).then(l.bind(l,99169)).then(s=>s.WorkflowsModule)},{path:"",component:N}]}];class ye{}ye.\u0275fac=function(i){return new(i||ye)},ye.\u0275mod=e.oAB({type:ye}),ye.\u0275inj=e.cJS({imports:[a.Bz.forChild(wi),a.Bz]});var Si=l(14375),Ii=l(86679),Mi=l(77975),Ai=l(93422),Zi=l(60117),Di=l(91127),ki=l(68341),Oi=l(74606),Ui=l(89740);const Ve={valueContent:""};new e.OlP("[TUI_SELECT_OPTIONS]",{factory:()=>Ve});let Ri=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[[n.ez,Ui.wq,Ai.A,Zi.KW,Di.jh,Oi.Ig,ki.Mt,y.W,Q.cn,re.zX,X.pc]]}),s})();var Ji=l(44886);class Te{}Te.\u0275fac=function(i){return new(i||Te)},Te.\u0275mod=e.oAB({type:Te}),Te.\u0275inj=e.cJS({imports:[n.ez,ye,S.G,E.c,Le.x,Si.N,Ii.Qf,Q.cn,re.zX,Mi.lm,Ri,c.UX,c.u5,K.fN,j.XI,p,Be.z,pe.e,m.$$,Qe.y,Ne.Xj,Ze.i,Ee.V5,L.f,G.cB,Ue.X,ce.Q,Ji.go,de.dS,ve,Je.EI]})},6229:(ue,Y,l)=>{l.d(Y,{C:()=>Z});var n=l(34782),a=l(54004),_=l(61005),e=l(94650),N=l(80529),c=l(22603);class Z extends _.s{constructor(M,f){super(M),this.http=M,this.notif=f}getWorkflowSubmission(M){return this.get(`/submissions/${M}`).pipe((0,n.d)(),(0,a.U)(f=>{if(!f.hasErrors())return f.data;f.errors[0].code&&![401,403].includes(f.errors[0].code)&&this.notif.displayNotification("Failed to fetch workflow","Get Submodule workflow","error")}))}getSubmissionFromSubModule(M,f,w,z,U){const W={subModuleId:M,limit:f,page:w,sortBy:U||void 0,submissionStatus:z||void 0};return null==W.submissionStatus&&delete W.submissionStatus,null==W.sortBy&&delete W.sortBy,this.get("/submissions",W).pipe((0,n.d)(),(0,a.U)(H=>H.hasErrors()?H.errors[0].code&&![401,403].includes(H.errors[0].code)?this.notif.displayNotification("Failed to fetch workflow","Get Submodule workflow","error"):void 0:H.data))}updateSubmissionWorkflow(M,f){return this.patch(`/submissions/${M}`,f).pipe((0,n.d)(),(0,a.U)(w=>w.hasErrors()?w.errors[0].code&&![401,403].includes(w.errors[0].code)?this.notif.displayNotification(w.errors[0]?.error?.message,"Update Submission","error"):void 0:(this.notif.displayNotification("Action complete. Submission updated","Update Submission","success"),w.data)))}addNewSubmission(M){return this.post("/submissions",M).pipe((0,n.d)(),(0,a.U)(f=>f.hasErrors()?f.errors[0].code&&![401,403].includes(f.errors[0].code)?this.notif.displayNotification(f.errors[0]?.error?.message,"Create Submission","error"):void 0:(this.notif.displayNotification("Submission created successfully","Create Submission","success"),f.data)))}updateFormsData(M,f){return this.patch(`/formsData/${f}`,M).pipe((0,n.d)(),(0,a.U)(w=>w.hasErrors()?w.errors[0].code&&![401,403].includes(w.errors[0].code)?this.notif.displayNotification(w.errors[0]?.error?.message,"Update Forms Data","error"):void 0:(this.notif.displayNotification("Form data updated successfully","Update Forms data","success"),w.data)))}updateWorkflowStep(M,f){return this.patch(`/submissions/workflow/${f}`,M).pipe((0,n.d)(),(0,a.U)(w=>w.hasErrors()?w.errors[0].code&&![401,403].includes(w.errors[0].code)?this.notif.displayNotification(w.errors[0]?.error?.message,"Update Workflow Step","error"):void 0:(this.notif.displayNotification(w?.data?.message,"Update Workflow Step","success"),w.data)))}}Z.\u0275fac=function(M){return new(M||Z)(e.LFG(N.eN),e.LFG(c.T))},Z.\u0275prov=e.Yz7({token:Z,factory:Z.\u0275fac,providedIn:"root"})},55314:(ue,Y,l)=>{l.d(Y,{X:()=>e});var n=l(36895),a=l(94650);function _(N,c){1&N&&(a.ynx(0),a.TgZ(1,"tr",12)(2,"td",13),a._UZ(3,"span",14),a.qZA(),a.TgZ(4,"td",13),a._UZ(5,"span",14)(6,"br")(7,"span",15),a.qZA(),a.TgZ(8,"td",13),a._UZ(9,"span",14),a.qZA(),a.TgZ(10,"td",13),a._UZ(11,"span",14),a.qZA(),a.TgZ(12,"td",13),a._UZ(13,"span",16)(14,"br")(15,"span",15),a.qZA(),a.TgZ(16,"td",13),a._UZ(17,"span",17),a.qZA()(),a.BQk())}class e{constructor(){this.Arr=Array,this.num=6}}e.\u0275fac=function(c){return new(c||e)},e.\u0275cmp=a.Xpm({type:e,selectors:[["app-table-loader"]],standalone:!0,features:[a.jDz],decls:25,vars:1,consts:[["role","status",1,"w-full","animate-pulse","flex","justify-between"],[1,"my-4"],[1,"h-3","bg-gray-200","rounded-full","w-48","mb-4"],[1,"h-3","bg-gray-200","rounded-full","w-[360px]","my-2.5"],[1,"sr-only"],[1,"h-10","bg-gray-200","rounded-md","w-32","mt-8"],[1,"rounded-lg","shadow-lg"],[1,"w-full","mt-10"],[1,"text-center","border-b-2","border-gray-300","border-dotted","bg-[#eae4d8]"],[1,"py-2"],[1,"inline-block","py-1","mt-2","mb-2","bg-gray-300","border-2","rounded-sm","px-14"],[4,"ngFor","ngForOf"],[1,"z-50","h-16","text-center","bg-white","border-b-2","border-gray-300","border-dotted","rounded-lg","animate-pulse"],[1,"shadow-lg"],[1,"z-50","inline-block","px-16","py-2","mt-2","mb-2","bg-gray-300","rounded-sm"],[1,"z-50","inline-block","px-10","py-1","mt-1","mb-1","bg-gray-300","rounded-sm"],[1,"z-50","inline-block","px-16","py-2","mt-1","mb-1","bg-gray-300","rounded-sm"],[1,"z-50","inline-block","px-12","py-4","mt-2","mb-2","bg-gray-300","rounded-2xl"]],template:function(c,Z){1&c&&(a.TgZ(0,"div",0)(1,"div",1),a._UZ(2,"div",2)(3,"div",2)(4,"div",3),a.TgZ(5,"span",4),a._uU(6,"Loading..."),a.qZA()(),a.TgZ(7,"div",1),a._UZ(8,"div",5),a.qZA()(),a.TgZ(9,"div",6)(10,"table",7)(11,"thead",8)(12,"th",9),a._UZ(13,"span",10),a.qZA(),a.TgZ(14,"th",9),a._UZ(15,"span",10),a.qZA(),a.TgZ(16,"th",9),a._UZ(17,"span",10),a.qZA(),a.TgZ(18,"th",9),a._UZ(19,"span",10),a.qZA(),a.TgZ(20,"th",9),a._UZ(21,"span",10),a.qZA(),a.TgZ(22,"th",9),a._UZ(23,"span",10),a.qZA()(),a.YNc(24,_,18,0,"ng-container",11),a.qZA()()),2&c&&(a.xp6(24),a.Q6J("ngForOf",Z.Arr(Z.num).fill(1)))},dependencies:[n.ez,n.sg],changeDetection:0})},6110:(ue,Y,l)=>{l.d(Y,{z:()=>J});var n=l(94650),a=l(36895),_=l(91127),e=l(39367),N=l(44886),c=l(56772),Z=l(86679),A=l(61135);function M(F,I){if(1&F){const g=n.EpF();n.TgZ(0,"li",12),n.NdJ("click",function(){n.CHM(g);const S=n.oxw(2),E=S.index,Q=S.$implicit,X=n.oxw(2);return n.KtG(X.setFilterAndApplyActive({index:E,sortType:Q.name,applyOn:X.filterBy}))}),n.TgZ(1,"div",13)(2,"span"),n._uU(3),n.qZA(),n._UZ(4,"i",14),n.qZA()()}if(2&F){const g=n.oxw(2).$implicit;n.Q6J("ngClass","active"===g.status?"bg-blue-100 hover:bg-blue-100":"bg-white hover:bg-gray-100"),n.xp6(3),n.Oqu(g.name),n.xp6(1),n.Q6J("ngClass",g.icon)}}function f(F,I){if(1&F&&(n.ynx(0),n.YNc(1,M,5,3,"li",11),n.BQk()),2&F){const g=n.oxw(3);n.xp6(1),n.Q6J("ngIf",1==g.showSortCategories)}}function w(F,I){if(1&F){const g=n.EpF();n.TgZ(0,"li",12),n.NdJ("click",function(){n.CHM(g);const S=n.oxw(),E=S.index,Q=S.$implicit,X=n.oxw(2);return n.KtG(X.setFilterAndApplyActive({index:E,sortType:Q.name,applyOn:X.filterBy}))}),n.TgZ(1,"div",13)(2,"span"),n._uU(3),n.qZA(),n._UZ(4,"i",14),n.qZA()()}if(2&F){const g=n.oxw().$implicit;n.Q6J("ngClass","active"===g.status?"bg-blue-100 hover:bg-blue-100":"bg-white hover:bg-gray-100"),n.xp6(3),n.Oqu(g.name),n.xp6(1),n.Q6J("ngClass",g.icon)}}function z(F,I){if(1&F&&(n.ynx(0),n.YNc(1,f,2,1,"ng-container",9),n.YNc(2,w,5,3,"ng-template",null,10,n.W1O),n.BQk()),2&F){const g=I.$implicit,x=n.MAs(3);n.xp6(1),n.Q6J("ngIf","Sort by Latest"==(null==g?null:g.name)||"Sort by Oldest"==(null==g?null:g.name))("ngIfElse",x)}}function U(F,I){if(1&F){const g=n.EpF();n.TgZ(0,"div",15)(1,"a",16),n.NdJ("click",function(){n.CHM(g);const S=n.oxw(2);return n.KtG(S.resetFilterValue())}),n._uU(2,"Reset Filters"),n.qZA()()}}function W(F,I){if(1&F&&(n.TgZ(0,"div",4)(1,"h4",5),n._uU(2),n.qZA(),n.TgZ(3,"ul",6),n.YNc(4,z,4,2,"ng-container",7),n.qZA(),n.YNc(5,U,3,0,"div",8),n.qZA()),2&F){const g=n.oxw();n.xp6(2),n.hij("Filter by ",g.filterBy,""),n.xp6(2),n.Q6J("ngForOf",g.items)("ngForTrackBy",g.trackByFn),n.xp6(1),n.Q6J("ngIf",!0===g.isFilterApplied)}}function H(F,I){if(1&F&&(n.TgZ(0,"p"),n._uU(1),n.qZA()),2&F){const g=n.oxw();n.xp6(1),n.Oqu(g.isFilterApplied?"This filter is currently active":"Apply filters")}}class J{constructor(){this.open=!1,this.searchEnabled=!0,this.showSortCategories=!0,this.disabled=!1,this.applyStatus=new n.vpe,this.resetFilters=new n.vpe,this.sendSearchToTable=new n.vpe,this.isFilterApplied=!1,this.previousFilterValues=new A.X([])}searchTableData(I,g){this.sendSearchToTable.emit({search:I,searchBy:g}),this.isFilterApplied=!0}setFilterAndApplyActive(I){1!=this.disabled&&(this.applyStatus.emit(I),this.items?.some(g=>g.name===I.sortType)&&(this.items.forEach(g=>{g.status=I.sortType===g.name?"active":"idle"}),this.isFilterApplied=!0))}areArraysEqual(I,g){if(I.length!==g.length)return!1;const x=I.slice().sort((E,Q)=>E.id-Q.id),S=g.slice().sort((E,Q)=>E.id-Q.id);for(let E=0;E<x.length;E++){const Q=x[E],X=S[E];for(let K in Q)if(Q[K]!==X[K])return!1}return!0}resetFilterValue(){this.isFilterApplied=!1,this.items.forEach(I=>I.status="idle"),this.resetFilters.emit("reset")}trackByFn(I,g){return g}}J.\u0275fac=function(I){return new(I||J)},J.\u0275cmp=n.Xpm({type:J,selectors:[["filter"]],inputs:{items:"items",searchEnabled:"searchEnabled",showSortCategories:"showSortCategories",filterBy:"filterBy",disabled:"disabled"},outputs:{applyStatus:"applyStatus",resetFilters:"resetFilters",sendSearchToTable:"sendSearchToTable"},standalone:!0,features:[n.jDz],decls:6,vars:4,consts:[[3,"content","open","openChange"],["tuiIconButton","","tuiHintDirection","right","size","xs","icon","tuiIconFilter",3,"tuiHint","appearance"],["dropdown",""],["tooltip",""],[1,"px-5","py-3","w-80"],[1,"text-sm","font-semibold","my-3"],[1,"my-3"],[4,"ngFor","ngForOf","ngForTrackBy"],["class","cursor-pointer mt-5 mb-3 text-center",4,"ngIf"],[4,"ngIf","ngIfElse"],["otherFilter",""],["class","px-2 py-3 my-1 text-sm rounded-lg cursor-pointer",3,"ngClass","click",4,"ngIf"],[1,"px-2","py-3","my-1","text-sm","rounded-lg","cursor-pointer",3,"ngClass","click"],[1,"flex","justify-between"],["aria-hidden","true",3,"ngClass"],[1,"cursor-pointer","mt-5","mb-3","text-center"],[1,"px-3","py-2","rounded-md","bg-[#ac2224]","text-white","text-sm","no-underline","hover:text-white",3,"click"]],template:function(I,g){if(1&I&&(n.TgZ(0,"tui-hosted-dropdown",0),n.NdJ("openChange",function(S){return g.open=S}),n._UZ(1,"button",1),n.YNc(2,W,6,4,"ng-template",null,2,n.W1O),n.qZA(),n.YNc(4,H,2,1,"ng-template",null,3,n.W1O)),2&I){const x=n.MAs(3),S=n.MAs(5);n.Q6J("content",x)("open",g.open),n.xp6(1),n.Q6J("tuiHint",S)("appearance",g.isFilterApplied?"primary":"secondary")}},dependencies:[a.ez,a.mk,a.sg,a.O5,_.jh,_.o1,e.fN,e.v0,c.zX,Z.Qf,N.go,N.D,N.xn,N.t6,N.DM],changeDetection:0})},14375:(ue,Y,l)=>{l.d(Y,{N:()=>w});var n=l(94650),a=l(36895),_=l(86679),e=l(90433),N=l(77579),c=l(78372),Z=l(71884),A=l(82722),M=l(71115),f=l(60117);class w{constructor(){this.searchValue=new e.NI,this.destroy$=new N.x,this.searchStr=new n.vpe,this.searchValue.valueChanges.pipe((0,c.b)(400),(0,Z.x)(),(0,A.R)(this.destroy$)).subscribe(U=>{this.searchStr.emit(U||null)})}ngOnDestroy(){this.destroy$.complete(),this.destroy$.unsubscribe()}}w.\u0275fac=function(U){return new(U||w)},w.\u0275cmp=n.Xpm({type:w,selectors:[["app-search-bar"]],outputs:{searchStr:"searchStr"},standalone:!0,features:[n.jDz],decls:4,vars:2,consts:[["tuiTextfieldIconLeft","tuiIconSearchLarge",1,"shadow-md",3,"formControl","tuiTextfieldCleaner"],[1,"mt-2"],["tuiTextfield","","placeholder","Type to start searching..."]],template:function(U,W){1&U&&(n.TgZ(0,"tui-input",0)(1,"p",1),n._uU(2,"Search by app title"),n.qZA(),n._UZ(3,"input",2),n.qZA()),2&U&&n.Q6J("formControl",W.searchValue)("tuiTextfieldCleaner",!0)},dependencies:[a.ez,_.Qf,_.K3,_.wU,f.MB,e.UX,e.JJ,e.oH,e.u5,M.cn,M.be,M.aR],changeDetection:0})},69952:(ue,Y,l)=>{l.d(Y,{x:()=>B});var n=l(94650),a=l(36895),_=l(14375),e=l(19132),N=l(82176),c=l(80311),Z=l(87819),A=l(39367),M=l(1163),f=l(4266),w=l(77579),z=l(61135),U=l(82722),W=l(59835),H=l(46954),J=l(20696),F=l(15274);const I=["preview"],g=function(y){return["/modules/add-module",y]};function x(y,b){if(1&y&&(n.TgZ(0,"a",9),n._uU(1,"+ Add app "),n.qZA()),2&y){const d=n.oxw(2);n.Q6J("routerLink",n.VKq(1,g,d.moduleId))}}function S(y,b){if(1&y&&(n.ynx(0),n.TgZ(1,"div",7),n.YNc(2,x,2,3,"a",8),n.qZA(),n.BQk()),2&y){const d=b.ngIf,D=n.oxw();n.xp6(2),n.Q6J("ngIf",D.currentUser.id==(null==d?null:d.createdBy)||D.checkIfUserisAdmin(null==d?null:d.adminUsers)||1==D.userRoleCheck)}}function E(y,b){1&y&&(n.ynx(0),n.TgZ(1,"div",10),n._UZ(2,"img",11),n.qZA(),n.TgZ(3,"p",12),n._uU(4," No results found! "),n.qZA(),n.BQk())}function Q(y,b){1&y&&(n.ynx(0),n.TgZ(1,"p",13),n._uU(2," No apps available! "),n.qZA(),n.BQk())}function X(y,b){if(1&y){const d=n.EpF();n.TgZ(0,"a",28),n.NdJ("click",function(){n.CHM(d);const q=n.oxw(2).$implicit,oe=n.oxw(2);return n.KtG(oe.setSubmoduleSlug(null==q?null:q.code,null==q?null:q.id))}),n._UZ(1,"i",29),n.qZA()}}const K=function(y){return["/modules/edit-module",y]};function ce(y,b){if(1&y&&(n.TgZ(0,"a",30),n._UZ(1,"i",31),n.qZA()),2&y){const d=n.oxw(2).$implicit;n.Q6J("routerLink",n.VKq(1,K,null==d?null:d.id))}}function de(y,b){if(1&y){const d=n.EpF();n.TgZ(0,"a",32),n.NdJ("click",function(){n.CHM(d);const q=n.oxw(2).$implicit,oe=n.oxw(2),me=n.MAs(13);return n.KtG(oe.showDialog(null==q?null:q.id,me))}),n._UZ(1,"i",33),n.qZA()}}function re(y,b){if(1&y&&(n.ynx(0),n.TgZ(1,"div",17)(2,"div",18)(3,"div",19),n._UZ(4,"img",20),n.qZA(),n.TgZ(5,"div",21)(6,"h3",22),n._uU(7),n.qZA(),n.TgZ(8,"p",23),n._uU(9),n.qZA()()(),n.TgZ(10,"div",24),n.YNc(11,X,2,0,"a",25),n.YNc(12,ce,2,3,"a",26),n.YNc(13,de,2,0,"a",27),n.qZA()(),n.BQk()),2&y){const d=n.oxw().$implicit,D=n.oxw(2);n.xp6(4),n.Q6J("src",null==d?null:d.image,n.LSH),n.xp6(3),n.hij(" ",null==d?null:d.title," "),n.xp6(2),n.Oqu(null==d?null:d.description),n.xp6(2),n.Q6J("ngIf",3!==(null==d?null:d.status)),n.xp6(1),n.Q6J("ngIf",(null==D.currentUser?null:D.currentUser.id)==(null==d?null:d.createdBy)||1==D.userRoleCheck&&0==D.checkIfUserisViewOnly(null==d?null:d.viewOnlyUsers)||D.checkIfUserisAdmin(null==d?null:d.adminUsers)),n.xp6(1),n.Q6J("ngIf",(null==D.currentUser?null:D.currentUser.id)==(null==d?null:d.createdBy)||1==D.userRoleCheck&&0==D.checkIfUserisViewOnly(null==d?null:d.viewOnlyUsers)||D.checkIfUserisAdmin(null==d?null:d.adminUsers))}}function ae(y,b){1&y&&(n.ynx(0),n._UZ(1,"tui-badge",34),n.BQk())}function le(y,b){if(1&y){const d=n.EpF();n.TgZ(0,"a",28),n.NdJ("click",function(){n.CHM(d);const q=n.oxw(3).$implicit,oe=n.oxw(2);return n.KtG(oe.setSubmoduleSlug(null==q?null:q.code,null==q?null:q.id))}),n._UZ(1,"i",29),n.qZA()}}function P(y,b){if(1&y&&(n.TgZ(0,"a",30),n._UZ(1,"i",31),n.qZA()),2&y){const d=n.oxw(3).$implicit;n.Q6J("routerLink",n.VKq(1,K,null==d?null:d.id))}}function ne(y,b){if(1&y){const d=n.EpF();n.TgZ(0,"a",32),n.NdJ("click",function(){n.CHM(d);const q=n.oxw(3).$implicit,oe=n.oxw(2),me=n.MAs(13);return n.KtG(oe.showDialog(null==q?null:q.id,me))}),n._UZ(1,"i",33),n.qZA()}}function R(y,b){if(1&y&&(n.ynx(0),n.TgZ(1,"div",17)(2,"div",18)(3,"div",19),n._UZ(4,"img",20),n.qZA(),n.TgZ(5,"div",21)(6,"h3",22),n._uU(7),n.YNc(8,ae,2,0,"ng-container",2),n.qZA(),n.TgZ(9,"p",23),n._uU(10),n.qZA()()(),n.TgZ(11,"div",24),n.YNc(12,le,2,0,"a",25),n.YNc(13,P,2,3,"a",26),n.YNc(14,ne,2,0,"a",27),n.qZA()(),n.BQk()),2&y){const d=n.oxw(2).$implicit,D=n.oxw(2);n.xp6(4),n.Q6J("src",null==d?null:d.image,n.LSH),n.xp6(3),n.hij(" ",null==d?null:d.title," "),n.xp6(1),n.Q6J("ngIf",3===(null==d?null:d.status)),n.xp6(2),n.Oqu(null==d?null:d.description),n.xp6(2),n.Q6J("ngIf",3!==(null==d?null:d.status)),n.xp6(1),n.Q6J("ngIf",(null==D.currentUser?null:D.currentUser.id)==(null==d?null:d.createdBy)),n.xp6(1),n.Q6J("ngIf",(null==D.currentUser?null:D.currentUser.id)==(null==d?null:d.createdBy))}}function ee(y,b){if(1&y&&(n.ynx(0),n.YNc(1,R,15,7,"ng-container",2),n.BQk()),2&y){const d=n.oxw().$implicit,D=n.oxw(2);n.xp6(1),n.Q6J("ngIf",(null==D.currentUser?null:D.currentUser.id)==(null==d?null:d.createdBy))}}function C(y,b){if(1&y&&(n.ynx(0),n.YNc(1,re,14,6,"ng-container",2),n.YNc(2,ee,2,1,"ng-container",2),n.BQk()),2&y){const d=b.$implicit;n.xp6(1),n.Q6J("ngIf",3!==(null==d?null:d.status)),n.xp6(1),n.Q6J("ngIf",3==(null==d?null:d.status))}}function V(y,b){if(1&y){const d=n.EpF();n.TgZ(0,"div",35)(1,"tui-pagination",36),n.NdJ("indexChange",function(q){n.CHM(d);const oe=n.oxw(2);return n.KtG(oe.goToPage(q))}),n.qZA()()}if(2&y){const d=n.oxw(2);n.xp6(1),n.Q6J("length",(null==d.tableData?null:d.tableData.totalPages)||1)("index",(null==d.tableData?null:d.tableData.page)-1||0)}}function T(y,b){if(1&y&&(n.TgZ(0,"section",14),n.YNc(1,C,3,2,"ng-container",15),n.qZA(),n.YNc(2,V,2,2,"div",16),n.ALo(3,"async")),2&y){const d=n.oxw();n.xp6(1),n.Q6J("ngForOf",null==d.tableData?null:d.tableData.results),n.xp6(1),n.Q6J("ngIf",0==n.lcZ(3,2,d.showEmptyMessage))}}function k(y,b){if(1&y){const d=n.EpF();n.TgZ(0,"p",37),n._uU(1,"Delete App"),n.qZA(),n.TgZ(2,"p",38),n._uU(3,"Are you sure you want to delete this app?"),n.qZA(),n.TgZ(4,"div",39)(5,"button",40),n.NdJ("click",function(){const oe=n.CHM(d).$implicit;return n.oxw().deleteModule(),n.KtG(oe.complete())}),n._uU(6," Confirm "),n.qZA(),n.TgZ(7,"button",41),n.NdJ("click",function(){const oe=n.CHM(d).$implicit;return n.KtG(oe.complete())}),n._uU(8," Cancel "),n.qZA()()}}class B{constructor(b,d,D,q,oe,me,fe){this.activatedRoute=b,this.dialogs=d,this.dashboardService=D,this.transport=q,this.auth=oe,this.router=me,this.previewDialogService=fe,this.tableColumns=["Title","Company Name","Status"],this.tableData=[],this.fetchingTableData=new w.x,this.filterMenuCompany=[{name:"Sort by Acsending",status:"idle",icon:"fa fa-sort-alpha-asc fa-lg",sortBy:"Company Name"},{name:"Sort by Descending",status:"idle",icon:"fa fa-sort-alpha-desc fa-lg",sortBy:"Company Name"},{name:"Sort by Latest",status:"idle",icon:"fa fa-calendar-check-o fa-lg",sortBy:"Company Name"},{name:"Sort by Oldest",status:"idle",icon:"fa fa-calendar-times-o fa-lg",sortBy:"Company Name"}],this.filterMenuSubmodule=[{name:"Sort by Acsending",status:"idle",icon:"fa fa-sort-alpha-asc fa-lg",sortBy:"Submodule Code"},{name:"Sort by Descending",status:"idle",icon:"fa fa-sort-alpha-desc fa-lg",sortBy:"Submodule Code"},{name:"Sort by Latest",status:"idle",icon:"fa fa-calendar-check-o fa-lg",sortBy:"Submodule Code"},{name:"Sort by Oldest",status:"idle",icon:"fa fa-calendar-times-o fa-lg",sortBy:"Submodule Code"}],this.filterMenuModule=[{name:"Sort by Acsending",status:"idle",icon:"fa fa-sort-alpha-asc fa-lg"},{name:"Sort by Descending",status:"idle",icon:"fa fa-sort-alpha-desc fa-lg"},{name:"Sort by Latest",status:"idle",icon:"fa fa-calendar-check-o fa-lg"},{name:"Sort by Oldest",status:"idle",icon:"fa fa-calendar-times-o fa-lg"}],this.statusMenu=[{name:"Draft",status:"idle",icon:""},{name:"Published",status:"idle",icon:""}],this.page=1,this.destroy$=new w.x,this.isFilterApplied=!1,this.showEmptyMessage=new z.X(!1),this.emitDeleteEvent=new n.vpe,this.emitPagination=new n.vpe,this.emitFilters=new n.vpe,this.emitSearch=new n.vpe,this.emitPageChange=new n.vpe,this.currentUser=this.auth.currentUserValue,this.userRoleCheck=this.auth.checkIfRolesExist("sysAdmin"),this.activatedRoute.queryParams.subscribe(ge=>this.moduleId=ge.moduleID),this.activatedRoute.params.subscribe(ge=>{this.transport.moduleCode.next(ge.name),this.moduleCode=ge.name})}showDialog(b,d){b&&(this.submoduleID=b,this.dialogs.open(d).subscribe())}deleteModule(){this.dashboardService.deleteSubModule(this.submoduleID).subscribe(b=>{this.emitDeleteEvent.emit(!0)})}showImage(b){this.currentImg=b,this.previewDialogService.open(this.preview).pipe((0,U.R)(this.destroy$)).subscribe()}showStatus(b){return 1==b?"Published":3==b?"Draft":"Deleted"}splitURL(b){return b.split("/").at(-1)}checkIfUserisViewOnly(b){return b.includes(this.currentUser?.id)}checkIfUserisAdmin(b){return b?.map(d=>d?.id).includes(this.currentUser?.id)}goToPage(b){this.page=b+1,this.emitPagination.emit(this.page)}floorNumber(b){return Math.round(b)}getSortType(b){return"Sort by Latest"==b?.sortType?"latest":"Sort by Oldest"==b?.sortType?"oldest":"Sort by Descending"==b?.sortType?"desc":"asc"}sendFilters(b){if(b){this.fetchingTableData.next(!0);const d={field:"Submodule Code"==b?.applyOn?"subModuleCode":"companyName",sortByTime:1==["latest","oldest"].includes(this.getSortType(b))?this.getSortType(b):void 0,sortBy:1==["asc","desc"].includes(this.getSortType(b))?this.getSortType(b):void 0};null==d.sortBy&&delete d.sortBy,null==d.sortByTime&&delete d.sortByTime,this.dashboardService.getSubModuleByModuleSlug((0,f.rV)(f.MX.moduleSlug),7,this.page,d).pipe((0,U.R)(this.destroy$)).subscribe(D=>{this.tableData=D,this.fetchingTableData.next(!1)})}}sendSearchValue(b){this.fetchingTableData.next(!0);const d={field:"subModuleTitle",search:b};null==d.search&&delete d.search,this.dashboardService.getSubModuleByModuleSlug((0,f.rV)(f.MX.moduleSlug),7,this.page,d).pipe((0,U.R)(this.destroy$)).subscribe(D=>{0==D?.results?.length&&this.showEmptyMessage.next(!0),b||this.showEmptyMessage.next(!1),this.tableData=D,this.fetchingTableData.next(!1)})}resetFilterValues(b){this.fetchingTableData.next(!0),b&&this.dashboardService.getSubModuleByModuleSlug((0,f.rV)(f.MX.moduleSlug),7,this.page).pipe((0,U.R)(this.destroy$)).subscribe(d=>{this.tableData=d,this.fetchingTableData.next(!1)})}setSubmoduleSlug(b,d){(0,f.LS)(f.MX.moduleSlug,b),(0,f.LS)(f.MX.moduleID,d),this.emitPageChange.emit({code:b,id:d}),this.router.navigate(["/modules",b],{queryParams:{moduleID:d||""}})}ngOnDestroy(){this.destroy$.complete(),this.destroy$.unsubscribe()}}B.\u0275fac=function(b){return new(b||B)(n.Y36(e.gz),n.Y36(M.RO),n.Y36(H.s),n.Y36(J.R),n.Y36(F.e),n.Y36(e.F0),n.Y36(W.iK))},B.\u0275cmp=n.Xpm({type:B,selectors:[["app-table-view"]],viewQuery:function(b,d){if(1&b&&n.Gf(I,5),2&b){let D;n.iGM(D=n.CRH())&&(d.preview=D.first)}},inputs:{tableColumns:"tableColumns",tableData:"tableData",moduleData:"moduleData"},outputs:{emitDeleteEvent:"emitDeleteEvent",emitPagination:"emitPagination",emitFilters:"emitFilters",emitSearch:"emitSearch",emitPageChange:"emitPageChange"},standalone:!0,features:[n.jDz],decls:14,vars:14,consts:[[1,"flex","justify-between","mt-5","mb-2"],[1,"mb-2","w-1/3",3,"searchStr"],[4,"ngIf"],["size","xl",3,"overlay","showLoader"],[4,"ngIf","ngIfElse"],["showSubModules",""],["template",""],[1,"cursor-pointer","mt-5"],["class","px-6 py-3 rounded-md bg-[#F15B41] text-white no-underline hover:text-white text-base",3,"routerLink",4,"ngIf"],[1,"px-6","py-3","rounded-md","bg-[#F15B41]","text-white","no-underline","hover:text-white","text-base",3,"routerLink"],[1,"flex","justify-center","items-center"],["src","../../../assets/empty-box.svg","alt","empty_box","width","240","height","240"],[1,"px-5","text-lg","text-center","font-semibold","text-gray-500"],[1,"px-5","text-sm","text-center","font-semibold","text-gray-500"],[1,"grid","grid-cols-12","gap-4"],[4,"ngFor","ngForOf"],["class","py-6",4,"ngIf"],[1,"bg-white","rounded-md","shadow-lg","h-auto","drop-shadow-lg","flex","flex-col","col-span-4","border-t-8","border-t-[#F15B41]"],[1,"flex","pt-5","space-x-8","px-4","pb-3"],[1,"flex","items-center","justify-center","border","border-gray-200","rounded-lg","w-[13rem]","h-[8rem]"],["alt","top_app_icon","loading","eager",1,"object-cover","w-full","h-full","rounded-lg",3,"src"],[1,"w-full","h-full"],[1,"mb-2","text-lg","font-semibold"],[1,"leading-6","line-clamp-4"],[1,"bg-gradient-to-r","from-orange-200","to-slate-200","h-8","w-full","flex","justify-center","items-center","rounded-br-md","rounded-bl-md","py-5"],["title","Apps and Submissions","class","px-2 py-1 text-white bg-green-500 rounded-md hover:text-white cursor-pointer",3,"click",4,"ngIf"],["title","Edit","class","px-2 py-1 mx-2 text-white bg-blue-400 rounded-md hover:text-white cursor-pointer",3,"routerLink",4,"ngIf"],["title","Delete","class","px-2 py-1 text-white bg-red-500 rounded-md hover:text-white cursor-pointer",3,"click",4,"ngIf"],["title","Apps and Submissions",1,"px-2","py-1","text-white","bg-green-500","rounded-md","hover:text-white","cursor-pointer",3,"click"],["aria-hidden","true",1,"fa","fa-sitemap","fa-lg"],["title","Edit",1,"px-2","py-1","mx-2","text-white","bg-blue-400","rounded-md","hover:text-white","cursor-pointer",3,"routerLink"],["aria-hidden","true",1,"fa","fa-pencil-square-o","fa-lg"],["title","Delete",1,"px-2","py-1","text-white","bg-red-500","rounded-md","hover:text-white","cursor-pointer",3,"click"],["aria-hidden","true",1,"fa","fa-trash","fa-lg"],["status","primary","value","Draft","size","s",1,"tui-space_left-1"],[1,"py-6"],[3,"length","index","indexChange"],[1,"pb-2","text-xl","font-semibold","text-center","border-b","border-gray-400"],[1,"mt-4","text-base","font-medium","text-center"],[1,"flex","justify-center","mt-4"],["tuiButton","","appearance","secondary-destructive","type","button","size","m",1,"mx-3",3,"click"],["tuiButton","","type","button","size","m",3,"click"]],template:function(b,d){if(1&b&&(n.TgZ(0,"div",0)(1,"app-search-bar",1),n.NdJ("searchStr",function(q){return d.sendSearchValue(q)}),n.qZA(),n.YNc(2,S,3,1,"ng-container",2),n.ALo(3,"async"),n.qZA(),n.YNc(4,E,5,0,"ng-container",2),n.ALo(5,"async"),n.TgZ(6,"tui-loader",3),n.ALo(7,"async"),n.YNc(8,Q,3,0,"ng-container",4),n.ALo(9,"async"),n.YNc(10,T,4,4,"ng-template",null,5,n.W1O),n.qZA(),n.YNc(12,k,9,0,"ng-template",null,6,n.W1O)),2&b){const D=n.MAs(11);n.xp6(2),n.Q6J("ngIf",n.lcZ(3,6,d.moduleData)),n.xp6(2),n.Q6J("ngIf",0==(null==d.tableData||null==d.tableData.results?null:d.tableData.results.length)&&1==n.lcZ(5,8,d.showEmptyMessage)),n.xp6(2),n.Q6J("overlay",!0)("showLoader",n.lcZ(7,10,d.fetchingTableData)),n.xp6(2),n.Q6J("ngIf",0==(null==d.tableData||null==d.tableData.results?null:d.tableData.results.length)&&0==n.lcZ(9,12,d.showEmptyMessage))("ngIfElse",D)}},dependencies:[a.ez,a.sg,a.O5,a.Ov,_.N,e.Bz,e.rH,N.i,N.r,Z.dS,Z.kM,A.fN,A.v0,c.f,c.g],changeDetection:0})},68341:(ue,Y,l)=>{l.d(Y,{Ii:()=>U,Mt:()=>F});var n=l(94650),a=l(8276),_=l(19040),e=l(91127),N=l(71115),c=l(89740),Z=l(36895);function A(I,g){1&I&&n._UZ(0,"tui-svg",2),2&I&&n.Q6J("src",g.polymorpheusOutlet)}function M(I,g){1&I&&n.GkF(0)}const f={iconSmall:"tuiIconChevronDown",iconLarge:"tuiIconChevronDownLarge"},w=new n.OlP("[TUI_ARROW_OPTIONS]",{factory:()=>f}),U=new n.OlP("[TUI_ARROW_MODE]",{factory:()=>({interactive:J,disabled:J})}),J=new c.Al((()=>{class I{constructor(x,S,E){this.dropdown=x,this.textfieldSize=S,this.options=E}get rotated(){return this.dropdown.open}get arrowIcon(){return(0,_.R9)(this.textfieldSize.size)?this.options.iconLarge:this.options.iconSmall}}return I.\u0275fac=function(x){return new(x||I)(n.Y36(e.o1),n.Y36(N.kI),n.Y36(w))},I.\u0275cmp=n.Xpm({type:I,selectors:[["tui-arrow"]],hostVars:2,hostBindings:function(x,S){2&x&&n.ekj("_rotated",S.rotated)},decls:3,vars:4,consts:[[3,"src",4,"polymorpheusOutlet"],[4,"ngIf"],[3,"src"]],template:function(x,S){1&x&&(n.YNc(0,A,1,1,"tui-svg",0),n.YNc(1,M,1,0,"ng-container",1),n.ALo(2,"async")),2&x&&(n.Q6J("polymorpheusOutlet",S.arrowIcon),n.xp6(1),n.Q6J("ngIf",n.lcZ(2,2,S.dropdown.openChange)))},dependencies:[a.PN,c.Li,Z.O5,Z.Ov],styles:["[_nghost-%COMP%]{transition-property:transform;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out;display:block;cursor:pointer;pointer-events:none}._rotated[_nghost-%COMP%]{transform:rotate(180deg)}"],changeDetection:0}),I})());let F=(()=>{class I{}return I.\u0275fac=function(x){return new(x||I)},I.\u0275mod=n.oAB({type:I}),I.\u0275inj=n.cJS({imports:[[Z.ez,a.EI,c.wq]]}),I})()},29093:(ue,Y,l)=>{l.d(Y,{VF:()=>ne,EB:()=>le,Xj:()=>ee});var n=l(70655),a=l(94650),_=l(66307),e=l(78595);let N=(()=>{class C{constructor(T){this.tuiSwipe=T}}return C.\u0275fac=function(T){return new(T||C)(a.Y36(e.$D))},C.\u0275dir=a.lG2({type:C,selectors:[["","tuiSwipe",""]],outputs:{tuiSwipe:"tuiSwipe"},features:[a._Bn([e.$D])]}),C})(),c=(()=>{class C{}return C.\u0275fac=function(T){return new(T||C)},C.\u0275mod=a.oAB({type:C}),C.\u0275inj=a.cJS({}),C})();var Z=l(38355),A=l(78535),M=l(71225),f=l(37414),w=l(82210),z=l(68923),U=l(36895),W=l(39300),H=l(59468),J=l(54004),F=l(18505),I=l(63900),g=l(80702),x=l(9892),S=l(69751),E=l(61135),Q=l(56451),X=l(39841),K=l(17445),ce=l(60515);function de(C,V){1&C&&a.GkF(0)}function re(C,V){if(1&C){const T=a.EpF();a.TgZ(0,"fieldset",5),a.NdJ("waIntersectionObservee",function(B){const b=a.CHM(T).index,d=a.oxw();return a.KtG(d.onIntersection(B[0],b))}),a.GkF(1,6),a.qZA()}if(2&C){const T=V.$implicit,k=V.index,B=a.oxw();a.Q6J("disabled",B.isDisabled(k))("ngStyle",B.getStyle(B.itemsCount)),a.xp6(1),a.Q6J("ngTemplateOutlet",T)}}let ae=(()=>{class C{constructor(T){this.elementRef=T,this.tuiCarouselScroll=(0,Z.mL)(this.elementRef.nativeElement,"wheel").pipe((0,W.h)(({deltaX:k})=>Math.abs(k)>20),(0,H.p)(500),(0,J.U)(({deltaX:k})=>Math.sign(k)),(0,F.b)(()=>{this.elementRef.nativeElement.scrollLeft=10}))}}return C.\u0275fac=function(T){return new(T||C)(a.Y36(a.SBq))},C.\u0275dir=a.lG2({type:C,selectors:[["","tuiCarouselScroll",""]],outputs:{tuiCarouselScroll:"tuiCarouselScroll"}}),C})(),le=(()=>{class C extends S.y{constructor(T,k){super(B=>this.output$.subscribe(B)),this.elementRef=T,this.visible$=k,this.duration$=new E.X(0),this.running$=(0,Q.T)((0,Z.mL)(this.elementRef.nativeElement,"mouseenter").pipe((0,J.U)(A.Iy)),(0,Z.mL)(this.elementRef.nativeElement,"touchstart").pipe((0,J.U)(A.Iy)),(0,Z.mL)(this.elementRef.nativeElement,"touchend").pipe((0,J.U)(A.Ye)),(0,Z.mL)(this.elementRef.nativeElement,"mouseleave").pipe((0,J.U)(A.Ye)),this.visible$),this.output$=(0,X.a)([this.duration$,this.running$]).pipe((0,I.w)(([B,y])=>B&&y?(0,K.F)(B):ce.E))}set duration(T){this.duration$.next(T)}set index(T){this.duration$.next(this.duration$.value)}}return C.\u0275fac=function(T){return new(T||C)(a.Y36(a.SBq),a.Y36(x.de))},C.\u0275dir=a.lG2({type:C,selectors:[["tui-carousel"]],inputs:{duration:"duration",index:"index"},features:[a.qOj]}),C})(),P=(()=>{class C{constructor(T){this.tuiCarouselAutoscroll=T}}return C.\u0275fac=function(T){return new(T||C)(a.Y36(le))},C.\u0275dir=a.lG2({type:C,selectors:[["","tuiCarouselAutoscroll",""]],outputs:{tuiCarouselAutoscroll:"tuiCarouselAutoscroll"}}),C})(),ne=(()=>{class C{constructor(T,k,B){this.changeDetectorRef=T,this.elementRef=k,this.isMobile=B,this.translate=0,this.draggable=!1,this.itemsCount=1,this.index=0,this.indexChange=new a.vpe,this.items=A.Mm,this.transitioned=!0}get transform(){return`translateX(${100*(this.transitioned?this.computedTranslate:this.translate)}%)`}onTransitioned(T){this.transitioned=T,T||(this.translate=this.computedTranslate)}getStyle(T){const k=100/T+"%";return{flexBasis:k,minWidth:k,maxWidth:k}}next(){this.updateIndex(this.index+1)}prev(){this.updateIndex(this.index-1)}isDisabled(T){return T<this.index||T>this.index+this.itemsCount}onIntersection({intersectionRatio:T},k){T&&1!==T&&!this.transitioned&&this.updateIndex(k-Math.floor(this.itemsCount/2))}onScroll(T){this.isMobile||this.updateIndex(this.index+T)}onPan(T){if(!this.computedDraggable)return;const{clientWidth:k}=this.elementRef.nativeElement;this.translate=(0,M.Ki)(T/k+this.translate,1-this.items.length/this.itemsCount,0)}onSwipe(T){"left"===T?this.next():"right"===T&&this.prev()}onAutoscroll(){this.updateIndex(this.index===this.items.length-1?0:this.index+1)}get computedTranslate(){return-this.index/this.itemsCount}get computedDraggable(){return this.isMobile||this.draggable}updateIndex(T){this.index=(0,M.Ki)(T,0,this.items.length-1),this.indexChange.emit(this.index),this.changeDetectorRef.markForCheck()}}return C.\u0275fac=function(T){return new(T||C)(a.Y36(a.sBO),a.Y36(a.SBq),a.Y36(f.fL))},C.\u0275cmp=a.Xpm({type:C,selectors:[["tui-carousel"]],contentQueries:function(T,k,B){if(1&T&&a.Suo(B,w.w,4,a.Rgc),2&T){let y;a.iGM(y=a.CRH())&&(k.items=y)}},hostVars:4,hostBindings:function(T,k){1&T&&a.NdJ("touchstart",function(){return k.onTransitioned(!1)})("touchend",function(){return k.onTransitioned(!0)})("mousedown",function(){return k.onTransitioned(!1)})("mouseup.silent",function(){return k.onTransitioned(!0)},!1,a.evT),2&T&&a.ekj("_draggable",k.draggable)("_transitioned",k.transitioned)},inputs:{draggable:"draggable",itemsCount:"itemsCount",index:"index"},outputs:{indexChange:"indexChange"},decls:6,vars:6,consts:[[4,"ngIf"],[1,"t-scroller",3,"tuiCarouselScroll"],["waIntersectionRoot","","waIntersectionObserver","","waIntersectionThreshold","0,1","waIntersectionRootMargin","100px 1000000px 100px -51%",1,"t-wrapper"],[1,"t-items",3,"tuiPan","tuiSwipe","tuiCarouselAutoscroll"],["class","t-item",3,"disabled","ngStyle","waIntersectionObservee",4,"ngFor","ngForOf"],[1,"t-item",3,"disabled","ngStyle","waIntersectionObservee"],[3,"ngTemplateOutlet"]],template:function(T,k){1&T&&(a.YNc(0,de,1,0,"ng-container",0),a.ALo(1,"async"),a.TgZ(2,"div",1),a.NdJ("tuiCarouselScroll",function(y){return k.onScroll(y)}),a.TgZ(3,"div",2)(4,"div",3),a.NdJ("tuiPan",function(y){return k.onPan(y[0])})("tuiSwipe",function(y){return k.onSwipe(y.direction)})("tuiCarouselAutoscroll",function(){return k.onAutoscroll()}),a.YNc(5,re,2,3,"fieldset",4),a.qZA()()()),2&T&&(a.Q6J("ngIf",a.lcZ(1,4,k.items.changes)),a.xp6(4),a.Udp("transform",k.transform),a.xp6(1),a.Q6J("ngForOf",k.items))},dependencies:[U.O5,ae,g.Q7,g.Z7,_.g,N,P,U.sg,U.PC,g.AY,U.tP,U.Ov],styles:['[_nghost-%COMP%]{position:relative;display:block;overflow:hidden}._draggable[_nghost-%COMP%]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}._draggable[_nghost-%COMP%]:hover{cursor:-webkit-grab;cursor:grab}._draggable[_nghost-%COMP%]:active{cursor:-webkit-grabbing;cursor:grabbing}.t-items[_ngcontent-%COMP%]{display:flex}._transitioned[_nghost-%COMP%]   .t-items[_ngcontent-%COMP%]{transition-property:transform;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out}.t-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;padding:var(--tui-carousel-padding, 0 1.25rem);flex:1;min-width:100%;max-width:100%;box-sizing:border-box;border:none;margin:0}.t-wrapper[_ngcontent-%COMP%]{position:-webkit-sticky;position:sticky;left:0;right:0;min-width:100%;overflow:hidden}.t-scroller[_ngcontent-%COMP%]{scrollbar-width:none;-ms-overflow-style:none;display:flex;overflow:auto;overscroll-behavior-x:none;padding-bottom:2rem;margin-bottom:-2rem}.t-scroller[_ngcontent-%COMP%]::-webkit-scrollbar, .t-scroller[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:transparent;width:0;height:0}.t-scroller[_ngcontent-%COMP%]:before, .t-scroller[_ngcontent-%COMP%]:after{content:"";display:block;min-width:1rem}'],changeDetection:0}),(0,n.gn)([(0,z.TH)()],C.prototype,"draggable",void 0),(0,n.gn)([(0,z.TH)()],C.prototype,"itemsCount",void 0),(0,n.gn)([(0,z.TH)()],C.prototype,"index",void 0),(0,n.gn)([z.UM],C.prototype,"getStyle",null),C})(),ee=(()=>{class C{}return C.\u0275fac=function(T){return new(T||C)},C.\u0275mod=a.oAB({type:C}),C.\u0275inj=a.cJS({imports:[[U.ez,g.$v,_.N,c,w.H]]}),C})()},35601:(ue,Y,l)=>{l.d(Y,{h:()=>c,y:()=>Z});var n=l(70655),a=l(94650),_=l(68923),e=l(36895);const N=["*"];let c=(()=>{class A{constructor(){this.size="m",this.textAlign="left",this.hoverable=!1,this.transparent=!1}get sizeS(){return"s"===this.size}get sizeM(){return"m"===this.size}get sizeL(){return"l"===this.size}get textAlignLeft(){return"left"===this.textAlign}get textAlignCenter(){return"center"===this.textAlign}get textAlignRight(){return"right"===this.textAlign}}return A.\u0275fac=function(f){return new(f||A)},A.\u0275cmp=a.Xpm({type:A,selectors:[["tui-island"],["a","tuiIsland",""]],hostAttrs:[1,"tui-island"],hostVars:16,hostBindings:function(f,w){2&f&&a.ekj("tui-island_hoverable",w.hoverable)("tui-island_transparent",w.transparent)("tui-island_size_s",w.sizeS)("tui-island_size_m",w.sizeM)("tui-island_size_l",w.sizeL)("tui-island_text-align_left",w.textAlignLeft)("tui-island_text-align_center",w.textAlignCenter)("tui-island_text-align_right",w.textAlignRight)},inputs:{size:"size",textAlign:"textAlign",hoverable:"hoverable",transparent:"transparent"},ngContentSelectors:N,decls:1,vars:0,template:function(f,w){1&f&&(a.F$t(),a.Hsn(0))},styles:["[_nghost-%COMP%]{display:block}"],changeDetection:0}),(0,n.gn)([(0,_.TH)()],A.prototype,"size",void 0),(0,n.gn)([(0,_.TH)()],A.prototype,"textAlign",void 0),(0,n.gn)([(0,_.TH)()],A.prototype,"hoverable",void 0),(0,n.gn)([(0,_.TH)()],A.prototype,"transparent",void 0),A})(),Z=(()=>{class A{}return A.\u0275fac=function(f){return new(f||A)},A.\u0275mod=a.oAB({type:A}),A.\u0275inj=a.cJS({imports:[[e.ez]]}),A})()},77975:(ue,Y,l)=>{l.d(Y,{VT:()=>fe,Qp:()=>Ae,lm:()=>De});var n=l(70655),a=l(94650),_=l(93422),e=l(66437),N=l(77721),c=l(1054),Z=l(78535),A=l(55753),M=l(39255),f=l(37414),w=l(68923),z=l(54227),U=l(90433),W=l(91127),H=l(71115),J=l(47846),F=l(31947),I=l(53861),g=l(8276),x=l(79791);class Q{constructor(O,p){this.item=O,this.stringify=p}toString(){return this.stringify(this.item)}}var X=l(68341),K=l(4053),ce=l(87377),de=l(15135),re=l(36895),ae=l(89740),le=l(74606),P=l(42973);let ne=(()=>{class v extends le.TA{get size(){var p;return"l"===this.option.size||"l"===(null===(p=this.dataList)||void 0===p?void 0:p.size)&&!this.option.size?"l":"m"}get selected(){const{value:p}=this.option;return(0,A.Pc)(p)&&(0,A.Pc)(this.value)&&this.value.some(m=>this.matcher(m,p))}}return v.\u0275fac=function(){let O;return function(m){return(O||(O=a.n5z(v)))(m||v)}}(),v.\u0275cmp=a.Xpm({type:v,selectors:[["tui-multi-select-option"]],features:[a.qOj],decls:3,vars:5,consts:[[1,"t-checkbox",3,"size","value"],[3,"ngTemplateOutlet"]],template:function(p,m){1&p&&(a._UZ(0,"tui-primitive-checkbox",0),a.ALo(1,"async"),a.GkF(2,1)),2&p&&(a.Q6J("size",m.size)("value",a.lcZ(1,3,m.selected$)),a.xp6(2),a.Q6J("ngTemplateOutlet",m.context.$implicit))},dependencies:[P.r3,re.tP,re.Ov],styles:["@keyframes _ngcontent-%COMP%_retrigger{0%{left:1px}to{left:2px}}[_nghost-%COMP%]{display:flex;flex:1;align-items:center;overflow:hidden;animation:_ngcontent-%COMP%_retrigger 1s}.t-checkbox[_ngcontent-%COMP%]{margin-right:.75rem}"],changeDetection:0}),v})(),R=(()=>{class v{}return v.\u0275fac=function(p){return new(p||v)},v.\u0275mod=a.oAB({type:v}),v.\u0275inj=a.cJS({imports:[[re.ez,P.fB]]}),v})();function ee(v,O){if(1&v&&(a.ynx(0),a._uU(1),a.BQk()),2&v){const p=O.polymorpheusOutlet;a.xp6(1),a.hij(" ",p," ")}}const C=function(v){return{$implicit:v}};function V(v,O){if(1&v&&(a.TgZ(0,"div",6),a.YNc(1,ee,2,1,"ng-container",7),a.qZA()),2&v){const p=a.oxw(),m=a.MAs(2);a.ekj("t-group_fullsize",m.labelOutside),a.xp6(1),a.Q6J("polymorpheusOutlet",p.valueContent)("polymorpheusOutletContext",a.VKq(4,C,p.value))}}function T(v,O){if(1&v&&(a.ynx(0),a._uU(1),a.BQk()),2&v){const p=O.polymorpheusOutlet;a.xp6(1),a.hij(" ",p," ")}}function k(v,O){if(1&v&&(a.TgZ(0,"div",9),a.YNc(1,T,2,1,"ng-container",10),a.qZA()),2&v){const p=a.oxw(2);a.xp6(1),a.Q6J("polymorpheusOutlet",p.arrow)}}function B(v,O){if(1&v&&a.YNc(0,k,2,1,"div",8),2&v){const p=a.oxw();a.Q6J("ngIf",p.arrow)}}const y=["*"],q={expandable:!0,valueContent:""},oe=new a.OlP("[TUI_MULTI_SELECT_OPTIONS]",{factory:()=>q});let fe=(()=>{class v extends c.m6{constructor(p,m,L,G,j,pe){super(p,m),this.arrowMode=L,this.itemsHandlers=G,this.options=j,this.controller=pe,this.stringify=this.itemsHandlers.stringify,this.identityMatcher=this.itemsHandlers.identityMatcher,this.expandable=this.options.expandable,this.search="",this.placeholder="",this.editable=!0,this.disabledItemHandler=this.itemsHandlers.disabledItemHandler,this.valueContent=this.options.valueContent,this.rows=1/0,this.searchChange=new a.vpe,this.datalist="",this.open=!1,this.valueMapper=(xe,he,ke)=>ke?Z.LZ:xe.map(Oe=>new Q(Oe,he)),this.disabledItemHandlerWrapper=xe=>he=>(0,A.Aj)(he)||xe(he.item)}get size(){return this.controller.size}get arrow(){return this.interactive?this.arrowMode.interactive:this.arrowMode.disabled}get nativeFocusableElement(){var p,m;return null!==(m=null===(p=this.input)||void 0===p?void 0:p.nativeFocusableElement)&&void 0!==m?m:null}get focused(){var p,m;return!(null===(p=this.input)||void 0===p||!p.focused)||!(null===(m=this.hostedDropdown)||void 0===m||!m.focused)}get computedValue(){return this.computedGroup?Z.LZ:this.value}get searchOrSpace(){return this.computedGroup?" ":this.searchString}get searchString(){return null===this.search?"":this.search}get computedGroup(){return!!this.valueContent&&this.value.length>0&&(!this.focused||!this.editable)}getStringifier(p){return({$implicit:m})=>p(m)}onSpace(p){this.editable||p.preventDefault(),this.readOnly||(this.open=!0)}handleOption(p){const{value:m,identityMatcher:L}=this,G=m.findIndex(j=>L(j,p));this.updateValue(-1===G?[...m,p]:m.filter((j,pe)=>pe!==G)),this.updateSearch(null)}onEnter(p){const{value:m}=this,L=this.accessor?this.accessor.getOptions():[];1===L.length&&(p.preventDefault(),this.updateValue((0,A.jp)(m,L[0])),this.updateSearch(null))}onClick({nativeFocusableElement:p}){var m;this.interactive&&p&&(0,M.V8)(p)&&(null===(m=this.hostedDropdown)||void 0===m||m.updateOpen(!this.open))}onInput(p){this.updateValue(p.map(({item:m})=>m))}onSearch(p){this.open=!0,this.updateSearch(p)}onActiveZone(p){this.updateFocused(p)}setDisabledState(){super.setDisabledState(),this.open=!1}updateSearch(p){this.search!==p&&(this.search=p,this.searchChange.emit(p))}}return v.\u0275fac=function(p){return new(p||v)(a.Y36(U.a5,10),a.Y36(a.sBO),a.Y36(X.Ii),a.Y36(de.Ys),a.Y36(oe),a.Y36(H.Cs))},v.\u0275cmp=a.Xpm({type:v,selectors:[["tui-multi-select"]],contentQueries:function(p,m,L){if(1&p&&(a.Suo(L,F.Cc,5),a.Suo(L,I.gX,5,a.Rgc)),2&p){let G;a.iGM(G=a.CRH())&&(m.accessor=G.first),a.iGM(G=a.CRH())&&(m.datalist=G.first)}},viewQuery:function(p,m){if(1&p&&(a.Gf(W.o1,5),a.Gf(K.PZ,5)),2&p){let L;a.iGM(L=a.CRH())&&(m.hostedDropdown=L.first),a.iGM(L=a.CRH())&&(m.input=L.first)}},hostVars:3,hostBindings:function(p,m){2&p&&(a.uIk("data-size",m.size),a.ekj("_editable",m.editable))},inputs:{stringify:"stringify",identityMatcher:"identityMatcher",expandable:"expandable",search:"search",placeholder:"placeholder",editable:"editable",disabledItemHandler:"disabledItemHandler",valueContent:"valueContent",rows:"rows"},outputs:{searchChange:"searchChange"},features:[a._Bn([(0,f.FT)(v),(0,c.wB)(v),(0,F.oE)(v),H.Y0],[ce.yn]),a.qOj],ngContentSelectors:y,decls:10,vars:28,consts:[[1,"t-hosted",3,"canOpen","content","open","openChange","tuiActiveZoneChange"],["automation-id","tui-multi-select__input",1,"t-input",3,"nativeId","tuiTextfieldIcon","disabled","disabledItemHandler","readOnly","inputHidden","pseudoHover","placeholder","pseudoFocus","pseudoInvalid","editable","expandable","search","rows","ngModel","ngModelChange","searchChange","keydown.space","keydown.enter","click.prevent"],["inputTag",""],[1,"t-wrapper"],["class","t-group",3,"t-group_fullsize",4,"ngIf"],["icon",""],[1,"t-group"],[4,"polymorpheusOutlet","polymorpheusOutletContext"],["tuiWrapper","","appearance","icon","automation-id","tui-multi-select__arrow","tuiPreventDefault","mousedown","class","t-arrow",4,"ngIf"],["tuiWrapper","","appearance","icon","automation-id","tui-multi-select__arrow","tuiPreventDefault","mousedown",1,"t-arrow"],[4,"polymorpheusOutlet"]],template:function(p,m){if(1&p){const L=a.EpF();a.F$t(),a.TgZ(0,"tui-hosted-dropdown",0),a.NdJ("openChange",function(j){return m.open=j})("tuiActiveZoneChange",function(j){return m.onActiveZone(j)}),a.TgZ(1,"tui-input-tag",1,2),a.NdJ("ngModelChange",function(j){return m.onInput(j)})("searchChange",function(j){return m.onSearch(j)})("keydown.space",function(j){return m.onSpace(j)})("keydown.enter",function(j){return m.onEnter(j)})("click.prevent",function(){a.CHM(L);const j=a.MAs(2);return a.KtG(m.onClick(j))}),a.ALo(3,"tuiMapper"),a.ALo(4,"tuiMapper"),a.Hsn(5),a.qZA(),a.TgZ(6,"div",3),a.YNc(7,V,2,6,"div",4),a.YNc(8,B,1,1,"ng-template",null,5,a.W1O),a.qZA()()}if(2&p){const L=a.MAs(9);a.Q6J("canOpen",m.interactive)("content",m.datalist||"")("open",m.open),a.xp6(1),a.Q6J("nativeId",m.nativeId)("tuiTextfieldIcon",L)("disabled",m.disabled)("disabledItemHandler",a.xi3(3,21,m.disabledItemHandler,m.disabledItemHandlerWrapper))("readOnly",m.readOnly)("inputHidden",!m.editable)("pseudoHover",m.pseudoHover)("placeholder",m.placeholder)("pseudoFocus",m.computedFocused)("pseudoInvalid",m.computedInvalid)("editable",!1)("expandable",m.expandable)("search",m.searchOrSpace)("rows",m.rows)("ngModel",a.Dn7(4,24,m.computedValue,m.valueMapper,m.stringify)),a.xp6(5),a.ekj("t-wrapper_disabled",m.disabled),a.xp6(1),a.Q6J("ngIf",m.computedGroup)}},dependencies:[W.o1,K.PZ,_.e,H.AW,U.JJ,U.On,re.O5,ae.Li,J.o,e.A,N.c],styles:["[_nghost-%COMP%]{position:relative;display:block;border-radius:var(--tui-radius-m)}._disabled[_nghost-%COMP%]{pointer-events:none}.t-hosted[_ngcontent-%COMP%]{display:block;border-radius:inherit}.t-input[_ngcontent-%COMP%]{border-radius:inherit}[_nghost-%COMP%]:not(._editable):not(._readonly)   .t-input[_ngcontent-%COMP%]{cursor:pointer}.t-wrapper[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;display:flex;pointer-events:none;justify-content:flex-end}.t-wrapper_disabled[_ngcontent-%COMP%]{opacity:var(--tui-disabled-opacity)}[data-size=s][_nghost-%COMP%]   .t-wrapper[_ngcontent-%COMP%]{height:var(--tui-height-s)}[data-size=m][_nghost-%COMP%]   .t-wrapper[_ngcontent-%COMP%]{height:var(--tui-height-m)}[data-size=l][_nghost-%COMP%]   .t-wrapper[_ngcontent-%COMP%]{height:var(--tui-height-l)}.t-group[_ngcontent-%COMP%]{display:flex;flex:1;align-items:center;padding:1.6875rem 0 .5625rem 1rem;overflow:hidden}.t-group_fullsize[_ngcontent-%COMP%]{padding-top:.0625rem;padding-bottom:0}[data-size=m][_nghost-%COMP%]   .t-group_fullsize.t-group_fullsize[_ngcontent-%COMP%]{padding-top:0}[data-size=m][_nghost-%COMP%]   .t-group[_ngcontent-%COMP%]{padding:1.1875rem 0 0 .75rem;font-size:.8125rem}.t-arrow[_ngcontent-%COMP%]{pointer-events:auto;cursor:pointer}"],changeDetection:0}),(0,n.gn)([(0,w.TH)()],v.prototype,"stringify",void 0),(0,n.gn)([(0,w.TH)()],v.prototype,"identityMatcher",void 0),(0,n.gn)([(0,w.TH)()],v.prototype,"expandable",void 0),(0,n.gn)([(0,w.TH)()],v.prototype,"search",void 0),(0,n.gn)([(0,w.TH)()],v.prototype,"placeholder",void 0),(0,n.gn)([(0,w.TH)()],v.prototype,"editable",void 0),(0,n.gn)([(0,w.TH)()],v.prototype,"disabledItemHandler",void 0),(0,n.gn)([(0,w.TH)()],v.prototype,"valueContent",void 0),(0,n.gn)([w.UM],v.prototype,"getStringifier",null),v})();const Fe=new ae.Al(ne);let Ae=(()=>{class v{}return v.\u0275fac=function(p){return new(p||v)},v.\u0275dir=a.lG2({type:v,selectors:[["","tuiMultiSelectGroup",""]],features:[a._Bn([(0,F.P7)(Fe),{provide:F.N1,deps:[U.a5,[new a.FiY,(0,a.Gpc)(()=>fe)]],useFactory:(O,p)=>p||{handleOption:m=>{var L;return null===(L=O.control)||void 0===L?void 0:L.setValue((0,A.jp)(O.value||[],m))}}},{provide:U.JU,multi:!0,useValue:{writeValue:Z.iD,registerOnChange:Z.iD,registerOnTouched:Z.iD}}])]}),v})(),De=(()=>{class v{}return v.\u0275fac=function(p){return new(p||v)},v.\u0275mod=a.oAB({type:v}),v.\u0275inj=a.cJS({imports:[[re.ez,U.u5,ae.wq,J.W,e.Z,_.A,X.Mt,z.WD,N.I,g.EI,W.jh,K.cB,R,x.j,I.pc,H.cn]]}),v})()},67155:(ue,Y,l)=>{l.d(Y,{V5:()=>I,iv:()=>z,vV:()=>J});var n=l(36895),a=l(94650),_=l(68923),e=l(58459),N=l(70655);const c=["tuiProgressBar",""],A=["tuiProgressLabel",""],M=[[["progress"]],[["tui-progress-circle"]],"*"],f=["progress","tui-progress-circle","*"];let z=(()=>{class g{constructor(){this.size="m"}}return g.\u0275fac=function(S){return new(S||g)},g.\u0275cmp=a.Xpm({type:g,selectors:[["progress","tuiProgressBar",""]],hostVars:3,hostBindings:function(S,E){2&S&&(a.uIk("data-size",E.size),a.Udp("--tui-progress-color",E.color))},inputs:{color:"color",size:"size"},attrs:c,decls:0,vars:0,template:function(S,E){},styles:["@keyframes _ngcontent-%COMP%_tuiIndeterminateAnimation{50%{background-position:left}}[_nghost-%COMP%]{-webkit-appearance:none;-moz-appearance:none;appearance:none;border:none;background-color:var(--tui-base-03);display:block;width:100%;color:var(--tui-primary);border-radius:var(--tui-radius-xs);overflow:hidden}[_nghost-%COMP%]::-webkit-progress-value{-webkit-transition:width var(--tui-duration) linear;transition:width var(--tui-duration) linear}[_nghost-%COMP%]::-webkit-progress-value{background:var(--tui-progress-color, currentColor)}[_nghost-%COMP%]::-moz-progress-bar{background:var(--tui-progress-color, currentColor)}[_nghost-%COMP%]::-webkit-progress-bar{background-color:var(--tui-base-03)}[data-size=m][_nghost-%COMP%]{height:1.5rem}[data-size=s][_nghost-%COMP%]{height:.5rem}[data-size=s][_nghost-%COMP%]::-webkit-progress-value{border-radius:var(--tui-radius-xs)}[data-size=s][_nghost-%COMP%]::-moz-progress-bar{border-radius:var(--tui-radius-xs)}[_nghost-%COMP%]:indeterminate{background:transparent;background-image:linear-gradient(to right,var(--tui-base-03) 0 45%,var(--tui-progress-color, currentColor) 45% 55%,var(--tui-base-03) 55% 100%);background-size:225%;background-position:right;animation:_ngcontent-%COMP%_tuiIndeterminateAnimation 3s infinite ease-in-out}[_nghost-%COMP%]:indeterminate::-webkit-progress-bar{background:transparent}[_nghost-%COMP%]:indeterminate::-webkit-progress-value{background:transparent}[_nghost-%COMP%]:indeterminate::-moz-progress-bar{background:transparent}label[tuiProgressLabel][_nghost-%COMP%]:not(:first-child), label[tuiProgressLabel]   [_nghost-%COMP%]:not(:first-child){position:absolute;top:0;left:0;width:100%;height:100%;background-color:transparent}label[tuiProgressLabel][_nghost-%COMP%]:not(:first-child)::-webkit-progress-bar, label[tuiProgressLabel]   [_nghost-%COMP%]:not(:first-child)::-webkit-progress-bar{background-color:transparent}"],changeDetection:0}),(0,N.gn)([(0,_.TH)()],g.prototype,"size",void 0),g})(),J=(()=>{class g{}return g.\u0275fac=function(S){return new(S||g)},g.\u0275cmp=a.Xpm({type:g,selectors:[["label","tuiProgressLabel",""]],attrs:A,ngContentSelectors:f,decls:4,vars:0,consts:[[1,"t-label"]],template:function(S,E){1&S&&(a.F$t(M),a.Hsn(0),a.Hsn(1,1),a.TgZ(2,"span",0),a.Hsn(3,2),a.qZA())},styles:["[_nghost-%COMP%]{position:relative;display:inline-block}.t-label[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;display:flex;font:var(--tui-font-text-s);color:var(--tui-text-01);flex-direction:column;justify-content:center;align-items:center}"],changeDetection:0}),g})(),I=(()=>{class g{}return g.\u0275fac=function(S){return new(S||g)},g.\u0275mod=a.oAB({type:g}),g.\u0275inj=a.cJS({imports:[[n.ez,e.Ih]]}),g})()},74606:(ue,Y,l)=>{l.d(Y,{TA:()=>re,Ig:()=>le});var n=l(94650),a=l(90433),_=l(38355),e=l(78535),N=l(55753),c=l(1054),Z=l(8276),A=l(70655),M=l(78595),f=l(68923),w=l(95825),z=l(5963),U=l(82722);let W=(()=>{class P{constructor(R,ee){this.elementRef=R,this.destroy$=ee}set tuiScrollIntoView(R){R&&(0,z.H)(0).pipe((0,U.R)(this.destroy$)).subscribe(()=>{this.elementRef.nativeElement.dispatchEvent(new CustomEvent(w.fe,{bubbles:!0,detail:this.elementRef.nativeElement}))})}}return P.\u0275fac=function(R){return new(R||P)(n.Y36(n.SBq),n.Y36(M.a3,2))},P.\u0275dir=n.lG2({type:P,selectors:[["","tuiScrollIntoView",""]],inputs:{tuiScrollIntoView:"tuiScrollIntoView"},features:[n._Bn([M.a3])]}),(0,A.gn)([(0,f.NH)()],P.prototype,"tuiScrollIntoView",null),P})(),H=(()=>{class P{}return P.\u0275fac=function(R){return new(R||P)},P.\u0275mod=n.oAB({type:P}),P.\u0275inj=n.cJS({}),P})();var J=l(31947),F=l(53861),I=l(89740),g=l(77579),x=l(56451),S=l(60515),E=l(68675),Q=l(54004),X=l(71884),K=l(36895);function ce(P,ne){1&P&&n._UZ(0,"tui-svg",3),2&P&&n.Q6J("tuiScrollIntoView",!0)}function de(P,ne){1&P&&n._UZ(0,"span",4)}let re=(()=>{class P{constructor(R,ee,C,V,T,k,B){this.context=R,this.host=ee,this.elementRef=C,this.option=V,this.dataList=T,this.control=k,this.abstractControl=B,this.changeDetection$=new g.x,this.selected$=(0,x.T)(this.changeDetection$,this.control.valueChanges||S.E,(0,_.mL)(this.elementRef.nativeElement,"animationstart")).pipe((0,E.O)(null),(0,Q.U)(()=>this.selected),(0,X.x)())}get matcher(){return this.host.identityMatcher||e.bg}ngDoCheck(){this.changeDetection$.next()}ngOnInit(){Promise.resolve().then(()=>{(0,N.Pc)(this.option.value)&&this.host.checkOption&&this.host.checkOption(this.option.value)})}get value(){var R,ee;return null!==(ee=null===(R=this.abstractControl)||void 0===R?void 0:R.value)&&void 0!==ee?ee:this.control.value}get selected(){return(0,N.Pc)(this.option.value)&&(0,N.Pc)(this.value)&&this.matcher(this.value,this.option.value)}}return P.\u0275fac=function(R){return new(R||P)(n.Y36(I.yf),n.Y36(J.N1),n.Y36(n.SBq),n.Y36(F.vK),n.Y36(F.qi,8),n.Y36(a.a5),n.Y36(c.M$,8))},P.\u0275cmp=n.Xpm({type:P,selectors:[["tui-select-option"]],decls:5,vars:5,consts:[[3,"ngTemplateOutlet"],["automation-id","tui-select-option__checkmark","src","tuiIconCheckLarge","class","t-checkmark",3,"tuiScrollIntoView",4,"ngIf","ngIfElse"],["dummy",""],["automation-id","tui-select-option__checkmark","src","tuiIconCheckLarge",1,"t-checkmark",3,"tuiScrollIntoView"],[1,"t-dummy"]],template:function(R,ee){if(1&R&&(n.GkF(0,0),n.YNc(1,ce,1,1,"tui-svg",1),n.ALo(2,"async"),n.YNc(3,de,1,0,"ng-template",null,2,n.W1O)),2&R){const C=n.MAs(4);n.Q6J("ngTemplateOutlet",ee.context.$implicit),n.xp6(1),n.Q6J("ngIf",n.lcZ(2,3,ee.selected$))("ngIfElse",C)}},dependencies:[Z.PN,K.tP,K.O5,W,K.Ov],styles:["@keyframes _ngcontent-%COMP%_retrigger{0%{left:1px}to{left:2px}}[_nghost-%COMP%]{display:flex;flex:1;align-items:center;max-width:100%;animation:_ngcontent-%COMP%_retrigger 1s}.t-checkmark[_ngcontent-%COMP%]{margin:0 -.375rem 0 auto;border-left:5px solid transparent}.t-dummy[_ngcontent-%COMP%]{width:1.5rem}"],changeDetection:0}),P})();new I.Al(re);let le=(()=>{class P{}return P.\u0275fac=function(R){return new(R||P)},P.\u0275mod=n.oAB({type:P}),P.\u0275inj=n.cJS({imports:[[K.ez,Z.EI,H]]}),P})()},94813:(ue,Y,l)=>{l.d(Y,{j:()=>a});var n=l(54004);function a(..._){const e=_.length;if(0===e)throw new Error("list of properties cannot be empty.");return(0,n.U)(N=>{let c=N;for(let Z=0;Z<e;Z++){const A=c?.[_[Z]];if(!(typeof A<"u"))return;c=A}return c})}}}]);