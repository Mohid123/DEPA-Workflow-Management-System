"use strict";(self.webpackChunkDEPA_FRONTEND=self.webpackChunkDEPA_FRONTEND||[]).push([[690],{88690:(j,U,a)=>{a.r(U),a.d(U,{AppListingModule:()=>ee});var i=a(36895),s=a(19132),g=a(4266),e=a(94650);class A{constructor(n,t){this.ac=n,this.router=t;let r=(0,g.rV)(g.MX.moduleSlug)||"",u=(0,g.rV)(g.MX.moduleID)||"";"/modules"==this.router.url&&this.router.navigate(["/modules",r],{queryParams:{moduleID:u}})}}A.\u0275fac=function(n){return new(n||A)(e.Y36(s.gz),e.Y36(s.F0))},A.\u0275cmp=e.Xpm({type:A,selectors:[["app-app-listing"]],decls:1,vars:0,template:function(n,t){1&n&&e._UZ(0,"router-outlet")},dependencies:[s.lC]});var d=a(90433),E=a(1163),x=a(61135),I=a(77579),O=a(63900),y=a(82722),Q=a(15274),N=a(20696),L=a(46954),J=a(22603),z=a(56546),S=a(5754),w=a(71115),v=a(53861),Z=a(39367),k=a(13675),f=a(56772),b=a(75809),T=a(37378),M=a(4053),R=a(60101),V=a(77915);function G(o,n){if(1&o&&(e.ynx(0),e.TgZ(1,"option",42),e._uU(2),e.qZA(),e.BQk()),2&o){const t=n.$implicit;e.xp6(1),e.Q6J("value",null==t?null:t.value),e.xp6(1),e.Oqu(null==t?null:t.label)}}function te(o,n){1&o&&(e.TgZ(0,"label",52),e._uU(1,"Add new companies"),e.qZA())}function ie(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"button",53),e.NdJ("click",function(){e.CHM(t);const u=e.oxw(2);return e.KtG(u.submitNewCompany())}),e._uU(1,"Submit"),e.qZA()}}function W(o,n){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",43)(2,"div",44)(3,"div",45),e.YNc(4,te,2,0,"label",46),e._UZ(5,"input",47),e.qZA(),e.TgZ(6,"div",48)(7,"button",49),e.NdJ("click",function(){const p=e.CHM(t).index,h=e.oxw();return e.KtG(h.removeCompany(p))}),e.qZA()()(),e.TgZ(8,"div",50),e.YNc(9,ie,2,0,"button",51),e.qZA()(),e.BQk()}if(2&o){const t=n.index,r=n.first,u=n.last;e.xp6(1),e.Q6J("formGroupName",t),e.xp6(3),e.Q6J("ngIf",0==t),e.xp6(2),e.Q6J("ngClass",r?"mt-7":"mt-0"),e.xp6(3),e.Q6J("ngIf",u)}}function ne(o,n){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",56),e.NdJ("click",function(){const p=e.CHM(t).index,h=e.oxw(2);return e.KtG(h.activeIndex=p)}),e._uU(2),e.qZA(),e.BQk()}if(2&o){const t=n.$implicit;e.xp6(2),e.Oqu(t)}}function oe(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"div",58)(1,"div",50)(2,"a",59),e.NdJ("click",function(){e.CHM(t);const u=e.oxw().index,p=e.oxw(2);return e.KtG(p.sendFormForEdit(u))}),e._UZ(3,"i",60),e.qZA()(),e._UZ(4,"formio",61),e.qZA()}if(2&o){const t=e.oxw().$implicit,r=e.oxw(2);e.xp6(4),e.Q6J("language",r.language)("options",r.options)("form",t)}}function de(o,n){if(1&o&&(e.ynx(0),e.YNc(1,oe,5,3,"div",57),e.BQk()),2&o){const t=n.index,r=e.oxw(2);e.xp6(1),e.Q6J("ngIf",r.activeIndex==t)}}function H(o,n){if(1&o&&(e.ynx(0),e.TgZ(1,"section",54)(2,"nav",55),e.YNc(3,ne,3,1,"ng-container",12),e.qZA(),e.YNc(4,de,2,1,"ng-container",12),e.qZA(),e.BQk()),2&o){const t=e.oxw();e.xp6(3),e.Q6J("ngForOf",t.formTabs),e.xp6(1),e.Q6J("ngForOf",t.formComponents)}}function c(o,n){1&o&&(e.ynx(0),e.TgZ(1,"div",62),e._UZ(2,"div",63)(3,"div",63)(4,"div",64),e.qZA(),e.BQk())}function m(o,n){1&o&&(e.TgZ(0,"span",80),e._uU(1,"Please select either AND or OR as the condition"),e.qZA())}function l(o,n){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"p",65),e._uU(2),e.qZA(),e.TgZ(3,"div",66)(4,"div",67)(5,"label",4),e._uU(6,"Approvers "),e.TgZ(7,"span",5),e._uU(8,"*"),e.qZA()(),e.TgZ(9,"custom-multi-select",68),e.NdJ("checkUsersLength",function(u){const h=e.CHM(t).index,D=e.oxw();return e.KtG(D.countUsers(u,h))})("approverList",function(u){const h=e.CHM(t).index,D=e.oxw();return e.KtG(D.getApproverList(u,h))}),e.qZA(),e.YNc(10,m,2,0,"span",69),e.ALo(11,"async"),e.qZA(),e.TgZ(12,"div",67)(13,"label",70),e._uU(14,"Condition "),e.TgZ(15,"span",5),e._uU(16,"*"),e.qZA()(),e.TgZ(17,"select",71),e.NdJ("change",function(){const p=e.CHM(t).index,h=e.oxw();return e.KtG(h.validateSelection(p))}),e.TgZ(18,"option",72),e._uU(19,"AND"),e.qZA(),e.TgZ(20,"option",73),e._uU(21,"OR"),e.qZA(),e.TgZ(22,"option",74),e._uU(23,"NONE"),e.qZA()()(),e.TgZ(24,"div",75),e._UZ(25,"tui-tooltip",76),e.TgZ(26,"tui-badged-content",77)(27,"button",78),e.NdJ("click",function(){const p=e.CHM(t).index,h=e.oxw(),D=e.MAs(75);return e.KtG(h.openEmailNotifyModal(D,h.workflows,p))}),e.qZA()()(),e.TgZ(28,"div",79)(29,"button",49),e.NdJ("click",function(){const p=e.CHM(t).index,h=e.oxw();return e.KtG(h.removeWorkflowStep(p))}),e.qZA()()(),e.BQk()}if(2&o){const t=n.index,r=e.oxw(),u=e.MAs(77);let p;e.xp6(2),e.hij("Step ",0===t?"1":t+1,""),e.xp6(1),e.Q6J("formGroupName",t),e.xp6(7),e.Q6J("ngIf",e.lcZ(11,6,r.showError)&&t===r.errorIndex),e.xp6(15),e.Q6J("content",u),e.xp6(1),e.Q6J("contentTop",null==(p=r.workflows.at(t).get("emailNotifyTo"))||null==p.value?null:p.value.length)("colorTop","green")}}function _(o,n){if(1&o&&(e.ynx(0),e.TgZ(1,"div",81)(2,"span",82),e._uU(3),e.qZA()(),e.BQk()),2&o){const t=e.oxw().message;e.xp6(3),e.hij(" ",t," ")}}function C(o,n){if(1&o&&e.YNc(0,_,4,1,"ng-container",27),2&o){const t=n.control;e.Q6J("ngIf",t.hasError(n.validation)&&(t.dirty||t.touched))}}function P(o,n){if(1&o&&e._UZ(0,"tui-data-list-wrapper",91),2&o){const t=e.oxw(2);e.Q6J("items",t.userListForEmail)}}function Y(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"p",83),e._uU(1,"Email Notification Users"),e.qZA(),e.TgZ(2,"p",84),e._uU(3," Please specify the users you want to send the notification email to "),e.qZA(),e.TgZ(4,"div",85)(5,"tui-input-tag",86),e.NdJ("searchChange",function(u){e.CHM(t);const p=e.oxw();return e.KtG(p.onSearchChange(u))}),e._uU(6," Type to search and press Enter to select... "),e.YNc(7,P,1,1,"tui-data-list-wrapper",87),e.qZA()(),e.TgZ(8,"div",88)(9,"button",89),e.NdJ("click",function(){e.CHM(t);const u=e.oxw();return e.KtG(u.validateEmails())}),e._uU(10," Confirm & Close "),e.qZA(),e.TgZ(11,"button",90),e.NdJ("click",function(){e.CHM(t);const u=e.oxw();return e.KtG(u.cancelEmailNotify())}),e._uU(12," Remove Users & Close "),e.qZA()()}if(2&o){const t=e.oxw();e.xp6(5),e.Q6J("formControl",null==t.currentFieldArray||null==t.currentFieldArray.controls[t.activeEmailIndex]?null:t.currentFieldArray.controls[t.activeEmailIndex].controls.emailNotifyTo)("tuiTextfieldLabelOutside",!0)}}function q(o,n){1&o&&(e.TgZ(0,"strong",92),e._uU(1,"How conditions work?"),e.qZA(),e._UZ(2,"hr"),e.TgZ(3,"ul",93)(4,"li")(5,"strong"),e._uU(6,"AND"),e.qZA(),e._uU(7," implies that every user of the step must provide approval"),e.qZA(),e.TgZ(8,"li",13)(9,"strong"),e._uU(10,"OR"),e.qZA(),e._uU(11," implies that any one of the users may provide approval"),e.qZA(),e.TgZ(12,"li")(13,"strong"),e._uU(14,"NONE"),e.qZA(),e._uU(15," implies that there is only one user per step and hence no conditon is necessary"),e.qZA()())}const Ee=function(o){return{validation:"required",message:"Module URL is required",control:o}},Ze=function(o){return{validation:"required",message:"Company is required",control:o}};class re{constructor(n,t,r,u,p,h,D,F){this.fb=n,this.auth=t,this.transportService=r,this.router=u,this.dashboard=p,this.activatedRoute=h,this.notif=D,this.dialogs=F,this.formComponents=[],this.activeIndex=0,this.language=new e.vpe,this.langItems=[{name:"en"},{name:"ar"}],this.languageForm=new d.cw({languages:new d.NI(this.langItems[0])}),this.conditions=["OR","AND","ANY"],this.formTabs=[],this.subModuleFormIoValue=new x.X({}),this.destroy$=new I.x,this.isCreatingSubModule=new I.x,this.domainURL=window.location.origin,this.userListForEmail=[],this.search$=new I.x,this.saveDialogSubscription=[],this.limit=10,this.page=0,this.showError=new I.x,this.errorIndex=0,this.initSubModuleForm(),this.submoduleFromLS=this.transportService.subModuleDraft.value,this.getDefaultWorkflow(),this.formComponents=this.transportService.formBuilderData.value,this.formTabs=this.formComponents.map($=>$.title),this.getAllCompanies(),this.search$.pipe((0,O.w)($=>this.dashboard.getAllUsersForListing(this.limit,this.page,$))).subscribe($=>{$&&(this.userListForEmail=$?.results?.map(B=>B?.email))}),this.dashboard.getAllUsersForListing(this.limit,this.page).pipe((0,y.R)(this.destroy$)).subscribe($=>{$&&(this.userListForEmail=$?.results?.map(B=>B?.email))})}getDefaultWorkflow(){this.activatedRoute.params.pipe((0,y.R)(this.destroy$)).subscribe(n=>{n.id&&(this.redirectToModuleID=n.id,this.transportService.moduleID.next(n.id),this.dashboard.getWorkflowFromModule(n.id).subscribe(t=>{t&&this.initSubModuleForm(t),Object.keys(this.submoduleFromLS)?.length>0&&this.initSubModuleForm(this.submoduleFromLS)}))})}openEmailNotifyModal(n,t,r){this.activeEmailIndex=r,this.currentFieldArray=t,this.saveDialogSubscription.push(this.dialogs.open(n,{dismissible:!1,closeable:!1}).subscribe())}onSearchChange(n){this.search$.next(n)}validateEmails(){let n=this.workflows.at(this.activeEmailIndex)?.get("emailNotifyTo")?.value;n=n.map(t=>!!/\S+@\S+\.\S+/.test(t)),n.includes(!1)?this.notif.displayNotification("Please provide valid email addresses","Email Notify","warning"):this.saveDialogSubscription.forEach(t=>t.unsubscribe())}cancelEmailNotify(){this.workflows.at(this.activeEmailIndex)?.get("emailNotifyTo")?.setValue([]),this.saveDialogSubscription.forEach(n=>n.unsubscribe())}getAllCompanies(){this.dashboard.getAllCompanies(10,0).pipe((0,y.R)(this.destroy$)).subscribe(n=>{this.companyList=n.results?.map(t=>({value:t?.id,label:t?.title}))})}initSubModuleForm(n){this.subModuleForm=this.fb.group({subModuleUrl:[n?.subModuleUrl||null,d.kI.compose([d.kI.required])],companies:this.fb.array([]),code:[{value:n?.code,disabled:!0}],companyName:[n?.companyName||null,d.kI.required],adminUsers:[n?.adminUsers||[],d.kI.required],viewOnlyUsers:[n?.viewOnlyUsers||[],d.kI.required],workflows:this.fb.array(n?.workflows?n?.workflows?.map(t=>this.fb.group({condition:[t.condition,d.kI.required],approverIds:[t.approverIds,d.kI.required],emailNotifyTo:[t.emailNotifyTo||[],d.kI.required]})):n?.map(t=>this.fb.group({condition:[t.condition,d.kI.required],approverIds:[t.approverIds,d.kI.required],emailNotifyTo:[t.emailNotifyTo||[],d.kI.required]}))||[this.fb.group({condition:[null,d.kI.required],approverIds:[[],d.kI.required],emailNotifyTo:[[],d.kI.required]})])})}get f(){return this.subModuleForm.controls}get companies(){return this.f.companies}addCompany(){const n=this.fb.group({title:["",d.kI.required]});this.companies.push(n)}removeCompany(n){this.companies.removeAt(n)}get workflows(){return this.f.workflows}addWorkflowStep(){const n=this.fb.group({condition:["",d.kI.required],approverIds:[[],d.kI.required],emailNotifyTo:[[],d.kI.required]});this.workflows.push(n)}removeWorkflowStep(n){this.workflows.removeAt(n)}getApproverList(n,t){this.workflows.at(t)?.get("approverIds")?.setValue(n)}submitNewCompany(){const n={title:this.f.companies?.value[0]?.title,groupCode:this.f.companies?.value[0]?.title.replace(/\s/g,"-")};this.dashboard.addCompany(n).pipe((0,y.R)(this.destroy$)).subscribe(t=>{t&&(this.companies.reset(),this.companies.removeAt(0),this.getAllCompanies())})}saveDraft(){this.transportService.isFormEdit.next(!1),this.transportService.saveDraftLocally(this.subModuleForm.value),this.router.navigate(["/forms/form-builder"])}sendFormForEdit(n){this.transportService.isFormEdit.next(!0),this.transportService.sendFormDataForEdit.next(this.formComponents[n]),this.transportService.saveDraftLocally(this.subModuleForm.value),this.router.navigate(["/forms/form-builder"])}changeLanguage(n){this.language.emit(n)}saveSubModule(n){if(0==this.dataSubmitValidation())return this.subModuleForm.markAllAsTouched(),this.notif.displayNotification("Please provide complete data for all fields","Create Submodule","warning");if(this.workflows.controls.map(r=>r.get("approverIds")?.value.length>1&&r.get("condition")?.value).includes("none"))return this.notif.displayNotification("Please provide valid condition for the workflow step/s","Create Submodule","warning");this.isCreatingSubModule.next(!0);const t={url:`/modules/submodule-details/${this.subModuleForm.get("subModuleUrl")?.value.replace(/\s/g,"-")}`,moduleId:this.transportService.moduleID?.value,companyId:this.subModuleForm.get("companyName")?.value,code:this.subModuleForm.get("subModuleUrl")?.value.replace(/\s/g,"-"),adminUsers:this.subModuleForm.get("adminUsers")?.value?.map(r=>r?.id),viewOnlyUsers:this.subModuleForm.get("viewOnlyUsers")?.value?.map(r=>r?.id),formIds:this.formComponents,steps:this.workflows?.value?.map(r=>({approverIds:r?.approverIds?.map(u=>u.id?u.id:u),condition:r?.condition,emailNotifyTo:r?.emailNotifyTo||[]}))};n&&Object.assign(t,{status:n}),this.dashboard.createSubModule(t).pipe((0,y.R)(this.destroy$)).subscribe(r=>{r?(this.isCreatingSubModule.next(!1),this.transportService.saveDraftLocally({}),this.transportService.sendFormBuilderData([{title:"",key:"",display:"",components:[]}]),this.router.navigate(["/modules",(0,g.rV)(g.MX.moduleSlug)||""],{queryParams:{moduleID:(0,g.rV)(g.MX.moduleID)||""}})):this.isCreatingSubModule.next(!1)})}cancelSubmodule(){this.router.navigate(["/modules",(0,g.rV)(g.MX.moduleSlug)||""],{queryParams:{moduleID:(0,g.rV)(g.MX.moduleID)||""}})}dataSubmitValidation(){return!(this.f.subModuleUrl?.invalid||this.f.companyName?.invalid||0==this.f.adminUsers?.value?.length||0==this.f.viewOnlyUsers?.value?.length||0==this.workflows?.length||this.workflows.controls.map(n=>0==n.get("approverIds")?.value.length).includes(!0)||!0===this.workflows.controls.map(n=>n.get("condition")?.value).includes("")||0==Object.values(this.formComponents)[0]?.components?.length)}validateSelection(n){return this.errorIndex=n,this.workflows.at(n)?.get("approverIds")?.value?.length<2?(this.workflows.at(n)?.get("condition")?.setValue("none"),this.notif.displayNotification('Default condition of "None" will be used if the number of approvers is less than 2',"Create Submodule","info")):this.workflows.at(n)?.get("approverIds")?.value?.length>=2&&"none"==this.workflows.at(n)?.get("condition")?.value?this.showError.next(!0):void this.showError.next(!1)}countUsers(n,t){return this.errorIndex=t,n<2?(this.workflows.at(t)?.get("condition")?.setValue("none"),this.notif.displayNotification('Default condition of "None" will be used if the number of approvers is less than 2',"Create Module","info")):n>=2&&"none"==this.workflows.at(t)?.get("condition")?.value?this.showError.next(!0):void this.showError.next(!1)}setAdminUsers(n){this.subModuleForm?.get("adminUsers")?.setValue(n)}setViewUsers(n){this.subModuleForm?.get("viewOnlyUsers")?.setValue(n)}ngOnDestroy(){this.destroy$.complete(),this.destroy$.unsubscribe()}}re.\u0275fac=function(n){return new(n||re)(e.Y36(d.qu),e.Y36(Q.e),e.Y36(N.R),e.Y36(s.F0),e.Y36(L.s),e.Y36(s.gz),e.Y36(J.T),e.Y36(E.RO))},re.\u0275cmp=e.Xpm({type:re,selectors:[["ng-component"]],decls:78,vars:20,consts:[[1,"w-11/12","h-auto","min-h-screen","mx-auto","mt-52","pb-44"],[1,"text-xl","font-semibold"],[1,"block","pt-5",3,"formGroup"],[1,"my-3"],[1,"block","pb-1"],[1,"text-xs","text-red-400"],[1,"mb-3","input-group"],["required","","formControlName","subModuleUrl","type","text",1,"form-control",3,"ngClass"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"block","mb-2","text-xs","text-gray-600"],[1,"my-7"],["required","","formControlName","companyName","type","text",1,"form-control",3,"ngClass"],[4,"ngFor","ngForOf"],[1,"my-2"],[1,"text-xs","text-gray-500"],["formArrayName","companies"],["tuiIconButton","","type","button","size","m","appearance","secondary","icon","tuiIconPlusLarge",3,"click"],[1,"grid","grid-cols-12","gap-3","my-8"],[1,"col-span-6"],[1,"block","pb-1","text-sm"],[1,"text-red-500"],["formControlName","adminUsers",3,"approverList"],["formControlName","viewOnlyUsers",3,"approverList"],[1,"mb-5","mt-7"],[1,"mb-5","text-lg","font-semibold"],[1,"text-base","font-semibold","text-center"],[1,"flex","flex-col","w-full","px-5","mx-auto","mt-5","border","border-gray-400","border-dashed","rounded-md","bg-gray-50"],[4,"ngIf"],[1,"w-full","mx-auto","my-1"],[1,"mt-7"],[1,"px-5","py-3","rounded-lg","bg-[#a58f81]","no-underline","text-white","cursor-pointer","hover:text-white",3,"click"],[1,"mt-12"],[1,"text-lg","font-semibold"],[1,"my-2","text-sm","text-gray-500"],["formArrayName","workflows"],["tuiIconButton","","type","button","size","m","appearance","primary","icon","tuiIconPlusLarge",3,"click"],[1,"flex","justify-center","gap-2","mt-10"],["tuiButton","","type","button","size","m","appearance","primary",3,"showLoader","click"],["tuiButton","","type","button","size","m","appearance","accent",3,"click"],["formError",""],["template",""],["hint",""],[3,"value"],[1,"w-7/12","px-8",3,"formGroupName"],[1,"flex","items-center","justify-between","w-full","gap-2","mb-3"],[1,"w-full"],["class","block pb-2 text-xs font-semibold",4,"ngIf"],["formControlName","title","type","text",1,"form-control"],[3,"ngClass"],["tuiIconButton","","type","button","size","s","appearance","secondary-destructive","icon","tuiIconTrash2Large",3,"click"],[1,"flex","justify-end"],["tuiButton","","type","button","class","mb-3","size","m",3,"click",4,"ngIf"],[1,"block","pb-2","text-xs","font-semibold"],["tuiButton","","type","button","size","m",1,"mb-3",3,"click"],[1,"flex","justify-between","my-8"],["tuiTabs","","vertical","left",1,"w-32","mr-5"],["tuiTab","",3,"click"],["class","w-full well jsonviewer",4,"ngIf"],[1,"w-full","well","jsonviewer"],[1,"px-2","py-1","rounded-md","cursor-pointer","bg-slate-200",3,"click"],["aria-hidden","true",1,"fa","fa-pencil-square","fa-2x","text-slate-500","hover:text-slate-600"],[3,"language","options","form"],[1,"grid","grid-cols-12","gap-2"],["data-placeholder","",1,"h-8","col-span-6","my-3","overflow-hidden","bg-gray-200","rounded-md"],["data-placeholder","",1,"h-32","col-span-12","mb-3","overflow-hidden","bg-gray-200","rounded-md"],[1,"text-base","font-semibold","mt-7"],[1,"grid","grid-cols-12","gap-3","my-4",3,"formGroupName"],[1,"col-span-4"],["formControlName","approverIds",3,"checkUsersLength","approverList"],["class","text-xs text-red-500",4,"ngIf"],["for","conditionSelect",1,"block","pb-1"],["formControlName","condition","aria-label","Default select example","id","conditionSelect",1,"h-10","mt-2","form-select","form-control",3,"change"],["value","and"],["value","or"],["value","none"],[1,"col-span-1","mt-8","inline-flex"],["direction","right",1,"mr-4","mt-1","-ml-2",3,"content"],[3,"contentTop","colorTop"],["tuiIconButton","","type","button","size","s","appearance","outline","icon","tuiIconMailLarge",3,"click"],[1,"col-span-1","mt-8","-ml-4"],[1,"text-xs","text-red-500"],[1,"w-full","mt-1","text-left","fv-plugins-message-container","text-xxs","2xl:text-xs"],["role","alert",1,"text-red-400","fv-help-block","text-xxs","2xl:text-xs","2xl:mb-2"],[1,"text-lg","font-semibold","text-center"],[1,"mt-3","text-base","font-medium","text-gray-500"],[1,"flex","flex-col","justify-center","my-5"],[1,"b-form",3,"formControl","tuiTextfieldLabelOutside","searchChange"],[3,"items",4,"tuiDataList"],[1,"flex","justify-start","gap-x-3"],["tuiButton","","type","button","size","m",3,"click"],["appearance","accent","tuiButton","","type","button","size","m",3,"click"],[3,"items"],[1,"text-base"],[1,"mt-2"]],template:function(n,t){if(1&n&&(e._UZ(0,"app-header"),e.TgZ(1,"section",0)(2,"section")(3,"h3",1),e._uU(4,"Create new module"),e.qZA()(),e.TgZ(5,"form",2)(6,"div",3)(7,"label",4),e._uU(8,"Module URL Endpoint"),e.TgZ(9,"span",5),e._uU(10,"*"),e.qZA()(),e.TgZ(11,"div",6),e._UZ(12,"input",7),e.GkF(13,8),e.qZA(),e.TgZ(14,"p",9),e._uU(15,"Please provide an endpoint for your module"),e.qZA()(),e.TgZ(16,"div",10)(17,"label",4),e._uU(18,"Company Name "),e.TgZ(19,"span",5),e._uU(20,"*"),e.qZA()(),e.TgZ(21,"select",11),e.YNc(22,G,3,2,"ng-container",12),e.qZA(),e.GkF(23,8),e.qZA(),e.TgZ(24,"div",13)(25,"p",14),e._uU(26,"If your company isn't listed, you can add it below"),e.qZA()(),e.ynx(27,15),e.YNc(28,W,10,4,"ng-container",12),e.BQk(),e.TgZ(29,"button",16),e.NdJ("click",function(){return t.addCompany()}),e.qZA(),e.TgZ(30,"div",17)(31,"div",18)(32,"label",19),e._uU(33,"Admin users "),e.TgZ(34,"span",20),e._uU(35,"*"),e.qZA()(),e.TgZ(36,"custom-multi-select",21),e.NdJ("approverList",function(u){return t.setAdminUsers(u)}),e.qZA()(),e.TgZ(37,"div",18)(38,"label",19),e._uU(39,"View Only users "),e.TgZ(40,"span",20),e._uU(41,"*"),e.qZA()(),e.TgZ(42,"custom-multi-select",22),e.NdJ("approverList",function(u){return t.setViewUsers(u)}),e.qZA()()(),e.TgZ(43,"div",23)(44,"h3",24),e._uU(45,"Create Form"),e.qZA(),e.TgZ(46,"h4",25),e._uU(47,"Form/s Preview"),e.qZA(),e.TgZ(48,"div",26),e.YNc(49,H,5,2,"ng-container",27),e.YNc(50,c,5,0,"ng-container",27),e.qZA(),e.TgZ(51,"div",28)(52,"p",14),e._uU(53,"The form you add will appear here"),e.qZA()()(),e.TgZ(54,"div",29)(55,"a",30),e.NdJ("click",function(){return t.saveDraft()}),e._uU(56),e.qZA()(),e.TgZ(57,"div",31)(58,"h4",32),e._uU(59,"Modify default workflow"),e.qZA(),e.TgZ(60,"p",33),e._uU(61,"The default workflow will be used if you choose not to modify it"),e.qZA(),e.ynx(62,34),e.YNc(63,l,30,8,"ng-container",12),e.BQk(),e.TgZ(64,"button",35),e.NdJ("click",function(){return t.addWorkflowStep()}),e.qZA()(),e.TgZ(65,"div",36)(66,"button",37),e.NdJ("click",function(){return t.saveSubModule()}),e.ALo(67,"async"),e._uU(68," Publish "),e.qZA(),e.TgZ(69,"button",38),e.NdJ("click",function(){return t.cancelSubmodule()}),e._uU(70,"Cancel"),e.qZA()()()(),e._UZ(71,"app-footer"),e.YNc(72,C,1,1,"ng-template",null,39,e.W1O),e.YNc(74,Y,13,2,"ng-template",null,40,e.W1O),e.YNc(76,q,16,0,"ng-template",null,41,e.W1O)),2&n){const r=e.MAs(73);e.xp6(5),e.Q6J("formGroup",t.subModuleForm),e.xp6(7),e.Q6J("ngClass",null!=t.f.subModuleUrl&&t.f.subModuleUrl.invalid&&null!=t.f.subModuleUrl&&t.f.subModuleUrl.dirty?"is-invalid":""),e.xp6(1),e.Q6J("ngTemplateOutlet",r)("ngTemplateOutletContext",e.VKq(16,Ee,t.f.subModuleUrl)),e.xp6(8),e.Q6J("ngClass",null!=t.f.companyName&&t.f.companyName.invalid&&null!=t.f.companyName&&t.f.companyName.dirty?"is-invalid":""),e.xp6(1),e.Q6J("ngForOf",t.companyList),e.xp6(1),e.Q6J("ngTemplateOutlet",r)("ngTemplateOutletContext",e.VKq(18,Ze,t.f.companyName)),e.xp6(5),e.Q6J("ngForOf",t.companies.controls),e.xp6(21),e.Q6J("ngIf",(null==t.formComponents[0]||null==t.formComponents[0].components?null:t.formComponents[0].components.length)>0),e.xp6(1),e.Q6J("ngIf",0==(null==t.formComponents[0]||null==t.formComponents[0].components?null:t.formComponents[0].components.length)),e.xp6(6),e.hij(" ",0==(null==t.formComponents[0]||null==t.formComponents[0].components?null:t.formComponents[0].components.length)?"Add form":"Add another"," "),e.xp6(7),e.Q6J("ngForOf",t.workflows.controls),e.xp6(3),e.Q6J("showLoader",1==e.lcZ(67,14,t.isCreatingSubModule))}},dependencies:[i.mk,i.sg,i.O5,i.tP,z.G,S.c,w.xT,f.eC,v.gX,d._Y,d.YN,d.Kr,d.Fj,d.EJ,d.JJ,d.JL,d.Q7,d.oH,d.sg,d.u,d.x0,d.CE,Z.v0,R.k4,V.e,b.p_,b.uW,b.yu,T.V,M.PZ,k.w,i.Ov]});var ke=a(68538),Ne=a(94051);function Fe(o,n){if(1&o&&(e.ynx(0),e.TgZ(1,"option",37),e._uU(2),e.qZA(),e.BQk()),2&o){const t=n.$implicit;e.xp6(1),e.Q6J("value",null==t?null:t.value),e.xp6(1),e.Oqu(null==t?null:t.label)}}function Ue(o,n){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",40),e.NdJ("click",function(){const p=e.CHM(t).index,h=e.oxw(2);return e.KtG(h.activeIndex=p)}),e._uU(2),e.qZA(),e.BQk()}if(2&o){const t=n.$implicit;e.xp6(2),e.Oqu(t)}}function Le(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"div",42)(1,"div",43)(2,"a",44),e.NdJ("click",function(){e.CHM(t);const u=e.oxw(),p=u.index,h=u.$implicit,D=e.oxw(2);return e.KtG(D.sendFormForEdit(p,null==h?null:h.id))}),e._UZ(3,"i",45),e.qZA(),e.TgZ(4,"a",46),e.NdJ("click",function(){e.CHM(t);const u=e.oxw().$implicit,p=e.oxw(2);return e.KtG(p.deleteForm(null==u?null:u.id))}),e._UZ(5,"i",47),e.qZA()(),e._UZ(6,"formio",48),e.qZA()}if(2&o){const t=e.oxw().$implicit,r=e.oxw(2);e.xp6(6),e.Q6J("language",r.language)("options",r.options)("form",t)}}function Re(o,n){if(1&o&&(e.ynx(0),e.YNc(1,Le,7,3,"div",41),e.BQk()),2&o){const t=n.index,r=e.oxw(2);e.xp6(1),e.Q6J("ngIf",r.activeIndex==t)}}function Be(o,n){if(1&o&&(e.ynx(0),e.TgZ(1,"section",38)(2,"nav",39),e.YNc(3,Ue,3,1,"ng-container",11),e.qZA(),e.YNc(4,Re,2,1,"ng-container",11),e.qZA(),e.BQk()),2&o){const t=e.oxw();e.xp6(3),e.Q6J("ngForOf",t.formTabs),e.xp6(1),e.Q6J("ngForOf",t.formComponents)}}function Qe(o,n){1&o&&(e.ynx(0),e.TgZ(1,"div",49),e._UZ(2,"div",50)(3,"div",50)(4,"div",51),e.qZA(),e.BQk())}function ze(o,n){1&o&&(e.TgZ(0,"span",68),e._uU(1,"Please select either AND or OR as the condition"),e.qZA())}function $e(o,n){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"p",52),e._uU(2),e.qZA(),e.TgZ(3,"div",53)(4,"div",54)(5,"label",4),e._uU(6,"Approvers "),e.TgZ(7,"span",5),e._uU(8,"*"),e.qZA()(),e.TgZ(9,"custom-multi-select",55),e.NdJ("checkUsersLength",function(u){const h=e.CHM(t).index,D=e.oxw();return e.KtG(D.countUsers(u,h))})("approverList",function(u){const h=e.CHM(t).index,D=e.oxw();return e.KtG(D.getApproverList(u,h))}),e.qZA(),e.YNc(10,ze,2,0,"span",56),e.ALo(11,"async"),e.qZA(),e.TgZ(12,"div",54)(13,"label",57),e._uU(14,"Condition "),e.TgZ(15,"span",5),e._uU(16,"*"),e.qZA()(),e.TgZ(17,"select",58),e.NdJ("change",function(){const p=e.CHM(t).index,h=e.oxw();return e.KtG(h.validateSelection(p))}),e.TgZ(18,"option",59),e._uU(19,"AND"),e.qZA(),e.TgZ(20,"option",60),e._uU(21,"OR"),e.qZA(),e.TgZ(22,"option",61),e._uU(23,"NONE"),e.qZA()()(),e.TgZ(24,"div",62),e._UZ(25,"tui-tooltip",63),e.TgZ(26,"tui-badged-content",64)(27,"button",65),e.NdJ("click",function(){const p=e.CHM(t).index,h=e.oxw(),D=e.MAs(65);return e.KtG(h.openEmailNotifyModal(D,h.workflows,p))}),e.qZA()()(),e.TgZ(28,"div",66)(29,"button",67),e.NdJ("click",function(){const p=e.CHM(t).index,h=e.oxw();return e.KtG(h.removeWorkflowStep(p))}),e.qZA()()(),e.BQk()}if(2&o){const t=n.index,r=e.oxw(),u=e.MAs(67);let p;e.xp6(2),e.hij("Step ",0===t?"1":t+1,""),e.xp6(1),e.Q6J("formGroupName",t),e.xp6(7),e.Q6J("ngIf",e.lcZ(11,6,r.showError)&&t===r.errorIndex),e.xp6(15),e.Q6J("content",u),e.xp6(1),e.Q6J("contentTop",null==(p=r.workflows.at(t).get("emailNotifyTo"))||null==p.value?null:p.value.length)("colorTop","green")}}function Je(o,n){if(1&o&&(e.ynx(0),e.TgZ(1,"div",69)(2,"span",70),e._uU(3),e.qZA()(),e.BQk()),2&o){const t=e.oxw().message;e.xp6(3),e.hij(" ",t," ")}}function Ve(o,n){if(1&o&&e.YNc(0,Je,4,1,"ng-container",22),2&o){const t=n.control;e.Q6J("ngIf",t.hasError(n.validation)&&(t.dirty||t.touched))}}function He(o,n){if(1&o&&e._UZ(0,"tui-data-list-wrapper",79),2&o){const t=e.oxw(2);e.Q6J("items",t.userListForEmail)}}function je(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"p",71),e._uU(1,"Email Notification Users"),e.qZA(),e.TgZ(2,"p",72),e._uU(3," Please specify the users you want to send the notification email to "),e.qZA(),e.TgZ(4,"div",73)(5,"tui-input-tag",74),e.NdJ("searchChange",function(u){e.CHM(t);const p=e.oxw();return e.KtG(p.onSearchChange(u))}),e._uU(6," Type to search and press Enter to select... "),e.YNc(7,He,1,1,"tui-data-list-wrapper",75),e.qZA()(),e.TgZ(8,"div",76)(9,"button",77),e.NdJ("click",function(){e.CHM(t);const u=e.oxw();return e.KtG(u.validateEmails())}),e._uU(10," Confirm & Close "),e.qZA(),e.TgZ(11,"button",78),e.NdJ("click",function(){e.CHM(t);const u=e.oxw();return e.KtG(u.cancelEmailNotify())}),e._uU(12," Remove Users & Close "),e.qZA()()}if(2&o){const t=e.oxw();e.xp6(5),e.Q6J("formControl",null==t.currentFieldArray||null==t.currentFieldArray.controls[t.activeEmailIndex]?null:t.currentFieldArray.controls[t.activeEmailIndex].controls.emailNotifyTo)("tuiTextfieldLabelOutside",!0)}}function Ge(o,n){1&o&&(e.TgZ(0,"strong",80),e._uU(1,"How conditions work?"),e.qZA(),e._UZ(2,"hr"),e.TgZ(3,"ul",81)(4,"li")(5,"strong"),e._uU(6,"AND"),e.qZA(),e._uU(7," implies that every user of the step must provide approval"),e.qZA(),e.TgZ(8,"li",82)(9,"strong"),e._uU(10,"OR"),e.qZA(),e._uU(11," implies that any one of the users may provide approval"),e.qZA(),e.TgZ(12,"li")(13,"strong"),e._uU(14,"NONE"),e.qZA(),e._uU(15," implies that there is only one user per step and hence no conditon is necessary"),e.qZA()())}const Ye=function(o){return{validation:"required",message:"Module URL is required",control:o}},qe=function(o){return{validation:"required",message:"Company is required",control:o}};class se{constructor(n,t,r,u,p,h,D,F,$){this.fb=n,this.auth=t,this.transportService=r,this.router=u,this.dashboard=p,this.activatedRoute=h,this.notif=D,this.formService=F,this.dialogs=$,this.formComponents=[],this.activeIndex=0,this.language=new e.vpe,this.langItems=[{name:"en"},{name:"ar"}],this.languageForm=new d.cw({languages:new d.NI(this.langItems[0])}),this.conditions=["OR","AND","ANY"],this.formTabs=[],this.subModuleFormIoValue=new x.X({}),this.destroy$=new I.x,this.isCreatingSubModule=new I.x,this.domainUrl=window.location.origin,this.userListForEmail=[],this.search$=new I.x,this.saveDialogSubscription=[],this.limit=10,this.page=0,this.showError=new I.x,this.errorIndex=0,this.initSubModuleForm(),this.getAllCompanies(),this.getSubmoduleByIDForEdit(),this.activatedRoute.queryParams.pipe((0,y.R)(this.destroy$)).subscribe(B=>{B.moduleID&&B.moduleCode&&(this.transportService.moduleID.next(B.moduleID),this.transportService.moduleCode.next(B.moduleCode))}),this.search$.pipe((0,O.w)(B=>this.dashboard.getAllUsersForListing(this.limit,this.page,B))).subscribe(B=>{B&&(this.userListForEmail=B?.results?.map(pe=>pe?.email))}),this.dashboard.getAllUsersForListing(this.limit,this.page).pipe((0,y.R)(this.destroy$)).subscribe(B=>{B&&(this.userListForEmail=B?.results?.map(pe=>pe?.email))})}openEmailNotifyModal(n,t,r){this.activeEmailIndex=r,this.currentFieldArray=t,this.saveDialogSubscription.push(this.dialogs.open(n,{dismissible:!1,closeable:!1}).subscribe())}onSearchChange(n){this.search$.next(n)}validateEmails(){let n=this.workflows.at(this.activeEmailIndex)?.get("emailNotifyTo")?.value;n=n.map(t=>!!/\S+@\S+\.\S+/.test(t)),n.includes(!1)?this.notif.displayNotification("Please provide valid email addresses","Email Notify","warning"):this.saveDialogSubscription.forEach(t=>t.unsubscribe())}cancelEmailNotify(){this.workflows.at(this.activeEmailIndex)?.get("emailNotifyTo")?.setValue([]),this.saveDialogSubscription.forEach(n=>n.unsubscribe())}getSubmoduleByIDForEdit(){this.activatedRoute.params.pipe((0,y.R)(this.destroy$)).subscribe(n=>{n.id&&(this.transportService.subModuleID.next(n.id),this.dashboard.getSubModuleByID(n.id).subscribe(t=>{if(t){this.formComponents=t?.formIds,this.formTabs=t?.formIds?.map(D=>D.title);const r={value:t?.companyId?.id,label:t?.companyId?.title},u=t?.url?.split("/").at(-1),p=t?.workFlowId?.stepIds?.map(D=>({id:D?.id,approverIds:D?.approverIds?.map(F=>({name:F?.fullName,id:F?.id,control:new d.NI(!0)})),condition:D?.condition,emailNotifyTo:D?.emailNotifyToId?.notifyUsers||[],emailNotifyToId:D?.emailNotifyToId?.id}));delete t?.workFlowId,delete t?.url,delete t?.companyId;const h=Object.assign(t,{workFlowId:p},{url:u},{companyId:r});this.initSubModuleForm(h)}}))})}getAllCompanies(){this.dashboard.getAllCompanies(10,0).pipe((0,y.R)(this.destroy$)).subscribe(n=>{this.companyList=n.results?.map(t=>({value:t?.id,label:t?.title}))})}initSubModuleForm(n){this.subModuleForm=this.fb.group({subModuleUrl:[n?.url||null,d.kI.required],code:[{value:n?.code||null,disabled:!0}],companyName:[n?.companyId?.value||null,d.kI.required],adminUsers:[n?.adminUsers?.map(t=>({name:t?.fullName,id:t?.id,control:new d.NI(!0)}))||[],d.kI.required],viewOnlyUsers:[n?.viewOnlyUsers?.map(t=>({name:t?.fullName,id:t?.id,control:new d.NI(!0)}))||[],d.kI.required],workflows:this.fb.array(n?.workFlowId?n?.workFlowId?.map(t=>this.fb.group({id:t.id,condition:[t.condition,d.kI.required],approverIds:[t.approverIds,d.kI.required],emailNotifyTo:[t.emailNotifyTo||[],d.kI.required],emailNotifyToId:t?.emailNotifyToId})):[this.fb.group({condition:["",d.kI.required],approverIds:[[],d.kI.required],emailNotifyTo:[[],d.kI.required]})])})}get f(){return this.subModuleForm.controls}setAdminUsers(n){this.subModuleForm?.get("adminUsers")?.setValue(n)}setViewUsers(n){this.subModuleForm?.get("viewOnlyUsers")?.setValue(n)}sendFormForEdit(n,t){t?((0,g.LS)(g.MX.formEdit,!0),this.router.navigate(["/forms/edit-form"],{queryParams:{id:t}})):((0,g.LS)(g.MX.formEdit,!0),this.transportService.isFormEdit.next(!0),this.transportService.sendFormDataForEdit.next(this.formComponents[n]),this.router.navigate(["/forms/edit-form"],{queryParams:{submoduleID:this.transportService.subModuleID?.value}}))}deleteForm(n){this.formService.deleteForm(n).pipe((0,y.R)(this.destroy$)).subscribe(t=>{this.getSubmoduleByIDForEdit()})}saveDraft(){this.transportService.sendFormBuilderData(this.formComponents),this.router.navigate(["/forms/edit-form"])}get workflows(){return this.f.workflows}addWorkflowStep(){const n=this.fb.group({condition:["",d.kI.required],approverIds:[[],d.kI.required],emailNotifyTo:[[],d.kI.required]});this.workflows.push(n)}removeWorkflowStep(n){this.workflows.removeAt(n)}getApproverList(n,t){this.workflows.at(t)?.get("approverIds")?.setValue(n)}validateSelection(n){return this.errorIndex=n,this.workflows.at(n)?.get("approverIds")?.value?.length<2?(this.workflows.at(n)?.get("condition")?.setValue("none"),this.notif.displayNotification('Default condition of "None" will be used if the number of approvers is less than 2',"Create Submodule","info")):this.workflows.at(n)?.get("approverIds")?.value?.length>=2&&"none"==this.workflows.at(n)?.get("condition")?.value?this.showError.next(!0):void this.showError.next(!1)}countUsers(n,t){return this.errorIndex=t,n<2?(this.workflows.at(t)?.get("condition")?.setValue("none"),this.notif.displayNotification('Default condition of "None" will be used if the number of approvers is less than 2',"Create Module","info")):n>=2&&"none"==this.workflows.at(t)?.get("condition")?.value?this.showError.next(!0):void this.showError.next(!1)}dataSubmitValidation(){return!(this.f.subModuleUrl?.invalid||this.f.companyName?.invalid||0==this.f.adminUsers?.value?.length||0==this.f.viewOnlyUsers?.value?.length||0==this.workflows?.length||this.workflows.controls.map(n=>0==n.get("approverIds")?.value.length).includes(!0)||!0===this.workflows.controls.map(n=>n.get("condition")?.value).includes("")||0==Object.values(this.formComponents)[0]?.components?.length)}cancelSubmodule(){this.router.navigate(["/modules",(0,g.rV)(g.MX.moduleSlug)||""],{queryParams:{moduleID:(0,g.rV)(g.MX.moduleID)||""}})}saveSubModule(n){if(0==this.dataSubmitValidation())return this.subModuleForm.markAllAsTouched(),this.notif.displayNotification("Please provide all data","Edit Submodule","warning");if(this.workflows.controls.map(r=>r.get("approverIds")?.value.length>1&&r.get("condition")?.value).includes("none"))return this.notif.displayNotification("Please provide valid condition for the workflow step/s","Create Submodule","warning");this.isCreatingSubModule.next(!0);const t={url:`/modules/submodule-details/${this.subModuleForm.get("subModuleUrl")?.value.replace(/\s/g,"-")}`,companyId:this.subModuleForm.get("companyName")?.value,code:this.subModuleForm.get("subModuleUrl")?.value.replace(/\s/g,"-"),adminUsers:this.subModuleForm.get("adminUsers")?.value?.map(r=>r?.id),viewOnlyUsers:this.subModuleForm.get("viewOnlyUsers")?.value?.map(r=>r?.id),steps:this.workflows?.value?.map(r=>({id:r?.id?r?.id:void 0,approverIds:r?.approverIds?.map(u=>u.id?u.id:u),condition:r?.condition,emailNotifyTo:r?.emailNotifyTo||[],emailNotifyToId:r?.emailNotifyToId?r?.emailNotifyToId:void 0}))};n&&Object.assign(t,{status:n}),this.dashboard.updateSubModule(this.transportService.subModuleID?.value,t).pipe((0,y.R)(this.destroy$)).subscribe(r=>{r?(this.isCreatingSubModule.next(!1),this.transportService.saveDraftLocally({}),this.transportService.sendFormBuilderData([{title:"",key:"",display:"",components:[]}]),this.router.navigate(["/modules",(0,g.rV)(g.MX.moduleSlug)||""],{queryParams:{moduleID:(0,g.rV)(g.MX.moduleID)||""}})):this.isCreatingSubModule.next(!1)})}}se.\u0275fac=function(n){return new(n||se)(e.Y36(d.qu),e.Y36(Q.e),e.Y36(N.R),e.Y36(s.F0),e.Y36(L.s),e.Y36(s.gz),e.Y36(J.T),e.Y36(Ne.s),e.Y36(E.RO))},se.\u0275cmp=e.Xpm({type:se,selectors:[["ng-component"]],decls:68,vars:19,consts:[[1,"w-11/12","h-auto","min-h-screen","mx-auto","mt-52","pb-44"],[1,"text-xl","font-semibold"],[1,"block","pt-5",3,"formGroup"],[1,"my-3"],[1,"block","pb-1"],[1,"text-xs","text-red-400"],[1,"mb-3","input-group"],["required","","formControlName","subModuleUrl","type","text",1,"form-control",3,"ngClass"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"my-7"],["required","","formControlName","companyName","type","text",1,"form-control",3,"ngClass"],[4,"ngFor","ngForOf"],[1,"grid","grid-cols-12","gap-3","my-8"],[1,"col-span-6"],[1,"block","pb-1","text-sm"],[1,"text-red-500"],["formControlName","adminUsers",3,"approverList"],["formControlName","viewOnlyUsers",3,"approverList"],[1,"mb-5","mt-7"],[1,"mb-5","text-lg","font-semibold"],[1,"text-base","font-semibold","text-center"],[1,"flex","flex-col","w-full","px-5","mx-auto","mt-5","border","border-gray-400","border-dashed","rounded-md","bg-gray-50"],[4,"ngIf"],[1,"w-full","mx-auto","my-1"],[1,"text-xs","text-gray-500"],[1,"mt-7"],[1,"px-5","py-3","rounded-lg","bg-[#a58f81]","no-underline","text-white","cursor-pointer","hover:text-white",3,"click"],[1,"mt-12"],[1,"text-lg","font-semibold"],["formArrayName","workflows"],["tuiIconButton","","type","button","size","m","appearance","primary","icon","tuiIconPlusLarge",3,"click"],[1,"flex","justify-center","gap-2","mt-10"],["tuiButton","","type","button","size","m","appearance","primary",3,"showLoader","click"],["tuiButton","","type","button","size","m","appearance","accent",3,"click"],["formError",""],["template",""],["hint",""],[3,"value"],[1,"flex","justify-between","my-8"],["tuiTabs","","vertical","left",1,"w-32","mr-5"],["tuiTab","",3,"click"],["class","w-full well jsonviewer",4,"ngIf"],[1,"w-full","well","jsonviewer"],[1,"flex","justify-end","gap-x-2"],[1,"px-2","py-1","rounded-md","cursor-pointer","bg-slate-200",3,"click"],["aria-hidden","true",1,"fa","fa-pencil-square","fa-2x","text-slate-500","hover:text-slate-600"],[1,"px-2","py-1","bg-red-100","rounded-md","cursor-pointer",3,"click"],["aria-hidden","true",1,"text-red-500","fa","fa-trash","fa-2x","hover:text-red-600"],[3,"language","options","form"],[1,"grid","grid-cols-12","gap-2"],["data-placeholder","",1,"h-8","col-span-6","my-3","overflow-hidden","bg-gray-200","rounded-md"],["data-placeholder","",1,"h-32","col-span-12","mb-3","overflow-hidden","bg-gray-200","rounded-md"],[1,"text-base","font-semibold","mt-7"],[1,"grid","grid-cols-12","gap-3","my-4",3,"formGroupName"],[1,"col-span-4"],["formControlName","approverIds",3,"checkUsersLength","approverList"],["class","text-xs text-red-500",4,"ngIf"],["for","conditionSelect",1,"block","pb-1"],["formControlName","condition","aria-label","Default select example","id","conditionSelect",1,"h-10","mt-2","form-select","form-control",3,"change"],["value","and"],["value","or"],["value","none"],[1,"col-span-1","mt-8","inline-flex"],["direction","right",1,"mr-4","mt-1","-ml-2",3,"content"],[3,"contentTop","colorTop"],["tuiIconButton","","type","button","size","s","appearance","outline","icon","tuiIconMailLarge",3,"click"],[1,"col-span-1","mt-8","-ml-4"],["tuiIconButton","","type","button","size","s","appearance","secondary-destructive","icon","tuiIconTrash2Large",3,"click"],[1,"text-xs","text-red-500"],[1,"w-full","mt-1","text-left","fv-plugins-message-container","text-xxs","2xl:text-xs"],["role","alert",1,"text-red-400","fv-help-block","text-xxs","2xl:text-xs","2xl:mb-2"],[1,"text-lg","font-semibold","text-center"],[1,"mt-3","text-base","font-medium","text-gray-500"],[1,"flex","flex-col","justify-center","my-5"],[1,"b-form",3,"formControl","tuiTextfieldLabelOutside","searchChange"],[3,"items",4,"tuiDataList"],[1,"flex","justify-start","gap-x-3"],["tuiButton","","type","button","size","m",3,"click"],["appearance","accent","tuiButton","","type","button","size","m",3,"click"],[3,"items"],[1,"text-base"],[1,"mt-2"],[1,"my-2"]],template:function(n,t){if(1&n&&(e._UZ(0,"app-header"),e.TgZ(1,"section",0)(2,"section")(3,"h3",1),e._uU(4,"Edit module"),e.qZA()(),e.TgZ(5,"form",2)(6,"div",3)(7,"label",4),e._uU(8,"Module URL Endpoint"),e.TgZ(9,"span",5),e._uU(10,"*"),e.qZA()(),e.TgZ(11,"div",6),e._UZ(12,"input",7),e.GkF(13,8),e.qZA()(),e.TgZ(14,"div",9)(15,"label",4),e._uU(16,"Company Name "),e.TgZ(17,"span",5),e._uU(18,"*"),e.qZA()(),e.TgZ(19,"select",10),e.YNc(20,Fe,3,2,"ng-container",11),e.qZA(),e.GkF(21,8),e.qZA(),e.TgZ(22,"div",12)(23,"div",13)(24,"label",14),e._uU(25,"Admin users "),e.TgZ(26,"span",15),e._uU(27,"*"),e.qZA()(),e.TgZ(28,"custom-multi-select",16),e.NdJ("approverList",function(u){return t.setAdminUsers(u)}),e.qZA()(),e.TgZ(29,"div",13)(30,"label",14),e._uU(31,"View Only users "),e.TgZ(32,"span",15),e._uU(33,"*"),e.qZA()(),e.TgZ(34,"custom-multi-select",17),e.NdJ("approverList",function(u){return t.setViewUsers(u)}),e.qZA()()(),e.TgZ(35,"div",18)(36,"h3",19),e._uU(37,"Edit Form/s"),e.qZA(),e.TgZ(38,"h4",20),e._uU(39,"Form/s Preview"),e.qZA(),e.TgZ(40,"div",21),e.YNc(41,Be,5,2,"ng-container",22),e.YNc(42,Qe,5,0,"ng-container",22),e.qZA(),e.TgZ(43,"div",23)(44,"p",24),e._uU(45,"The form you add will appear here"),e.qZA()()(),e.TgZ(46,"div",25)(47,"a",26),e.NdJ("click",function(){return t.saveDraft()}),e._uU(48),e.qZA()(),e.TgZ(49,"div",27)(50,"h4",28),e._uU(51,"Edit workflow"),e.qZA(),e.ynx(52,29),e.YNc(53,$e,30,8,"ng-container",11),e.BQk(),e.TgZ(54,"button",30),e.NdJ("click",function(){return t.addWorkflowStep()}),e.qZA()(),e.TgZ(55,"div",31)(56,"button",32),e.NdJ("click",function(){return t.saveSubModule()}),e.ALo(57,"async"),e._uU(58," Save Changes "),e.qZA(),e.TgZ(59,"button",33),e.NdJ("click",function(){return t.cancelSubmodule()}),e._uU(60,"Cancel"),e.qZA()()()(),e._UZ(61,"app-footer"),e.YNc(62,Ve,1,1,"ng-template",null,34,e.W1O),e.YNc(64,je,13,2,"ng-template",null,35,e.W1O),e.YNc(66,Ge,16,0,"ng-template",null,36,e.W1O)),2&n){const r=e.MAs(63);e.xp6(5),e.Q6J("formGroup",t.subModuleForm),e.xp6(7),e.Q6J("ngClass",null!=t.f.subModuleUrl&&t.f.subModuleUrl.invalid&&null!=t.f.subModuleUrl&&t.f.subModuleUrl.dirty?"is-invalid":""),e.xp6(1),e.Q6J("ngTemplateOutlet",r)("ngTemplateOutletContext",e.VKq(15,Ye,t.f.subModuleUrl)),e.xp6(6),e.Q6J("ngClass",null!=t.f.companyName&&t.f.companyName.invalid&&null!=t.f.companyName&&t.f.companyName.dirty?"is-invalid":""),e.xp6(1),e.Q6J("ngForOf",t.companyList),e.xp6(1),e.Q6J("ngTemplateOutlet",r)("ngTemplateOutletContext",e.VKq(17,qe,t.f.companyName)),e.xp6(20),e.Q6J("ngIf",(null==t.formComponents[0]||null==t.formComponents[0].components?null:t.formComponents[0].components.length)>0),e.xp6(1),e.Q6J("ngIf",0==(null==t.formComponents[0]||null==t.formComponents[0].components?null:t.formComponents[0].components.length)),e.xp6(6),e.hij(" ",0==(null==t.formComponents[0]||null==t.formComponents[0].components?null:t.formComponents[0].components.length)?"Add form":"Add another"," "),e.xp6(5),e.Q6J("ngForOf",t.workflows.controls),e.xp6(3),e.Q6J("showLoader",1==e.lcZ(57,13,t.isCreatingSubModule))}},dependencies:[i.mk,i.sg,i.O5,i.tP,z.G,S.c,w.xT,f.eC,v.gX,d._Y,d.YN,d.Kr,d.Fj,d.EJ,d.JJ,d.JL,d.Q7,d.oH,d.sg,d.u,d.x0,d.CE,Z.v0,R.k4,V.e,b.p_,b.uW,b.yu,T.V,M.PZ,k.w,i.Ov]});var We=a(94813),fe=a(54004),he=a(69952),ve=a(55314);function Ke(o,n){if(1&o&&(e.ynx(0),e.TgZ(1,"p",5),e._uU(2,"Title:\xa0 "),e.TgZ(3,"span",6),e._uU(4),e.qZA()(),e.TgZ(5,"p",7),e._uU(6,"Code:\xa0 "),e.TgZ(7,"span",6),e._uU(8),e.qZA()(),e.BQk()),2&o){const t=n.ngIf;e.xp6(4),e.Oqu(t.title),e.xp6(4),e.Oqu(t.code)}}function Xe(o,n){if(1&o){const t=e.EpF();e.ynx(0),e.YNc(1,Ke,9,2,"ng-container",3),e.ALo(2,"async"),e.TgZ(3,"app-table-view",4),e.NdJ("emitPagination",function(u){e.CHM(t);const p=e.oxw();return e.KtG(p.sendPagination(u))})("emitDeleteEvent",function(u){e.CHM(t);const p=e.oxw();return e.KtG(p.itemDeleted(u))}),e.qZA(),e.BQk()}if(2&o){const t=n.ngIf,r=e.oxw();e.xp6(1),e.Q6J("ngIf",e.lcZ(2,3,r.moduleData)),e.xp6(2),e.Q6J("moduleData",r.moduleData)("tableData",t)}}function et(o,n){1&o&&e._UZ(0,"app-table-loader")}class ae{constructor(n,t,r,u){this.dashBoardService=n,this.activatedRoute=t,this.transport=r,this.router=u,this.limit=7,this.page=1;let p=(0,g.rV)(g.MX.workflowID)||"",h=(0,g.rV)(g.MX.moduleSlug),D=(0,g.rV)(g.MX.subModuleSlug);this.router.url==`/modules/${h}`&&this.router.navigate([`/modules/${h}/${D}`,p]),this.subModuleData=this.activatedRoute.params.pipe((0,We.j)("name"),(0,fe.U)(F=>((0,g.LS)(g.MX.moduleSlug,F),this.moduleSlug=F,F)),(0,O.w)(F=>this.dashBoardService.getSubModuleByModuleSlug(F,this.limit,this.page))),this.activatedRoute.queryParams.subscribe(F=>{F.moduleID&&((0,g.LS)(g.MX.moduleID,F.moduleID),this.transport.moduleID.next(F.moduleID),this.moduleData=this.dashBoardService.getModuleByID(F.moduleID))})}itemDeleted(n){1==n&&(this.subModuleData=this.dashBoardService.getSubModuleByModuleSlug(this.moduleSlug,this.limit,this.page))}sendPagination(n){n&&(this.page=n,this.subModuleData=this.dashBoardService.getSubModuleByModuleSlug(this.moduleSlug,this.limit,this.page))}}ae.\u0275fac=function(n){return new(n||ae)(e.Y36(L.s),e.Y36(s.gz),e.Y36(N.R),e.Y36(s.F0))},ae.\u0275cmp=e.Xpm({type:ae,selectors:[["ng-component"]],decls:7,vars:4,consts:[[1,"w-11/12","h-auto","min-h-screen","mx-auto","mt-48"],[4,"ngIf","ngIfElse"],["noData",""],[4,"ngIf"],[3,"moduleData","tableData","emitPagination","emitDeleteEvent"],[1,"text-left","font-semibold","text-lg","mb-2"],[1,"text-[#374151]"],[1,"text-left","font-semibold","text-base"]],template:function(n,t){if(1&n&&(e._UZ(0,"app-header"),e.TgZ(1,"section",0),e.YNc(2,Xe,4,5,"ng-container",1),e.ALo(3,"async"),e.YNc(4,et,1,0,"ng-template",null,2,e.W1O),e.qZA(),e._UZ(6,"app-footer")),2&n){const r=e.MAs(5);e.xp6(2),e.Q6J("ngIf",e.lcZ(3,2,t.subModuleData))("ngIfElse",r)}},dependencies:[i.O5,z.G,S.c,he.x,ve.X,i.Ov]});var Te=a(35601),me=a(39062),be=a(82176),tt=a(82210);function it(o,n){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",12),e.NdJ("click",function(){const p=e.CHM(t).index,h=e.oxw();return e.KtG(h.activeIndex=p)}),e._uU(2),e.qZA(),e.BQk()}if(2&o){const t=n.$implicit;e.xp6(2),e.Oqu(t)}}function nt(o,n){if(1&o&&(e.TgZ(0,"div",14),e._UZ(1,"formio",15),e.qZA()),2&o){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("readOnly",!0)("form",t)}}function ot(o,n){if(1&o&&(e.ynx(0),e.YNc(1,nt,2,2,"div",13),e.BQk()),2&o){const t=n.index,r=e.oxw();e.xp6(1),e.Q6J("ngIf",r.activeIndex==t)}}function rt(o,n){if(1&o&&(e.TgZ(0,"ul",24)(1,"li",25),e._uU(2),e.qZA()()),2&o){const t=n.$implicit;e.xp6(2),e.Oqu(t)}}function st(o,n){1&o&&e._UZ(0,"i",26)}function at(o,n){if(1&o&&(e.TgZ(0,"div",17)(1,"div",18)(2,"p",19),e._uU(3),e.qZA(),e.YNc(4,rt,3,1,"ul",20),e.TgZ(5,"div",21),e._uU(6),e.qZA()(),e.TgZ(7,"div",22),e.YNc(8,st,1,0,"i",23),e.qZA()()),2&o){const t=e.oxw(),r=t.index,u=t.$implicit,p=t.last;e.xp6(3),e.hij("Step ",r+1,""),e.xp6(1),e.Q6J("ngForOf",null==u?null:u.approvers),e.xp6(2),e.hij(" ",null==u?null:u.condition," "),e.xp6(2),e.Q6J("ngIf",!p)}}function lt(o,n){1&o&&(e.ynx(0),e.YNc(1,at,9,4,"div",16),e.BQk())}class le{constructor(n,t){this.dashboard=n,this.activatedRoute=t,this.formTabs=[],this.activeIndex=0,this.formWithWorkflow=[],this.carouselIndex=0,this.items=[],this.subscriptions=[],this.fetchAndPopulateData()}fetchAndPopulateData(){this.subscriptions.push(this.activatedRoute.params.subscribe(n=>{n.name&&this.dashboard.getSubModuleBySlugName(n.name).subscribe(t=>{this.submoduleDetails=t,this.formWithWorkflow=t?.formIds,this.formTabs=t?.formIds?.map(r=>r.title),this.items=t?.workFlowId?.stepIds?.map(r=>({approvers:r?.approverIds?.map(u=>u?.fullName),condition:r?.condition}))})}))}ngOnDestroy(){this.subscriptions.forEach(n=>n.unsubscribe())}}le.\u0275fac=function(n){return new(n||le)(e.Y36(L.s),e.Y36(s.gz))},le.\u0275cmp=e.Xpm({type:le,selectors:[["ng-component"]],decls:20,vars:9,consts:[[1,"w-11/12","h-auto","min-h-screen","mx-auto","mt-52","pb-40"],[1,"mb-8","mt-4","text-lg","font-semibold"],[1,"my-4","text-lg","font-semibold"],[1,"flex","flex-col","w-full","px-5","mt-5","border","border-gray-400","border-dashed","rounded-md","bg-gray-50"],[1,"flex","justify-between","w-full","my-8"],["tuiTabs","","vertical","left",1,"w-32","mr-5"],[4,"ngFor","ngForOf"],[1,"mt-10","mb-5","text-lg","font-semibold"],["size","l",1,"w-full","my-4","shadow-lg","border","border-[#F15B41]","px-5","mx-auto"],[1,"mb-5","text-base","font-semibold","text-gray-700"],[3,"draggable","itemsCount","index","indexChange"],["size","s",1,"my-5","pagination",3,"length","index","indexChange"],["tuiTab","",3,"click"],["class","w-full well jsonviewer",4,"ngIf"],[1,"w-full","well","jsonviewer"],[3,"readOnly","form"],["class","flex justify-between w-full",4,"tuiItem"],[1,"flex","justify-between","w-full"],[1,"relative","w-full","px-4","py-4","text-left","border","border-gray-200","rounded-md","bg-gray-50"],[1,"mb-2","text-lg","font-semibold","text-gray-700"],["class","px-5",4,"ngFor","ngForOf"],[1,"absolute","top-0","right-0","px-3","py-1","text-sm","font-semibold","bg-gray-200","rounded-b-none","text-slate-700","rounded-r-md"],[1,"ml-4","mt-7"],["class","fa fa-long-arrow-right fa-lg","aria-hidden","true",4,"ngIf"],[1,"px-5"],[1,"list-disc"],["aria-hidden","true",1,"fa","fa-long-arrow-right","fa-lg"]],template:function(n,t){1&n&&(e._UZ(0,"app-header"),e.TgZ(1,"section",0)(2,"p",1),e._uU(3),e.qZA(),e.TgZ(4,"p",2),e._uU(5,"Module Forms"),e.qZA(),e.TgZ(6,"div",3)(7,"section",4)(8,"nav",5),e.YNc(9,it,3,1,"ng-container",6),e.qZA(),e.YNc(10,ot,2,1,"ng-container",6),e.qZA()(),e.TgZ(11,"p",7),e._uU(12,"Module Workflow"),e.qZA(),e.TgZ(13,"tui-island",8)(14,"h4",9),e._uU(15,"Workflow Steps"),e.qZA(),e.TgZ(16,"tui-carousel",10),e.NdJ("indexChange",function(u){return t.carouselIndex=u}),e.YNc(17,lt,2,0,"ng-container",6),e.qZA(),e.TgZ(18,"tui-pagination",11),e.NdJ("indexChange",function(u){return t.carouselIndex=u}),e.qZA()()(),e._UZ(19,"app-footer")),2&n&&(e.xp6(3),e.hij("Module Code: ",null==t.submoduleDetails?null:t.submoduleDetails.code,""),e.xp6(6),e.Q6J("ngForOf",t.formTabs),e.xp6(1),e.Q6J("ngForOf",t.formWithWorkflow),e.xp6(6),e.Q6J("draggable",!0)("itemsCount",3)("index",t.carouselIndex),e.xp6(1),e.Q6J("ngForOf",t.items),e.xp6(1),e.Q6J("length",(null==t.items?null:t.items.length)>2?(null==t.items?null:t.items.length)-2:null==t.items?null:t.items.length)("index",t.carouselIndex))},dependencies:[i.sg,i.O5,z.G,S.c,R.k4,b.p_,b.uW,b.yu,tt.w,Te.h,me.VF,me.EB,be.r]});class K{resolve(n){return(0,g.rV)(g.MX.moduleSlug)}}K.\u0275fac=function(n){return new(n||K)},K.\u0275prov=e.Yz7({token:K,factory:K.\u0275fac,providedIn:"root"});const ut=[{path:"",component:A,resolve:{breadcrumb:K},children:[{path:":name",component:ae,canActivate:[ke.v]},{path:"add-submodule/:id",component:re,data:{breadcrumb:"Add Module"}},{path:"edit-submodule/:id",component:se,data:{breadcrumb:"Edit Module"}},{path:"submodule-details/:name",component:le,data:{breadcrumb:"Module Details"}},{path:":name",data:{preload:!0},loadChildren:()=>a.e(877).then(a.bind(a,64877)).then(o=>o.WorkflowsModule)},{path:"",component:A}]}];class X{}X.\u0275fac=function(n){return new(n||X)},X.\u0275mod=e.oAB({type:X}),X.\u0275inj=e.cJS({imports:[s.Bz.forChild(ut),s.Bz]});var ct=a(14375),dt=a(86679),pt=a(66437),Ce=a(93422),mt=a(54227),_t=a(77721),_e=a(47846),ge=a(8276),xe=a(91127),gt=a(79791),ye=a(68341),ue=a(89740),ce=a(55753),ft=a(38355),ht=a(78535),vt=a(1054),Tt=a(70655),Se=a(78595),bt=a(68923),Ct=a(95825),xt=a(5963);let yt=(()=>{class o{constructor(t,r){this.elementRef=t,this.destroy$=r}set tuiScrollIntoView(t){t&&(0,xt.H)(0).pipe((0,y.R)(this.destroy$)).subscribe(()=>{this.elementRef.nativeElement.dispatchEvent(new CustomEvent(Ct.fe,{bubbles:!0,detail:this.elementRef.nativeElement}))})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(e.SBq),e.Y36(Se.a3,2))},o.\u0275dir=e.lG2({type:o,selectors:[["","tuiScrollIntoView",""]],inputs:{tuiScrollIntoView:"tuiScrollIntoView"},features:[e._Bn([Se.a3])]}),(0,Tt.gn)([(0,bt.NH)()],o.prototype,"tuiScrollIntoView",null),o})(),St=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({}),o})();var Mt=a(31947),wt=a(56451),Dt=a(60515),It=a(68675),Ot=a(71884);function At(o,n){1&o&&e._UZ(0,"tui-svg",3),2&o&&e.Q6J("tuiScrollIntoView",!0)}function Pt(o,n){1&o&&e._UZ(0,"span",4)}let Me=(()=>{class o{constructor(t,r,u,p,h,D,F){this.context=t,this.host=r,this.elementRef=u,this.option=p,this.dataList=h,this.control=D,this.abstractControl=F,this.changeDetection$=new I.x,this.selected$=(0,wt.T)(this.changeDetection$,this.control.valueChanges||Dt.E,(0,ft.mL)(this.elementRef.nativeElement,"animationstart")).pipe((0,It.O)(null),(0,fe.U)(()=>this.selected),(0,Ot.x)())}get matcher(){return this.host.identityMatcher||ht.bg}ngDoCheck(){this.changeDetection$.next()}ngOnInit(){Promise.resolve().then(()=>{(0,ce.Pc)(this.option.value)&&this.host.checkOption&&this.host.checkOption(this.option.value)})}get value(){var t,r;return null!==(r=null===(t=this.abstractControl)||void 0===t?void 0:t.value)&&void 0!==r?r:this.control.value}get selected(){return(0,ce.Pc)(this.option.value)&&(0,ce.Pc)(this.value)&&this.matcher(this.value,this.option.value)}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(ue.yf),e.Y36(Mt.N1),e.Y36(e.SBq),e.Y36(v.vK),e.Y36(v.qi,8),e.Y36(d.a5),e.Y36(vt.M$,8))},o.\u0275cmp=e.Xpm({type:o,selectors:[["tui-select-option"]],decls:5,vars:5,consts:[[3,"ngTemplateOutlet"],["automation-id","tui-select-option__checkmark","src","tuiIconCheckLarge","class","t-checkmark",3,"tuiScrollIntoView",4,"ngIf","ngIfElse"],["dummy",""],["automation-id","tui-select-option__checkmark","src","tuiIconCheckLarge",1,"t-checkmark",3,"tuiScrollIntoView"],[1,"t-dummy"]],template:function(t,r){if(1&t&&(e.GkF(0,0),e.YNc(1,At,1,1,"tui-svg",1),e.ALo(2,"async"),e.YNc(3,Pt,1,0,"ng-template",null,2,e.W1O)),2&t){const u=e.MAs(4);e.Q6J("ngTemplateOutlet",r.context.$implicit),e.xp6(1),e.Q6J("ngIf",e.lcZ(2,3,r.selected$))("ngIfElse",u)}},dependencies:[ge.PN,i.tP,i.O5,yt,i.Ov],styles:["@keyframes _ngcontent-%COMP%_retrigger{0%{left:1px}to{left:2px}}[_nghost-%COMP%]{display:flex;flex:1;align-items:center;max-width:100%;animation:_ngcontent-%COMP%_retrigger 1s}.t-checkmark[_ngcontent-%COMP%]{margin:0 -.375rem 0 auto;border-left:5px solid transparent}.t-dummy[_ngcontent-%COMP%]{width:1.5rem}"],changeDetection:0}),o})();new ue.Al(Me);let Et=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[i.ez,ge.EI,St]]}),o})();var we=a(42973);let Zt=(()=>{class o extends Me{get size(){var t;return"l"===this.option.size||"l"===(null===(t=this.dataList)||void 0===t?void 0:t.size)&&!this.option.size?"l":"m"}get selected(){const{value:t}=this.option;return(0,ce.Pc)(t)&&(0,ce.Pc)(this.value)&&this.value.some(r=>this.matcher(r,t))}}return o.\u0275fac=function(){let n;return function(r){return(n||(n=e.n5z(o)))(r||o)}}(),o.\u0275cmp=e.Xpm({type:o,selectors:[["tui-multi-select-option"]],features:[e.qOj],decls:3,vars:5,consts:[[1,"t-checkbox",3,"size","value"],[3,"ngTemplateOutlet"]],template:function(t,r){1&t&&(e._UZ(0,"tui-primitive-checkbox",0),e.ALo(1,"async"),e.GkF(2,1)),2&t&&(e.Q6J("size",r.size)("value",e.lcZ(1,3,r.selected$)),e.xp6(2),e.Q6J("ngTemplateOutlet",r.context.$implicit))},dependencies:[we.r3,i.tP,i.Ov],styles:["@keyframes _ngcontent-%COMP%_retrigger{0%{left:1px}to{left:2px}}[_nghost-%COMP%]{display:flex;flex:1;align-items:center;overflow:hidden;animation:_ngcontent-%COMP%_retrigger 1s}.t-checkbox[_ngcontent-%COMP%]{margin-right:.75rem}"],changeDetection:0}),o})(),kt=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[i.ez,we.fB]]}),o})();const De={expandable:!0,valueContent:""};new e.OlP("[TUI_MULTI_SELECT_OPTIONS]",{factory:()=>De}),new ue.Al(Zt);let Qt=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[i.ez,d.u5,ue.wq,_e.W,pt.Z,Ce.A,ye.Mt,mt.WD,_t.I,ge.EI,xe.jh,M.cB,kt,gt.j,v.pc,w.cn]]}),o})();var zt=a(60117);const Ie={valueContent:""};new e.OlP("[TUI_SELECT_OPTIONS]",{factory:()=>Ie});let Yt=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[i.ez,ue.wq,Ce.A,zt.KW,xe.jh,Et,ye.Mt,_e.W,w.cn,f.zX,v.pc]]}),o})();var Oe=a(79982),Ae=a(88261),qt=a(68702),Wt=a(80063);const Pe={size:"m",appearances:{unchecked:"outline",checked:"primary"}};new e.OlP("[TUI_RADIO_OPTIONS]",{factory:()=>Pe});let Xt=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[i.ez,qt.S,Oe.u,Ae.F,Wt.c,_e.W]]}),o})(),ei=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[i.ez,d.u5,Oe.u,Ae.F,Xt]]}),o})();var ti=a(67155),ii=a(44886),ni=a(6110);class ee{}ee.\u0275fac=function(n){return new(n||ee)},ee.\u0275mod=e.oAB({type:ee}),ee.\u0275inj=e.cJS({imports:[i.ez,X,z.G,S.c,he.x,ct.N,dt.Qf,w.cn,f.zX,Qt,Yt,d.UX,d.u5,Z.fN,R.XI,ei,ni.z,V.e,b.$$,Te.y,me.Xj,be.i,ti.V5,T.f,M.cB,ve.X,k.Q,ii.go]})},55314:(j,U,a)=>{a.d(U,{X:()=>e});var i=a(36895),s=a(94650);function g(A,d){1&A&&(s.ynx(0),s.TgZ(1,"tr",12)(2,"td",13),s._UZ(3,"span",14),s.qZA(),s.TgZ(4,"td",13),s._UZ(5,"span",14)(6,"br")(7,"span",15),s.qZA(),s.TgZ(8,"td",13),s._UZ(9,"span",14),s.qZA(),s.TgZ(10,"td",13),s._UZ(11,"span",14),s.qZA(),s.TgZ(12,"td",13),s._UZ(13,"span",16)(14,"br")(15,"span",15),s.qZA(),s.TgZ(16,"td",13),s._UZ(17,"span",17),s.qZA()(),s.BQk())}class e{constructor(){this.Arr=Array,this.num=6}}e.\u0275fac=function(d){return new(d||e)},e.\u0275cmp=s.Xpm({type:e,selectors:[["app-table-loader"]],standalone:!0,features:[s.jDz],decls:25,vars:1,consts:[["role","status",1,"w-full","animate-pulse","flex","justify-between"],[1,"my-4"],[1,"h-3","bg-gray-200","rounded-full","w-48","mb-4"],[1,"h-3","bg-gray-200","rounded-full","w-[360px]","my-2.5"],[1,"sr-only"],[1,"h-10","bg-gray-200","rounded-md","w-32","mt-8"],[1,"rounded-lg","shadow-lg"],[1,"w-full","mt-10"],[1,"text-center","border-b-2","border-gray-300","border-dotted","bg-[#eae4d8]"],[1,"py-2"],[1,"inline-block","py-1","mt-2","mb-2","bg-gray-300","border-2","rounded-sm","px-14"],[4,"ngFor","ngForOf"],[1,"z-50","h-16","text-center","bg-white","border-b-2","border-gray-300","border-dotted","rounded-lg","animate-pulse"],[1,"shadow-lg"],[1,"z-50","inline-block","px-16","py-2","mt-2","mb-2","bg-gray-300","rounded-sm"],[1,"z-50","inline-block","px-10","py-1","mt-1","mb-1","bg-gray-300","rounded-sm"],[1,"z-50","inline-block","px-16","py-2","mt-1","mb-1","bg-gray-300","rounded-sm"],[1,"z-50","inline-block","px-12","py-4","mt-2","mb-2","bg-gray-300","rounded-2xl"]],template:function(d,E){1&d&&(s.TgZ(0,"div",0)(1,"div",1),s._UZ(2,"div",2)(3,"div",2)(4,"div",3),s.TgZ(5,"span",4),s._uU(6,"Loading..."),s.qZA()(),s.TgZ(7,"div",1),s._UZ(8,"div",5),s.qZA()(),s.TgZ(9,"div",6)(10,"table",7)(11,"thead",8)(12,"th",9),s._UZ(13,"span",10),s.qZA(),s.TgZ(14,"th",9),s._UZ(15,"span",10),s.qZA(),s.TgZ(16,"th",9),s._UZ(17,"span",10),s.qZA(),s.TgZ(18,"th",9),s._UZ(19,"span",10),s.qZA(),s.TgZ(20,"th",9),s._UZ(21,"span",10),s.qZA(),s.TgZ(22,"th",9),s._UZ(23,"span",10),s.qZA()(),s.YNc(24,g,18,0,"ng-container",11),s.qZA()()),2&d&&(s.xp6(24),s.Q6J("ngForOf",E.Arr(E.num).fill(1)))},dependencies:[i.ez,i.sg],changeDetection:0})},6110:(j,U,a)=>{a.d(U,{z:()=>z});var i=a(94650),s=a(36895),g=a(91127),e=a(39367),A=a(44886),d=a(56772),E=a(86679),x=a(61135);function I(S,w){if(1&S){const v=i.EpF();i.TgZ(0,"li",12),i.NdJ("click",function(){i.CHM(v);const k=i.oxw(2),f=k.index,b=k.$implicit,T=i.oxw(2);return i.KtG(T.setFilterAndApplyActive({index:f,sortType:b.name,applyOn:T.filterBy}))}),i.TgZ(1,"div",13)(2,"span"),i._uU(3),i.qZA(),i._UZ(4,"i",14),i.qZA()()}if(2&S){const v=i.oxw(2).$implicit;i.Q6J("ngClass","active"===v.status?"bg-blue-100 hover:bg-blue-100":"bg-white hover:bg-gray-100"),i.xp6(3),i.Oqu(v.name),i.xp6(1),i.Q6J("ngClass",v.icon)}}function O(S,w){if(1&S&&(i.ynx(0),i.YNc(1,I,5,3,"li",11),i.BQk()),2&S){const v=i.oxw(3);i.xp6(1),i.Q6J("ngIf",1==v.showSortCategories)}}function y(S,w){if(1&S){const v=i.EpF();i.TgZ(0,"li",12),i.NdJ("click",function(){i.CHM(v);const k=i.oxw(),f=k.index,b=k.$implicit,T=i.oxw(2);return i.KtG(T.setFilterAndApplyActive({index:f,sortType:b.name,applyOn:T.filterBy}))}),i.TgZ(1,"div",13)(2,"span"),i._uU(3),i.qZA(),i._UZ(4,"i",14),i.qZA()()}if(2&S){const v=i.oxw().$implicit;i.Q6J("ngClass","active"===v.status?"bg-blue-100 hover:bg-blue-100":"bg-white hover:bg-gray-100"),i.xp6(3),i.Oqu(v.name),i.xp6(1),i.Q6J("ngClass",v.icon)}}function Q(S,w){if(1&S&&(i.ynx(0),i.YNc(1,O,2,1,"ng-container",9),i.YNc(2,y,5,3,"ng-template",null,10,i.W1O),i.BQk()),2&S){const v=w.$implicit,Z=i.MAs(3);i.xp6(1),i.Q6J("ngIf","Sort by Latest"==(null==v?null:v.name)||"Sort by Oldest"==(null==v?null:v.name))("ngIfElse",Z)}}function N(S,w){if(1&S){const v=i.EpF();i.TgZ(0,"div",15)(1,"a",16),i.NdJ("click",function(){i.CHM(v);const k=i.oxw(2);return i.KtG(k.resetFilterValue())}),i._uU(2,"Reset Filters"),i.qZA()()}}function L(S,w){if(1&S&&(i.TgZ(0,"div",4)(1,"h4",5),i._uU(2),i.qZA(),i.TgZ(3,"ul",6),i.YNc(4,Q,4,2,"ng-container",7),i.qZA(),i.YNc(5,N,3,0,"div",8),i.qZA()),2&S){const v=i.oxw();i.xp6(2),i.hij("Filter by ",v.filterBy,""),i.xp6(2),i.Q6J("ngForOf",v.items)("ngForTrackBy",v.trackByFn),i.xp6(1),i.Q6J("ngIf",!0===v.isFilterApplied)}}function J(S,w){if(1&S&&(i.TgZ(0,"p"),i._uU(1),i.qZA()),2&S){const v=i.oxw();i.xp6(1),i.Oqu(v.isFilterApplied?"This filter is currently active":"Apply filters")}}class z{constructor(){this.open=!1,this.searchEnabled=!0,this.showSortCategories=!0,this.disabled=!1,this.applyStatus=new i.vpe,this.resetFilters=new i.vpe,this.sendSearchToTable=new i.vpe,this.isFilterApplied=!1,this.previousFilterValues=new x.X([])}searchTableData(w,v){this.sendSearchToTable.emit({search:w,searchBy:v}),this.isFilterApplied=!0}setFilterAndApplyActive(w){1!=this.disabled&&(this.applyStatus.emit(w),this.items?.some(v=>v.name===w.sortType)&&(this.items.forEach(v=>{v.status=w.sortType===v.name?"active":"idle"}),this.isFilterApplied=!0))}areArraysEqual(w,v){if(w.length!==v.length)return!1;const Z=w.slice().sort((f,b)=>f.id-b.id),k=v.slice().sort((f,b)=>f.id-b.id);for(let f=0;f<Z.length;f++){const b=Z[f],T=k[f];for(let M in b)if(b[M]!==T[M])return!1}return!0}resetFilterValue(){this.isFilterApplied=!1,this.items.forEach(w=>w.status="idle"),this.resetFilters.emit("reset")}trackByFn(w,v){return v}}z.\u0275fac=function(w){return new(w||z)},z.\u0275cmp=i.Xpm({type:z,selectors:[["filter"]],inputs:{items:"items",searchEnabled:"searchEnabled",showSortCategories:"showSortCategories",filterBy:"filterBy",disabled:"disabled"},outputs:{applyStatus:"applyStatus",resetFilters:"resetFilters",sendSearchToTable:"sendSearchToTable"},standalone:!0,features:[i.jDz],decls:6,vars:4,consts:[[3,"content","open","openChange"],["tuiIconButton","","tuiHintDirection","right","size","xs","icon","tuiIconFilter",3,"tuiHint","appearance"],["dropdown",""],["tooltip",""],[1,"px-5","py-3","w-80"],[1,"text-sm","font-semibold","my-3"],[1,"my-3"],[4,"ngFor","ngForOf","ngForTrackBy"],["class","cursor-pointer mt-5 mb-3 text-center",4,"ngIf"],[4,"ngIf","ngIfElse"],["otherFilter",""],["class","px-2 py-3 my-1 text-sm rounded-lg cursor-pointer",3,"ngClass","click",4,"ngIf"],[1,"px-2","py-3","my-1","text-sm","rounded-lg","cursor-pointer",3,"ngClass","click"],[1,"flex","justify-between"],["aria-hidden","true",3,"ngClass"],[1,"cursor-pointer","mt-5","mb-3","text-center"],[1,"px-3","py-2","rounded-md","bg-[#ac2224]","text-white","text-sm","no-underline","hover:text-white",3,"click"]],template:function(w,v){if(1&w&&(i.TgZ(0,"tui-hosted-dropdown",0),i.NdJ("openChange",function(k){return v.open=k}),i._UZ(1,"button",1),i.YNc(2,L,6,4,"ng-template",null,2,i.W1O),i.qZA(),i.YNc(4,J,2,1,"ng-template",null,3,i.W1O)),2&w){const Z=i.MAs(3),k=i.MAs(5);i.Q6J("content",Z)("open",v.open),i.xp6(1),i.Q6J("tuiHint",k)("appearance",v.isFilterApplied?"primary":"outline")}},dependencies:[s.ez,s.mk,s.sg,s.O5,g.jh,g.o1,e.fN,e.v0,d.zX,E.Qf,A.go,A.D,A.xn,A.t6,A.DM],changeDetection:0})},14375:(j,U,a)=>{a.d(U,{N:()=>y});var i=a(94650),s=a(36895),g=a(86679),e=a(90433),A=a(77579),d=a(78372),E=a(71884),x=a(82722),I=a(71115),O=a(60117);class y{constructor(){this.searchValue=new e.NI,this.destroy$=new A.x,this.searchStr=new i.vpe,this.searchValue.valueChanges.pipe((0,d.b)(400),(0,E.x)(),(0,x.R)(this.destroy$)).subscribe(N=>{this.searchStr.emit(N||null)})}ngOnDestroy(){this.destroy$.complete(),this.destroy$.unsubscribe()}}y.\u0275fac=function(N){return new(N||y)},y.\u0275cmp=i.Xpm({type:y,selectors:[["app-search-bar"]],outputs:{searchStr:"searchStr"},standalone:!0,features:[i.jDz],decls:4,vars:2,consts:[["tuiTextfieldIconLeft","tuiIconSearchLarge",1,"w-full",3,"formControl","tuiTextfieldCleaner"],[1,"mt-2"],["tuiTextfield","","placeholder","Type to start searching..."]],template:function(N,L){1&N&&(i.TgZ(0,"tui-input",0)(1,"p",1),i._uU(2,"Search by Submodule Code"),i.qZA(),i._UZ(3,"input",2),i.qZA()),2&N&&i.Q6J("formControl",L.searchValue)("tuiTextfieldCleaner",!0)},dependencies:[s.ez,g.Qf,g.K3,g.wU,O.MB,e.UX,e.JJ,e.oH,e.u5,I.cn,I.be,I.aR],changeDetection:0})},69952:(j,U,a)=>{a.d(U,{x:()=>H});var i=a(94650),s=a(36895),g=a(14375),e=a(19132),A=a(6110),d=a(82176),E=a(87819),x=a(39367),I=a(1163),O=a(4266),y=a(77579),Q=a(82722),N=a(46954),L=a(20696),J=a(15274);const z=function(c){return["/modules/add-submodule",c]};function S(c,m){if(1&c&&(i.TgZ(0,"a",16),i._uU(1,"+ Add module"),i.qZA()),2&c){const l=i.oxw(2);i.Q6J("routerLink",i.VKq(1,z,l.moduleId))}}function w(c,m){if(1&c&&(i.ynx(0),i.TgZ(1,"div",14),i.YNc(2,S,2,3,"a",15),i.qZA(),i.BQk()),2&c){const l=m.ngIf,_=i.oxw();i.xp6(2),i.Q6J("ngIf",_.currentUser.id==(null==l?null:l.createdBy)||"admin"==(null==_.currentUser?null:_.currentUser.role))}}function v(c,m){1&c&&i.GkF(0)}function Z(c,m){1&c&&i.GkF(0)}function k(c,m){if(1&c){const l=i.EpF();i.ynx(0),i.TgZ(1,"filter",19),i.NdJ("applyStatus",function(C){i.CHM(l);const P=i.oxw(3);return i.KtG(P.sendFilters(C))})("resetFilters",function(C){i.CHM(l);const P=i.oxw(3);return i.KtG(P.resetFilterValues(C))}),i.qZA(),i.BQk()}if(2&c){const l=i.oxw(2).$implicit,_=i.oxw();i.xp6(1),i.Q6J("filterBy",l)("items",_.filterMenuSubmodule)("disabled",0==(null==_.tableData||null==_.tableData.results?null:_.tableData.results.length))}}function f(c,m){if(1&c&&(i.YNc(0,Z,1,0,"ng-container",2),i.YNc(1,k,2,3,"ng-container",2)),2&c){const l=i.oxw().$implicit;i.Q6J("ngIf","Company Name"===l),i.xp6(1),i.Q6J("ngIf","Submodule Code"===l)}}function b(c,m){if(1&c&&(i.ynx(0),i.TgZ(1,"th",17),i._uU(2),i.YNc(3,v,1,0,"ng-container",9),i.YNc(4,f,2,2,"ng-template",null,18,i.W1O),i.qZA(),i.BQk()),2&c){const l=m.$implicit,_=i.MAs(5);i.xp6(2),i.hij(" ",l," \xa0 "),i.xp6(1),i.Q6J("ngIf","Status"===l)("ngIfElse",_)}}function T(c,m){1&c&&(i.ynx(0),i.TgZ(1,"th",20),i._uU(2," It seems there is no data to show here! "),i.qZA(),i.BQk())}function M(c,m){if(1&c){const l=i.EpF();i.TgZ(0,"div",28)(1,"a",29),i.NdJ("click",function(){i.CHM(l);const C=i.oxw().$implicit,P=i.oxw(2);return i.KtG(P.setSubmoduleSlug(null==C?null:C.code,null==C?null:C.id))}),i._UZ(2,"i",30),i._uU(3," Submissions "),i.qZA()()}}const R=function(c){return["/modules/edit-submodule",c]},V=function(c,m){return{moduleID:c,moduleCode:m}};function G(c,m){if(1&c&&(i.TgZ(0,"a",31),i._UZ(1,"i",32),i._uU(2," Edit "),i.qZA()),2&c){const l=i.oxw().$implicit,_=i.oxw(2);i.Q6J("routerLink",i.VKq(2,R,null==l?null:l.id))("queryParams",i.WLB(4,V,_.moduleId,_.moduleCode))}}function te(c,m){if(1&c){const l=i.EpF();i.TgZ(0,"a",33),i.NdJ("click",function(){i.CHM(l);const C=i.oxw().$implicit,P=i.oxw(2),Y=i.MAs(20);return i.KtG(P.showDialog(null==C?null:C.id,Y))}),i._UZ(1,"i",34),i._uU(2," Delete "),i.qZA()}}const ie=function(c){return["/modules/submodule-details",c]};function W(c,m){if(1&c&&(i.TgZ(0,"a",35),i._UZ(1,"i",36),i._uU(2," View "),i.qZA()),2&c){const l=i.oxw().$implicit;i.Q6J("routerLink",i.VKq(1,ie,null==l?null:l.code))}}function ne(c,m){if(1&c&&(i.ynx(0),i.TgZ(1,"tr",21)(2,"td",22),i._uU(3),i.qZA(),i.TgZ(4,"td",22),i._uU(5),i.qZA(),i.TgZ(6,"td",22),i._uU(7),i.qZA(),i.TgZ(8,"td",23),i.YNc(9,M,4,0,"div",24),i.YNc(10,G,3,7,"a",25),i.YNc(11,te,3,0,"a",26),i.YNc(12,W,3,3,"a",27),i.qZA()(),i.BQk()),2&c){const l=m.$implicit,_=i.oxw(2);i.xp6(3),i.hij(" ",null==l||null==l.companyId?null:l.companyId.title," "),i.xp6(2),i.hij(" ",null==l?null:l.code," "),i.xp6(2),i.hij(" ",1===(null==l?null:l.status)?"Published":"Rejected"," "),i.xp6(2),i.Q6J("ngIf",1==(null==l?null:l.status)),i.xp6(1),i.Q6J("ngIf",_.currentUser.id==(null==l?null:l.createdBy)||"admin"==(null==_.currentUser?null:_.currentUser.role)),i.xp6(1),i.Q6J("ngIf",_.currentUser.id==(null==l?null:l.createdBy)||"admin"==(null==_.currentUser?null:_.currentUser.role)),i.xp6(1),i.Q6J("ngIf",_.currentUser.id==(null==l?null:l.createdBy)||"admin"==(null==_.currentUser?null:_.currentUser.role))}}function oe(c,m){if(1&c&&i.YNc(0,ne,13,7,"ng-container",7),2&c){const l=i.oxw();i.Q6J("ngForOf",null==l.tableData?null:l.tableData.results)}}function de(c,m){if(1&c){const l=i.EpF();i.TgZ(0,"p",37),i._uU(1,"Delete SubModule"),i.qZA(),i.TgZ(2,"p",38),i._uU(3,"Are you sure you want to delete this submodule?"),i.qZA(),i.TgZ(4,"div",39)(5,"button",40),i.NdJ("click",function(){const P=i.CHM(l).$implicit;return i.oxw().deleteModule(),i.KtG(P.complete())}),i._uU(6," Confirm "),i.qZA(),i.TgZ(7,"button",41),i.NdJ("click",function(){const P=i.CHM(l).$implicit;return i.KtG(P.complete())}),i._uU(8," Cancel "),i.qZA()()}}class H{constructor(m,l,_,C,P,Y){this.activatedRoute=m,this.dialogs=l,this.dashboardService=_,this.transport=C,this.auth=P,this.router=Y,this.tableColumns=["Company Name","Submodule Code","Status"],this.tableData=[],this.fetchingTableData=new y.x,this.filterMenuCompany=[{name:"Sort by Acsending",status:"idle",icon:"fa fa-sort-alpha-asc fa-lg",sortBy:"Company Name"},{name:"Sort by Descending",status:"idle",icon:"fa fa-sort-alpha-desc fa-lg",sortBy:"Company Name"},{name:"Sort by Latest",status:"idle",icon:"fa fa-calendar-check-o fa-lg",sortBy:"Company Name"},{name:"Sort by Oldest",status:"idle",icon:"fa fa-calendar-times-o fa-lg",sortBy:"Company Name"}],this.filterMenuSubmodule=[{name:"Sort by Acsending",status:"idle",icon:"fa fa-sort-alpha-asc fa-lg",sortBy:"Submodule Code"},{name:"Sort by Descending",status:"idle",icon:"fa fa-sort-alpha-desc fa-lg",sortBy:"Submodule Code"},{name:"Sort by Latest",status:"idle",icon:"fa fa-calendar-check-o fa-lg",sortBy:"Submodule Code"},{name:"Sort by Oldest",status:"idle",icon:"fa fa-calendar-times-o fa-lg",sortBy:"Submodule Code"}],this.filterMenuModule=[{name:"Sort by Acsending",status:"idle",icon:"fa fa-sort-alpha-asc fa-lg"},{name:"Sort by Descending",status:"idle",icon:"fa fa-sort-alpha-desc fa-lg"},{name:"Sort by Latest",status:"idle",icon:"fa fa-calendar-check-o fa-lg"},{name:"Sort by Oldest",status:"idle",icon:"fa fa-calendar-times-o fa-lg"}],this.statusMenu=[{name:"Draft",status:"idle",icon:""},{name:"Published",status:"idle",icon:""}],this.page=1,this.destroy$=new y.x,this.isFilterApplied=!1,this.emitDeleteEvent=new i.vpe,this.emitPagination=new i.vpe,this.emitFilters=new i.vpe,this.emitSearch=new i.vpe,this.currentUser=this.auth.currentUserValue,this.activatedRoute.queryParams.subscribe(q=>this.moduleId=q.moduleID),this.activatedRoute.params.subscribe(q=>{this.transport.moduleCode.next(q.name),this.moduleCode=q.name})}showDialog(m,l){m&&(this.submoduleID=m,this.dialogs.open(l).subscribe())}deleteModule(){this.dashboardService.deleteSubModule(this.submoduleID).subscribe(m=>{this.emitDeleteEvent.emit(!0)})}splitURL(m){return m.split("/").at(-1)}checkIfUserisViewOnly(m){return m.includes(this.currentUser?.id)}checkIfUserisAdmin(m){return m.includes(this.currentUser?.id)}goToPage(m){this.page=m+1,this.emitPagination.emit(this.page)}floorNumber(m){return Math.round(m)}getSortType(m){return"Sort by Latest"==m?.sortType?"latest":"Sort by Oldest"==m?.sortType?"oldest":"Sort by Descending"==m?.sortType?"desc":"asc"}sendFilters(m){if(m){this.fetchingTableData.next(!0);const l={field:"Submodule Code"==m?.applyOn?"subModuleCode":"companyName",sortByTime:1==["latest","oldest"].includes(this.getSortType(m))?this.getSortType(m):void 0,sortBy:1==["asc","desc"].includes(this.getSortType(m))?this.getSortType(m):void 0};null==l.sortBy&&delete l.sortBy,null==l.sortByTime&&delete l.sortByTime,this.dashboardService.getSubModuleByModuleSlug((0,O.rV)(O.MX.moduleSlug),7,this.page,l).pipe((0,Q.R)(this.destroy$)).subscribe(_=>{this.tableData=_,this.fetchingTableData.next(!1)})}}sendSearchValue(m){this.fetchingTableData.next(!0);const l={field:"subModuleCode",search:m};null==l.search&&delete l.search,this.dashboardService.getSubModuleByModuleSlug((0,O.rV)(O.MX.moduleSlug),7,this.page,l).pipe((0,Q.R)(this.destroy$)).subscribe(_=>{this.tableData=_,this.fetchingTableData.next(!1)})}resetFilterValues(m){this.fetchingTableData.next(!0),m&&this.dashboardService.getSubModuleByModuleSlug((0,O.rV)(O.MX.moduleSlug),7,this.page).pipe((0,Q.R)(this.destroy$)).subscribe(l=>{this.tableData=l,this.fetchingTableData.next(!1)})}setSubmoduleSlug(m,l){(0,O.LS)(O.MX.subModuleSlug,m),this.router.navigate([`/modules/${(0,O.rV)(O.MX.moduleSlug)}`,m,l])}ngOnDestroy(){this.destroy$.complete(),this.destroy$.unsubscribe()}}H.\u0275fac=function(m){return new(m||H)(i.Y36(e.gz),i.Y36(I.RO),i.Y36(N.s),i.Y36(L.R),i.Y36(J.e),i.Y36(e.F0))},H.\u0275cmp=i.Xpm({type:H,selectors:[["app-table-view"]],inputs:{tableColumns:"tableColumns",tableData:"tableData",moduleData:"moduleData"},outputs:{emitDeleteEvent:"emitDeleteEvent",emitPagination:"emitPagination",emitFilters:"emitFilters",emitSearch:"emitSearch"},standalone:!0,features:[i.jDz],decls:21,vars:12,consts:[[1,"flex","justify-between","mt-5","mb-2"],[1,"mb-2","w-1/3",3,"searchStr"],[4,"ngIf"],["size","xl",3,"overlay","showLoader"],[1,"relative","overflow-x-auto","rounded-lg","shadow-lg"],[1,"w-full","text-sm","text-left","text-gray-500"],[1,"text-xs","text-gray-700","uppercase","bg-[#eae4d8]"],[4,"ngFor","ngForOf"],["scope","col",1,"py-3","text-sm","text-center"],[4,"ngIf","ngIfElse"],["showSubModules",""],[1,"pt-10","pb-6"],[3,"length","index","indexChange"],["template",""],[1,"cursor-pointer","mt-5"],["class","px-6 py-3 rounded-md bg-[#a58f81] text-white no-underline hover:text-white text-base",3,"routerLink",4,"ngIf"],[1,"px-6","py-3","rounded-md","bg-[#a58f81]","text-white","no-underline","hover:text-white","text-base",3,"routerLink"],["scope","col",1,"px-6","py-3","text-sm"],["notStatus",""],[3,"filterBy","items","disabled","applyStatus","resetFilters"],["colspan","12","role","row",1,"px-5","py-10","text-lg","text-center"],[1,"bg-white","border-b","border-gray-300"],[1,"px-6","py-4"],[1,"py-4","text-center"],["style","all: unset;",4,"ngIf"],["class","px-2 py-1 text-xs font-medium text-white no-underline bg-blue-400 rounded-md cursor-pointer hover:text-white",3,"routerLink","queryParams",4,"ngIf"],["class","font-medium ml-2 px-2 py-1 bg-[#cf2729] text-white rounded-md hover:text-white no-underline cursor-pointer text-xs",3,"click",4,"ngIf"],["class","px-2 py-1 ml-2 text-xs font-medium text-white no-underline bg-green-400 rounded-md cursor-pointer hover:text-white",3,"routerLink",4,"ngIf"],[2,"all","unset"],[1,"px-2","py-1","text-xs","font-medium","text-white","no-underline","bg-[#808285]","rounded-md","cursor-pointer","mr-2","hover:text-white",3,"click"],["aria-hidden","true",1,"fa","fa-print","fa-lg"],[1,"px-2","py-1","text-xs","font-medium","text-white","no-underline","bg-blue-400","rounded-md","cursor-pointer","hover:text-white",3,"routerLink","queryParams"],["aria-hidden","true",1,"fa","fa-pencil","fa-lg"],[1,"font-medium","ml-2","px-2","py-1","bg-[#cf2729]","text-white","rounded-md","hover:text-white","no-underline","cursor-pointer","text-xs",3,"click"],["aria-hidden","true",1,"fa","fa-trash-o","fa-lg"],[1,"px-2","py-1","ml-2","text-xs","font-medium","text-white","no-underline","bg-green-400","rounded-md","cursor-pointer","hover:text-white",3,"routerLink"],["aria-hidden","true",1,"fa","fa-eye","fa-lg"],[1,"pb-2","text-xl","font-semibold","text-center","border-b","border-gray-400"],[1,"mt-4","text-base","font-medium","text-center"],[1,"flex","justify-center","mt-4"],["tuiButton","","appearance","secondary-destructive","type","button","size","m",1,"mx-3",3,"click"],["tuiButton","","type","button","size","m",3,"click"]],template:function(m,l){if(1&m&&(i.TgZ(0,"div",0)(1,"app-search-bar",1),i.NdJ("searchStr",function(C){return l.sendSearchValue(C)}),i.qZA(),i.YNc(2,w,3,1,"ng-container",2),i.ALo(3,"async"),i.qZA(),i.TgZ(4,"tui-loader",3),i.ALo(5,"async"),i.TgZ(6,"div",4)(7,"table",5)(8,"thead",6)(9,"tr"),i.YNc(10,b,6,3,"ng-container",7),i.TgZ(11,"th",8),i._uU(12," Actions "),i.qZA()()(),i.TgZ(13,"tbody"),i.YNc(14,T,3,0,"ng-container",9),i.YNc(15,oe,1,1,"ng-template",null,10,i.W1O),i.qZA()(),i.TgZ(17,"div",11)(18,"tui-pagination",12),i.NdJ("indexChange",function(C){return l.goToPage(C)}),i.qZA()()()(),i.YNc(19,de,9,0,"ng-template",null,13,i.W1O)),2&m){const _=i.MAs(16);i.xp6(2),i.Q6J("ngIf",i.lcZ(3,8,l.moduleData)),i.xp6(2),i.Q6J("overlay",!0)("showLoader",i.lcZ(5,10,l.fetchingTableData)),i.xp6(6),i.Q6J("ngForOf",l.tableColumns),i.xp6(4),i.Q6J("ngIf",0==(null==l.tableData||null==l.tableData.results?null:l.tableData.results.length))("ngIfElse",_),i.xp6(4),i.Q6J("length",(null==l.tableData?null:l.tableData.totalPages)||1)("index",(null==l.tableData?null:l.tableData.page)-1||0)}},dependencies:[s.ez,s.sg,s.O5,s.Ov,g.N,e.Bz,e.rH,A.z,d.i,d.r,E.dS,E.kM,x.fN,x.v0],changeDetection:0})},39062:(j,U,a)=>{a.d(U,{VF:()=>oe,EB:()=>W,Xj:()=>H});var i=a(70655),s=a(94650),g=a(78595);let e=(()=>{class c{constructor(l){this.tuiPan=l}}return c.\u0275fac=function(l){return new(l||c)(s.Y36(g.l))},c.\u0275dir=s.lG2({type:c,selectors:[["","tuiPan",""]],outputs:{tuiPan:"tuiPan"},features:[s._Bn([g.l])]}),c})(),A=(()=>{class c{}return c.\u0275fac=function(l){return new(l||c)},c.\u0275mod=s.oAB({type:c}),c.\u0275inj=s.cJS({}),c})(),d=(()=>{class c{constructor(l){this.tuiSwipe=l}}return c.\u0275fac=function(l){return new(l||c)(s.Y36(g.$D))},c.\u0275dir=s.lG2({type:c,selectors:[["","tuiSwipe",""]],outputs:{tuiSwipe:"tuiSwipe"},features:[s._Bn([g.$D])]}),c})(),E=(()=>{class c{}return c.\u0275fac=function(l){return new(l||c)},c.\u0275mod=s.oAB({type:c}),c.\u0275inj=s.cJS({}),c})();var x=a(38355),I=a(78535),O=a(71225),y=a(37414),Q=a(82210),N=a(68923),L=a(36895),J=a(39300),z=a(59468),S=a(54004),w=a(18505),v=a(63900),Z=a(80702),k=a(9892),f=a(69751),b=a(61135),T=a(56451),M=a(39841),R=a(17445),V=a(60515);function G(c,m){1&c&&s.GkF(0)}function te(c,m){if(1&c){const l=s.EpF();s.TgZ(0,"fieldset",5),s.NdJ("waIntersectionObservee",function(C){const Y=s.CHM(l).index,q=s.oxw();return s.KtG(q.onIntersection(C[0],Y))}),s.GkF(1,6),s.qZA()}if(2&c){const l=m.$implicit,_=m.index,C=s.oxw();s.Q6J("disabled",C.isDisabled(_))("ngStyle",C.getStyle(C.itemsCount)),s.xp6(1),s.Q6J("ngTemplateOutlet",l)}}let ie=(()=>{class c{constructor(l){this.elementRef=l,this.tuiCarouselScroll=(0,x.mL)(this.elementRef.nativeElement,"wheel").pipe((0,J.h)(({deltaX:_})=>Math.abs(_)>20),(0,z.p)(500),(0,S.U)(({deltaX:_})=>Math.sign(_)),(0,w.b)(()=>{this.elementRef.nativeElement.scrollLeft=10}))}}return c.\u0275fac=function(l){return new(l||c)(s.Y36(s.SBq))},c.\u0275dir=s.lG2({type:c,selectors:[["","tuiCarouselScroll",""]],outputs:{tuiCarouselScroll:"tuiCarouselScroll"}}),c})(),W=(()=>{class c extends f.y{constructor(l,_){super(C=>this.output$.subscribe(C)),this.elementRef=l,this.visible$=_,this.duration$=new b.X(0),this.running$=(0,T.T)((0,x.mL)(this.elementRef.nativeElement,"mouseenter").pipe((0,S.U)(I.Iy)),(0,x.mL)(this.elementRef.nativeElement,"touchstart").pipe((0,S.U)(I.Iy)),(0,x.mL)(this.elementRef.nativeElement,"touchend").pipe((0,S.U)(I.Ye)),(0,x.mL)(this.elementRef.nativeElement,"mouseleave").pipe((0,S.U)(I.Ye)),this.visible$),this.output$=(0,M.a)([this.duration$,this.running$]).pipe((0,v.w)(([C,P])=>C&&P?(0,R.F)(C):V.E))}set duration(l){this.duration$.next(l)}set index(l){this.duration$.next(this.duration$.value)}}return c.\u0275fac=function(l){return new(l||c)(s.Y36(s.SBq),s.Y36(k.de))},c.\u0275dir=s.lG2({type:c,selectors:[["tui-carousel"]],inputs:{duration:"duration",index:"index"},features:[s.qOj]}),c})(),ne=(()=>{class c{constructor(l){this.tuiCarouselAutoscroll=l}}return c.\u0275fac=function(l){return new(l||c)(s.Y36(W))},c.\u0275dir=s.lG2({type:c,selectors:[["","tuiCarouselAutoscroll",""]],outputs:{tuiCarouselAutoscroll:"tuiCarouselAutoscroll"}}),c})(),oe=(()=>{class c{constructor(l,_,C){this.changeDetectorRef=l,this.elementRef=_,this.isMobile=C,this.translate=0,this.draggable=!1,this.itemsCount=1,this.index=0,this.indexChange=new s.vpe,this.items=I.Mm,this.transitioned=!0}get transform(){return`translateX(${100*(this.transitioned?this.computedTranslate:this.translate)}%)`}onTransitioned(l){this.transitioned=l,l||(this.translate=this.computedTranslate)}getStyle(l){const _=100/l+"%";return{flexBasis:_,minWidth:_,maxWidth:_}}next(){this.updateIndex(this.index+1)}prev(){this.updateIndex(this.index-1)}isDisabled(l){return l<this.index||l>this.index+this.itemsCount}onIntersection({intersectionRatio:l},_){l&&1!==l&&!this.transitioned&&this.updateIndex(_-Math.floor(this.itemsCount/2))}onScroll(l){this.isMobile||this.updateIndex(this.index+l)}onPan(l){if(!this.computedDraggable)return;const{clientWidth:_}=this.elementRef.nativeElement;this.translate=(0,O.Ki)(l/_+this.translate,1-this.items.length/this.itemsCount,0)}onSwipe(l){"left"===l?this.next():"right"===l&&this.prev()}onAutoscroll(){this.updateIndex(this.index===this.items.length-1?0:this.index+1)}get computedTranslate(){return-this.index/this.itemsCount}get computedDraggable(){return this.isMobile||this.draggable}updateIndex(l){this.index=(0,O.Ki)(l,0,this.items.length-1),this.indexChange.emit(this.index),this.changeDetectorRef.markForCheck()}}return c.\u0275fac=function(l){return new(l||c)(s.Y36(s.sBO),s.Y36(s.SBq),s.Y36(y.fL))},c.\u0275cmp=s.Xpm({type:c,selectors:[["tui-carousel"]],contentQueries:function(l,_,C){if(1&l&&s.Suo(C,Q.w,4,s.Rgc),2&l){let P;s.iGM(P=s.CRH())&&(_.items=P)}},hostVars:4,hostBindings:function(l,_){1&l&&s.NdJ("touchstart",function(){return _.onTransitioned(!1)})("touchend",function(){return _.onTransitioned(!0)})("mousedown",function(){return _.onTransitioned(!1)})("mouseup.silent",function(){return _.onTransitioned(!0)},!1,s.evT),2&l&&s.ekj("_draggable",_.draggable)("_transitioned",_.transitioned)},inputs:{draggable:"draggable",itemsCount:"itemsCount",index:"index"},outputs:{indexChange:"indexChange"},decls:6,vars:6,consts:[[4,"ngIf"],[1,"t-scroller",3,"tuiCarouselScroll"],["waIntersectionRoot","","waIntersectionObserver","","waIntersectionThreshold","0,1","waIntersectionRootMargin","100px 1000000px 100px -51%",1,"t-wrapper"],[1,"t-items",3,"tuiPan","tuiSwipe","tuiCarouselAutoscroll"],["class","t-item",3,"disabled","ngStyle","waIntersectionObservee",4,"ngFor","ngForOf"],[1,"t-item",3,"disabled","ngStyle","waIntersectionObservee"],[3,"ngTemplateOutlet"]],template:function(l,_){1&l&&(s.YNc(0,G,1,0,"ng-container",0),s.ALo(1,"async"),s.TgZ(2,"div",1),s.NdJ("tuiCarouselScroll",function(P){return _.onScroll(P)}),s.TgZ(3,"div",2)(4,"div",3),s.NdJ("tuiPan",function(P){return _.onPan(P[0])})("tuiSwipe",function(P){return _.onSwipe(P.direction)})("tuiCarouselAutoscroll",function(){return _.onAutoscroll()}),s.YNc(5,te,2,3,"fieldset",4),s.qZA()()()),2&l&&(s.Q6J("ngIf",s.lcZ(1,4,_.items.changes)),s.xp6(4),s.Udp("transform",_.transform),s.xp6(1),s.Q6J("ngForOf",_.items))},dependencies:[L.O5,ie,Z.Q7,Z.Z7,e,d,ne,L.sg,L.PC,Z.AY,L.tP,L.Ov],styles:['[_nghost-%COMP%]{position:relative;display:block;overflow:hidden}._draggable[_nghost-%COMP%]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}._draggable[_nghost-%COMP%]:hover{cursor:-webkit-grab;cursor:grab}._draggable[_nghost-%COMP%]:active{cursor:-webkit-grabbing;cursor:grabbing}.t-items[_ngcontent-%COMP%]{display:flex}._transitioned[_nghost-%COMP%]   .t-items[_ngcontent-%COMP%]{transition-property:transform;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out}.t-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;padding:var(--tui-carousel-padding, 0 1.25rem);flex:1;min-width:100%;max-width:100%;box-sizing:border-box;border:none;margin:0}.t-wrapper[_ngcontent-%COMP%]{position:-webkit-sticky;position:sticky;left:0;right:0;min-width:100%;overflow:hidden}.t-scroller[_ngcontent-%COMP%]{scrollbar-width:none;-ms-overflow-style:none;display:flex;overflow:auto;overscroll-behavior-x:none;padding-bottom:2rem;margin-bottom:-2rem}.t-scroller[_ngcontent-%COMP%]::-webkit-scrollbar, .t-scroller[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:transparent;width:0;height:0}.t-scroller[_ngcontent-%COMP%]:before, .t-scroller[_ngcontent-%COMP%]:after{content:"";display:block;min-width:1rem}'],changeDetection:0}),(0,i.gn)([(0,N.TH)()],c.prototype,"draggable",void 0),(0,i.gn)([(0,N.TH)()],c.prototype,"itemsCount",void 0),(0,i.gn)([(0,N.TH)()],c.prototype,"index",void 0),(0,i.gn)([N.UM],c.prototype,"getStyle",null),c})(),H=(()=>{class c{}return c.\u0275fac=function(l){return new(l||c)},c.\u0275mod=s.oAB({type:c}),c.\u0275inj=s.cJS({imports:[[L.ez,Z.$v,A,E,Q.H]]}),c})()},35601:(j,U,a)=>{a.d(U,{h:()=>d,y:()=>E});var i=a(70655),s=a(94650),g=a(68923),e=a(36895);const A=["*"];let d=(()=>{class x{constructor(){this.size="m",this.textAlign="left",this.hoverable=!1,this.transparent=!1}get sizeS(){return"s"===this.size}get sizeM(){return"m"===this.size}get sizeL(){return"l"===this.size}get textAlignLeft(){return"left"===this.textAlign}get textAlignCenter(){return"center"===this.textAlign}get textAlignRight(){return"right"===this.textAlign}}return x.\u0275fac=function(O){return new(O||x)},x.\u0275cmp=s.Xpm({type:x,selectors:[["tui-island"],["a","tuiIsland",""]],hostAttrs:[1,"tui-island"],hostVars:16,hostBindings:function(O,y){2&O&&s.ekj("tui-island_hoverable",y.hoverable)("tui-island_transparent",y.transparent)("tui-island_size_s",y.sizeS)("tui-island_size_m",y.sizeM)("tui-island_size_l",y.sizeL)("tui-island_text-align_left",y.textAlignLeft)("tui-island_text-align_center",y.textAlignCenter)("tui-island_text-align_right",y.textAlignRight)},inputs:{size:"size",textAlign:"textAlign",hoverable:"hoverable",transparent:"transparent"},ngContentSelectors:A,decls:1,vars:0,template:function(O,y){1&O&&(s.F$t(),s.Hsn(0))},styles:["[_nghost-%COMP%]{display:block}"],changeDetection:0}),(0,i.gn)([(0,g.TH)()],x.prototype,"size",void 0),(0,i.gn)([(0,g.TH)()],x.prototype,"textAlign",void 0),(0,i.gn)([(0,g.TH)()],x.prototype,"hoverable",void 0),(0,i.gn)([(0,g.TH)()],x.prototype,"transparent",void 0),x})(),E=(()=>{class x{}return x.\u0275fac=function(O){return new(O||x)},x.\u0275mod=s.oAB({type:x}),x.\u0275inj=s.cJS({imports:[[e.ez]]}),x})()},67155:(j,U,a)=>{a.d(U,{BY:()=>w,V5:()=>k,iv:()=>J,vV:()=>v});var i=a(36895),s=a(94650),g=a(68923),e=a(46422),A=a(78535),d=a(58459),E=a(70655),x=a(9892);const I=["tuiProgressBar",""],O=["progressCircle"],y=["tuiProgressLabel",""],Q=[[["progress"]],[["tui-progress-circle"]],"*"],N=["progress","tui-progress-circle","*"];let J=(()=>{class f{constructor(){this.size="m"}}return f.\u0275fac=function(T){return new(T||f)},f.\u0275cmp=s.Xpm({type:f,selectors:[["progress","tuiProgressBar",""]],hostVars:3,hostBindings:function(T,M){2&T&&(s.uIk("data-size",M.size),s.Udp("--tui-progress-color",M.color))},inputs:{color:"color",size:"size"},attrs:I,decls:0,vars:0,template:function(T,M){},styles:["@keyframes _ngcontent-%COMP%_tuiIndeterminateAnimation{50%{background-position:left}}[_nghost-%COMP%]{-webkit-appearance:none;-moz-appearance:none;appearance:none;border:none;background-color:var(--tui-base-03);display:block;width:100%;color:var(--tui-primary);border-radius:var(--tui-radius-xs);overflow:hidden}[_nghost-%COMP%]::-webkit-progress-value{-webkit-transition:width var(--tui-duration) linear;transition:width var(--tui-duration) linear}[_nghost-%COMP%]::-webkit-progress-value{background:var(--tui-progress-color, currentColor)}[_nghost-%COMP%]::-moz-progress-bar{background:var(--tui-progress-color, currentColor)}[_nghost-%COMP%]::-webkit-progress-bar{background-color:var(--tui-base-03)}[data-size=m][_nghost-%COMP%]{height:1.5rem}[data-size=s][_nghost-%COMP%]{height:.5rem}[data-size=s][_nghost-%COMP%]::-webkit-progress-value{border-radius:var(--tui-radius-xs)}[data-size=s][_nghost-%COMP%]::-moz-progress-bar{border-radius:var(--tui-radius-xs)}[_nghost-%COMP%]:indeterminate{background:transparent;background-image:linear-gradient(to right,var(--tui-base-03) 0 45%,var(--tui-progress-color, currentColor) 45% 55%,var(--tui-base-03) 55% 100%);background-size:225%;background-position:right;animation:_ngcontent-%COMP%_tuiIndeterminateAnimation 3s infinite ease-in-out}[_nghost-%COMP%]:indeterminate::-webkit-progress-bar{background:transparent}[_nghost-%COMP%]:indeterminate::-webkit-progress-value{background:transparent}[_nghost-%COMP%]:indeterminate::-moz-progress-bar{background:transparent}label[tuiProgressLabel][_nghost-%COMP%]:not(:first-child), label[tuiProgressLabel]   [_nghost-%COMP%]:not(:first-child){position:absolute;top:0;left:0;width:100%;height:100%;background-color:transparent}label[tuiProgressLabel][_nghost-%COMP%]:not(:first-child)::-webkit-progress-bar, label[tuiProgressLabel]   [_nghost-%COMP%]:not(:first-child)::-webkit-progress-bar{background-color:transparent}"],changeDetection:0}),(0,E.gn)([(0,g.TH)()],f.prototype,"size",void 0),f})(),w=(()=>{class f{constructor(T,M,R){this.userAgent=T,this.windowRef=M,this.elementRef=R,this.value=0,this.max=1,this.color=null,this.size="m"}get progressPercentage(){return this.value/this.max}get oldEdgeRadiusFallback(){if(!(0,e.xz)(A.FS,this.userAgent))return null;const T=parseInt(this.windowRef.getComputedStyle(this.progressCircle.nativeElement).strokeWidth,10);return(this.elementRef.nativeElement.offsetWidth-T)/2}}return f.\u0275fac=function(T){return new(T||f)(s.Y36(x.yZ),s.Y36(x.m9),s.Y36(s.SBq))},f.\u0275cmp=s.Xpm({type:f,selectors:[["tui-progress-circle"]],viewQuery:function(T,M){if(1&T&&s.Gf(O,7),2&T){let R;s.iGM(R=s.CRH())&&(M.progressCircle=R.first)}},hostVars:5,hostBindings:function(T,M){2&T&&(s.uIk("data-size",M.size),s.Udp("--tui-progress-color",M.color)("--progress-percentage",M.progressPercentage))},inputs:{value:"value",max:"max",color:"color",size:"size"},decls:5,vars:4,consts:[[1,"t-hidden-progress",3,"value","max"],["height","100%","width","100%","aria-hidden","true",1,"t-svg"],["cx","50%","cy","50%",1,"t-track"],["cx","50%","cy","50%",1,"t-progress"],["progressCircle",""]],template:function(T,M){1&T&&(s._UZ(0,"progress",0),s.O4$(),s.TgZ(1,"svg",1),s._UZ(2,"circle",2)(3,"circle",3,4),s.qZA()),2&T&&(s.Q6J("value",M.value)("max",M.max),s.xp6(2),s.uIk("r",M.oldEdgeRadiusFallback),s.xp6(1),s.uIk("r",M.oldEdgeRadiusFallback))},styles:["[_nghost-%COMP%]{position:relative;display:block;color:var(--tui-primary);transform:rotate(-90deg);transform-origin:center;font-size:1rem}[data-size=s][_nghost-%COMP%]{width:2em;height:2em}[data-size=s][_nghost-%COMP%]   .t-track[_ngcontent-%COMP%]{r:.75em;stroke-width:.5em}[data-size=s][_nghost-%COMP%]   .t-progress[_ngcontent-%COMP%]{r:.75em;stroke-width:.5em;stroke-dasharray:4.71238898em;stroke-dashoffset:calc(4.71238898em - var(--progress-percentage) * 4.71238898em)}[data-size=m][_nghost-%COMP%]{width:3em;height:3em}[data-size=m][_nghost-%COMP%]   .t-track[_ngcontent-%COMP%]{r:1.375em;stroke-width:.25em}[data-size=m][_nghost-%COMP%]   .t-progress[_ngcontent-%COMP%]{r:1.3125em;stroke-width:.375em;stroke-dasharray:8.24668072em;stroke-dashoffset:calc(8.24668072em - var(--progress-percentage) * 8.24668072em)}[data-size=l][_nghost-%COMP%]{width:4em;height:4em}[data-size=l][_nghost-%COMP%]   .t-track[_ngcontent-%COMP%]{r:1.875em;stroke-width:.25em}[data-size=l][_nghost-%COMP%]   .t-progress[_ngcontent-%COMP%]{r:1.8125em;stroke-width:.375em;stroke-dasharray:11.38827337em;stroke-dashoffset:calc(11.38827337em - var(--progress-percentage) * 11.38827337em)}[data-size=xl][_nghost-%COMP%]{width:7em;height:7em}[data-size=xl][_nghost-%COMP%]   .t-track[_ngcontent-%COMP%]{r:3.375em;stroke-width:.25em}[data-size=xl][_nghost-%COMP%]   .t-progress[_ngcontent-%COMP%]{r:3.3125em;stroke-width:.375em;stroke-dasharray:20.81305133em;stroke-dashoffset:calc(20.81305133em - var(--progress-percentage) * 20.81305133em)}.t-track[_ngcontent-%COMP%]{fill:transparent;stroke:var(--tui-base-03)}.t-progress[_ngcontent-%COMP%]{fill:transparent;stroke:var(--tui-progress-color, currentColor);transition:stroke-dashoffset var(--tui-duration) linear}.t-hidden-progress[_ngcontent-%COMP%]{position:absolute;clip:rect(1px,1px,1px,1px);-webkit-clip-path:inset(50%);clip-path:inset(50%);height:1px;width:1px;margin:-1px;overflow:hidden;padding:0}.t-svg[_ngcontent-%COMP%]{overflow:unset}"],changeDetection:0}),(0,E.gn)([(0,g.TH)()],f.prototype,"value",void 0),(0,E.gn)([(0,g.TH)()],f.prototype,"max",void 0),(0,E.gn)([(0,g.TH)()],f.prototype,"color",void 0),(0,E.gn)([(0,g.TH)()],f.prototype,"size",void 0),f})(),v=(()=>{class f{}return f.\u0275fac=function(T){return new(T||f)},f.\u0275cmp=s.Xpm({type:f,selectors:[["label","tuiProgressLabel",""]],attrs:y,ngContentSelectors:N,decls:4,vars:0,consts:[[1,"t-label"]],template:function(T,M){1&T&&(s.F$t(Q),s.Hsn(0),s.Hsn(1,1),s.TgZ(2,"span",0),s.Hsn(3,2),s.qZA())},styles:["[_nghost-%COMP%]{position:relative;display:inline-block}.t-label[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;display:flex;font:var(--tui-font-text-s);color:var(--tui-text-01);flex-direction:column;justify-content:center;align-items:center}"],changeDetection:0}),f})(),k=(()=>{class f{}return f.\u0275fac=function(T){return new(T||f)},f.\u0275mod=s.oAB({type:f}),f.\u0275inj=s.cJS({imports:[[i.ez,d.Ih]]}),f})()},94813:(j,U,a)=>{a.d(U,{j:()=>s});var i=a(54004);function s(...g){const e=g.length;if(0===e)throw new Error("list of properties cannot be empty.");return(0,i.U)(A=>{let d=A;for(let E=0;E<e;E++){const x=d?.[g[E]];if(!(typeof x<"u"))return;d=x}return d})}}}]);