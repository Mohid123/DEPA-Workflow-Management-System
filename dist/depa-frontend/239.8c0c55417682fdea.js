"use strict";(self.webpackChunkDEPA_FRONTEND=self.webpackChunkDEPA_FRONTEND||[]).push([[239],{35575:(he,ce,l)=>{l.d(ce,{Ii:()=>Y,Mt:()=>de});var o=l(64537),u=l(54789),d=l(66640),e=l(85600),R=l(441),c=l(89570),L=l(88692);function D(H,k){1&H&&o._UZ(0,"tui-svg",2),2&H&&o.Q6J("src",k.polymorpheusOutlet)}function K(H,k){1&H&&o.GkF(0)}const P={iconSmall:"tuiIconChevronDown",iconLarge:"tuiIconChevronDownLarge"},y=new o.OlP("[TUI_ARROW_OPTIONS]",{factory:()=>P}),Y=new o.OlP("[TUI_ARROW_MODE]",{factory:()=>({interactive:oe,disabled:oe})}),oe=new c.Al((()=>{class H{constructor(E,J,W){this.dropdown=E,this.textfieldSize=J,this.options=W}get rotated(){return this.dropdown.open}get arrowIcon(){return(0,d.R9)(this.textfieldSize.size)?this.options.iconLarge:this.options.iconSmall}}return H.\u0275fac=function(E){return new(E||H)(o.Y36(e.o1),o.Y36(R.kI),o.Y36(y))},H.\u0275cmp=o.Xpm({type:H,selectors:[["tui-arrow"]],hostVars:2,hostBindings:function(E,J){2&E&&o.ekj("_rotated",J.rotated)},decls:3,vars:4,consts:[[3,"src",4,"polymorpheusOutlet"],[4,"ngIf"],[3,"src"]],template:function(E,J){1&E&&(o.YNc(0,D,1,1,"tui-svg",0),o.YNc(1,K,1,0,"ng-container",1),o.ALo(2,"async")),2&E&&(o.Q6J("polymorpheusOutlet",J.arrowIcon),o.xp6(1),o.Q6J("ngIf",o.lcZ(2,2,J.dropdown.openChange)))},dependencies:[u.PN,c.Li,L.O5,L.Ov],styles:["[_nghost-%COMP%]{transition-property:transform;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out;display:block;cursor:pointer;pointer-events:none}._rotated[_nghost-%COMP%]{transform:rotate(180deg)}"],changeDetection:0}),H})());let de=(()=>{class H{}return H.\u0275fac=function(E){return new(E||H)},H.\u0275mod=o.oAB({type:H}),H.\u0275inj=o.cJS({imports:[[L.ez,u.EI,c.wq]]}),H})()},33713:(he,ce,l)=>{l.d(ce,{VF:()=>re,EB:()=>j,Xj:()=>le});var o=l(64762),u=l(64537),d=l(84650),e=l(92172);let R=(()=>{class w{constructor(C){this.tuiSwipe=C}}return w.\u0275fac=function(C){return new(C||w)(u.Y36(e.$D))},w.\u0275dir=u.lG2({type:w,selectors:[["","tuiSwipe",""]],outputs:{tuiSwipe:"tuiSwipe"},features:[u._Bn([e.$D])]}),w})(),c=(()=>{class w{}return w.\u0275fac=function(C){return new(C||w)},w.\u0275mod=u.oAB({type:w}),w.\u0275inj=u.cJS({}),w})();var L=l(2325),D=l(33770),K=l(85648),P=l(68033),y=l(56210),V=l(44358),Y=l(88692),z=l(74970),ae=l(56148),oe=l(27969),de=l(98168),H=l(61528),k=l(11693),E=l(62579),J=l(87241),W=l(54121),me=l(21860),pe=l(15696),Q=l(15490),B=l(9018);function I(w,te){1&w&&u.GkF(0)}function ie(w,te){if(1&w){const C=u.EpF();u.TgZ(0,"fieldset",5),u.NdJ("waIntersectionObservee",function(ee){const fe=u.CHM(C).index,xe=u.oxw();return u.KtG(xe.onIntersection(ee[0],fe))}),u.GkF(1,6),u.qZA()}if(2&w){const C=te.$implicit,q=te.index,ee=u.oxw();u.Q6J("disabled",ee.isDisabled(q))("ngStyle",ee.getStyle(ee.itemsCount)),u.xp6(1),u.Q6J("ngTemplateOutlet",C)}}let X=(()=>{class w{constructor(C){this.elementRef=C,this.tuiCarouselScroll=(0,L.mL)(this.elementRef.nativeElement,"wheel").pipe((0,z.h)(({deltaX:q})=>Math.abs(q)>20),(0,ae.p)(500),(0,oe.U)(({deltaX:q})=>Math.sign(q)),(0,de.b)(()=>{this.elementRef.nativeElement.scrollLeft=10}))}}return w.\u0275fac=function(C){return new(C||w)(u.Y36(u.SBq))},w.\u0275dir=u.lG2({type:w,selectors:[["","tuiCarouselScroll",""]],outputs:{tuiCarouselScroll:"tuiCarouselScroll"}}),w})(),j=(()=>{class w extends J.y{constructor(C,q){super(ee=>this.output$.subscribe(ee)),this.elementRef=C,this.visible$=q,this.duration$=new W.X(0),this.running$=(0,me.T)((0,L.mL)(this.elementRef.nativeElement,"mouseenter").pipe((0,oe.U)(D.Iy)),(0,L.mL)(this.elementRef.nativeElement,"touchstart").pipe((0,oe.U)(D.Iy)),(0,L.mL)(this.elementRef.nativeElement,"touchend").pipe((0,oe.U)(D.Ye)),(0,L.mL)(this.elementRef.nativeElement,"mouseleave").pipe((0,oe.U)(D.Ye)),this.visible$),this.output$=(0,pe.a)([this.duration$,this.running$]).pipe((0,H.w)(([ee,_e])=>ee&&_e?(0,Q.F)(ee):B.E))}set duration(C){this.duration$.next(C)}set index(C){this.duration$.next(this.duration$.value)}}return w.\u0275fac=function(C){return new(C||w)(u.Y36(u.SBq),u.Y36(E.de))},w.\u0275dir=u.lG2({type:w,selectors:[["tui-carousel"]],inputs:{duration:"duration",index:"index"},features:[u.qOj]}),w})(),O=(()=>{class w{constructor(C){this.tuiCarouselAutoscroll=C}}return w.\u0275fac=function(C){return new(C||w)(u.Y36(j))},w.\u0275dir=u.lG2({type:w,selectors:[["","tuiCarouselAutoscroll",""]],outputs:{tuiCarouselAutoscroll:"tuiCarouselAutoscroll"}}),w})(),re=(()=>{class w{constructor(C,q,ee){this.changeDetectorRef=C,this.elementRef=q,this.isMobile=ee,this.translate=0,this.draggable=!1,this.itemsCount=1,this.index=0,this.indexChange=new u.vpe,this.items=D.Mm,this.transitioned=!0}get transform(){return`translateX(${100*(this.transitioned?this.computedTranslate:this.translate)}%)`}onTransitioned(C){this.transitioned=C,C||(this.translate=this.computedTranslate)}getStyle(C){const q=100/C+"%";return{flexBasis:q,minWidth:q,maxWidth:q}}next(){this.updateIndex(this.index+1)}prev(){this.updateIndex(this.index-1)}isDisabled(C){return C<this.index||C>this.index+this.itemsCount}onIntersection({intersectionRatio:C},q){C&&1!==C&&!this.transitioned&&this.updateIndex(q-Math.floor(this.itemsCount/2))}onScroll(C){this.isMobile||this.updateIndex(this.index+C)}onPan(C){if(!this.computedDraggable)return;const{clientWidth:q}=this.elementRef.nativeElement;this.translate=(0,K.Ki)(C/q+this.translate,1-this.items.length/this.itemsCount,0)}onSwipe(C){"left"===C?this.next():"right"===C&&this.prev()}onAutoscroll(){this.updateIndex(this.index===this.items.length-1?0:this.index+1)}get computedTranslate(){return-this.index/this.itemsCount}get computedDraggable(){return this.isMobile||this.draggable}updateIndex(C){this.index=(0,K.Ki)(C,0,this.items.length-1),this.indexChange.emit(this.index),this.changeDetectorRef.markForCheck()}}return w.\u0275fac=function(C){return new(C||w)(u.Y36(u.sBO),u.Y36(u.SBq),u.Y36(P.fL))},w.\u0275cmp=u.Xpm({type:w,selectors:[["tui-carousel"]],contentQueries:function(C,q,ee){if(1&C&&u.Suo(ee,y.w,4,u.Rgc),2&C){let _e;u.iGM(_e=u.CRH())&&(q.items=_e)}},hostVars:4,hostBindings:function(C,q){1&C&&u.NdJ("touchstart",function(){return q.onTransitioned(!1)})("touchend",function(){return q.onTransitioned(!0)})("mousedown",function(){return q.onTransitioned(!1)})("mouseup.silent",function(){return q.onTransitioned(!0)},!1,u.evT),2&C&&u.ekj("_draggable",q.draggable)("_transitioned",q.transitioned)},inputs:{draggable:"draggable",itemsCount:"itemsCount",index:"index"},outputs:{indexChange:"indexChange"},decls:6,vars:6,consts:[[4,"ngIf"],[1,"t-scroller",3,"tuiCarouselScroll"],["waIntersectionRoot","","waIntersectionObserver","","waIntersectionThreshold","0,1","waIntersectionRootMargin","100px 1000000px 100px -51%",1,"t-wrapper"],[1,"t-items",3,"tuiPan","tuiSwipe","tuiCarouselAutoscroll"],["class","t-item",3,"disabled","ngStyle","waIntersectionObservee",4,"ngFor","ngForOf"],[1,"t-item",3,"disabled","ngStyle","waIntersectionObservee"],[3,"ngTemplateOutlet"]],template:function(C,q){1&C&&(u.YNc(0,I,1,0,"ng-container",0),u.ALo(1,"async"),u.TgZ(2,"div",1),u.NdJ("tuiCarouselScroll",function(_e){return q.onScroll(_e)}),u.TgZ(3,"div",2)(4,"div",3),u.NdJ("tuiPan",function(_e){return q.onPan(_e[0])})("tuiSwipe",function(_e){return q.onSwipe(_e.direction)})("tuiCarouselAutoscroll",function(){return q.onAutoscroll()}),u.YNc(5,ie,2,3,"fieldset",4),u.qZA()()()),2&C&&(u.Q6J("ngIf",u.lcZ(1,4,q.items.changes)),u.xp6(4),u.Udp("transform",q.transform),u.xp6(1),u.Q6J("ngForOf",q.items))},dependencies:[Y.O5,X,k.Q7,k.Z7,d.g,R,O,Y.sg,Y.PC,k.AY,Y.tP,Y.Ov],styles:['[_nghost-%COMP%]{position:relative;display:block;overflow:hidden}._draggable[_nghost-%COMP%]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}._draggable[_nghost-%COMP%]:hover{cursor:-webkit-grab;cursor:grab}._draggable[_nghost-%COMP%]:active{cursor:-webkit-grabbing;cursor:grabbing}.t-items[_ngcontent-%COMP%]{display:flex}._transitioned[_nghost-%COMP%]   .t-items[_ngcontent-%COMP%]{transition-property:transform;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out}.t-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;padding:var(--tui-carousel-padding, 0 1.25rem);flex:1;min-width:100%;max-width:100%;box-sizing:border-box;border:none;margin:0}.t-wrapper[_ngcontent-%COMP%]{position:-webkit-sticky;position:sticky;left:0;right:0;min-width:100%;overflow:hidden}.t-scroller[_ngcontent-%COMP%]{scrollbar-width:none;-ms-overflow-style:none;display:flex;overflow:auto;overscroll-behavior-x:none;padding-bottom:2rem;margin-bottom:-2rem}.t-scroller[_ngcontent-%COMP%]::-webkit-scrollbar, .t-scroller[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:transparent;width:0;height:0}.t-scroller[_ngcontent-%COMP%]:before, .t-scroller[_ngcontent-%COMP%]:after{content:"";display:block;min-width:1rem}'],changeDetection:0}),(0,o.gn)([(0,V.TH)()],w.prototype,"draggable",void 0),(0,o.gn)([(0,V.TH)()],w.prototype,"itemsCount",void 0),(0,o.gn)([(0,V.TH)()],w.prototype,"index",void 0),(0,o.gn)([V.UM],w.prototype,"getStyle",null),w})(),le=(()=>{class w{}return w.\u0275fac=function(C){return new(C||w)},w.\u0275mod=u.oAB({type:w}),w.\u0275inj=u.cJS({imports:[[Y.ez,k.$v,d.N,c,y.H]]}),w})()},46841:(he,ce,l)=>{l.d(ce,{h:()=>c,y:()=>L});var o=l(64762),u=l(64537),d=l(44358),e=l(88692);const R=["*"];let c=(()=>{class D{constructor(){this.size="m",this.textAlign="left",this.hoverable=!1,this.transparent=!1}get sizeS(){return"s"===this.size}get sizeM(){return"m"===this.size}get sizeL(){return"l"===this.size}get textAlignLeft(){return"left"===this.textAlign}get textAlignCenter(){return"center"===this.textAlign}get textAlignRight(){return"right"===this.textAlign}}return D.\u0275fac=function(P){return new(P||D)},D.\u0275cmp=u.Xpm({type:D,selectors:[["tui-island"],["a","tuiIsland",""]],hostAttrs:[1,"tui-island"],hostVars:16,hostBindings:function(P,y){2&P&&u.ekj("tui-island_hoverable",y.hoverable)("tui-island_transparent",y.transparent)("tui-island_size_s",y.sizeS)("tui-island_size_m",y.sizeM)("tui-island_size_l",y.sizeL)("tui-island_text-align_left",y.textAlignLeft)("tui-island_text-align_center",y.textAlignCenter)("tui-island_text-align_right",y.textAlignRight)},inputs:{size:"size",textAlign:"textAlign",hoverable:"hoverable",transparent:"transparent"},ngContentSelectors:R,decls:1,vars:0,template:function(P,y){1&P&&(u.F$t(),u.Hsn(0))},styles:["[_nghost-%COMP%]{display:block}"],changeDetection:0}),(0,o.gn)([(0,d.TH)()],D.prototype,"size",void 0),(0,o.gn)([(0,d.TH)()],D.prototype,"textAlign",void 0),(0,o.gn)([(0,d.TH)()],D.prototype,"hoverable",void 0),(0,o.gn)([(0,d.TH)()],D.prototype,"transparent",void 0),D})(),L=(()=>{class D{}return D.\u0275fac=function(P){return new(P||D)},D.\u0275mod=u.oAB({type:D}),D.\u0275inj=u.cJS({imports:[[e.ez]]}),D})()},62124:(he,ce,l)=>{l.d(ce,{VT:()=>M,Qp:()=>x,lm:()=>Z});var o=l(64762),u=l(64537),d=l(221),e=l(533),R=l(42420),c=l(76480),L=l(33770),D=l(11927),K=l(57179),P=l(68033),y=l(44358),V=l(92668),Y=l(20092),z=l(85600),ae=l(441),oe=l(91489),de=l(76060),H=l(75111),k=l(54789),E=l(82847);class me{constructor(b,f){this.item=b,this.stringify=f}toString(){return this.stringify(this.item)}}var pe=l(35575),Q=l(84690),B=l(30026),I=l(59811),ie=l(88692),X=l(89570),j=l(61422),O=l(79155);let re=(()=>{class _ extends j.TA{get size(){var f;return"l"===this.option.size||"l"===(null===(f=this.dataList)||void 0===f?void 0:f.size)&&!this.option.size?"l":"m"}get selected(){const{value:f}=this.option;return(0,D.Pc)(f)&&(0,D.Pc)(this.value)&&this.value.some(h=>this.matcher(h,f))}}return _.\u0275fac=function(){let b;return function(h){return(b||(b=u.n5z(_)))(h||_)}}(),_.\u0275cmp=u.Xpm({type:_,selectors:[["tui-multi-select-option"]],features:[u.qOj],decls:3,vars:5,consts:[[1,"t-checkbox",3,"size","value"],[3,"ngTemplateOutlet"]],template:function(f,h){1&f&&(u._UZ(0,"tui-primitive-checkbox",0),u.ALo(1,"async"),u.GkF(2,1)),2&f&&(u.Q6J("size",h.size)("value",u.lcZ(1,3,h.selected$)),u.xp6(2),u.Q6J("ngTemplateOutlet",h.context.$implicit))},dependencies:[O.r3,ie.tP,ie.Ov],styles:["@keyframes _ngcontent-%COMP%_retrigger{0%{left:1px}to{left:2px}}[_nghost-%COMP%]{display:flex;flex:1;align-items:center;overflow:hidden;animation:_ngcontent-%COMP%_retrigger 1s}.t-checkbox[_ngcontent-%COMP%]{margin-right:.75rem}"],changeDetection:0}),_})(),$=(()=>{class _{}return _.\u0275fac=function(f){return new(f||_)},_.\u0275mod=u.oAB({type:_}),_.\u0275inj=u.cJS({imports:[[ie.ez,O.fB]]}),_})();function le(_,b){if(1&_&&(u.ynx(0),u._uU(1),u.BQk()),2&_){const f=b.polymorpheusOutlet;u.xp6(1),u.hij(" ",f," ")}}const w=function(_){return{$implicit:_}};function te(_,b){if(1&_&&(u.TgZ(0,"div",6),u.YNc(1,le,2,1,"ng-container",7),u.qZA()),2&_){const f=u.oxw(),h=u.MAs(2);u.ekj("t-group_fullsize",h.labelOutside),u.xp6(1),u.Q6J("polymorpheusOutlet",f.valueContent)("polymorpheusOutletContext",u.VKq(4,w,f.value))}}function C(_,b){if(1&_&&(u.ynx(0),u._uU(1),u.BQk()),2&_){const f=b.polymorpheusOutlet;u.xp6(1),u.hij(" ",f," ")}}function q(_,b){if(1&_&&(u.TgZ(0,"div",9),u.YNc(1,C,2,1,"ng-container",10),u.qZA()),2&_){const f=u.oxw(2);u.xp6(1),u.Q6J("polymorpheusOutlet",f.arrow)}}function ee(_,b){if(1&_&&u.YNc(0,q,2,1,"div",8),2&_){const f=u.oxw();u.Q6J("ngIf",f.arrow)}}const _e=["*"],S={expandable:!0,valueContent:""},v=new u.OlP("[TUI_MULTI_SELECT_OPTIONS]",{factory:()=>S});let M=(()=>{class _ extends c.m6{constructor(f,h,F,se,ue,Te){super(f,h),this.arrowMode=F,this.itemsHandlers=se,this.options=ue,this.controller=Te,this.stringify=this.itemsHandlers.stringify,this.identityMatcher=this.itemsHandlers.identityMatcher,this.expandable=this.options.expandable,this.search="",this.placeholder="",this.editable=!0,this.disabledItemHandler=this.itemsHandlers.disabledItemHandler,this.valueContent=this.options.valueContent,this.rows=1/0,this.searchChange=new u.vpe,this.datalist="",this.open=!1,this.valueMapper=(Ae,Se,Ie)=>Ie?L.LZ:Ae.map(we=>new me(we,Se)),this.disabledItemHandlerWrapper=Ae=>Se=>(0,D.Aj)(Se)||Ae(Se.item)}get size(){return this.controller.size}get arrow(){return this.interactive?this.arrowMode.interactive:this.arrowMode.disabled}get nativeFocusableElement(){var f,h;return null!==(h=null===(f=this.input)||void 0===f?void 0:f.nativeFocusableElement)&&void 0!==h?h:null}get focused(){var f,h;return!(null===(f=this.input)||void 0===f||!f.focused)||!(null===(h=this.hostedDropdown)||void 0===h||!h.focused)}get computedValue(){return this.computedGroup?L.LZ:this.value}get searchOrSpace(){return this.computedGroup?" ":this.searchString}get searchString(){return null===this.search?"":this.search}get computedGroup(){return!!this.valueContent&&this.value.length>0&&(!this.focused||!this.editable)}getStringifier(f){return({$implicit:h})=>f(h)}onSpace(f){this.editable||f.preventDefault(),this.readOnly||(this.open=!0)}handleOption(f){const{value:h,identityMatcher:F}=this,se=h.findIndex(ue=>F(ue,f));this.updateValue(-1===se?[...h,f]:h.filter((ue,Te)=>Te!==se)),this.updateSearch(null)}onEnter(f){const{value:h}=this,F=this.accessor?this.accessor.getOptions():[];1===F.length&&(f.preventDefault(),this.updateValue((0,D.jp)(h,F[0])),this.updateSearch(null))}onClick({nativeFocusableElement:f}){var h;this.interactive&&f&&(0,K.V8)(f)&&(null===(h=this.hostedDropdown)||void 0===h||h.updateOpen(!this.open))}onInput(f){this.updateValue(f.map(({item:h})=>h))}onSearch(f){this.open=!0,this.updateSearch(f)}onActiveZone(f){this.updateFocused(f)}setDisabledState(){super.setDisabledState(),this.open=!1}updateSearch(f){this.search!==f&&(this.search=f,this.searchChange.emit(f))}}return _.\u0275fac=function(f){return new(f||_)(u.Y36(Y.a5,10),u.Y36(u.sBO),u.Y36(pe.Ii),u.Y36(I.Ys),u.Y36(v),u.Y36(ae.Cs))},_.\u0275cmp=u.Xpm({type:_,selectors:[["tui-multi-select"]],contentQueries:function(f,h,F){if(1&f&&(u.Suo(F,de.Cc,5),u.Suo(F,H.gX,5,u.Rgc)),2&f){let se;u.iGM(se=u.CRH())&&(h.accessor=se.first),u.iGM(se=u.CRH())&&(h.datalist=se.first)}},viewQuery:function(f,h){if(1&f&&(u.Gf(z.o1,5),u.Gf(Q.PZ,5)),2&f){let F;u.iGM(F=u.CRH())&&(h.hostedDropdown=F.first),u.iGM(F=u.CRH())&&(h.input=F.first)}},hostVars:3,hostBindings:function(f,h){2&f&&(u.uIk("data-size",h.size),u.ekj("_editable",h.editable))},inputs:{stringify:"stringify",identityMatcher:"identityMatcher",expandable:"expandable",search:"search",placeholder:"placeholder",editable:"editable",disabledItemHandler:"disabledItemHandler",valueContent:"valueContent",rows:"rows"},outputs:{searchChange:"searchChange"},features:[u._Bn([(0,P.FT)(_),(0,c.wB)(_),(0,de.oE)(_),ae.Y0],[B.yn]),u.qOj],ngContentSelectors:_e,decls:10,vars:28,consts:[[1,"t-hosted",3,"canOpen","content","open","openChange","tuiActiveZoneChange"],["automation-id","tui-multi-select__input",1,"t-input",3,"nativeId","tuiTextfieldIcon","disabled","disabledItemHandler","readOnly","inputHidden","pseudoHover","placeholder","pseudoFocus","pseudoInvalid","editable","expandable","search","rows","ngModel","ngModelChange","searchChange","keydown.space","keydown.enter","click.prevent"],["inputTag",""],[1,"t-wrapper"],["class","t-group",3,"t-group_fullsize",4,"ngIf"],["icon",""],[1,"t-group"],[4,"polymorpheusOutlet","polymorpheusOutletContext"],["tuiWrapper","","appearance","icon","automation-id","tui-multi-select__arrow","tuiPreventDefault","mousedown","class","t-arrow",4,"ngIf"],["tuiWrapper","","appearance","icon","automation-id","tui-multi-select__arrow","tuiPreventDefault","mousedown",1,"t-arrow"],[4,"polymorpheusOutlet"]],template:function(f,h){if(1&f){const F=u.EpF();u.F$t(),u.TgZ(0,"tui-hosted-dropdown",0),u.NdJ("openChange",function(ue){return h.open=ue})("tuiActiveZoneChange",function(ue){return h.onActiveZone(ue)}),u.TgZ(1,"tui-input-tag",1,2),u.NdJ("ngModelChange",function(ue){return h.onInput(ue)})("searchChange",function(ue){return h.onSearch(ue)})("keydown.space",function(ue){return h.onSpace(ue)})("keydown.enter",function(ue){return h.onEnter(ue)})("click.prevent",function(){u.CHM(F);const ue=u.MAs(2);return u.KtG(h.onClick(ue))}),u.ALo(3,"tuiMapper"),u.ALo(4,"tuiMapper"),u.Hsn(5),u.qZA(),u.TgZ(6,"div",3),u.YNc(7,te,2,6,"div",4),u.YNc(8,ee,1,1,"ng-template",null,5,u.W1O),u.qZA()()}if(2&f){const F=u.MAs(9);u.Q6J("canOpen",h.interactive)("content",h.datalist||"")("open",h.open),u.xp6(1),u.Q6J("nativeId",h.nativeId)("tuiTextfieldIcon",F)("disabled",h.disabled)("disabledItemHandler",u.xi3(3,21,h.disabledItemHandler,h.disabledItemHandlerWrapper))("readOnly",h.readOnly)("inputHidden",!h.editable)("pseudoHover",h.pseudoHover)("placeholder",h.placeholder)("pseudoFocus",h.computedFocused)("pseudoInvalid",h.computedInvalid)("editable",!1)("expandable",h.expandable)("search",h.searchOrSpace)("rows",h.rows)("ngModel",u.Dn7(4,24,h.computedValue,h.valueMapper,h.stringify)),u.xp6(5),u.ekj("t-wrapper_disabled",h.disabled),u.xp6(1),u.Q6J("ngIf",h.computedGroup)}},dependencies:[z.o1,Q.PZ,d.e,ae.AW,Y.JJ,Y.On,ie.O5,X.Li,oe.o,e.A,R.c],styles:["[_nghost-%COMP%]{position:relative;display:block;border-radius:var(--tui-radius-m)}._disabled[_nghost-%COMP%]{pointer-events:none}.t-hosted[_ngcontent-%COMP%]{display:block;border-radius:inherit}.t-input[_ngcontent-%COMP%]{border-radius:inherit}[_nghost-%COMP%]:not(._editable):not(._readonly)   .t-input[_ngcontent-%COMP%]{cursor:pointer}.t-wrapper[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;display:flex;pointer-events:none;justify-content:flex-end}.t-wrapper_disabled[_ngcontent-%COMP%]{opacity:var(--tui-disabled-opacity)}[data-size=s][_nghost-%COMP%]   .t-wrapper[_ngcontent-%COMP%]{height:var(--tui-height-s)}[data-size=m][_nghost-%COMP%]   .t-wrapper[_ngcontent-%COMP%]{height:var(--tui-height-m)}[data-size=l][_nghost-%COMP%]   .t-wrapper[_ngcontent-%COMP%]{height:var(--tui-height-l)}.t-group[_ngcontent-%COMP%]{display:flex;flex:1;align-items:center;padding:1.6875rem 0 .5625rem 1rem;overflow:hidden}.t-group_fullsize[_ngcontent-%COMP%]{padding-top:.0625rem;padding-bottom:0}[data-size=m][_nghost-%COMP%]   .t-group_fullsize.t-group_fullsize[_ngcontent-%COMP%]{padding-top:0}[data-size=m][_nghost-%COMP%]   .t-group[_ngcontent-%COMP%]{padding:1.1875rem 0 0 .75rem;font-size:.8125rem}.t-arrow[_ngcontent-%COMP%]{pointer-events:auto;cursor:pointer}"],changeDetection:0}),(0,o.gn)([(0,y.TH)()],_.prototype,"stringify",void 0),(0,o.gn)([(0,y.TH)()],_.prototype,"identityMatcher",void 0),(0,o.gn)([(0,y.TH)()],_.prototype,"expandable",void 0),(0,o.gn)([(0,y.TH)()],_.prototype,"search",void 0),(0,o.gn)([(0,y.TH)()],_.prototype,"placeholder",void 0),(0,o.gn)([(0,y.TH)()],_.prototype,"editable",void 0),(0,o.gn)([(0,y.TH)()],_.prototype,"disabledItemHandler",void 0),(0,o.gn)([(0,y.TH)()],_.prototype,"valueContent",void 0),(0,o.gn)([y.UM],_.prototype,"getStringifier",null),_})();const N=new X.Al(re);let x=(()=>{class _{}return _.\u0275fac=function(f){return new(f||_)},_.\u0275dir=u.lG2({type:_,selectors:[["","tuiMultiSelectGroup",""]],features:[u._Bn([(0,de.P7)(N),{provide:de.N1,deps:[Y.a5,[new u.FiY,(0,u.Gpc)(()=>M)]],useFactory:(b,f)=>f||{handleOption:h=>{var F;return null===(F=b.control)||void 0===F?void 0:F.setValue((0,D.jp)(b.value||[],h))}}},{provide:Y.JU,multi:!0,useValue:{writeValue:L.iD,registerOnChange:L.iD,registerOnTouched:L.iD}}])]}),_})(),Z=(()=>{class _{}return _.\u0275fac=function(f){return new(f||_)},_.\u0275mod=u.oAB({type:_}),_.\u0275inj=u.cJS({imports:[[ie.ez,Y.u5,X.wq,oe.W,e.Z,d.A,pe.Mt,V.WD,R.I,k.EI,z.jh,Q.cB,$,E.j,H.pc,ae.cn]]}),_})()},38929:(he,ce,l)=>{l.d(ce,{V5:()=>H,iv:()=>V,vV:()=>oe});var o=l(88692),u=l(64537),d=l(44358),e=l(1336),R=l(64762);const c=["tuiProgressBar",""],D=["tuiProgressLabel",""],K=[[["progress"]],[["tui-progress-circle"]],"*"],P=["progress","tui-progress-circle","*"];let V=(()=>{class k{constructor(){this.size="m"}}return k.\u0275fac=function(J){return new(J||k)},k.\u0275cmp=u.Xpm({type:k,selectors:[["progress","tuiProgressBar",""]],hostVars:3,hostBindings:function(J,W){2&J&&(u.uIk("data-size",W.size),u.Udp("--tui-progress-color",W.color))},inputs:{color:"color",size:"size"},attrs:c,decls:0,vars:0,template:function(J,W){},styles:["@keyframes _ngcontent-%COMP%_tuiIndeterminateAnimation{50%{background-position:left}}[_nghost-%COMP%]{-webkit-appearance:none;-moz-appearance:none;appearance:none;border:none;background-color:var(--tui-base-03);display:block;width:100%;color:var(--tui-primary);border-radius:var(--tui-radius-xs);overflow:hidden}[_nghost-%COMP%]::-webkit-progress-value{-webkit-transition:width var(--tui-duration) linear;transition:width var(--tui-duration) linear}[_nghost-%COMP%]::-webkit-progress-value{background:var(--tui-progress-color, currentColor)}[_nghost-%COMP%]::-moz-progress-bar{background:var(--tui-progress-color, currentColor)}[_nghost-%COMP%]::-webkit-progress-bar{background-color:var(--tui-base-03)}[data-size=m][_nghost-%COMP%]{height:1.5rem}[data-size=s][_nghost-%COMP%]{height:.5rem}[data-size=s][_nghost-%COMP%]::-webkit-progress-value{border-radius:var(--tui-radius-xs)}[data-size=s][_nghost-%COMP%]::-moz-progress-bar{border-radius:var(--tui-radius-xs)}[_nghost-%COMP%]:indeterminate{background:transparent;background-image:linear-gradient(to right,var(--tui-base-03) 0 45%,var(--tui-progress-color, currentColor) 45% 55%,var(--tui-base-03) 55% 100%);background-size:225%;background-position:right;animation:_ngcontent-%COMP%_tuiIndeterminateAnimation 3s infinite ease-in-out}[_nghost-%COMP%]:indeterminate::-webkit-progress-bar{background:transparent}[_nghost-%COMP%]:indeterminate::-webkit-progress-value{background:transparent}[_nghost-%COMP%]:indeterminate::-moz-progress-bar{background:transparent}label[tuiProgressLabel][_nghost-%COMP%]:not(:first-child), label[tuiProgressLabel]   [_nghost-%COMP%]:not(:first-child){position:absolute;top:0;left:0;width:100%;height:100%;background-color:transparent}label[tuiProgressLabel][_nghost-%COMP%]:not(:first-child)::-webkit-progress-bar, label[tuiProgressLabel]   [_nghost-%COMP%]:not(:first-child)::-webkit-progress-bar{background-color:transparent}"],changeDetection:0}),(0,R.gn)([(0,d.TH)()],k.prototype,"size",void 0),k})(),oe=(()=>{class k{}return k.\u0275fac=function(J){return new(J||k)},k.\u0275cmp=u.Xpm({type:k,selectors:[["label","tuiProgressLabel",""]],attrs:D,ngContentSelectors:P,decls:4,vars:0,consts:[[1,"t-label"]],template:function(J,W){1&J&&(u.F$t(K),u.Hsn(0),u.Hsn(1,1),u.TgZ(2,"span",0),u.Hsn(3,2),u.qZA())},styles:["[_nghost-%COMP%]{position:relative;display:inline-block}.t-label[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;display:flex;font:var(--tui-font-text-s);color:var(--tui-text-01);flex-direction:column;justify-content:center;align-items:center}"],changeDetection:0}),k})(),H=(()=>{class k{}return k.\u0275fac=function(J){return new(J||k)},k.\u0275mod=u.oAB({type:k}),k.\u0275inj=u.cJS({imports:[[o.ez,e.Ih]]}),k})()},61422:(he,ce,l)=>{l.d(ce,{Q4:()=>X,TA:()=>ie,Ig:()=>j});var o=l(64537),u=l(20092),d=l(2325),e=l(33770),R=l(11927),c=l(76480),L=l(54789),D=l(64762),K=l(92172),P=l(44358),y=l(18269),V=l(1995),Y=l(13528);let z=(()=>{class O{constructor($,le){this.elementRef=$,this.destroy$=le}set tuiScrollIntoView($){$&&(0,V.H)(0).pipe((0,Y.R)(this.destroy$)).subscribe(()=>{this.elementRef.nativeElement.dispatchEvent(new CustomEvent(y.fe,{bubbles:!0,detail:this.elementRef.nativeElement}))})}}return O.\u0275fac=function($){return new($||O)(o.Y36(o.SBq),o.Y36(K.a3,2))},O.\u0275dir=o.lG2({type:O,selectors:[["","tuiScrollIntoView",""]],inputs:{tuiScrollIntoView:"tuiScrollIntoView"},features:[o._Bn([K.a3])]}),(0,D.gn)([(0,P.NH)()],O.prototype,"tuiScrollIntoView",null),O})(),ae=(()=>{class O{}return O.\u0275fac=function($){return new($||O)},O.\u0275mod=o.oAB({type:O}),O.\u0275inj=o.cJS({}),O})();var oe=l(76060),de=l(75111),H=l(89570),k=l(38023),E=l(21860),J=l(9018),W=l(51927),me=l(27969),pe=l(42147),Q=l(88692);function B(O,re){1&O&&o._UZ(0,"tui-svg",3),2&O&&o.Q6J("tuiScrollIntoView",!0)}function I(O,re){1&O&&o._UZ(0,"span",4)}let ie=(()=>{class O{constructor($,le,w,te,C,q,ee){this.context=$,this.host=le,this.elementRef=w,this.option=te,this.dataList=C,this.control=q,this.abstractControl=ee,this.changeDetection$=new k.x,this.selected$=(0,E.T)(this.changeDetection$,this.control.valueChanges||J.E,(0,d.mL)(this.elementRef.nativeElement,"animationstart")).pipe((0,W.O)(null),(0,me.U)(()=>this.selected),(0,pe.x)())}get matcher(){return this.host.identityMatcher||e.bg}ngDoCheck(){this.changeDetection$.next()}ngOnInit(){Promise.resolve().then(()=>{(0,R.Pc)(this.option.value)&&this.host.checkOption&&this.host.checkOption(this.option.value)})}get value(){var $,le;return null!==(le=null===($=this.abstractControl)||void 0===$?void 0:$.value)&&void 0!==le?le:this.control.value}get selected(){return(0,R.Pc)(this.option.value)&&(0,R.Pc)(this.value)&&this.matcher(this.value,this.option.value)}}return O.\u0275fac=function($){return new($||O)(o.Y36(H.yf),o.Y36(oe.N1),o.Y36(o.SBq),o.Y36(de.vK),o.Y36(de.qi,8),o.Y36(u.a5),o.Y36(c.M$,8))},O.\u0275cmp=o.Xpm({type:O,selectors:[["tui-select-option"]],decls:5,vars:5,consts:[[3,"ngTemplateOutlet"],["automation-id","tui-select-option__checkmark","src","tuiIconCheckLarge","class","t-checkmark",3,"tuiScrollIntoView",4,"ngIf","ngIfElse"],["dummy",""],["automation-id","tui-select-option__checkmark","src","tuiIconCheckLarge",1,"t-checkmark",3,"tuiScrollIntoView"],[1,"t-dummy"]],template:function($,le){if(1&$&&(o.GkF(0,0),o.YNc(1,B,1,1,"tui-svg",1),o.ALo(2,"async"),o.YNc(3,I,1,0,"ng-template",null,2,o.W1O)),2&$){const w=o.MAs(4);o.Q6J("ngTemplateOutlet",le.context.$implicit),o.xp6(1),o.Q6J("ngIf",o.lcZ(2,3,le.selected$))("ngIfElse",w)}},dependencies:[L.PN,Q.tP,Q.O5,z,Q.Ov],styles:["@keyframes _ngcontent-%COMP%_retrigger{0%{left:1px}to{left:2px}}[_nghost-%COMP%]{display:flex;flex:1;align-items:center;max-width:100%;animation:_ngcontent-%COMP%_retrigger 1s}.t-checkmark[_ngcontent-%COMP%]{margin:0 -.375rem 0 auto;border-left:5px solid transparent}.t-dummy[_ngcontent-%COMP%]{width:1.5rem}"],changeDetection:0}),O})();const X=new H.Al(ie);let j=(()=>{class O{}return O.\u0275fac=function($){return new($||O)},O.\u0275mod=o.oAB({type:O}),O.\u0275inj=o.cJS({imports:[[Q.ez,L.EI,ae]]}),O})()},61498:(he,ce,l)=>{l.d(ce,{Jy:()=>N,OI:()=>T,uJ:()=>g});var o=l(64537),u=l(221),d=l(76480),e=l(92172),R=l(57179),c=l(68033),L=l(44358),D=l(85600),K=l(85640),P=l(441),y=l(91489),V=l(76060),Y=l(75111),z=l(43631),ae=l(88024),oe=l(88692),de=l(64762),H=l(20092),k=l(35575),E=l(61422),J=l(30026),W=l(59811),me=l(89570);function re(x,Z){1&x&&(o.ynx(0),o.Hsn(1,2,["ngProjectAs","select",5,["select"]]),o.BQk())}function $(x,Z){if(1&x&&o.YNc(0,re,2,0,"ng-container",6),2&x){const _=o.oxw();o.Q6J("ngIf",_.isMobile)}}function le(x,Z){1&x&&o.GkF(0,7)}function w(x,Z){1&x&&o._UZ(0,"div",10),2&x&&o.Q6J("textContent",Z.polymorpheusOutlet)}const te=function(x,Z){return{$implicit:x,active:Z}};function C(x,Z){if(1&x&&(o.TgZ(0,"div",8),o.YNc(1,w,1,1,"div",9),o.qZA()),2&x){const _=o.oxw();o.xp6(1),o.Q6J("polymorpheusOutlet",_.computedContent)("polymorpheusOutletContext",o.WLB(2,te,_.value,_.computedFocused))}}function q(x,Z){1&x&&o.GkF(0)}function ee(x,Z){if(1&x&&(o.TgZ(0,"div",11),o.YNc(1,q,1,0,"ng-container",12),o.qZA()),2&x){const _=o.oxw();o.xp6(1),o.Q6J("polymorpheusOutlet",_.arrow)}}const _e=["*",[["input"]],[["select"]]],fe=["*","input","select"];let xe=(()=>{class x{constructor(_,b,f,h){this.host=_,this.control=b,this.elementRef=f,this.idService=h,this.datalist=null,this.host.process(this.elementRef.nativeElement)}get id(){return this.elementRef.nativeElement.id||this.idService.generate()}}return x.\u0275fac=function(_){return new(_||x)(o.Y36(V.S0),o.Y36(d.M$),o.Y36(o.SBq),o.Y36(e.ll))},x.\u0275dir=o.lG2({type:x,viewQuery:function(_,b){if(1&_&&o.Gf(Y.gX,7,o.Rgc),2&_){let f;o.iGM(f=o.CRH())&&(b.datalist=f.first)}},hostVars:1,hostBindings:function(_,b){2&_&&o.Ikx("id",b.id)}}),x})();const v={valueContent:""},m=new o.OlP("[TUI_SELECT_OPTIONS]",{factory:()=>v});let g=(()=>{class x extends d.F9{constructor(_,b,f,h,F,se,ue){super(_,b),this.textfieldCleaner=f,this.arrowMode=h,this.itemsHandlers=F,this.options=se,this.isMobile=ue,this.stringify=this.itemsHandlers.stringify,this.identityMatcher=this.itemsHandlers.identityMatcher,this.valueContent=this.options.valueContent,this.datalist=""}get arrow(){return this.interactive?this.arrowMode.interactive:this.arrowMode.disabled}get nativeFocusableElement(){return this.textfield?this.textfield.nativeFocusableElement:null}get focused(){return(0,R.V8)(this.nativeFocusableElement)||!!this.hostedDropdown&&this.hostedDropdown.focused}get nativeDropdownMode(){return!!this.nativeSelect&&this.isMobile}get computedValue(){return null===this.value?"":this.stringify(this.value)||" "}get computedContent(){return this.valueContent||this.computedValue}onValueChange(_){this.updateValue(_&&_||null)}onActiveZone(_){this.updateFocused(_)}onKeyDownDelete(){this.textfieldCleaner.cleaner&&this.updateValue(null)}handleOption(_){var b;this.focusInput(),this.updateValue(_),null===(b=this.hostedDropdown)||void 0===b||b.updateOpen(!1)}focusInput(_=!1){this.nativeFocusableElement&&this.nativeFocusableElement.focus({preventScroll:_})}}return x.\u0275fac=function(_){return new(_||x)(o.Y36(H.a5,10),o.Y36(o.sBO),o.Y36(P.Ym),o.Y36(k.Ii),o.Y36(W.Ys),o.Y36(m),o.Y36(c.fL))},x.\u0275cmp=o.Xpm({type:x,selectors:[["tui-select"]],contentQueries:function(_,b,f){if(1&_&&(o.Suo(f,xe,7),o.Suo(f,Y.gX,5,o.Rgc)),2&_){let h;o.iGM(h=o.CRH())&&(b.nativeSelect=h.first),o.iGM(h=o.CRH())&&(b.datalist=h.first)}},viewQuery:function(_,b){if(1&_&&(o.Gf(K.yc,5),o.Gf(D.o1,5)),2&_){let f;o.iGM(f=o.CRH())&&(b.textfield=f.first),o.iGM(f=o.CRH())&&(b.hostedDropdown=f.first)}},inputs:{stringify:"stringify",identityMatcher:"identityMatcher",valueContent:"valueContent"},features:[o._Bn([(0,c.FT)(x),(0,d.wB)(x),(0,V.oE)(x),(0,V.P7)(E.Q4)],[J.yn]),o.qOj],ngContentSelectors:fe,decls:10,vars:15,consts:[[1,"t-hosted",3,"canOpen","content","tuiActiveZoneChange"],["automation-id","tui-select__textfield",1,"t-textfield",3,"tuiTextfieldIcon","editable","pseudoFocus","pseudoHover","pseudoActive","invalid","nativeId","readOnly","disabled","focusable","value","valueChange","keydown.delete.prevent","keydown.backspace.prevent"],["select",""],["ngProjectAs","select",5,["select"],4,"ngTemplateOutlet"],["ngProjectAs","tuiContent","automation-id","tui-select__value","class","t-value",5,["tuiContent"],4,"ngIf"],["icon",""],[4,"ngIf"],["ngProjectAs","select",5,["select"]],["ngProjectAs","tuiContent","automation-id","tui-select__value",5,["tuiContent"],1,"t-value"],["class","t-primitive-value",3,"textContent",4,"polymorpheusOutlet","polymorpheusOutletContext"],[1,"t-primitive-value",3,"textContent"],["tuiWrapper","","appearance","icon",1,"t-icon"],[4,"polymorpheusOutlet"]],template:function(_,b){if(1&_&&(o.F$t(_e),o.TgZ(0,"tui-hosted-dropdown",0),o.NdJ("tuiActiveZoneChange",function(h){return b.onActiveZone(h)}),o.TgZ(1,"tui-primitive-textfield",1),o.NdJ("valueChange",function(h){return b.onValueChange(h)})("keydown.delete.prevent",function(){return b.onKeyDownDelete()})("keydown.backspace.prevent",function(){return b.onKeyDownDelete()}),o.Hsn(2),o.Hsn(3,1,["ngProjectAs","input",5,["input"]]),o.YNc(4,$,1,1,"ng-template",null,2,o.W1O),o.YNc(6,le,1,0,"ng-container",3),o.YNc(7,C,2,5,"div",4),o.qZA(),o.YNc(8,ee,2,1,"ng-template",null,5,o.W1O),o.qZA()),2&_){const f=o.MAs(5),h=o.MAs(9);o.Q6J("canOpen",b.interactive&&!b.nativeDropdownMode)("content",b.datalist||""),o.xp6(1),o.Q6J("tuiTextfieldIcon",b.arrow?h:"")("editable",!1)("pseudoFocus",b.computedFocused)("pseudoHover",b.pseudoHover)("pseudoActive",b.pseudoActive)("invalid",b.computedInvalid)("nativeId",b.nativeId)("readOnly",b.readOnly)("disabled",b.computedDisabled)("focusable",b.computedFocusable)("value",b.computedValue),o.xp6(5),o.Q6J("ngTemplateOutlet",f),o.xp6(1),o.Q6J("ngIf",null!==b.value)}},dependencies:[D.o1,K.yc,u.e,K.B1,P.AW,oe.O5,oe.tP,me.Li,y.o],styles:["[_nghost-%COMP%]{display:block;border-radius:var(--tui-radius-m);text-align:left}[_nghost-%COMP%]:not(._readonly)     input:not(:disabled){cursor:pointer}._readonly[_nghost-%COMP%]     input{cursor:default}.t-hosted[_ngcontent-%COMP%]{display:block;border-radius:inherit}.t-textfield[_ngcontent-%COMP%]{border-radius:inherit;text-align:inherit}.t-value[_ngcontent-%COMP%]{display:flex;width:100%;align-items:center}.t-primitive-value[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}"],changeDetection:0}),(0,de.gn)([(0,L.TH)()],x.prototype,"stringify",void 0),(0,de.gn)([(0,L.TH)()],x.prototype,"identityMatcher",void 0),(0,de.gn)([(0,L.TH)()],x.prototype,"valueContent",void 0),x})(),T=(()=>{class x extends z.D1{get readOnly(){return!0}get value(){return this.host.computedValue}onValueChange(_){this.host.onValueChange(_)}}return x.\u0275fac=function(){let Z;return function(b){return(Z||(Z=o.n5z(x)))(b||x)}}(),x.\u0275dir=o.lG2({type:x,selectors:[["tui-select"]],features:[o._Bn([(0,V.cp)(x)]),o.qOj]}),x})(),N=(()=>{class x{}return x.\u0275fac=function(_){return new(_||x)},x.\u0275mod=o.oAB({type:x}),x.\u0275inj=o.cJS({imports:[[oe.ez,me.wq,u.A,K.KW,D.jh,E.Ig,k.Mt,y.W,P.cn,ae.zX,Y.pc]]}),x})()},42993:(he,ce,l)=>{l.d(ce,{j:()=>u});var o=l(27969);function u(...d){const e=d.length;if(0===e)throw new Error("list of properties cannot be empty.");return(0,o.U)(R=>{let c=R;for(let L=0;L<e;L++){const D=c?.[d[L]];if(!(typeof D<"u"))return;c=D}return c})}},9532:(he,ce,l)=>{l.r(ce),l.d(ce,{AppListingModule:()=>Ee});var o=l(88692),u=l(94032),d=l(4266),e=l(64537);class R{constructor(n,t){this.ac=n,this.router=t;let s=(0,d.rV)(d.MX.moduleSlug)||"",i=(0,d.rV)(d.MX.moduleID)||"";"/modules"==this.router.url&&this.router.navigate(["/modules",s],{queryParams:{moduleID:i}})}}R.\u0275fac=function(n){return new(n||R)(e.Y36(u.gz),e.Y36(u.F0))},R.\u0275cmp=e.Xpm({type:R,selectors:[["app-app-listing"]],decls:1,vars:0,template:function(n,t){1&n&&e._UZ(0,"router-outlet")},dependencies:[u.lC]});var c=l(20092),L=l(42281),D=l(20707),K=l(54121),P=l(38023),y=l(13528),V=l(61528),Y=l(84967),z=l(17820),ae=l(13916),oe=l(20696),de=l(46954),H=l(22603),k=l(98168),E=l(20982),J=l(35732);class W extends E.s{constructor(n,t){super(n),this.http=n,this.notif=t}uploadMedia(n){const t=new FormData;return t.append("file",n),this.postMedia("/upload",t).pipe((0,k.b)(s=>{if(s.hasErrors())return this.notif.displayNotification(s.errors[0]?.error?.message,"Image Upload","error")}))}}W.\u0275fac=function(n){return new(n||W)(e.LFG(J.eN),e.LFG(H.T))},W.\u0275prov=e.Yz7({token:W,factory:W.\u0275fac,providedIn:"root"});var me=l(5998),pe=l(29145),Q=l(5754),B=l(21673),I=l(88024),ie=l(62124),X=l(61498),j=l(64762),O=l(76480),re=l(33770),$=l(68033),le=l(44358),w=l(13633),te=l(75059),C=l(75452),q=l(44541),ee=l(88491),_e=l(57179),fe=l(91489),xe=l(76060),ye=l(49941);const S=["*"];let v=(()=>{class r{constructor(){this.name="tui-radio-group-"+r.index++}}return r.index=0,r.\u0275fac=function(t){return new(t||r)},r.\u0275cmp=e.Xpm({type:r,selectors:[["tui-radio-group"]],inputs:{name:"name"},ngContentSelectors:S,decls:1,vars:0,template:function(t,s){1&t&&(e.F$t(),e.Hsn(0))},encapsulation:2,changeDetection:0}),(0,j.gn)([(0,le.TH)()],r.prototype,"name",void 0),r})();const M=["focusableElement"];function g(r,n){if(1&r&&e._UZ(0,"div",4),2&r){const t=e.oxw();e.Q6J("@tuiScaleIn",t.animation)}}const T={size:"m",appearances:{unchecked:"outline",checked:"primary"}},N=new e.OlP("[TUI_RADIO_OPTIONS]",{factory:()=>T});let Z=(()=>{class r extends O.F9{constructor(t,s,i,a,p){super(t,s),this.animationOptions=i,this.options=a,this.radioGroup=p,this.identityMatcher=re.bg,this.name=null,this.size=this.options.size,this.pseudoDisabled=!1,this.animation=Object.assign({value:""},this.animationOptions)}get appearance(){return this.checked?this.options.appearances.checked:this.options.appearances.unchecked}get computedDisabled(){return this.disabled||this.pseudoDisabled}get nativeFocusableElement(){return!this.focusableElement||this.computedDisabled?null:this.focusableElement.nativeElement}get focused(){return(0,_e.V8)(this.nativeFocusableElement)}get checked(){return null===this.value?null===this.item:null!=this.item&&this.identityMatcher(this.value,this.item)}get computedName(){return this.name||this.radioGroupName||this.controlName||""}get isFocusable(){return!this.readOnly&&this.computedFocusable}onChecked(t){t&&this.updateValue(void 0!==this.item?this.item:this.fallbackValue)}onFocused(t){this.updateFocused(t)}onFocusVisible(t){this.updateFocusVisible(t)}get radioGroupName(){return null===this.radioGroup?null:this.radioGroup.name}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(c.a5,10),e.Y36(e.sBO),e.Y36(xe.Pw),e.Y36(N),e.Y36(v,8))},r.\u0275cmp=e.Xpm({type:r,selectors:[["tui-radio"]],viewQuery:function(t,s){if(1&t&&e.Gf(M,5),2&t){let i;e.iGM(i=e.CRH())&&(s.focusableElement=i.first)}},hostVars:3,hostBindings:function(t,s){2&t&&(e.uIk("data-size",s.size),e.ekj("_disabled",s.computedDisabled))},inputs:{item:"item",identityMatcher:"identityMatcher",name:"name",size:"size",pseudoDisabled:"pseudoDisabled"},features:[e._Bn([(0,$.FT)(r),(0,O.wB)(r)]),e.qOj],decls:4,vars:12,consts:[["tuiWrapper","",3,"appearance","disabled","focus","hover","active","invalid"],["class","t-mark",4,"ngIf"],["type","radio",1,"t-native",3,"id","disabled","tuiChecked","tuiFocusable","tuiFocusedChange","tuiCheckedChange","tuiFocusVisibleChange"],["focusableElement",""],[1,"t-mark"]],template:function(t,s){1&t&&(e.TgZ(0,"div",0),e.YNc(1,g,1,1,"div",1),e.TgZ(2,"input",2,3),e.NdJ("tuiFocusedChange",function(a){return s.onFocused(a)})("tuiCheckedChange",function(a){return s.onChecked(a)})("tuiFocusVisibleChange",function(a){return s.onFocusVisible(a)}),e.qZA()()),2&t&&(e.Q6J("appearance",s.appearance)("disabled",s.computedDisabled)("focus",s.computedFocusVisible)("hover",s.pseudoHover)("active",s.pseudoActive)("invalid",s.computedInvalid),e.xp6(1),e.Q6J("ngIf",s.checked),e.xp6(1),e.Q6J("id",s.id)("disabled",s.computedDisabled)("tuiChecked",s.checked)("tuiFocusable",s.isFocusable),e.uIk("name",s.computedName))},dependencies:[fe.o,o.O5,q.t,w.t,te.U,ee.q],styles:["[_nghost-%COMP%]{font:var(--tui-font-text-s);color:var(--tui-text-01);position:relative;display:block;flex-shrink:0;border-radius:100%}[data-size=m][_nghost-%COMP%]{width:1rem;height:1rem}[data-size=l][_nghost-%COMP%]{width:1.5rem;height:1.5rem}._readonly[_nghost-%COMP%]{pointer-events:none}.t-mark[_ngcontent-%COMP%]{position:absolute;background-color:currentColor;border-radius:100%}[data-size=m][_nghost-%COMP%]   .t-mark[_ngcontent-%COMP%]{margin:.25rem;width:.5rem;height:.5rem}[data-size=l][_nghost-%COMP%]   .t-mark[_ngcontent-%COMP%]{margin:.4375rem;width:.625rem;height:.625rem}.t-native[_ngcontent-%COMP%]{padding:0;margin:0;border:0;border-radius:inherit;background:none;font-size:inherit;line-height:inherit;font-weight:inherit;color:inherit;caret-color:currentColor;outline:none;-webkit-appearance:none;-moz-appearance:none;appearance:none;word-break:keep-all;-webkit-text-fill-color:currentColor;position:absolute;top:0;left:0;width:100%;height:100%;opacity:0;cursor:pointer}.t-native[_ngcontent-%COMP%]:-webkit-autofill, .t-native[_ngcontent-%COMP%]:-webkit-autofill:hover, .t-native[_ngcontent-%COMP%]:-webkit-autofill:focus{caret-color:var(--tui-base-09);border-radius:inherit;color:inherit!important;background-color:transparent!important;-webkit-text-fill-color:var(--tui-text-01)!important;border-color:var(--tui-autofill);-webkit-box-shadow:0 0 0 100rem var(--tui-autofill) inset!important}._disabled[_nghost-%COMP%]   .t-native[_ngcontent-%COMP%]{cursor:default}"],data:{animation:[ye.gI]},changeDetection:0}),(0,j.gn)([(0,le.TH)()],r.prototype,"identityMatcher",void 0),(0,j.gn)([(0,le.TH)()],r.prototype,"name",void 0),(0,j.gn)([(0,le.TH)()],r.prototype,"size",void 0),(0,j.gn)([(0,le.TH)()],r.prototype,"pseudoDisabled",void 0),r})(),_=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[[o.ez,q.S,w.u,te.F,ee.c,fe.W]]}),r})();const b=["*"];let f=(()=>{class r extends O.F9{constructor(t,s,i,a){super(t,s),this.modeDirective=i,this.options=a,this.size=this.options.size,this.identityMatcher=re.bg,this.pseudoDisabled=!1}get nativeFocusableElement(){return this.radio?this.radio.nativeFocusableElement:null}get focused(){return!!this.radio&&this.radio.focused}get computedDisabled(){return this.disabled||this.pseudoDisabled}get mode(){return this.modeDirective?this.modeDirective.mode:null}onFocused(t){this.updateFocused(t)}onModelChange(t){this.updateValue(t)}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(c.a5,10),e.Y36(e.sBO),e.Y36(C.w,8),e.Y36(N))},r.\u0275cmp=e.Xpm({type:r,selectors:[["tui-radio-labeled"]],viewQuery:function(t,s){if(1&t&&e.Gf(Z,5),2&t){let i;e.iGM(i=e.CRH())&&(s.radio=i.first)}},hostVars:4,hostBindings:function(t,s){2&t&&(e.uIk("data-size",s.size)("data-mode",s.mode),e.ekj("_disabled",s.computedDisabled))},inputs:{item:"item",size:"size",identityMatcher:"identityMatcher",pseudoDisabled:"pseudoDisabled"},features:[e._Bn([(0,$.FT)(r),(0,O.wB)(r)]),e.qOj],ngContentSelectors:b,decls:4,vars:15,consts:[[1,"t-wrapper"],[3,"focusable","identityMatcher","name","nativeId","readOnly","pseudoDisabled","pseudoInvalid","pseudoFocus","pseudoHover","pseudoActive","size","item","ngModel","ngModelChange","focusedChange"],[1,"t-content"]],template:function(t,s){1&t&&(e.F$t(),e.TgZ(0,"label",0)(1,"tui-radio",1),e.NdJ("ngModelChange",function(a){return s.onModelChange(a)})("focusedChange",function(a){return s.onFocused(a)}),e.qZA(),e.TgZ(2,"div",2),e.Hsn(3),e.qZA()()),2&t&&(e.xp6(1),e.Q6J("focusable",s.focusable)("identityMatcher",s.identityMatcher)("name",s.computedName||"")("nativeId",s.nativeId)("readOnly",s.readOnly)("pseudoDisabled",s.computedDisabled)("pseudoInvalid",s.computedInvalid)("pseudoFocus",s.pseudoFocus)("pseudoHover",s.pseudoHover)("pseudoActive",s.pseudoActive)("size",s.size)("item",s.item)("ngModel",s.value),e.xp6(1),e.ekj("t-content_disabled",s.computedDisabled))},dependencies:[Z,c.JJ,c.On],styles:["[_nghost-%COMP%]{position:relative;display:block;font:var(--tui-font-text-s);line-height:1rem}._readonly[_nghost-%COMP%]{pointer-events:none}.t-wrapper[_ngcontent-%COMP%]{display:inline-flex;max-width:100%;cursor:pointer;vertical-align:top}._disabled[_nghost-%COMP%]   .t-wrapper[_ngcontent-%COMP%]{cursor:default}[data-mode=onDark][_nghost-%COMP%]   .t-wrapper[_ngcontent-%COMP%]{color:var(--tui-text-01-night)}.t-content[_ngcontent-%COMP%]{word-wrap:break-word;min-width:0}.t-content_disabled[_ngcontent-%COMP%]{opacity:var(--tui-disabled-opacity)}[data-size=m][_nghost-%COMP%]   .t-content[_ngcontent-%COMP%]{margin-left:.5rem}[data-size=l][_nghost-%COMP%]   .t-content[_ngcontent-%COMP%]{font:var(--tui-font-text-m);margin-left:.75rem}"],changeDetection:0}),(0,j.gn)([(0,le.TH)()],r.prototype,"size",void 0),(0,j.gn)([(0,le.TH)()],r.prototype,"identityMatcher",void 0),(0,j.gn)([(0,le.TH)()],r.prototype,"pseudoDisabled",void 0),r})(),h=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[[o.ez,c.u5,w.u,te.F,_]]}),r})();var F=l(30663),se=l(64618),ue=l(84690),Te=l(56501),Ae=l(85640),Se=l(441),Ie=l(75111),we=l(12628),Je=l(1515),Le=l(40719),Be=l(95380),Qe=l(64413),qe=l(27076);function et(r,n){if(1&r){const t=e.EpF();e.TgZ(0,"button",64),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.inheritParentForm())}),e.ALo(1,"async"),e._uU(2," Inherit Parent Data "),e.qZA()}if(2&r){const t=e.oxw();e.Q6J("showLoader",1==e.lcZ(1,1,t.inheritLoader))}}function tt(r,n){1&r&&(e.TgZ(0,"span",65),e._uU(1," An app by this title already exists. Please select another title "),e.qZA())}function nt(r,n){1&r&&(e.TgZ(0,"span",65),e._uU(1," An app with this code already exists. Please select another code. "),e.qZA())}function ot(r,n){if(1&r&&(e.TgZ(0,"div",66),e._UZ(1,"img",67),e.qZA()),2&r){const t=e.oxw();e.xp6(1),e.Q6J("src",t.base64File,e.LSH)}}function it(r,n){1&r&&(e.TgZ(0,"div",68)(1,"div",69),e._UZ(2,"img",70),e.qZA(),e.TgZ(3,"ul",71)(4,"li"),e._uU(5,"Only (JPEG, PNG, WEBP) extensions are allowed"),e.qZA(),e.TgZ(6,"li"),e._uU(7,"Up to 2MB file size is allowed"),e.qZA()()())}function rt(r,n){if(1&r&&(e.ynx(0),e.TgZ(1,"option",72),e._uU(2),e.qZA(),e.BQk()),2&r){const t=n.$implicit;e.xp6(1),e.Q6J("value",null==t?null:t.value),e.xp6(1),e.Oqu(null==t?null:t.label)}}function st(r,n){1&r&&(e.TgZ(0,"label",83),e._uU(1,"Add new companies"),e.qZA())}function at(r,n){1&r&&(e.TgZ(0,"span",65),e._uU(1," Please provide a company name "),e.qZA())}function lt(r,n){1&r&&(e.TgZ(0,"span",65),e._uU(1," A company with this name already exists. Please provide another name. "),e.qZA())}function ut(r,n){1&r&&(e.TgZ(0,"span",65),e._uU(1," Please provide a group code with upto 4 characters "),e.qZA())}function ct(r,n){1&r&&(e.TgZ(0,"span",65),e._uU(1," A company with this code already exists. Please provide a different code. "),e.qZA())}function dt(r,n){if(1&r){const t=e.EpF();e.TgZ(0,"button",84),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.submitNewCompany())}),e._uU(1,"Submit"),e.qZA()}}function mt(r,n){if(1&r){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",73)(2,"div",74)(3,"div",75),e.YNc(4,st,2,0,"label",76),e._UZ(5,"input",77),e.YNc(6,at,2,0,"span",12),e.YNc(7,lt,2,0,"span",12),e._UZ(8,"input",78),e.YNc(9,ut,2,0,"span",12),e.YNc(10,ct,2,0,"span",12),e.qZA(),e.TgZ(11,"div",79)(12,"button",80),e.NdJ("click",function(){const a=e.CHM(t).index,p=e.oxw();return e.KtG(p.removeCompany(a))}),e.qZA()()(),e.TgZ(13,"div",81),e.YNc(14,dt,2,0,"button",82),e.qZA()(),e.BQk()}if(2&r){const t=n.index,s=n.first,i=n.last,a=e.oxw();e.xp6(1),e.Q6J("formGroupName",t),e.xp6(3),e.Q6J("ngIf",0==t),e.xp6(1),e.Q6J("ngClass",a.getValidityForCompany(t)?"is-invalid":""),e.xp6(1),e.Q6J("ngIf",a.getValidityForCompany(t)),e.xp6(1),e.Q6J("ngIf",a.getValidityForCompanyCodeExists(t)),e.xp6(1),e.Q6J("ngClass",a.getValidityForCompanyCode(t)?"is-invalid":""),e.xp6(1),e.Q6J("ngIf",a.getValidityForCompanyCode(t)),e.xp6(1),e.Q6J("ngIf",a.getValidityForCompanyCodeExistsGroup(t)),e.xp6(1),e.Q6J("ngClass",s?"mt-7":"mt-0"),e.xp6(3),e.Q6J("ngIf",i)}}function pt(r,n){if(1&r&&(e.ynx(0),e.TgZ(1,"option",72),e._uU(2),e.qZA(),e.BQk()),2&r){const t=n.$implicit;e.xp6(1),e.Q6J("value",null==t?null:t.value),e.xp6(1),e.Oqu(null==t?null:t.label)}}function _t(r,n){1&r&&(e.TgZ(0,"label",83),e._uU(1,"Add new categories"),e.qZA())}function gt(r,n){1&r&&(e.TgZ(0,"span",65),e._uU(1," Please provide a category name with upto 40 characters "),e.qZA())}function ft(r,n){1&r&&(e.TgZ(0,"span",65),e._uU(1," A category with this name already exists. Please provide a different name. "),e.qZA())}function ht(r,n){if(1&r){const t=e.EpF();e.TgZ(0,"button",89),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(3);return e.KtG(i.submitNewCategory())}),e._uU(1,"Submit"),e.qZA()}if(2&r){const t=e.oxw().index,s=e.oxw(2);e.Q6J("disabled",s.getValidityForCategory(t)||s.getValidityForCategoryCode(t))}}function bt(r,n){if(1&r){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",73)(2,"div",74)(3,"div",75),e.YNc(4,_t,2,0,"label",76),e._UZ(5,"input",87),e.YNc(6,gt,2,0,"span",12),e.YNc(7,ft,2,0,"span",12),e.qZA(),e.TgZ(8,"div",79)(9,"button",80),e.NdJ("click",function(){const a=e.CHM(t).index,p=e.oxw(2);return e.KtG(p.removeCategory(a))}),e.qZA()()(),e.TgZ(10,"div",81),e.YNc(11,ht,2,1,"button",88),e.qZA()(),e.BQk()}if(2&r){const t=n.index,s=n.first,i=n.last,a=e.oxw(2);e.xp6(1),e.Q6J("formGroupName",t),e.xp6(3),e.Q6J("ngIf",0==t),e.xp6(1),e.Q6J("ngClass",a.getValidityForCategory(t)?"is-invalid":""),e.xp6(1),e.Q6J("ngIf",a.getValidityForCategory(t)),e.xp6(1),e.Q6J("ngIf",a.getValidityForCategoryCode(t)),e.xp6(1),e.Q6J("ngClass",s?"mt-7":"mt-0"),e.xp6(3),e.Q6J("ngIf",i)}}const vt=function(r){return{validation:"required",message:"Category is required",control:r}};function xt(r,n){if(1&r){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",22)(2,"label",8),e._uU(3,"Category Name "),e.TgZ(4,"span",9),e._uU(5,"*"),e.qZA()(),e.TgZ(6,"select",85),e.YNc(7,pt,3,2,"ng-container",24),e.qZA(),e.GkF(8,11),e.qZA(),e.TgZ(9,"div",25)(10,"p",26),e._uU(11,"If your desired category isn't listed, you can add it below"),e.qZA()(),e.ynx(12,86),e.YNc(13,bt,12,7,"ng-container",24),e.BQk(),e.TgZ(14,"button",28),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.addCategory())}),e.qZA(),e.BQk()}if(2&r){const t=e.oxw(),s=e.MAs(113);e.xp6(6),e.Q6J("ngClass",null!=t.f.categoryName&&t.f.categoryName.invalid&&null!=t.f.categoryName&&t.f.categoryName.dirty?"is-invalid":""),e.xp6(1),e.Q6J("ngForOf",t.categoryList),e.xp6(1),e.Q6J("ngTemplateOutlet",s)("ngTemplateOutletContext",e.VKq(5,vt,t.f.categoryName)),e.xp6(5),e.Q6J("ngForOf",t.categories.controls)}}function yt(r,n){if(1&r&&(e.ynx(0),e.TgZ(1,"option",72),e._uU(2),e.qZA(),e.BQk()),2&r){const t=n.$implicit;e.xp6(1),e.Q6J("value",t),e.xp6(1),e.Oqu(t)}}function Ct(r,n){if(1&r&&(e.ynx(0),e.TgZ(1,"div",90)(2,"label",8),e._uU(3,"Column Width"),e.qZA(),e.TgZ(4,"select",91),e.YNc(5,yt,3,2,"ng-container",24),e.qZA()(),e.BQk()),2&r){const t=e.oxw();e.xp6(5),e.Q6J("ngForOf",t.cols)}}function Tt(r,n){if(1&r&&(e.ynx(0),e.TgZ(1,"option",72),e._uU(2),e.qZA(),e.BQk()),2&r){const t=n.$implicit;e.xp6(1),e.Q6J("value",t),e.xp6(1),e.Oqu(t)}}function St(r,n){if(1&r&&(e.TgZ(0,"div",92)(1,"label",8),e._uU(2,"Column Width"),e.qZA(),e.TgZ(3,"select",91),e.YNc(4,Tt,3,2,"ng-container",24),e.qZA()()),2&r){const t=e.oxw();e.xp6(4),e.Q6J("ngForOf",t.cols)}}function wt(r,n){1&r&&(e.TgZ(0,"span",65),e._uU(1,"Please select either AND or OR as the condition"),e.qZA())}function At(r,n){1&r&&(e.TgZ(0,"span",65),e._uU(1," Please specify submission creator/s "),e.qZA())}function It(r,n){1&r&&(e.ynx(0),e.TgZ(1,"option",110),e._uU(2,"AND"),e.qZA(),e.BQk())}function Mt(r,n){if(1&r){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",95)(2,"label",8),e._uU(3),e.TgZ(4,"span",9),e._uU(5,"*"),e.qZA()(),e.TgZ(6,"custom-multi-select",96),e.NdJ("checkUsersLength",function(i){e.CHM(t);const a=e.oxw().index,p=e.oxw();return e.KtG(p.countUsers(i,a))})("approverList",function(i){e.CHM(t);const a=e.oxw().index,p=e.oxw();return e.KtG(p.getApproverList(i,a))}),e.qZA(),e.YNc(7,wt,2,0,"span",12),e.ALo(8,"async"),e.YNc(9,At,2,0,"span",12),e.qZA(),e.TgZ(10,"div",95)(11,"label",97),e._uU(12,"Condition "),e.TgZ(13,"span",9),e._uU(14,"*"),e.qZA()(),e.TgZ(15,"select",98),e.NdJ("change",function(){e.CHM(t);const i=e.oxw().index,a=e.oxw();return e.KtG(a.validateSelection(i))}),e.YNc(16,It,3,0,"ng-container",29),e.TgZ(17,"option",99),e._uU(18,"OR"),e.qZA(),e.TgZ(19,"option",100),e._uU(20,"NONE"),e.qZA()()(),e.TgZ(21,"div",101),e._UZ(22,"tui-tooltip",102),e.TgZ(23,"tui-badged-content",103)(24,"button",104),e.NdJ("click",function(){e.CHM(t);const i=e.oxw().index,a=e.oxw(),p=e.MAs(115);return e.KtG(a.openEmailNotifyModal(p,a.workflows,i))}),e.qZA()()(),e.TgZ(25,"div",105)(26,"div",106)(27,"tui-radio-labeled",107)(28,"div"),e._uU(29,"Any (Create)"),e.qZA(),e.TgZ(30,"div",108),e._uU(31,"Any user can create a new submission"),e.qZA()(),e.TgZ(32,"tui-radio-labeled",107)(33,"div"),e._uU(34,"Any (Create & Modify)"),e.qZA(),e.TgZ(35,"div",108),e._uU(36,"Any user can create a new submission and modify it's workflow"),e.qZA()(),e.TgZ(37,"tui-radio-labeled",107)(38,"div"),e._uU(39,"Disabled"),e.qZA(),e.TgZ(40,"div",108),e._uU(41,"Only Admin users can create and modify submissions"),e.qZA()()()(),e.TgZ(42,"div",109)(43,"button",80),e.NdJ("click",function(){e.CHM(t);const i=e.oxw().index,a=e.oxw();return e.KtG(a.removeWorkflowStep(i))}),e.qZA()(),e.BQk()}if(2&r){const t=e.oxw(),s=t.first,i=t.index,a=e.oxw(),p=e.MAs(123);let U;e.xp6(3),e.hij("",s?"Creators":"Approvers"," "),e.xp6(4),e.Q6J("ngIf",e.lcZ(8,13,a.showError)&&i===a.errorIndex),e.xp6(2),e.Q6J("ngIf",1==a.getValidityForWorkflowStep()),e.xp6(7),e.Q6J("ngIf",i>0),e.xp6(6),e.Q6J("content",p),e.xp6(1),e.Q6J("contentTop",null==(U=a.workflows.at(i).get("emailNotifyTo"))||null==U.value?null:U.value.length)("colorTop","green"),e.xp6(4),e.Q6J("formControl",a.accessTypeValue)("item",a.items[0]),e.xp6(5),e.Q6J("formControl",a.accessTypeValue)("item",a.items[1]),e.xp6(5),e.Q6J("formControl",a.accessTypeValue)("item",a.items[2])}}function Zt(r,n){1&r&&(e.TgZ(0,"span",65),e._uU(1,"Please select either AND or OR as the condition"),e.qZA())}function kt(r,n){if(1&r){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",111)(2,"label",8),e._uU(3,"Approvers "),e.TgZ(4,"span",9),e._uU(5,"*"),e.qZA()(),e.TgZ(6,"custom-multi-select",96),e.NdJ("checkUsersLength",function(i){e.CHM(t);const a=e.oxw().index,p=e.oxw();return e.KtG(p.countUsers(i,a))})("approverList",function(i){e.CHM(t);const a=e.oxw().index,p=e.oxw();return e.KtG(p.getApproverList(i,a))}),e.qZA(),e.YNc(7,Zt,2,0,"span",12),e.ALo(8,"async"),e.qZA(),e.TgZ(9,"div",111)(10,"label",97),e._uU(11,"Condition "),e.TgZ(12,"span",9),e._uU(13,"*"),e.qZA()(),e.TgZ(14,"select",98),e.NdJ("change",function(){e.CHM(t);const i=e.oxw().index,a=e.oxw();return e.KtG(a.validateSelection(i))}),e.TgZ(15,"option",110),e._uU(16,"AND"),e.qZA(),e.TgZ(17,"option",99),e._uU(18,"OR"),e.qZA(),e.TgZ(19,"option",100),e._uU(20,"NONE"),e.qZA()()(),e.TgZ(21,"div",101),e._UZ(22,"tui-tooltip",102),e.TgZ(23,"tui-badged-content",103)(24,"button",104),e.NdJ("click",function(){e.CHM(t);const i=e.oxw().index,a=e.oxw(),p=e.MAs(115);return e.KtG(a.openEmailNotifyModal(p,a.workflows,i))}),e.qZA()()(),e.TgZ(25,"div",112)(26,"button",80),e.NdJ("click",function(){e.CHM(t);const i=e.oxw().index,a=e.oxw();return e.KtG(a.removeWorkflowStep(i))}),e.qZA()(),e.BQk()}if(2&r){const t=e.oxw().index,s=e.oxw(),i=e.MAs(123);let a;e.xp6(7),e.Q6J("ngIf",e.lcZ(8,4,s.showError)&&t===s.errorIndex),e.xp6(15),e.Q6J("content",i),e.xp6(1),e.Q6J("contentTop",null==(a=s.workflows.at(t).get("emailNotifyTo"))||null==a.value?null:a.value.length)("colorTop","green")}}function Et(r,n){if(1&r&&(e.ynx(0),e.TgZ(1,"p",93),e._uU(2),e.qZA(),e.TgZ(3,"div",94),e.YNc(4,Mt,44,15,"ng-container",29),e.YNc(5,kt,27,6,"ng-container",29),e.qZA(),e.BQk()),2&r){const t=n.index;e.xp6(2),e.hij("Step ",0===t?"1":t+1,""),e.xp6(1),e.Q6J("formGroupName",t),e.xp6(1),e.Q6J("ngIf",0==t),e.xp6(1),e.Q6J("ngIf",t>0)}}function Dt(r,n){if(1&r){const t=e.EpF();e.TgZ(0,"div",113)(1,"button",114),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(),a=e.MAs(121);return e.KtG(i.openTriggeOrPdfOrSummarySchemaDialog(a))}),e._uU(2," PDF template "),e.qZA(),e.TgZ(3,"button",114),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(),a=e.MAs(119);return e.KtG(i.openTriggeOrPdfOrSummarySchemaDialog(a))}),e._uU(4," Triggers "),e.qZA(),e.TgZ(5,"a",115),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(),a=e.MAs(129);return e.KtG(i.openTriggeOrPdfOrSummarySchemaDialog(a))}),e._uU(6," Summary & View Schema "),e.qZA()()}}function Ot(r,n){if(1&r){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",121),e.NdJ("click",function(){const a=e.CHM(t).index,p=e.oxw(3);return e.KtG(p.activeIndex=a)}),e._uU(2),e.qZA(),e.BQk()}if(2&r){const t=n.$implicit;e.xp6(2),e.Oqu(t)}}function Ut(r,n){if(1&r){const t=e.EpF();e.TgZ(0,"div",123)(1,"div",81)(2,"div",124)(3,"a",125),e.NdJ("click",function(){e.CHM(t);const i=e.oxw().index,a=e.oxw(3),p=e.MAs(133);return e.KtG(a.addDefaultData(i,p))}),e._UZ(4,"i",126),e.qZA(),e.TgZ(5,"a",127),e.NdJ("click",function(){e.CHM(t);const i=e.oxw().index,a=e.oxw(3);return e.KtG(a.sendFormForEdit(i))}),e._UZ(6,"i",128),e.qZA(),e.TgZ(7,"a",129),e.NdJ("click",function(){e.CHM(t);const i=e.oxw().index,a=e.oxw(3),p=e.MAs(131);return e.KtG(a.deleteFormDialog(p,i))}),e._UZ(8,"i",130),e.qZA()()(),e._UZ(9,"formio",131),e.qZA()}if(2&r){const t=e.oxw(),s=t.$implicit,i=t.index,a=e.oxw(3);e.xp6(9),e.Q6J("language",a.language)("options",a.options)("form",s)("submission",a.sanitizeSubmission(a.deafultFormSubmissionDialog[i]))}}function Nt(r,n){if(1&r&&(e.ynx(0),e.YNc(1,Ut,10,4,"div",122),e.BQk()),2&r){const t=n.index,s=e.oxw(3);e.xp6(1),e.Q6J("ngIf",s.activeIndex==t)}}function Ft(r,n){if(1&r&&(e.ynx(0),e.TgZ(1,"section",119)(2,"nav",120),e.YNc(3,Ot,3,1,"ng-container",24),e.qZA(),e.YNc(4,Nt,2,1,"ng-container",24),e.qZA(),e.BQk()),2&r){const t=e.oxw(2);e.xp6(3),e.Q6J("ngForOf",t.formTabs),e.xp6(1),e.Q6J("ngForOf",t.formComponents)}}function Pt(r,n){1&r&&(e.ynx(0),e.TgZ(1,"div",132),e._UZ(2,"div",133),e.TgZ(3,"div",134),e._UZ(4,"div",135)(5,"div",135),e.qZA(),e.TgZ(6,"div",134),e._UZ(7,"div",136)(8,"div",136),e.qZA()(),e.BQk())}function Jt(r,n){if(1&r&&(e.ynx(0),e.TgZ(1,"h4",116),e._uU(2,"Form/s Preview"),e.qZA(),e.TgZ(3,"div",117),e.YNc(4,Ft,5,2,"ng-container",29),e.YNc(5,Pt,9,0,"ng-container",29),e.qZA(),e.TgZ(6,"div",118)(7,"p",26),e._uU(8,"The form/s you add will appear here"),e.qZA()(),e.BQk()),2&r){const t=e.oxw();e.xp6(4),e.Q6J("ngIf",(null==t.formComponents[0]||null==t.formComponents[0].components?null:t.formComponents[0].components.length)>0),e.xp6(1),e.Q6J("ngIf",0==(null==t.formComponents[0]||null==t.formComponents[0].components?null:t.formComponents[0].components.length)||0==(null==t.formComponents?null:t.formComponents.length))}}function Lt(r,n){if(1&r){const t=e.EpF();e.TgZ(0,"div",137)(1,"a",138),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.saveDraft())}),e._uU(2," Add Form "),e.qZA()()}}function Bt(r,n){if(1&r&&(e.ynx(0),e.TgZ(1,"div",139)(2,"span",140),e._uU(3),e.qZA()(),e.BQk()),2&r){const t=e.oxw().message;e.xp6(3),e.hij(" ",t," ")}}function Qt(r,n){if(1&r&&e.YNc(0,Bt,4,1,"ng-container",29),2&r){const t=n.control;e.Q6J("ngIf",t.hasError(n.validation)&&(t.dirty||t.touched))}}function qt(r,n){if(1&r&&e._UZ(0,"tui-data-list-wrapper",149),2&r){const t=e.oxw(2);e.Q6J("items",t.userListForEmail)}}function Vt(r,n){if(1&r){const t=e.EpF();e.TgZ(0,"p",141),e._uU(1,"Email Notifications"),e.qZA(),e.TgZ(2,"p",142),e._uU(3," Please specify the users you want to send the notification email to "),e.qZA(),e.TgZ(4,"div",143)(5,"tui-input-tag",144),e.NdJ("searchChange",function(i){e.CHM(t);const a=e.oxw();return e.KtG(a.onSearchChange(i))}),e._uU(6," Type to search and press Enter to select... "),e.YNc(7,qt,1,1,"tui-data-list-wrapper",145),e.qZA()(),e.TgZ(8,"div",146)(9,"button",147),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.validateEmails())}),e._uU(10," Confirm "),e.qZA(),e.TgZ(11,"button",148),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.cancelEmailNotify())}),e._uU(12," Cancel "),e.qZA()()}if(2&r){const t=e.oxw();e.xp6(5),e.Q6J("formControl",null==t.currentFieldArray||null==t.currentFieldArray.controls[t.activeEmailIndex]?null:t.currentFieldArray.controls[t.activeEmailIndex].controls.emailNotifyTo)("tuiTextfieldLabelOutside",!0)}}function Rt(r,n){if(1&r){const t=e.EpF();e.TgZ(0,"tui-tabs",150),e.NdJ("activeItemIndexChange",function(i){e.CHM(t);const a=e.oxw(2);return e.KtG(a.activeItemIndex=i)}),e.TgZ(1,"button",121),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.activeItemIndex=0)}),e._uU(2," HTML "),e.qZA(),e.TgZ(3,"button",156),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.activeItemIndex=1)}),e._uU(4," Style Sheet "),e.qZA(),e.TgZ(5,"button",156),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2);return i.setPreview(i.topTabIndex),e.KtG(i.activeItemIndex=2)}),e._uU(6," Preview "),e.qZA()()}if(2&r){const t=e.oxw(2);e.Q6J("activeItemIndex",t.activeItemIndex)}}function Ht(r,n){if(1&r){const t=e.EpF();e.TgZ(0,"tui-tabs",150),e.NdJ("activeItemIndexChange",function(i){e.CHM(t);const a=e.oxw(2);return e.KtG(a.activeItemIndex=i)}),e.TgZ(1,"button",121),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.activeItemIndex=3)}),e._uU(2," HTML "),e.qZA(),e.TgZ(3,"button",156),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.activeItemIndex=4)}),e._uU(4," Style Sheet "),e.qZA(),e.TgZ(5,"button",156),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2);return i.setPreview(i.topTabIndex),e.KtG(i.activeItemIndex=5)}),e._uU(6," Preview "),e.qZA()()}if(2&r){const t=e.oxw(2);e.Q6J("activeItemIndex",t.activeItemIndex)}}function Gt(r,n){if(1&r){const t=e.EpF();e.TgZ(0,"div",157)(1,"ngx-monaco-editor",158),e.NdJ("ngModelChange",function(i){e.CHM(t);const a=e.oxw(2);return e.KtG(a.emailContent=i)}),e.qZA()()}if(2&r){const t=e.oxw(2);e.xp6(1),e.Q6J("options",t.editorOptions)("ngModel",t.emailContent)}}function Kt(r,n){if(1&r){const t=e.EpF();e.TgZ(0,"div",157)(1,"ngx-monaco-editor",158),e.NdJ("ngModelChange",function(i){e.CHM(t);const a=e.oxw(2);return e.KtG(a.emailContentNotify=i)}),e.qZA()()}if(2&r){const t=e.oxw(2);e.xp6(1),e.Q6J("options",t.editorOptions)("ngModel",t.emailContentNotify)}}function Yt(r,n){if(1&r){const t=e.EpF();e.TgZ(0,"div",157)(1,"ngx-monaco-editor",158),e.NdJ("ngModelChange",function(i){e.CHM(t);const a=e.oxw(2);return e.KtG(a.emailContentCSS=i)}),e.qZA()()}if(2&r){const t=e.oxw(2);e.xp6(1),e.Q6J("options",t.cssEditorOptions)("ngModel",t.emailContentCSS)}}function zt(r,n){if(1&r){const t=e.EpF();e.TgZ(0,"div",157)(1,"ngx-monaco-editor",158),e.NdJ("ngModelChange",function(i){e.CHM(t);const a=e.oxw(2);return e.KtG(a.emailContentNotifyCSS=i)}),e.qZA()()}if(2&r){const t=e.oxw(2);e.xp6(1),e.Q6J("options",t.cssEditorOptions)("ngModel",t.emailContentNotifyCSS)}}function jt(r,n){if(1&r&&(e.TgZ(0,"div",157),e._UZ(1,"div",159),e.qZA()),2&r){const t=e.oxw(2);e.xp6(1),e.Q6J("innerHTML",t.previewData,e.oJD)}}function Wt(r,n){if(1&r&&(e.TgZ(0,"ul")(1,"li",160),e._uU(2),e.qZA()()),2&r){const t=n.$implicit;e.xp6(2),e.Oqu(t)}}function $t(r,n){if(1&r){const t=e.EpF();e.TgZ(0,"p",1),e._uU(1,"Email Templates"),e.qZA(),e.TgZ(2,"tui-tabs",150),e.NdJ("activeItemIndexChange",function(i){e.CHM(t);const a=e.oxw();return e.KtG(a.topTabIndex=i)}),e.TgZ(3,"button",121),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return i.setPreview(0),e.KtG(i.topTabIndex=0)}),e._uU(4," Action "),e.qZA(),e.TgZ(5,"button",121),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return i.setPreview(1),e.KtG(i.topTabIndex=1)}),e._uU(6," FYI "),e.qZA()(),e.YNc(7,Rt,7,1,"tui-tabs",151),e.YNc(8,Ht,7,1,"tui-tabs",151),e.TgZ(9,"div",152)(10,"div",75),e.YNc(11,Gt,2,2,"div",153),e.YNc(12,Kt,2,2,"div",153),e.YNc(13,Yt,2,2,"div",153),e.YNc(14,zt,2,2,"div",153),e.YNc(15,jt,2,1,"div",153),e.qZA(),e.TgZ(16,"div",154)(17,"p",155),e._uU(18,"Form Keys"),e.qZA(),e.YNc(19,Wt,3,1,"ul",24),e.qZA()(),e.TgZ(20,"div",146)(21,"button",147),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.confirmEmailTemplate())}),e._uU(22," Save "),e.qZA(),e.TgZ(23,"button",148),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.cancelEmailTemplate())}),e._uU(24," Cancel "),e.qZA()()}if(2&r){const t=e.oxw();e.xp6(2),e.Q6J("activeItemIndex",t.topTabIndex),e.xp6(5),e.Q6J("ngIf",0==t.topTabIndex),e.xp6(1),e.Q6J("ngIf",1==t.topTabIndex),e.xp6(3),e.Q6J("ngIf",0==t.activeItemIndex&&0==t.topTabIndex),e.xp6(1),e.Q6J("ngIf",0==t.activeItemIndex&&1==t.topTabIndex),e.xp6(1),e.Q6J("ngIf",1==t.activeItemIndex&&0==t.topTabIndex),e.xp6(1),e.Q6J("ngIf",1==t.activeItemIndex&&1==t.topTabIndex),e.xp6(1),e.Q6J("ngIf",2==t.activeItemIndex),e.xp6(4),e.Q6J("ngForOf",t.summarySchemaFields)}}function Xt(r,n){if(1&r){const t=e.EpF();e.TgZ(0,"div",157)(1,"ngx-monaco-editor",158),e.NdJ("ngModelChange",function(i){e.CHM(t);const a=e.oxw(2);return e.KtG(a.triggerCode=i)}),e.qZA()()}if(2&r){const t=e.oxw(2);e.xp6(1),e.Q6J("options",t.jsEditorOptions)("ngModel",t.triggerCode)}}function en(r,n){if(1&r){const t=e.EpF();e.TgZ(0,"div",157)(1,"ngx-monaco-editor",158),e.NdJ("ngModelChange",function(i){e.CHM(t);const a=e.oxw(2);return e.KtG(a.triggerCodeAfter=i)}),e.qZA()()}if(2&r){const t=e.oxw(2);e.xp6(1),e.Q6J("options",t.jsEditorOptions)("ngModel",t.triggerCodeAfter)}}function tn(r,n){if(1&r){const t=e.EpF();e.TgZ(0,"div",157)(1,"ngx-monaco-editor",158),e.NdJ("ngModelChange",function(i){e.CHM(t);const a=e.oxw(2);return e.KtG(a.eventCodeOnChange=i)}),e.qZA()()}if(2&r){const t=e.oxw(2);e.xp6(1),e.Q6J("options",t.jsEditorOptions)("ngModel",t.eventCodeOnChange)}}function nn(r,n){if(1&r){const t=e.EpF();e.TgZ(0,"div",157)(1,"ngx-monaco-editor",158),e.NdJ("ngModelChange",function(i){e.CHM(t);const a=e.oxw(2);return e.KtG(a.eventCodeOnLoad=i)}),e.qZA()()}if(2&r){const t=e.oxw(2);e.xp6(1),e.Q6J("options",t.jsEditorOptions)("ngModel",t.eventCodeOnLoad)}}function on(r,n){if(1&r){const t=e.EpF();e.TgZ(0,"p",1),e._uU(1,"Triggers"),e.qZA(),e.TgZ(2,"tui-tabs",150),e.NdJ("activeItemIndexChange",function(i){e.CHM(t);const a=e.oxw();return e.KtG(a.activeItemIndexHooks=i)}),e.TgZ(3,"button",121),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.activeItemIndexHooks=0)}),e._uU(4," Before Submit "),e.qZA(),e.TgZ(5,"button",156),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.activeItemIndex=1)}),e._uU(6," After Submit "),e.qZA(),e.TgZ(7,"button",156),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.activeItemIndex=2)}),e._uU(8," On Change "),e.qZA(),e.TgZ(9,"button",156),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.activeItemIndex=3)}),e._uU(10," On Load "),e.qZA()(),e.TgZ(11,"div",75),e.YNc(12,Xt,2,2,"div",153),e.YNc(13,en,2,2,"div",153),e.YNc(14,tn,2,2,"div",153),e.YNc(15,nn,2,2,"div",153),e.qZA(),e.TgZ(16,"div",146)(17,"button",147),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.confirmEmailTemplate())}),e._uU(18," Save "),e.qZA(),e.TgZ(19,"button",148),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.cancelEmailTemplate())}),e._uU(20," Cancel "),e.qZA()()}if(2&r){const t=e.oxw();e.xp6(2),e.Q6J("activeItemIndex",t.activeItemIndexHooks),e.xp6(10),e.Q6J("ngIf",0==t.activeItemIndexHooks),e.xp6(1),e.Q6J("ngIf",1==t.activeItemIndexHooks),e.xp6(1),e.Q6J("ngIf",2==t.activeItemIndexHooks),e.xp6(1),e.Q6J("ngIf",3==t.activeItemIndexHooks)}}function rn(r,n){if(1&r){const t=e.EpF();e.TgZ(0,"p",1),e._uU(1,"PDF Template"),e.qZA(),e.TgZ(2,"div",75)(3,"div",157)(4,"ngx-monaco-editor",158),e.NdJ("ngModelChange",function(i){e.CHM(t);const a=e.oxw();return e.KtG(a.pdfTempCode=i)}),e.qZA()()(),e.TgZ(5,"div",146)(6,"button",147),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.confirmEmailTemplate())}),e._uU(7," Save "),e.qZA(),e.TgZ(8,"button",148),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.cancelEmailTemplate())}),e._uU(9," Cancel "),e.qZA()()}if(2&r){const t=e.oxw();e.xp6(4),e.Q6J("options",t.jsEditorOptions)("ngModel",t.pdfTempCode)}}function sn(r,n){1&r&&(e.TgZ(0,"strong",161),e._uU(1,"How conditions work?"),e.qZA(),e._UZ(2,"hr"),e.TgZ(3,"ul",162)(4,"li")(5,"strong"),e._uU(6,"AND"),e.qZA(),e._uU(7," implies that every user of the step must provide approval"),e.qZA(),e.TgZ(8,"li",25)(9,"strong"),e._uU(10,"OR"),e.qZA(),e._uU(11," implies that any one of the users may provide approval"),e.qZA(),e.TgZ(12,"li")(13,"strong"),e._uU(14,"NONE"),e.qZA(),e._uU(15," implies that there is only one user per step and hence no conditon is necessary"),e.qZA()())}function an(r,n){1&r&&(e.TgZ(0,"strong",163),e._uU(1,"Admin Users"),e.qZA(),e._UZ(2,"hr"),e.TgZ(3,"p",164),e._uU(4," Admin Users have access to create, delete and modify submissions as well as child apps within a specified application "),e.qZA())}function ln(r,n){1&r&&(e.TgZ(0,"strong",163),e._uU(1,"View Only Users"),e.qZA(),e._UZ(2,"hr"),e.TgZ(3,"p",164),e._uU(4," View Only Users have read-only access. They may view submissions and child apps but may not modify or delete them "),e.qZA())}function un(r,n){if(1&r&&e._UZ(0,"tui-data-list-wrapper",149),2&r){const t=e.oxw(2);e.Q6J("items",t.summarySchemaFields)}}function cn(r,n){if(1&r&&e._UZ(0,"tui-data-list-wrapper",149),2&r){const t=e.oxw(3);e.Q6J("items",null==t.schemaForm||null==t.schemaForm.controls.summarySchema?null:t.schemaForm.controls.summarySchema.value)}}function dn(r,n){if(1&r&&e._UZ(0,"tui-data-list-wrapper",149),2&r){const t=e.oxw(3);e.Q6J("items",t.selectItems)}}function mn(r,n){if(1&r){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",175)(2,"tui-select",176),e._uU(3," View schema field "),e.YNc(4,cn,1,1,"tui-data-list-wrapper",145),e.qZA(),e.TgZ(5,"tui-input",177),e._UZ(6,"input",178),e.TgZ(7,"p",162),e._uU(8,"Field label"),e.qZA()(),e.TgZ(9,"tui-select",179),e._uU(10," Specify data type "),e._UZ(11,"input",180),e.YNc(12,dn,1,1,"tui-data-list-wrapper",145),e.qZA(),e.TgZ(13,"button",181),e.NdJ("click",function(){const a=e.CHM(t).index,p=e.oxw(2);return e.KtG(p.deleteViewSchema(a))}),e.qZA()(),e.BQk()}if(2&r){const t=n.index;e.xp6(1),e.Q6J("formGroupName",t),e.xp6(1),e.Q6J("tuiTextfieldLabelOutside",!0),e.xp6(3),e.Q6J("tuiTextfieldLabelOutside",!0),e.xp6(1),e.Q6J("tuiTextfieldLabelOutside",!0)}}function pn(r,n){if(1&r){const t=e.EpF();e.TgZ(0,"h2",165),e._uU(1,"Modify Summary & View Schema"),e.qZA(),e.TgZ(2,"div",166)(3,"label",167),e._uU(4,"Summary Schema "),e.TgZ(5,"sup"),e._uU(6,"(Optional)"),e.qZA()(),e.TgZ(7,"tui-multi-select",168),e.NdJ("ngModelChange",function(i){e.CHM(t);const a=e.oxw();return e.KtG(a.applySummarySchemaValuesToViewSchema(i))}),e._uU(8," Summary schema fields "),e.YNc(9,un,1,1,"tui-data-list-wrapper",145),e.qZA(),e.TgZ(10,"p",169),e._uU(11,"Type the fieldname and press Enter to add. e.g. formKey.fieldValue"),e.qZA(),e.TgZ(12,"div",137),e.ynx(13,170),e.TgZ(14,"label",167),e._uU(15,"View Schema "),e.TgZ(16,"sup"),e._uU(17,"(Optional)"),e.qZA()(),e.YNc(18,mn,14,4,"ng-container",24),e.TgZ(19,"div",171)(20,"button",172),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.addViewSchema())}),e.qZA()(),e.BQk(),e.qZA()(),e.TgZ(21,"div",173)(22,"button",174),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.setSummaryAndViewSchema())}),e._uU(23," Confirm "),e.qZA(),e.TgZ(24,"button",52),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.closeSchemaDialog())}),e._uU(25," Cancel "),e.qZA()()}if(2&r){const t=e.oxw();e.xp6(2),e.Q6J("formGroup",t.schemaForm),e.xp6(5),e.Q6J("tuiTextfieldLabelOutside",!0),e.xp6(11),e.Q6J("ngForOf",t.viewSchema.controls)}}function _n(r,n){if(1&r){const t=e.EpF();e.TgZ(0,"p",182),e._uU(1,"Delete Form"),e.qZA(),e.TgZ(2,"p",183),e._uU(3,"Are you sure you want to delete this form?"),e.qZA(),e.TgZ(4,"div",184)(5,"button",185),e.NdJ("click",function(){const a=e.CHM(t).$implicit;return e.oxw().deleteForm(),e.KtG(a.complete())}),e._uU(6," Confirm "),e.qZA(),e.TgZ(7,"button",52),e.NdJ("click",function(){const a=e.CHM(t).$implicit;return e.KtG(a.complete())}),e._uU(8," Cancel "),e.qZA()()}}function gn(r,n){if(1&r){const t=e.EpF();e.TgZ(0,"h2",165),e._uU(1,"Add default data"),e.qZA(),e.TgZ(2,"div",186)(3,"formio",187),e.NdJ("change",function(i){e.CHM(t);const a=e.oxw();return e.KtG(a.onChangeForm(i))}),e.qZA()(),e.TgZ(4,"div",188)(5,"button",174),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.confirmDefaultSubmission())}),e._uU(6," Confirm "),e.qZA(),e.TgZ(7,"button",52),e.NdJ("click",function(){const a=e.CHM(t).$implicit;return e.KtG(a.complete())}),e._uU(8," Cancel "),e.qZA()()}if(2&r){const t=e.oxw();e.xp6(3),e.Q6J("options",t.options)("form",t.formForDefaultData)("submission",t.sanitizeSubmission(t.deafultFormSubmission[t.defaultFormIndex]))}}const fn=function(r){return{validation:"required",message:"App Title is required",control:r}},hn=function(r){return{validation:"required",message:"App code is required",control:r}},bn=function(r){return{validation:"maxlength",message:"App code should not exceed 7 characters",control:r}},vn=function(r){return{validation:"required",message:"A Description is required",control:r}},xn=function(r){return{validation:"required",message:"Company is required",control:r}};class Oe{constructor(n,t,s,i,a,p,U,ge,ve,be){this.fb=n,this.auth=t,this.transportService=s,this.router=i,this.dashboard=a,this.activatedRoute=p,this.notif=U,this.dialogs=ge,this.media=ve,this.domSanitizer=be,this.activeItemIndex=0,this.topTabIndex=0,this.activeItemIndexHooks=0,this.formKeys=[],this.formComponents=[],this.activeIndex=0,this.language=new e.vpe,this.langItems=[{name:"en"},{name:"ar"}],this.languageForm=new c.cw({languages:new c.NI(this.langItems[0])}),this.eventComponent=new c.NI(null),this.conditions=["OR","AND","ANY"],this.formTabs=[],this.subModuleFormIoValue=new K.X({}),this.destroy$=new P.x,this.isCreatingSubModule=new P.x,this.isSavingAsDraft=new P.x,this.cols=["3","4","5","6","7","8","9","10","11","12"],this.addForms=new c.NI(!0),this.firstEditorPreview=!1,this.secondEditorPreview=!1,this.emailContent='\n  <head>Action</head>\n  <body>\n      <table class="wrapper" width="100%" cellpadding="0" cellspacing="0" role="presentation">\n      <tr>\n          <td align="center">\n            <table class="content" width="100%" cellpadding="0" cellspacing="0" role="presentation">\n                <tr>\n                  <td class="header">\n                      <a href="http://127.0.0.1:8080/">\n                      </a>\n                  </td>\n                </tr>\n                <tr>\n                  <td class="body">\n                      <table class="inner-body" align="center" width="570" cellpadding="0" cellspacing="0"\n                        role="presentation">\n                        <tr class="header">\n                            <td>\n                              <a href="http://127.0.0.1:8080/">\n                                  <img src="https://depa.com/images/logo.png" alt="DEPA Organization Logo"\n                                    class="logo">\n                              </a>\n                            </td>\n                        </tr>\n                        <tr>\n                            <td class="content-cell">\n                              <h1>Hello!</h1>\n                              <div class="form-data">\n                                  <h3>Forms data</h3>\n                                  <table class="approval-log">\n                                    {{#each formsData}}\n                                    <tr>\n                                        <th colspan=2>Form Title: {{formId.title}}</th>\n                                    </tr>\n                                    <tr>\n                                        <th>key</th>\n                                        <th>value</th>\n                                    </tr>\n                                    {{#each data}}\n                                    <tr>\n                                        <td>{{@key}}</td>\n                                        <td>{{this}}</td>\n                                    </tr>\n                                    {{/each}}\n                                    {{/each}}\n                                  </table>\n                              </div>\n                              <h3>Summary</h3>\n                              <table class="summary-data">\n                                  <tr>\n                                    <th>Progress</th>\n                                    <th>Recent Activity</th>\n                                    <th>Pending On</th>\n                                  </tr>\n                                  <tr>\n                                    <td>{{summaryData.progress}}%</td>\n                                    <td>{{summaryData.lastActivityPerformedBy.fullName}}</td>\n                                    <td>\n                                        {{#each summaryData.pendingOnUsers}}\n                                        {{this.fullName}}{{#unless @last}}, {{/unless}}\n                                        {{/each}}\n                                    </td>\n                                  </tr>\n                              </table>\n                              <h3>Approval logs</h3>\n                              <table class="approval-log">\n                                  <tr>\n                                    <th>Performed By</th>\n                                    <th>Decision</th>\n                                    <th>Comments</th>\n                                  </tr>\n                                  {{#each approvalLogs}}\n                                  <tr>\n                                    <td>{{performedById.fullName}}</td>\n                                    <td>{{approvalStatus}}</td>\n                                    <td>{{remarks}}</td>\n                                  </tr>\n                                  {{/each}}\n                              </table>\n                              <p>Now it\'s your turn to execute the workflow. Please perform the necessary\n                                  action as soon as possible so that the rest of the workflow can be executed.\n                              </p>\n                              <div class="btn-align" cellpadding="0">\n                                  <a id="accept-button"\n                                    href="https://depa-frontend.pages.dev/email-submission?submissionId={{submissionId}}&stepId={{stepId}}&userId={{userId}}&isApproved=true"\n                                    class="button button-primary" target="_self"\n                                    rel="noopener">Approve</a>\n                                  <a id="reject-button"\n                                    href="https://depa-frontend.pages.dev/email-submission?submissionId={{submissionId}}&stepId={{stepId}}&userId={{userId}}&isApproved="\n                                    class="button button-danger" target="_self"\n                                    rel="noopener">Reject</a>\n                              </div>\n                              <p>Regards,<br> DEPA Groups</p>\n                            </td>\n                        </tr>\n                      </table>\n                  </td>\n                </tr>\n            </table>\n          </td>\n      </tr>\n    </table>\n  </body>\n  ',this.emailContentNotify='\n  <head>FYI</head>\n  <body>\n  <table class="wrapper" width="100%" cellpadding="0" cellspacing="0" role="presentation">\n   <tr>\n      <td align="center">\n         <table class="content" width="100%" cellpadding="0" cellspacing="0" role="presentation">\n            <tr>\n               <td class="header">\n                  <a href="http://127.0.0.1:8080/">\n                  </a>\n               </td>\n            </tr>\n            <tr>\n               <td class="body">\n                  <table class="inner-body" align="center" width="570" cellpadding="0" cellspacing="0"\n                     role="presentation">\n                     <tr class="header">\n                        <td>\n                           <a href="http://127.0.0.1:8080/">\n                              <img src="https://depa.com/images/logo.png" alt="DEPA Organization Logo"\n                                 class="logo">\n                           </a>\n                        </td>\n                     </tr>\n                     <tr>\n                        <td class="content-cell">\n                           <h1>Hello!</h1>\n                           <div class="form-data">\n                              <h3>Forms data</h3>\n                              <table class="approval-log">\n                                 {{#each formsData}}\n                                 <tr>\n                                    <th colspan=2>Form Title: {{formId.title}}</th>\n                                 </tr>\n                                 <tr>\n                                    <th>key</th>\n                                    <th>value</th>\n                                 </tr>\n                                 {{#each data}}\n                                 <tr>\n                                    <td>{{@key}}</td>\n                                    <td>{{this}}</td>\n                                 </tr>\n                                 {{/each}}\n                                 {{/each}}\n                              </table>\n                           </div>\n                           <h3>Summary</h3>\n                           <table class="summary-data">\n                              <tr>\n                                 <th>Progress</th>\n                                 <th>Recent Activity</th>\n                                 <th>Pending On</th>\n                              </tr>\n                              <tr>\n                                 <td>{{summaryData.progress}}%</td>\n                                 <td>{{summaryData.lastActivityPerformedBy.fullName}}</td>\n                                 <td>\n                                    {{#each summaryData.pendingOnUsers}}\n                                    {{this.fullName}}{{#unless @last}}, {{/unless}}\n                                    {{/each}}\n                                 </td>\n                              </tr>\n                           </table>\n                           <h3>Approval logs</h3>\n                           <table class="approval-log">\n                              <tr>\n                                 <th>Performed By</th>\n                                 <th>Decision</th>\n                                 <th>Comments</th>\n                              </tr>\n                              {{#each approvalLogs}}\n                              <tr>\n                                 <td>{{performedById.fullName}}</td>\n                                 <td>{{approvalStatus}}</td>\n                                 <td>{{remarks}}</td>\n                              </tr>\n                              {{/each}}\n                           </table>\n                           <p>The last action has been performed by the user, and the action is\n                           "blablabla". Currently, the step is active\n                           for the following users: User A, User B, and User C.\n                           </p>\n                           <p>Regards,<br> DEPA Groups</p>\n                        </td>\n                     </tr>\n                  </table>\n               </td>\n            </tr>\n         </table>\n      </td>\n   </tr>\n</table>\n  </body>\n  ',this.emailContentCSS="\n    body {\n      box-sizing: border-box;\n      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol';\n      position: relative;\n      -webkit-text-size-adjust: none;\n      background-color: #ffffff;\n      color: #718096;\n      height: 100%;\n      line-height: 1.4;\n      margin: 0;\n      padding: 0;\n      width: 100% !important;\n    }\n\n    .wrapper {\n      box-sizing: border-box;\n      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol';\n      position: relative;\n      -premailer-cellpadding: 0;\n      -premailer-cellspacing: 0;\n      -premailer-width: 100%;\n      background-color: #edf2f7;\n      margin: 0;\n      padding: 0;\n      width: 100%;\n    }\n\n    .header {\n      box-sizing: border-box;\n      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol';\n      position: absolute;\n        top: -110px;\n      left: 40%;\n      padding: 50px 0 25px 0;\n      text-align: center;\n    }\n\n    .content {\n      box-sizing: border-box;\n      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol';\n      position: relative;\n      -premailer-cellpadding: 0;\n      -premailer-cellspacing: 0;\n      -premailer-width: 100%;\n      margin: 0;\n      padding: 0;\n      width: 100%;\n    }\n\n    .body {\n      box-sizing: border-box;\n      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol';\n      position: relative;\n      -premailer-cellpadding: 0;\n      -premailer-cellspacing: 0;\n      -premailer-width: 100%;\n      background-color: #edf2f7;\n      border-bottom: 1px solid #edf2f7;\n      border-top: 1px solid #edf2f7;\n      margin: 0;\n      padding: 0;\n      width: 100%;\n      border: hidden !important;\n      position: relative;\n    }\n\n    .inner-body {\n      box-sizing: border-box;\n      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol';\n      position: relative;\n      -premailer-cellpadding: 0;\n      -premailer-cellspacing: 0;\n      -premailer-width: 570px;\n      background-color: #ffffff;\n      border-color: #e8e5ef;\n      border-radius: 2px;\n      border-width: 1px;\n      box-shadow: 0 2px 0 rgba(0, 0, 150, 0.025), 2px 4px 0 rgba(0, 0, 150, 0.015);\n      margin: 70px auto 50px auto;\n      padding: 0;\n      width: 570px;\n      padding: 32px;\n    }\n\n    .form-data {\n      width: 100%;\n      min-height: 100px;\n      height: 200px;\n      overflow-y: scroll;\n      margin-bottom: 20px;\n    }\n\n    .form-data ul {\n      list-style-type: none;\n      margin-left: -40px;\n    }\n\n    .form-data ul li {\n      font-weight: 600;\n      font-size: 18px;\n      margin-bottom: 8px;\n    }\n\n    .form-data ul li span:first-child {\n      font-weight: 500;\n    }\n\n    .action {\n      box-sizing: border-box;\n      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol';\n      position: relative;\n      -premailer-cellpadding: 0;\n      -premailer-cellspacing: 0;\n      -premailer-width: 100%;\n      margin: 30px auto;\n      padding: 0;\n      text-align: center;\n      width: 100%;\n      display:flex;\n      justify-content: center;\n    }\n\n    .action td {\n      padding-right: 1rem;\n    }\n\n    .button {\n      box-sizing: border-box;\n      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol';\n      position: relative;\n      -webkit-text-size-adjust: none;\n      border-radius: 4px;\n      color: #fff;\n      display: inline-block;\n      overflow: hidden;\n      text-decoration: none;\n    }\n\n    .button-primary {\n      border-bottom: 8px solid #4CAF50;\n      border-left: 18px solid #4CAF50;\n      border-right: 18px solid #4CAF50;\n      border-top: 8px solid #4CAF50;\n      background-color: #4CAF50;\n    }\n\n    .button-primary:hover {\n      background-color: #4CAF50;\n    }\n\n    .button-danger {\n      border-bottom: 8px solid #f44336;\n      border-left: 18px solid #f44336;\n      border-right: 18px solid #f44336;\n      border-top: 8px solid #f44336;\n      background-color: #f44336;\n    }\n\n    .button-danger:hover {\n      background-color: #f4433f;\n    }\n\n    .content-cell h1 {\n      box-sizing: border-box;\n      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol';\n      position: relative;\n      color: #3d4852;\n      font-size: 18px;\n      font-weight: bold;\n      margin-top: 0;\n      text-align: left;\n    }\n\n    .form-title {\n      font-weight: 600;\n      font-size: 18px;\n      margin-bottom: 8px;\n    }\n\n    .form-key {\n      font-weight: 500;\n    }\n\n    .form-value {\n      font-weight: 300;\n    }\n\n    .approval-log, .summary-data {\n      width: 100%;\n    }\n\n    .approval-log tr th, .summary-data tr th {\n      background-color: #f2f2f2;\n    }\n\n    .approval-log tr th, .approval-log tr td\n    .summary-data tr th, .summary-data tr td {\n      text-align:center;\n    }\n\n    .btn-align {\n      text-align: left;\n    }\n  ",this.emailContentNotifyCSS="\n    body {\n      box-sizing: border-box;\n      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol';\n      position: relative;\n      -webkit-text-size-adjust: none;\n      background-color: #ffffff;\n      color: #718096;\n      height: 100%;\n      line-height: 1.4;\n      margin: 0;\n      padding: 0;\n      width: 100% !important;\n    }\n\n    .wrapper {\n      box-sizing: border-box;\n      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol';\n      position: relative;\n      -premailer-cellpadding: 0;\n      -premailer-cellspacing: 0;\n      -premailer-width: 100%;\n      background-color: #edf2f7;\n      margin: 0;\n      padding: 0;\n      width: 100%;\n    }\n\n    .header {\n      box-sizing: border-box;\n      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol';\n      position: absolute;\n        top: -110px;\n      left: 40%;\n      padding: 50px 0 25px 0;\n      text-align: center;\n    }\n\n    .content {\n      box-sizing: border-box;\n      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol';\n      position: relative;\n      -premailer-cellpadding: 0;\n      -premailer-cellspacing: 0;\n      -premailer-width: 100%;\n      margin: 0;\n      padding: 0;\n      width: 100%;\n    }\n\n    .body {\n      box-sizing: border-box;\n      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol';\n      position: relative;\n      -premailer-cellpadding: 0;\n      -premailer-cellspacing: 0;\n      -premailer-width: 100%;\n      background-color: #edf2f7;\n      border-bottom: 1px solid #edf2f7;\n      border-top: 1px solid #edf2f7;\n      margin: 0;\n      padding: 0;\n      width: 100%;\n      border: hidden !important;\n      position: relative;\n    }\n\n    .inner-body {\n      box-sizing: border-box;\n      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol';\n      position: relative;\n      -premailer-cellpadding: 0;\n      -premailer-cellspacing: 0;\n      -premailer-width: 570px;\n      background-color: #ffffff;\n      border-color: #e8e5ef;\n      border-radius: 2px;\n      border-width: 1px;\n      box-shadow: 0 2px 0 rgba(0, 0, 150, 0.025), 2px 4px 0 rgba(0, 0, 150, 0.015);\n      margin: 70px auto 50px auto;\n      padding: 0;\n      width: 570px;\n      padding: 32px;\n    }\n\n    .form-data {\n      width: 100%;\n      min-height: 100px;\n      height: 200px;\n      overflow-y: scroll;\n      margin-bottom: 20px;\n    }\n\n    .form-data ul {\n      list-style-type: none;\n      margin-left: -40px;\n    }\n\n    .form-data ul li {\n      font-weight: 600;\n      font-size: 18px;\n      margin-bottom: 8px;\n    }\n\n    .form-data ul li span:first-child {\n      font-weight: 500;\n    }\n\n    .action {\n      box-sizing: border-box;\n      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol';\n      position: relative;\n      -premailer-cellpadding: 0;\n      -premailer-cellspacing: 0;\n      -premailer-width: 100%;\n      margin: 30px auto;\n      padding: 0;\n      text-align: center;\n      width: 100%;\n      display:flex;\n      justify-content: center;\n    }\n\n    .action td {\n      padding-right: 1rem;\n    }\n\n    .button {\n      box-sizing: border-box;\n      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol';\n      position: relative;\n      -webkit-text-size-adjust: none;\n      border-radius: 4px;\n      color: #fff;\n      display: inline-block;\n      overflow: hidden;\n      text-decoration: none;\n    }\n\n    .button-primary {\n      border-bottom: 8px solid #4CAF50;\n      border-left: 18px solid #4CAF50;\n      border-right: 18px solid #4CAF50;\n      border-top: 8px solid #4CAF50;\n      background-color: #4CAF50;\n    }\n\n    .button-primary:hover {\n      background-color: #4CAF50;\n    }\n\n    .button-danger {\n      border-bottom: 8px solid #f44336;\n      border-left: 18px solid #f44336;\n      border-right: 18px solid #f44336;\n      border-top: 8px solid #f44336;\n      background-color: #f44336;\n    }\n\n    .button-danger:hover {\n      background-color: #f4433f;\n    }\n\n    .content-cell h1 {\n      box-sizing: border-box;\n      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol';\n      position: relative;\n      color: #3d4852;\n      font-size: 18px;\n      font-weight: bold;\n      margin-top: 0;\n      text-align: left;\n    }\n\n    .form-title {\n      font-weight: 600;\n      font-size: 18px;\n      margin-bottom: 8px;\n    }\n\n    .form-key {\n      font-weight: 500;\n    }\n\n    .form-value {\n      font-weight: 300;\n    }\n\n    .approval-log, .summary-data {\n      width: 100%;\n    }\n\n    .approval-log tr th, .summary-data tr th {\n      background-color: #f2f2f2;\n    }\n\n    .approval-log tr th, .approval-log tr td\n    .summary-data tr th, .summary-data tr td {\n      text-align:center;\n    }\n\n    .btn-align {\n      text-align: left;\n    }\n  ",this.domainURL=window.location.origin,this.userListForEmail=[],this.search$=new P.x,this.saveDialogSubscription=[],this.schemaSubscription=[],this.limit=10,this.page=0,this.showError=new P.x,this.errorIndex=0,this.parentIDUnAssigned=!1,this.items=[{name:"anyCreate"},{name:"anyCreateAndModify"},{name:"disabled"}],this.selectItems=["Text","Number","Date"],this.formKeysForViewSchema=[],this.summarySchemaFields=[],this.schemaForm=new c.cw({summarySchema:new c.NI([]),viewSchema:new c.Oe([new c.cw({fieldKey:new c.NI(""),displayAs:new c.NI(""),type:new c.NI(this.selectItems[0])})])}),this.deafultFormSubmission=[],this.deafultFormSubmissionDialog=[],this.defaultFormSubscription=[],this.inheritLoader=new P.x,this.editorOptions={theme:"vs-dark",language:"handlebars"},this.cssEditorOptions={theme:"vs-dark",language:"css"},this.jsEditorOptions={theme:"vs-dark",language:"javascript"},this.triggerCode='function x(submission) {\n    console.log(submission, "Hello world!");\n  }',this.triggerCodeAfter='function x(submission) {\n    console.log(submission, "Hello world!");\n  }',this.initSubModuleForm(),this.accessTypeValue=new c.NI(this.items[2]),this.submoduleFromLS=this.transportService.subModuleDraft.value,this.activatedRoute.queryParams.pipe((0,y.R)(this.destroy$)).subscribe(A=>{Object.keys(A).length>0?(this.parentIDUnAssigned=!0,this.getDefaultWorkflowByModule(),this.getAllCategories(),this.categoryIdForMatch=A.parentID):this.getDefaultWorkflowBySubModule()}),this.getAllCompanies(),this.formComponents=this.transportService.formBuilderData.value,this.formTabs=this.formComponents?.map(A=>A.title),JSON.parse(JSON.stringify(this.formComponents))?.map(A=>{this.formKeys?.push({[A.key]:L.cQ.flattenComponents(A?.components,!1)})}),this.summarySchemaFields=this.formKeys.flatMap(A=>(0,z.oX)(A)),this.formKeysForViewSchema=this.summarySchemaFields,this.search$.pipe((0,V.w)(A=>this.dashboard.getAllUsersForListing(this.limit,this.page,A)),(0,y.R)(this.destroy$)).subscribe(A=>{A&&(this.userListForEmail=A?.results?.map(ne=>ne?.email))}),this.dashboard.getAllUsersForListing(this.limit,this.page).pipe((0,y.R)(this.destroy$)).subscribe(A=>{A&&(this.userListForEmail=A?.results?.map(ne=>ne?.email))})}ngOnInit(){let n=(0,d.rV)(d.MX.navHierarchy)?.map(t=>t?.caption);n?.includes("Material Inspection Report")&&(this.pdfTempCode=this.dashboard.pdfTemplate),n?.includes("General Quality Report")&&(this.pdfTempCode=this.dashboard.pdfTemplateForQR),this.activatedRoute.queryParams.pipe((0,y.R)(this.destroy$)).subscribe(t=>{if(0==Object.keys(t).length){const s=(0,d.rV)(d.MX.navHierarchy);s&&this.dashboard.previousRoute&&this.dashboard.previousRoute.includes("isParent"),s.forEach(i=>{i.routerLink=`/modules/${i.code}?moduleID=${(0,d.rV)(d.MX.moduleID)}`}),this.dashboard.items=[...s,{caption:this.transportService?.subModuleDraft?.value?.title||"Add App",routerLink:`/modules/add-module/${(0,d.rV)(d.MX.moduleID)}`}]}})}setPreview(n){0==n&&(this.previewData="<style>"+this.emailContentCSS+"</style>"+this.emailContent,this.previewData=this.domSanitizer.bypassSecurityTrustHtml(this.previewData)),1==n&&(this.previewData="<style>"+this.emailContentNotifyCSS+"</style>"+this.emailContentNotify,this.previewData=this.domSanitizer.bypassSecurityTrustHtml(this.previewData))}inheritParentForm(){this.inheritLoader.next(!0);let n=JSON.parse(JSON.stringify(this.dashboard.inheritSubmoduleData.value));if(n?.formIds?.length>0){n?.formIds?.forEach(A=>{A.title=A.title+"-"+String(Math.floor(900*Math.random()+100)),A.key=A.key+"-"+String(Math.floor(900*Math.random()+100)),L.cQ.eachComponent(A?.components,ne=>{if("select"==ne.type&&(ne.template=ne?.template?.replace(/&lt;/g,"<").replace(/&gt;/g,">")),ne?.html&&(ne.html=ne.html?.replace(/&lt;/g,"<").replace(/&gt;/g,">")),"editgrid"==ne.type)for(const De in ne.templates)ne.templates[De]=ne.templates[De]?.replace(/&lt;/g,"<").replace(/&gt;/g,">")},!0)}),this.formComponents=n?.formIds,this.formTabs=n?.formIds?.map(A=>A.title);let G=JSON.parse(JSON.stringify(this.formComponents));G?.map(A=>{this.formKeys?.push({[A.key]:L.cQ.flattenComponents(A?.components,!0)})}),this.summarySchemaFields=this.formKeys.flatMap(A=>(0,z.oX)(A)),this.formKeysForViewSchema=this.summarySchemaFields,G?.map((A,ne)=>{A?.defaultData&&(this.defaultFormIndex=ne,this.deafultFormSubmission[this.defaultFormIndex]=A?.defaultData)})}else this.formComponents=[{title:"",key:"",display:"",components:[]}];const t={value:n?.companyId?.id,label:n?.companyId?.title},s={value:n?.categoryId?.id,label:n?.categoryId?.name};this.file=n?.image,this.base64File=n?.image;const i=n?.workFlowId?.stepIds?.map(G=>({id:G?.id,approverIds:G?.approverIds?.map(A=>({name:A?.fullName,id:A?.id,control:new c.NI(!0)})),condition:G?.condition,emailNotifyTo:G?.emailNotifyToId?.notifyUsers||[],emailNotifyToId:G?.emailNotifyToId?.id})),a=n?.adminUsers?.map(G=>({name:G?.fullName,id:G?.id,control:new c.NI(!0)})),p=n?.viewOnlyUsers?.map(G=>({name:G?.fullName,id:G?.id,control:new c.NI(!0)})),U=n?.layout?.colWidth||"4",ge=n?.code+"-"+String(Math.floor(900*Math.random()+100)),ve=n?.title+"-"+String(Math.floor(900*Math.random()+100));this.addForms.setValue(n?.formVisibility?.value||!0),delete n?.workFlowId,delete n?.url,delete n?.companyId,delete n?.categoryId;const be=Object.assign(n,{workflows:i},{categoryName:s},{companyName:t},{viewOnlyUsers:p},{adminUsers:a},{colWidth:U},{code:ge},{title:ve});this.initSubModuleForm(be),this.transportService.saveDraftLocally(be),this.transportService.sendFormBuilderData({}),this.inheritLoader.next(!1)}sanitizeSubmission(n){let t=n?.data;if(t)for(const s in t)"string"==typeof t[s]&&(t[s]=t[s]?.replace(/&lt;/g,"<")?.replace(/&gt;/g,">")),("dataGrid"==s||"editGrid"==s)&&t[s]?.forEach(i=>{for(const a in i)"string"==typeof i[a]&&(i[a]=i[a]?.replace(/&lt;/g,"<")?.replace(/&gt;/g,">"))});return n}applySummarySchemaValuesToViewSchema(n){n?.forEach((t,s)=>{this.schemaForm?.controls.viewSchema?.value?.forEach((i,a)=>{i?.fieldKey!==t&&this.schemaForm?.controls.viewSchema?.removeAt(a)})}),0==n?.length&&this.schemaForm?.controls.viewSchema?.removeAt(0)}checkIfLabelIsUnique(){return new Set(this.schemaForm.controls.viewSchema.value?.map(t=>t?.displayAs)).size===this.schemaForm.controls.viewSchema.value?.length}get viewSchema(){return this.schemaForm.controls.viewSchema}addViewSchema(){const n=this.fb.group({fieldKey:new c.NI(""),displayAs:new c.NI(""),type:new c.NI(this.selectItems[0])});this.viewSchema.push(n)}deleteViewSchema(n){this.viewSchema.removeAt(n)}getDefaultWorkflowByModule(){this.activatedRoute.params.pipe((0,y.R)(this.destroy$)).subscribe(n=>{n.id&&(!1===this.parentIDUnAssigned&&(this.parentID=n.id),this.redirectToModuleID=n.id,this.transportService.moduleID.next(n.id),Object.keys(this.submoduleFromLS)?.length>0&&(this.initSubModuleForm(this.submoduleFromLS),this.base64File=this.submoduleFromLS?.image,this.file=this.submoduleFromLS?.file,this.emailContent=this.submoduleFromLS.emailTemplate.action,this.emailContentCSS=this.submoduleFromLS.emailTemplate.actionCSS,this.emailContentNotify=this.submoduleFromLS.emailTemplate.notify,this.emailContentNotifyCSS=this.submoduleFromLS.emailTemplate.notifyCSS))})}getDefaultWorkflowBySubModule(){this.activatedRoute.params.pipe((0,y.R)(this.destroy$)).subscribe(n=>{n.id&&(!1===this.parentIDUnAssigned&&(this.parentID=n.id),this.redirectToModuleID=n.id,this.transportService.moduleID.next(n.id),this.dashboard.getWorkflowFromSubModule(n.id).pipe((0,y.R)(this.destroy$)).subscribe(t=>{t&&(this.categoryId=t?.categoryId,this.initSubModuleForm(t?.response)),Object.keys(this.submoduleFromLS)?.length>0&&(this.initSubModuleForm(this.submoduleFromLS),this.base64File=this.submoduleFromLS?.image,this.file=this.submoduleFromLS?.file,this.emailContent=this.submoduleFromLS.emailTemplate.action,this.emailContentCSS=this.submoduleFromLS.emailTemplate.actionCSS,this.emailContentNotify=this.submoduleFromLS.emailTemplate.notify,this.emailContentNotifyCSS=this.submoduleFromLS.emailTemplate.notifyCSS)}))})}openEmailNotifyModal(n,t,s){this.activeEmailIndex=s,this.currentFieldArray=t,this.saveDialogSubscription.push(this.dialogs.open(n,{dismissible:!1,closeable:!1,size:"l"}).subscribe())}openModifyEditorDialog(n){this.saveDialogSubscription.push(this.dialogs.open(n,{dismissible:!1,closeable:!1,size:"l"}).subscribe())}openTriggeOrPdfOrSummarySchemaDialog(n){this.saveDialogSubscription.push(this.dialogs.open(n,{dismissible:!1,closeable:!1,size:"l"}).subscribe())}onSearchChange(n){this.search$.next(n)}validateEmails(){let n=this.workflows.at(this.activeEmailIndex)?.get("emailNotifyTo")?.value;n=n.map(t=>!!/\S+@\S+\.\S+/.test(t)),n.includes(!1)?this.notif.displayNotification("Please provide valid email addresses","Email Notify","warning"):this.saveDialogSubscription.forEach(t=>t.unsubscribe())}cancelEmailNotify(){this.workflows.at(this.activeEmailIndex)?.get("emailNotifyTo")?.setValue([]),this.saveDialogSubscription.forEach(n=>n.unsubscribe())}confirmEmailTemplate(){this.saveDialogSubscription.forEach(n=>n.unsubscribe())}cancelEmailTemplate(){this.emailContent=this.dashboard.emailContent,this.emailContentNotify=this.dashboard.emailContentNotify,this.emailContentCSS=this.dashboard.emailContentCSS,this.emailContentNotifyCSS=this.dashboard.emailContentNotifyCSS,this.saveDialogSubscription.forEach(n=>n.unsubscribe())}getAllCompanies(){this.dashboard.getAllCompanies(20,0).pipe((0,y.R)(this.destroy$)).subscribe(n=>{this.companyList=n.results?.map(t=>({value:t?.id,label:t?.title}))})}getAllCategories(){this.dashboard.getAllCategories(20).pipe((0,y.R)(this.destroy$)).subscribe(n=>{this.categoryList=n.results?.map(i=>({value:i?.id,label:i?.name}));let t=this.categoryList;t=t?.filter(i=>i?.value==this.categoryIdForMatch)[0],this.subModuleForm?.get("categoryName")?.value||this.subModuleForm?.get("categoryName")?.setValue(t?.value)})}initSubModuleForm(n){this.subModuleForm=this.fb.group({companies:this.fb.array([]),categories:this.fb.array([]),code:[n?.code||null,c.kI.compose([c.kI.required]),[z.Iw.createValidator(this.dashboard,"submodule")]],companyName:[n?.companyName?.value?n?.companyName?.value:n?.companyName||null,c.kI.required],categoryName:[n?.categoryName?.value?n?.categoryName?.value:n?.categoryName||null,c.kI.required],adminUsers:[n?.adminUsers||[],c.kI.required],viewOnlyUsers:[n?.viewOnlyUsers||[],c.kI.required],title:[n?.title||null,c.kI.compose([c.kI.required]),[z.Iw.createValidator(this.dashboard,"submodule","title")]],image:[n?.image||null,c.kI.required],description:[n?.description||null,c.kI.required],colWidth:[n?.colWidth||"4"],workflows:this.fb.array(n?.workflows?n?.workflows?.map(t=>this.fb.group({condition:[t.condition,c.kI.required],approverIds:[t.approverIds,c.kI.required],emailNotifyTo:[t.emailNotifyTo||[],c.kI.required]})):n?.map(t=>this.fb.group({condition:[t.condition,c.kI.required],approverIds:[t.approverIds,c.kI.required],emailNotifyTo:[t.emailNotifyTo||[],c.kI.required]}))||[this.fb.group({condition:[null,c.kI.required],approverIds:[[],c.kI.required],emailNotifyTo:[[],c.kI.required]})])})}onFileSelect(n){const t=n?.target?.files[0];if(1==(0,z.QG)(t)){this.file=t;const s=new FileReader;s.readAsDataURL(t),s.onload=i=>{this.base64File=s.result}}else this.notif.displayNotification("Allowed file types are JPG/PNG/WebP. File size cannot exceed 2MB","File Upload","warning")}get f(){return this.subModuleForm.controls}get companies(){return this.f.companies}addCompany(){const n=this.fb.group({title:["",c.kI.compose([c.kI.required]),[z.Iw.createValidator(this.dashboard,"company","title")]],groupCode:["",c.kI.compose([c.kI.required,c.kI.minLength(3),c.kI.maxLength(4)]),[z.Iw.createValidator(this.dashboard,"company")]]});this.companies.push(n)}getValidityForCompany(n){return this.companies.controls[n]?.get("title").hasError("required")&&this.companies.controls[n]?.get("title").dirty}getValidityForCompanyCode(n){return(this.companies.controls[n]?.get("groupCode").hasError("required")||this.companies.controls[n]?.get("groupCode").hasError("maxlength")||this.companies.controls[n]?.get("groupCode").hasError("minlength"))&&this.companies.controls[n]?.get("groupCode").dirty}getValidityForWorkflowStep(){return this.workflows.controls[0]?.get("approverIds")?.hasError("required")&&this.workflows.controls[0]?.get("approverIds")?.touched}getValidityForCompanyCodeExists(n){return this.companies.controls[n]?.get("title")?.hasError("codeExists")}getValidityForCompanyCodeExistsGroup(n){return this.companies.controls[n]?.get("groupCode")?.hasError("codeExists")}getValidityForCategory(n){return this.categories.controls[n].hasError("required")&&this.categories.controls[n].touched}getValidityForCategoryCode(n){return this.categories.controls[n]?.get("name").hasError("codeExists")}removeCompany(n){this.companies.removeAt(n)}get categories(){return this.f.categories}addCategory(){const n=this.fb.group({name:["",c.kI.compose([c.kI.required,c.kI.maxLength(40)]),[z.Iw.createValidator(this.dashboard,"category")]]});this.categories.push(n)}removeCategory(n){this.categories.removeAt(n)}get workflows(){return this.f.workflows}addWorkflowStep(){const n=this.fb.group({condition:["",c.kI.required],approverIds:[[],c.kI.required],emailNotifyTo:[[],c.kI.required]});this.workflows.push(n)}removeWorkflowStep(n){this.workflows.removeAt(n)}getApproverList(n,t){this.workflows.at(t)?.get("approverIds")?.setValue(n)}submitNewCompany(){let n=[];for(let t=0;t<this.f.companies?.value?.length;t++)n.push(this.dashboard.addCompany({title:this.f.companies?.value[t]?.title,groupCode:this.f.companies?.value[t]?.groupCode}).pipe((0,y.R)(this.destroy$)));n.length>0&&(0,Y.D)(n).subscribe(t=>{if(t&&!t.includes(void 0)){for(let s=t?.length;s>0;s--)this.companies.removeAt(0),this.companies.removeAt(s),this.companies.reset();this.getAllCompanies()}})}submitNewCategory(){this.dashboard.addCategory({name:this.f.categories?.value[0]?.name}).pipe((0,y.R)(this.destroy$)).subscribe(t=>{t&&(this.categories.reset(),this.categories.removeAt(0),this.getAllCategories())})}saveDraft(){this.transportService.isFormEdit.next(!1),this.transportService.saveDraftLocally({...this.subModuleForm.value,image:this.base64File,file:this.file,emailTemplate:{action:this.emailContent,actionCSS:this.emailContentCSS,notify:this.emailContentNotify,notifyCSS:this.emailContentNotifyCSS}}),this.transportService.formBuilderData.next([{title:"",key:"",display:"",components:[]}]);let n=this.workflows?.value?.flatMap(t=>t?.approverIds?.map(s=>({id:s.id,name:s.name})));if(0==n.length)return this.notif.displayNotification("Please create a default workflow before adding forms","Default Workflow","warning");(0,d.LS)(d.MX.editBreadcrumbs,this.dashboard.items),(0,d.LS)(d.MX.approvers,n),this.categoryIdForMatch?this.router.navigate(["/forms/form-builder"],{queryParams:{isParent:!0}}):this.router.navigate(["/forms/form-builder"])}addDefaultData(n,t){this.formForDefaultData=this.formComponents[n],this.defaultFormIndex=n,this.defaultFormSubscription.push(this.dialogs.open(t,{dismissible:!1,closeable:!1,size:"l"}).subscribe())}onChangeForm(n){n?.data&&n?.changed&&1==n.isModified&&(n.changed.component.validate={},n?.data?.file&&n?.data?.file?.forEach(t=>{t.url=t?.data?.baseUrl.split("v1")[0]+t?.data?.fileUrl}),this.deafultFormSubmissionDialog[this.defaultFormIndex]={data:n?.data})}confirmDefaultSubmission(){this.deafultFormSubmission=this.deafultFormSubmissionDialog,this.formComponents[this.defaultFormIndex].defaultData=this.deafultFormSubmission[this.defaultFormIndex],this.defaultFormSubscription.forEach(n=>n.unsubscribe())}sendFormForEdit(n){this.transportService.isFormEdit.next(!0),this.transportService.sendFormDataForEdit.next(this.formComponents[n]),(0,d.LS)(d.MX.editBreadcrumbs,this.dashboard.items),this.transportService.saveDraftLocally({...this.subModuleForm.value,image:this.base64File,file:this.file,emailTemplate:{action:this.emailContent,actionCSS:this.emailContentCSS,notify:this.emailContentNotify,notifyCSS:this.emailContentNotifyCSS}}),this.router.navigate(["/forms/form-builder"])}deleteFormDialog(n,t){this.delIndex=t,this.dialogs.open(n,{dismissible:!0,closeable:!0}).pipe((0,y.R)(this.destroy$)).subscribe()}deleteForm(){this.formComponents.splice(this.delIndex,1),this.formTabs.splice(this.delIndex,1)}changeLanguage(n){this.language.emit(n)}setSummaryAndViewSchema(){return 0==this.checkIfLabelIsUnique()?this.notif.displayNotification("Field labels must be unique","Schema Controls","warning"):this.schemaForm?.value?.viewSchema[0]?.displayAs?(this.schemaSubscription.forEach(n=>n.unsubscribe()),void console.log(this.schemaForm.value)):this.notif.displayNotification("Please provide all data","Form Schema","warning")}closeSchemaDialog(){this.saveDialogSubscription.forEach(n=>n.unsubscribe()),this.schemaForm?.reset(),this.schemaSubscription.forEach(n=>n.unsubscribe())}saveSubModule(n){if(!n){if(0==this.dataSubmitValidation())return this.subModuleForm.markAllAsTouched(),this.notif.displayNotification("Please provide complete data for all fields","Create module","warning");if(this.workflows.controls.map(s=>s.get("approverIds")?.value.length>1&&s.get("condition")?.value).includes("none"))return this.notif.displayNotification("Please provide valid condition for the workflow step/s","Create module","warning")}let t={title:this.subModuleForm.get("title")?.value,description:this.subModuleForm.get("description")?.value,url:`/modules/module-details/${this.subModuleForm.get("title")?.value.replace(/\s/g,"-").toLowerCase()}`,companyId:this.subModuleForm.get("companyName")?.value,categoryId:this.subModuleForm.get("categoryName")?.value?this.subModuleForm.get("categoryName")?.value:this.categoryId,code:this.subModuleForm.get("code")?.value,adminUsers:this.subModuleForm.get("adminUsers")?.value?.map(s=>s?.id),viewOnlyUsers:this.subModuleForm.get("viewOnlyUsers")?.value?.map(s=>s?.id),formIds:this.formComponents,parentId:!0===this.parentIDUnAssigned?void 0:this.parentID,steps:this.workflows?.value?.map(s=>({approverIds:s?.approverIds?.map(i=>i.id?i.id:i),condition:s?.condition,emailNotifyTo:s?.emailNotifyTo||[]})),formVisibility:this.addForms.value,colWidth:this.f.colWidth?.value||"4",summarySchema:this.schemaForm.value?.summarySchema?.length>0?this.schemaForm.value?.summarySchema:void 0,viewSchema:this.schemaForm.value?.viewSchema[0]?.displayAs?this.schemaForm.value?.viewSchema:void 0,accessType:"disabled"!==this.accessTypeValue?.value?.name?this.accessTypeValue?.value?.name:void 0,emailTemplate:{action:this.emailContent,actionCSS:this.emailContentCSS,notify:this.emailContentNotify,notifyCSS:this.emailContentNotifyCSS},pdfTemplate:this.pdfTempCode||void 0,triggers:[{name:"beforeSubmit",code:this.triggerCode||"function beforeSubmit(){}"},{name:"afterSubmit",code:this.triggerCodeAfter||"function afterSubmit(){}"}],events:[{name:"onChange",code:this.eventCodeOnChange||"function onChange(event){console.log('On Change Works!')}"},{name:"onLoad",code:this.eventCodeOnLoad||"function onLoad(event){console.log('On Load Works!')}"}]};if(n?this.isSavingAsDraft.next(!0):this.isCreatingSubModule.next(!0),this.file)if("string"==typeof this.file){const s="uploads"+this.file.split("uploads")[1];t={...t,image:s},this.dashboard.createSubModule(t).pipe((0,y.R)(this.destroy$)).subscribe(i=>{i?(this.isCreatingSubModule.next(!1),this.isSavingAsDraft.next(!1),this.transportService.saveDraftLocally({}),this.transportService.sendFormBuilderData([{title:"",key:"",display:"",components:[]}]),this.routeToBasedOnPreviousPage()):(this.isCreatingSubModule.next(!1),this.isSavingAsDraft.next(!1))})}else this.media.uploadMedia(this.file).pipe((0,y.R)(this.destroy$)).subscribe(s=>{s.hasErrors()?(this.isCreatingSubModule.next(!1),this.isSavingAsDraft.next(!1)):(t={...t,image:s?.data?.fileUrl},n&&Object.assign(t,{status:n}),this.dashboard.createSubModule(t).pipe((0,y.R)(this.destroy$)).subscribe(i=>{i?(this.isCreatingSubModule.next(!1),this.isSavingAsDraft.next(!1),this.transportService.saveDraftLocally({}),this.transportService.sendFormBuilderData([{title:"",key:"",display:"",components:[]}]),this.routeToBasedOnPreviousPage()):(this.isCreatingSubModule.next(!1),this.isSavingAsDraft.next(!1))}))});else this.dashboard.createSubModule(t).pipe((0,y.R)(this.destroy$)).subscribe(s=>{s?(this.isCreatingSubModule.next(!1),this.isSavingAsDraft.next(!1),this.transportService.saveDraftLocally({}),this.transportService.sendFormBuilderData([{title:"",key:"",display:"",components:[]}]),this.routeToBasedOnPreviousPage()):(this.isCreatingSubModule.next(!1),this.isSavingAsDraft.next(!1))})}routeToBasedOnPreviousPage(){this.activatedRoute.queryParams.pipe((0,y.R)(this.destroy$)).subscribe(n=>{Object.keys(n).length>0?this.router.navigate(["/dashboard/home"]):this.router.navigate(["/modules",(0,d.rV)(d.MX.moduleSlug)||""],{queryParams:{moduleID:(0,d.rV)(d.MX.moduleID)||""}})})}cancelSubmodule(){this.routeToBasedOnPreviousPage()}dataSubmitValidation(){return!(this.f.companyName?.invalid||0==this.workflows?.length||this.workflows.controls.map(n=>0==n.get("approverIds")?.value.length).includes(!0)||!0===this.workflows.controls.map(n=>n.get("condition")?.value).includes(""))}validateSelection(n){return this.errorIndex=n,this.workflows.at(n)?.get("approverIds")?.value?.length<2?(this.workflows.at(n)?.get("condition")?.setValue("none"),this.showError.next(!1)):this.workflows.at(n)?.get("approverIds")?.value?.length>=2&&"none"==this.workflows.at(n)?.get("condition")?.value?this.showError.next(!0):void this.showError.next(!1)}countUsers(n,t){return this.errorIndex=t,n<2?(this.workflows.at(t)?.get("condition")?.setValue("none"),this.showError.next(!1)):n>=2&&"none"==this.workflows.at(t)?.get("condition")?.value?this.showError.next(!0):void this.showError.next(!1)}setAdminUsers(n){this.subModuleForm?.get("adminUsers")?.setValue(n)}setViewUsers(n){this.subModuleForm?.get("viewOnlyUsers")?.setValue(n)}ngOnDestroy(){this.destroy$.complete(),this.destroy$.unsubscribe()}}Oe.\u0275fac=function(n){return new(n||Oe)(e.Y36(c.qu),e.Y36(ae.e),e.Y36(oe.R),e.Y36(u.F0),e.Y36(de.s),e.Y36(u.gz),e.Y36(H.T),e.Y36(D.RO),e.Y36(W),e.Y36(me.H7))},Oe.\u0275cmp=e.Xpm({type:Oe,selectors:[["ng-component"]],decls:134,vars:55,consts:[[1,"w-11/12","h-auto","min-h-screen","mx-auto","mt-44","md:mt-52","pb-44"],[1,"text-xl","font-semibold","text-center"],[1,"flex","justify-between","bg-[#EAE4D8]","px-2","py-2","rounded-md","mt-2"],[1,"text-lg","font-semibold","mt-0.5"],["tuiButton","","appearance","custom","size","s","class","bg-[#a58f81] text-white hover:bg-opacity-80 hover:transition-colors",3,"showLoader","click",4,"ngIf"],[1,"block","pt-5",3,"formGroup"],[1,"grid","grid-cols-12","gap-3"],[1,"col-span-6","mt-3","mb-5"],[1,"block","pb-1"],[1,"text-xs","text-red-400"],["required","","formControlName","title","type","text",1,"form-control",3,"ngClass"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["class","text-xs text-red-500",4,"ngIf"],["required","","formControlName","code","type","text",1,"form-control",3,"ngClass"],[1,"col-span-6","mt-3","mb-3"],["required","","formControlName","description","type","text","rows","6",1,"form-control","h-[80%]",3,"ngClass"],["for","dropzone-file",1,"flex","flex-col","items-center","justify-center","w-full","h-[80%]","border-2","border-gray-300","border-dashed","rounded-md","cursor-pointer","bg-gray-50","hover:bg-gray-100",3,"change"],[3,"inheritColor","size","showLoader","overlay"],["class","flex justify-center",4,"ngIf"],["class","flex justify-start",4,"ngIf"],["id","dropzone-file","type","file",1,"hidden"],[1,"col-span-6"],[1,"mb-7","mt-5"],["required","","formControlName","companyName","type","text",1,"form-control",3,"ngClass"],[4,"ngFor","ngForOf"],[1,"my-2"],[1,"text-xs","text-gray-500"],["formArrayName","companies"],["tuiIconButton","","type","button","size","m","appearance","secondary","icon","tuiIconPlusLarge",3,"click"],[4,"ngIf"],["class","w-1/2 mt-4",4,"ngIf"],[1,"mt-10"],[1,"flex","justify-between","bg-[#EAE4D8]","px-2","py-2","rounded-md"],[1,"text-lg","font-semibold","mt-1"],[1,"grid","grid-cols-12","gap-3","my-8"],[1,"block","pb-1","text-sm"],["direction","right",1,"",3,"content"],["formControlName","adminUsers",3,"approverList"],["formControlName","viewOnlyUsers",3,"approverList"],[1,"mt-12","mb-14"],["tuiButton","","appearance","custom","size","s",1,"bg-[#a58f81]","text-white","hover:bg-opacity-80","hover:transition-colors",3,"click"],["formArrayName","workflows"],["tuiIconButton","","type","button","size","m","appearance","primary","icon","tuiIconPlusLarge",3,"click"],[1,"mb-5","mt-7"],[1,"flex","justify-between","bg-[#EAE4D8]","px-2","py-2","rounded-md","mb-3"],["size","l",1,"mt-1",3,"formControl","pseudoActive","pseudoFocus"],[1,"font-semibold","text-lg","-mb-1"],["class","flex gap-x-2",4,"ngIf"],["class","mt-7",4,"ngIf"],[1,"flex","justify-center","gap-2","mt-10"],["tuiButton","","type","button","size","m","appearance","primary",3,"showLoader","click"],["tuiButton","","type","button","size","m","appearance","secondary",3,"showLoader","click"],["tuiButton","","type","button","size","m","appearance","accent",3,"click"],["formError",""],["template",""],["ckTemplate",""],["triggerTemp",""],["pdfTemplate",""],["hint",""],["hintAdmin",""],["hintViewOnly",""],["summarySchemaTemplate",""],["deltemplate",""],["defaultForm",""],["tuiButton","","appearance","custom","size","s",1,"bg-[#a58f81]","text-white","hover:bg-opacity-80","hover:transition-colors",3,"showLoader","click"],[1,"text-xs","text-red-500"],[1,"flex","justify-center"],["alt","app_icon","width","100","height","130",1,"rounded-md",3,"src"],[1,"flex","justify-start"],[1,"mx-8","mt-1"],["src","../../../../../assets/windows.svg","width","32","height","32"],[1,"text-sm","text-gray-400","list-disc"],[3,"value"],[1,"w-10/12","px-8",3,"formGroupName"],[1,"flex","items-center","justify-between","w-full","gap-2","mb-3"],[1,"w-full"],["class","block pb-2 text-xs font-semibold",4,"ngIf"],["formControlName","title","type","text",1,"form-control",3,"ngClass"],["formControlName","groupCode","type","text",1,"mt-3","form-control",3,"ngClass"],[3,"ngClass"],["tuiIconButton","","type","button","size","s","appearance","secondary-destructive","icon","tuiIconTrash2Large",3,"click"],[1,"flex","justify-end"],["tuiButton","","type","button","class","mb-3","size","m",3,"click",4,"ngIf"],[1,"block","pb-2","text-xs","font-semibold"],["tuiButton","","type","button","size","m",1,"mb-3",3,"click"],["required","","formControlName","categoryName","type","text",1,"form-control",3,"ngClass"],["formArrayName","categories"],["formControlName","name","type","text",1,"form-control",3,"ngClass"],["tuiButton","","type","button","class","mb-3","size","m",3,"disabled","click",4,"ngIf"],["tuiButton","","type","button","size","m",1,"mb-3",3,"disabled","click"],[1,"col-span-6","mt-5"],["required","","formControlName","colWidth","type","text",1,"form-control"],[1,"w-1/2","mt-4"],[1,"text-base","font-semibold","mt-7"],[1,"grid","grid-cols-12","gap-3","my-4",3,"formGroupName"],[1,"lg:col-span-3","col-span-5"],["formControlName","approverIds",3,"checkUsersLength","approverList"],["for","conditionSelect",1,"block","pb-1"],["formControlName","condition","aria-label","Default select example","id","conditionSelect",1,"h-10","mt-2","form-select","form-control",3,"change"],["value","or"],["value","none"],[1,"inline-flex","col-span-1","mt-8"],["direction","right",1,"mt-1","mr-4","-ml-2",3,"content"],[3,"contentTop","colorTop"],["tuiIconButton","","type","button","size","s","appearance","outline","icon","tuiIconMailLarge",3,"click"],[1,"lg:col-span-4","col-span-10"],[1,"flex","justify-between","mt-8"],[1,"tui-space_bottom-3",3,"formControl","item"],[1,"mt-1","text-xxs","font-extralight"],[1,"col-span-1","mt-8"],["value","and"],[1,"lg:col-span-4","col-span-5"],[1,"col-span-1","mt-8","lg:-ml-4","ml-2"],[1,"flex","gap-x-2"],[1,"bg-[#a58f81]","text-white","hover:bg-opacity-80","hover:transition-colors","px-2.5","py-2","rounded-xl",3,"click"],[1,"px-2.5","py-2","text-white","bg-[#A58F81]","rounded-xl","cursor-pointer","hover:text-white","hover:bg-opacity-80","hover:transition-colors",3,"click"],[1,"mt-3","text-base","font-semibold","text-center"],[1,"flex","flex-col","w-full","px-5","mx-auto","mt-3","border","border-gray-400","border-dashed","rounded-md","bg-gray-50"],[1,"w-full","mx-auto","my-1"],[1,"relative","flex","justify-between","my-8"],["tuiTabs","","vertical","left",1,"lg:w-32","w-18","mr-5"],["tuiTab","",3,"click"],["class","w-full well jsonviewer",4,"ngIf"],[1,"w-full","well","jsonviewer"],[1,"absolute","z-10","flex","justify-end","-top-7","right-1","gap-x-2"],["title","Add default data",1,"rounded-md","cursor-pointer","mt-[0.5px]",3,"click"],["aria-hidden","true",1,"text-green-500","hover:text-green-600","fa","fa-table","fa-2x"],["title","Edit Form/Permissions",1,"rounded-md","cursor-pointer",3,"click"],["aria-hidden","true",1,"text-blue-500","hover:text-blue-600","fa","fa-pencil-square","fa-2x"],["title","Delete Form",1,"rounded-md","cursor-pointer",3,"click"],["aria-hidden","true",1,"text-red-500","fa","fa-trash","fa-2x","hover:text-red-600"],[3,"language","options","form","submission"],[1,"grid","grid-cols-12","gap-2"],["data-placeholder","",1,"h-8","col-span-12","my-3","overflow-hidden","bg-gray-200","rounded-md"],[1,"grid","grid-cols-12","col-span-12","gap-2"],["data-placeholder","",1,"col-span-6","mb-3","overflow-hidden","bg-gray-200","rounded-md","h-28"],["data-placeholder","",1,"h-8","col-span-6","my-3","overflow-hidden","bg-gray-200","rounded-md"],[1,"mt-7"],[1,"px-5","py-3","rounded-lg","bg-[#a58f81]","no-underline","text-white","cursor-pointer","hover:text-white","hover:bg-opacity-80","hover:transition-colors",3,"click"],[1,"w-full","mt-1","text-left","fv-plugins-message-container","text-xxs","2xl:text-xs"],["role","alert",1,"text-xs","text-red-400","fv-help-block","2xl:text-xs","2xl:mb-2"],[1,"text-lg","font-semibold","text-center"],[1,"mt-2","text-base","font-medium","text-gray-500","text-center"],[1,"flex","flex-col","justify-center","my-5"],[1,"b-form",3,"formControl","tuiTextfieldLabelOutside","searchChange"],[3,"items",4,"tuiDataList"],[1,"flex","justify-start","gap-x-3"],["tuiButton","","type","button","size","m",3,"click"],["appearance","accent","tuiButton","","type","button","size","m",3,"click"],[3,"items"],[3,"activeItemIndex","activeItemIndexChange"],[3,"activeItemIndex","activeItemIndexChange",4,"ngIf"],[1,"flex","justify-between"],["class","my-3 h-[480px]",4,"ngIf"],[1,"w-[28%]","ml-6","h-[480px]","overflow-y-auto","overflow-x-hidden"],[1,"text-lg","font-semibold","my-2","text-black"],["tuiTab","",1,"flex","justify-end",3,"click"],[1,"my-3","h-[480px]"],[1,"h-full",3,"options","ngModel","ngModelChange"],[1,"h-[480px]","overflow-scroll",3,"innerHTML"],[1,"my-2","list-disc","text-black"],[1,"text-base"],[1,"mt-2"],[1,"text-base","text-center"],[1,"mt-2","leading-5"],[1,"mt-4","text-lg","font-semibold","text-center"],[1,"w-[98%]","mx-auto","my-8",3,"formGroup"],[1,"mb-2","font-medium"],["formControlName","summarySchema",3,"tuiTextfieldLabelOutside","ngModelChange"],[1,"mt-1","text-xxs"],["formArrayName","viewSchema"],[1,"flex","justify-end","my-2"],["tuiIconButton","","type","button","size","s","appearance","primary","icon","tuiIconPlus",3,"click"],[1,"flex","justify-center","gap-2"],["tuiButton","","type","button","size","m","appearance","primary",3,"click"],[1,"grid","grid-cols-12","gap-2","mb-3",3,"formGroupName"],["formControlName","fieldKey",1,"col-span-4",3,"tuiTextfieldLabelOutside"],["formControlName","displayAs",1,"col-span-4",3,"tuiTextfieldLabelOutside"],["tuiTextfield","","type","text",3,"tuiTextfieldLabelOutside"],["formControlName","type",1,"col-span-3"],["placeholder","Specify data type","tuiTextfield",""],["tuiIconButton","","type","button","size","s","appearance","secondary-destructive","icon","tuiIconTrash2",1,"col-span-1","mt-2",3,"click"],[1,"pb-2","text-xl","font-semibold","text-center","border-b","border-gray-400"],[1,"mt-4","text-base","font-medium","text-center"],[1,"flex","justify-center","mt-4"],["tuiButton","","appearance","primary","type","button","size","m",1,"mx-3",3,"click"],[1,"w-[98%]","mx-auto"],[3,"options","form","submission","change"],[1,"flex","justify-center","gap-2","mb-5"]],template:function(n,t){if(1&n){const s=e.EpF();e._UZ(0,"app-header"),e.TgZ(1,"section",0)(2,"section")(3,"h3",1),e._uU(4,"Create a new app"),e.qZA(),e.TgZ(5,"div",2)(6,"h4",3),e._uU(7,"Basic Info"),e.qZA(),e.YNc(8,et,3,3,"button",4),e.qZA()(),e.TgZ(9,"form",5)(10,"div",6)(11,"div",7)(12,"label",8),e._uU(13,"App Title "),e.TgZ(14,"span",9),e._uU(15,"*"),e.qZA()(),e._UZ(16,"input",10),e.GkF(17,11),e.YNc(18,tt,2,0,"span",12),e.qZA(),e.TgZ(19,"div",7)(20,"label",8),e._uU(21,"App Code "),e.TgZ(22,"span",9),e._uU(23,"*"),e.qZA()(),e._UZ(24,"input",13),e.GkF(25,11)(26,11),e.YNc(27,nt,2,0,"span",12),e.qZA()(),e.TgZ(28,"div",6)(29,"div",14)(30,"label",8),e._uU(31,"App Description"),e.TgZ(32,"span",9),e._uU(33,"*"),e.qZA()(),e._UZ(34,"textarea",15),e.GkF(35,11),e.qZA(),e.TgZ(36,"div",14)(37,"label",8),e._uU(38,"App Icon"),e.TgZ(39,"span",9),e._uU(40,"*"),e.qZA()(),e.TgZ(41,"label",16),e.NdJ("change",function(a){return t.onFileSelect(a)}),e.TgZ(42,"tui-loader",17),e.YNc(43,ot,2,1,"div",18),e.YNc(44,it,8,0,"div",19),e.qZA(),e._UZ(45,"input",20),e.qZA()()(),e.TgZ(46,"div",6)(47,"div",21)(48,"div",22)(49,"label",8),e._uU(50,"Company Name "),e.TgZ(51,"span",9),e._uU(52,"*"),e.qZA()(),e.TgZ(53,"select",23),e.YNc(54,rt,3,2,"ng-container",24),e.qZA(),e.GkF(55,11),e.qZA(),e.TgZ(56,"div",25)(57,"p",26),e._uU(58,"If your company isn't listed, you can add it below"),e.qZA()(),e.ynx(59,27),e.YNc(60,mt,15,10,"ng-container",24),e.BQk(),e.TgZ(61,"button",28),e.NdJ("click",function(){return t.addCompany()}),e.qZA()(),e.TgZ(62,"div",21),e.YNc(63,xt,15,7,"ng-container",29),e.YNc(64,Ct,6,1,"ng-container",29),e.qZA()(),e.YNc(65,St,5,1,"div",30),e.TgZ(66,"section",31)(67,"div",32)(68,"h4",33),e._uU(69,"User Access & Workflow"),e.qZA()()(),e.TgZ(70,"div",34)(71,"div",21)(72,"label",35),e._uU(73,"Admin users "),e._UZ(74,"tui-tooltip",36),e.TgZ(75,"sup"),e._uU(76,"(optional)"),e.qZA()(),e.TgZ(77,"custom-multi-select",37),e.NdJ("approverList",function(a){return t.setAdminUsers(a)}),e.qZA()(),e.TgZ(78,"div",21)(79,"label",35),e._uU(80,"View Only users "),e._UZ(81,"tui-tooltip",36),e.TgZ(82,"sup"),e._uU(83,"(optional)"),e.qZA()(),e.TgZ(84,"custom-multi-select",38),e.NdJ("approverList",function(a){return t.setViewUsers(a)}),e.qZA()()(),e.TgZ(85,"div",39)(86,"div",32)(87,"h4",33),e._uU(88,"Workflow"),e.qZA(),e.TgZ(89,"button",40),e.NdJ("click",function(){e.CHM(s);const a=e.MAs(117);return e.KtG(t.openModifyEditorDialog(a))}),e._uU(90," Modify Email Template "),e.qZA()(),e.ynx(91,41),e.YNc(92,Et,6,4,"ng-container",24),e.BQk(),e.TgZ(93,"button",42),e.NdJ("click",function(){return t.addWorkflowStep()}),e.qZA()(),e.TgZ(94,"div",43)(95,"div",44)(96,"tui-checkbox-labeled",45)(97,"p",46),e._uU(98),e.qZA()(),e.YNc(99,Dt,7,0,"div",47),e.qZA(),e.YNc(100,Jt,9,2,"ng-container",29),e.qZA(),e.YNc(101,Lt,3,0,"div",48),e.TgZ(102,"div",49)(103,"button",50),e.NdJ("click",function(){return t.saveSubModule()}),e.ALo(104,"async"),e._uU(105," Publish "),e.qZA(),e.TgZ(106,"button",51),e.NdJ("click",function(){return t.saveSubModule(3)}),e.ALo(107,"async"),e._uU(108," Save as Draft "),e.qZA(),e.TgZ(109,"button",52),e.NdJ("click",function(){return t.cancelSubmodule()}),e._uU(110,"Cancel"),e.qZA()()()(),e._UZ(111,"app-footer"),e.YNc(112,Qt,1,1,"ng-template",null,53,e.W1O),e.YNc(114,Vt,13,2,"ng-template",null,54,e.W1O),e.YNc(116,$t,25,9,"ng-template",null,55,e.W1O),e.YNc(118,on,21,5,"ng-template",null,56,e.W1O),e.YNc(120,rn,10,2,"ng-template",null,57,e.W1O),e.YNc(122,sn,16,0,"ng-template",null,58,e.W1O),e.YNc(124,an,5,0,"ng-template",null,59,e.W1O),e.YNc(126,ln,5,0,"ng-template",null,60,e.W1O),e.YNc(128,pn,26,3,"ng-template",null,61,e.W1O),e.YNc(130,_n,9,0,"ng-template",null,62,e.W1O),e.YNc(132,gn,9,3,"ng-template",null,63,e.W1O)}if(2&n){const s=e.MAs(113),i=e.MAs(125),a=e.MAs(127);e.xp6(8),e.Q6J("ngIf",0==t.parentIDUnAssigned),e.xp6(1),e.Q6J("formGroup",t.subModuleForm),e.xp6(7),e.Q6J("ngClass",null!=t.f.title&&t.f.title.invalid&&null!=t.f.title&&t.f.title.dirty?"is-invalid":""),e.xp6(1),e.Q6J("ngTemplateOutlet",s)("ngTemplateOutletContext",e.VKq(45,fn,t.f.title)),e.xp6(1),e.Q6J("ngIf",null==t.f.title?null:t.f.title.hasError("codeExists")),e.xp6(6),e.Q6J("ngClass",null!=t.f.code&&t.f.code.invalid&&null!=t.f.code&&t.f.code.dirty?"is-invalid":""),e.xp6(1),e.Q6J("ngTemplateOutlet",s)("ngTemplateOutletContext",e.VKq(47,hn,t.f.code)),e.xp6(1),e.Q6J("ngTemplateOutlet",s)("ngTemplateOutletContext",e.VKq(49,bn,t.f.code)),e.xp6(1),e.Q6J("ngIf",null==t.f.code?null:t.f.code.hasError("codeExists")),e.xp6(7),e.Q6J("ngClass",null!=t.f.description&&t.f.description.invalid&&null!=t.f.description&&t.f.description.dirty?"is-invalid":""),e.xp6(1),e.Q6J("ngTemplateOutlet",s)("ngTemplateOutletContext",e.VKq(51,vn,t.f.description)),e.xp6(7),e.Q6J("inheritColor",!0)("size","l")("showLoader",!1)("overlay",!0),e.xp6(1),e.Q6J("ngIf",t.file),e.xp6(1),e.Q6J("ngIf",!t.file),e.xp6(9),e.Q6J("ngClass",null!=t.f.companyName&&t.f.companyName.invalid&&null!=t.f.companyName&&t.f.companyName.dirty?"is-invalid":""),e.xp6(1),e.Q6J("ngForOf",t.companyList),e.xp6(1),e.Q6J("ngTemplateOutlet",s)("ngTemplateOutletContext",e.VKq(53,xn,t.f.companyName)),e.xp6(5),e.Q6J("ngForOf",t.companies.controls),e.xp6(3),e.Q6J("ngIf",1==t.parentIDUnAssigned),e.xp6(1),e.Q6J("ngIf",0==t.parentIDUnAssigned),e.xp6(1),e.Q6J("ngIf",1==t.parentIDUnAssigned),e.xp6(9),e.Q6J("content",i),e.xp6(7),e.Q6J("content",a),e.xp6(11),e.Q6J("ngForOf",t.workflows.controls),e.xp6(4),e.Q6J("formControl",t.addForms)("pseudoActive",!0)("pseudoFocus",!0),e.xp6(2),e.Oqu(1==t.addForms.value?"Include forms in Submission":"Exclude forms in Submission"),e.xp6(1),e.Q6J("ngIf",(null==t.formComponents[0]||null==t.formComponents[0].components?null:t.formComponents[0].components.length)>0),e.xp6(1),e.Q6J("ngIf",1==t.addForms.value),e.xp6(1),e.Q6J("ngIf",1==t.addForms.value),e.xp6(2),e.Q6J("showLoader",1==e.lcZ(104,41,t.isCreatingSubModule)),e.xp6(3),e.Q6J("showLoader",1==e.lcZ(107,43,t.isSavingAsDraft))}},dependencies:[o.mk,o.sg,o.O5,o.tP,pe.G,Q.c,B.K3,B.wU,Ae.MB,Se.xT,I.eC,Ie.gX,ie.VT,X.uJ,X.OI,c._Y,c.YN,c.Kr,c.Fj,c.EJ,c.JJ,c.JL,c.Q7,c.oH,c.sg,c.u,c.x0,c.CE,c.On,we.v0,Be.k4,f,Qe.e,F.H9,F.p_,F.uW,F.yu,se.V,ue.PZ,Je.w,Le.kM,Te.p,qe.T2,o.Ov]});var yn=l(68538),Ge=l(94051);function Cn(r,n){1&r&&(e.TgZ(0,"span",61),e._uU(1," An app by this title already exists. Please select another title "),e.qZA())}function Tn(r,n){1&r&&(e.TgZ(0,"span",61),e._uU(1," An app with this code already exists. Please select another code. "),e.qZA())}function Sn(r,n){if(1&r&&(e.TgZ(0,"div",62),e._UZ(1,"img",63),e.qZA()),2&r){const t=e.oxw();e.xp6(1),e.Q6J("src",t.base64File,e.LSH)}}function wn(r,n){1&r&&(e.TgZ(0,"div",64)(1,"div",65),e._UZ(2,"img",66),e.qZA(),e.TgZ(3,"ul",67)(4,"li"),e._uU(5,"Only (JPEG, PNG, WEBP) extensions are allowed"),e.qZA(),e.TgZ(6,"li"),e._uU(7,"Up to 2MB file size is allowed"),e.qZA()()())}function An(r,n){if(1&r&&(e.ynx(0),e.TgZ(1,"option",68),e._uU(2),e.qZA(),e.BQk()),2&r){const t=n.$implicit;e.xp6(1),e.Q6J("value",null==t?null:t.value),e.xp6(1),e.Oqu(null==t?null:t.label)}}function In(r,n){if(1&r&&(e.ynx(0),e.TgZ(1,"option",68),e._uU(2),e.qZA(),e.BQk()),2&r){const t=n.$implicit;e.xp6(1),e.Q6J("value",null==t?null:t.value),e.xp6(1),e.Oqu(null==t?null:t.label)}}function Mn(r,n){if(1&r&&(e.ynx(0),e.TgZ(1,"option",68),e._uU(2),e.qZA(),e.BQk()),2&r){const t=n.$implicit;e.xp6(1),e.Q6J("value",t),e.xp6(1),e.Oqu(t)}}function Zn(r,n){1&r&&(e.TgZ(0,"span",61),e._uU(1,"Please select either AND or OR as the condition"),e.qZA())}function kn(r,n){1&r&&(e.TgZ(0,"span",61),e._uU(1," Please specify submission creator/s "),e.qZA())}function En(r,n){1&r&&(e.ynx(0),e.TgZ(1,"option",87),e._uU(2,"AND"),e.qZA(),e.BQk())}function Dn(r,n){if(1&r){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",71)(2,"label",6),e._uU(3),e.TgZ(4,"span",7),e._uU(5,"*"),e.qZA()(),e.TgZ(6,"custom-multi-select",72),e.NdJ("checkUsersLength",function(i){e.CHM(t);const a=e.oxw().index,p=e.oxw();return e.KtG(p.countUsers(i,a))})("approverList",function(i){e.CHM(t);const a=e.oxw().index,p=e.oxw();return e.KtG(p.getApproverList(i,a))}),e.qZA(),e.YNc(7,Zn,2,0,"span",10),e.ALo(8,"async"),e.YNc(9,kn,2,0,"span",10),e.qZA(),e.TgZ(10,"div",71)(11,"label",73),e._uU(12,"Condition "),e.TgZ(13,"span",7),e._uU(14,"*"),e.qZA()(),e.TgZ(15,"select",74),e.NdJ("change",function(){e.CHM(t);const i=e.oxw().index,a=e.oxw();return e.KtG(a.validateSelection(i))}),e.YNc(16,En,3,0,"ng-container",44),e.TgZ(17,"option",75),e._uU(18,"OR"),e.qZA(),e.TgZ(19,"option",76),e._uU(20,"NONE"),e.qZA()()(),e.TgZ(21,"div",77),e._UZ(22,"tui-tooltip",78),e.TgZ(23,"tui-badged-content",79)(24,"button",80),e.NdJ("click",function(){e.CHM(t);const i=e.oxw().index,a=e.oxw(),p=e.MAs(115);return e.KtG(a.openEmailNotifyModal(p,a.workflows,i))}),e.qZA()()(),e.TgZ(25,"div",81)(26,"div",82)(27,"tui-radio-labeled",83)(28,"div"),e._uU(29,"Any (Create)"),e.qZA(),e.TgZ(30,"div",84),e._uU(31,"Any user can create a new submission"),e.qZA()(),e.TgZ(32,"tui-radio-labeled",83)(33,"div"),e._uU(34,"Any (Create & Modify)"),e.qZA(),e.TgZ(35,"div",84),e._uU(36,"Any user can create a new submission and modify it's workflow"),e.qZA()(),e.TgZ(37,"tui-radio-labeled",83)(38,"div"),e._uU(39,"Disabled"),e.qZA(),e.TgZ(40,"div",84),e._uU(41,"Only Admin users can create and modify submissions"),e.qZA()()()(),e.TgZ(42,"div",85)(43,"button",86),e.NdJ("click",function(){e.CHM(t);const i=e.oxw().index,a=e.oxw();return e.KtG(a.removeWorkflowStep(i))}),e.qZA()(),e.BQk()}if(2&r){const t=e.oxw(),s=t.first,i=t.index,a=e.oxw(),p=e.MAs(123);let U;e.xp6(3),e.hij("",s?"Creators":"Approvers"," "),e.xp6(4),e.Q6J("ngIf",e.lcZ(8,13,a.showError)&&i===a.errorIndex),e.xp6(2),e.Q6J("ngIf",1==a.getValidityForWorkflowStep()),e.xp6(7),e.Q6J("ngIf",i>0),e.xp6(6),e.Q6J("content",p),e.xp6(1),e.Q6J("contentTop",null==(U=a.workflows.at(i).get("emailNotifyTo"))||null==U.value?null:U.value.length)("colorTop","green"),e.xp6(4),e.Q6J("formControl",a.accessTypeValue)("item",a.items[0]),e.xp6(5),e.Q6J("formControl",a.accessTypeValue)("item",a.items[1]),e.xp6(5),e.Q6J("formControl",a.accessTypeValue)("item",a.items[2])}}function On(r,n){1&r&&(e.TgZ(0,"span",61),e._uU(1,"Please select either AND or OR as the condition"),e.qZA())}function Un(r,n){if(1&r){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",88)(2,"label",6),e._uU(3,"Approvers "),e.TgZ(4,"span",7),e._uU(5,"*"),e.qZA()(),e.TgZ(6,"custom-multi-select",72),e.NdJ("checkUsersLength",function(i){e.CHM(t);const a=e.oxw().index,p=e.oxw();return e.KtG(p.countUsers(i,a))})("approverList",function(i){e.CHM(t);const a=e.oxw().index,p=e.oxw();return e.KtG(p.getApproverList(i,a))}),e.qZA(),e.YNc(7,On,2,0,"span",10),e.ALo(8,"async"),e.qZA(),e.TgZ(9,"div",88)(10,"label",73),e._uU(11,"Condition "),e.TgZ(12,"span",7),e._uU(13,"*"),e.qZA()(),e.TgZ(14,"select",74),e.NdJ("change",function(){e.CHM(t);const i=e.oxw().index,a=e.oxw();return e.KtG(a.validateSelection(i))}),e.TgZ(15,"option",87),e._uU(16,"AND"),e.qZA(),e.TgZ(17,"option",75),e._uU(18,"OR"),e.qZA(),e.TgZ(19,"option",76),e._uU(20,"NONE"),e.qZA()()(),e.TgZ(21,"div",77),e._UZ(22,"tui-tooltip",78),e.TgZ(23,"tui-badged-content",79)(24,"button",80),e.NdJ("click",function(){e.CHM(t);const i=e.oxw().index,a=e.oxw(),p=e.MAs(115);return e.KtG(a.openEmailNotifyModal(p,a.workflows,i))}),e.qZA()()(),e.TgZ(25,"div",89)(26,"button",86),e.NdJ("click",function(){e.CHM(t);const i=e.oxw().index,a=e.oxw();return e.KtG(a.removeWorkflowStep(i))}),e.qZA()(),e.BQk()}if(2&r){const t=e.oxw().index,s=e.oxw(),i=e.MAs(123);let a;e.xp6(7),e.Q6J("ngIf",e.lcZ(8,4,s.showError)&&t===s.errorIndex),e.xp6(15),e.Q6J("content",i),e.xp6(1),e.Q6J("contentTop",null==(a=s.workflows.at(t).get("emailNotifyTo"))||null==a.value?null:a.value.length)("colorTop","green")}}function Nn(r,n){if(1&r&&(e.ynx(0),e.TgZ(1,"p",69),e._uU(2),e.qZA(),e.TgZ(3,"div",70),e.YNc(4,Dn,44,15,"ng-container",44),e.YNc(5,Un,27,6,"ng-container",44),e.qZA(),e.BQk()),2&r){const t=n.index;e.xp6(2),e.hij("Step ",0===t?"1":t+1,""),e.xp6(1),e.Q6J("formGroupName",t),e.xp6(1),e.Q6J("ngIf",0==t),e.xp6(1),e.Q6J("ngIf",t>0)}}function Fn(r,n){if(1&r){const t=e.EpF();e.TgZ(0,"div",90)(1,"button",91),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(),a=e.MAs(121);return e.KtG(i.openTriggeOrPdfOrSummarySchemaDialog(a))}),e._uU(2," PDF template "),e.qZA(),e.TgZ(3,"button",91),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(),a=e.MAs(119);return e.KtG(i.openTriggeOrPdfOrSummarySchemaDialog(a))}),e._uU(4," Triggers & Events "),e.qZA(),e.TgZ(5,"a",92),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(),a=e.MAs(129);return e.KtG(i.openTriggeOrPdfOrSummarySchemaDialog(a))}),e._uU(6," Summary & View Schema "),e.qZA()()}}function Pn(r,n){if(1&r){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",99),e.NdJ("click",function(){const a=e.CHM(t).index,p=e.oxw(3);return e.KtG(p.activeIndex=a)}),e._uU(2),e.qZA(),e.BQk()}if(2&r){const t=n.$implicit;e.xp6(2),e.Oqu(t)}}function Jn(r,n){if(1&r){const t=e.EpF();e.TgZ(0,"div",101)(1,"div",102)(2,"div",103)(3,"a",104),e.NdJ("click",function(){e.CHM(t);const i=e.oxw().index,a=e.oxw(3),p=e.MAs(133);return e.KtG(a.addDefaultData(i,p))}),e._UZ(4,"i",105),e.qZA(),e.TgZ(5,"a",106),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(),a=i.index,p=i.$implicit,U=e.oxw(3);return e.KtG(U.sendFormForEdit(a,null==p?null:p.id,null==p?null:p.key))}),e._UZ(6,"i",107),e.qZA(),e.TgZ(7,"a",108),e.NdJ("click",function(){e.CHM(t);const i=e.oxw().$implicit,a=e.oxw(3),p=e.MAs(131);return e.KtG(a.deleteFormDialog(p,null==i?null:i.id))}),e._UZ(8,"i",109),e.qZA()()(),e._UZ(9,"formio",110),e.qZA()}if(2&r){const t=e.oxw(),s=t.$implicit,i=t.index,a=e.oxw(3);e.xp6(9),e.Q6J("language",a.language)("options",a.options)("form",a.sanitizeSubmission(s))("submission",a.sanitizeSubmission(a.deafultFormSubmission[i])||a.sanitizeSubmission(null==s?null:s.defaultData))}}function Ln(r,n){if(1&r&&(e.ynx(0),e.YNc(1,Jn,10,4,"div",100),e.BQk()),2&r){const t=n.index,s=e.oxw(3);e.xp6(1),e.Q6J("ngIf",s.activeIndex==t)}}function Bn(r,n){if(1&r&&(e.ynx(0),e.TgZ(1,"section",97)(2,"nav",98),e.YNc(3,Pn,3,1,"ng-container",21),e.qZA(),e.YNc(4,Ln,2,1,"ng-container",21),e.qZA(),e.BQk()),2&r){const t=e.oxw(2);e.xp6(3),e.Q6J("ngForOf",t.formTabs),e.xp6(1),e.Q6J("ngForOf",t.formComponents)}}function Qn(r,n){1&r&&(e.ynx(0),e.TgZ(1,"div",111),e._UZ(2,"div",112),e.TgZ(3,"div",113),e._UZ(4,"div",114)(5,"div",114),e.qZA(),e.TgZ(6,"div",113),e._UZ(7,"div",115)(8,"div",115),e.qZA()(),e.BQk())}function qn(r,n){if(1&r&&(e.ynx(0),e.TgZ(1,"h4",93),e._uU(2,"Form/s Preview"),e.qZA(),e.TgZ(3,"div",94),e.YNc(4,Bn,5,2,"ng-container",44),e.YNc(5,Qn,9,0,"ng-container",44),e.qZA(),e.TgZ(6,"div",95)(7,"p",96),e._uU(8,"The form you add will appear here"),e.qZA()(),e.BQk()),2&r){const t=e.oxw();e.xp6(4),e.Q6J("ngIf",(null==t.formComponents[0]||null==t.formComponents[0].components?null:t.formComponents[0].components.length)>0),e.xp6(1),e.Q6J("ngIf",0==(null==t.formComponents[0]||null==t.formComponents[0].components?null:t.formComponents[0].components.length)||0==(null==t.formComponents?null:t.formComponents.length))}}function Vn(r,n){if(1&r){const t=e.EpF();e.TgZ(0,"div",116)(1,"a",117),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.saveDraft())}),e._uU(2),e.qZA()()}2&r&&(e.oxw(),e.xp6(2),e.hij(" ","Add form"," "))}function Rn(r,n){if(1&r&&(e.ynx(0),e.TgZ(1,"div",118)(2,"span",119),e._uU(3),e.qZA()(),e.BQk()),2&r){const t=e.oxw().message;e.xp6(3),e.hij(" ",t," ")}}function Hn(r,n){if(1&r&&e.YNc(0,Rn,4,1,"ng-container",44),2&r){const t=n.control;e.Q6J("ngIf",t.hasError(n.validation)&&(t.dirty||t.touched))}}function Gn(r,n){if(1&r&&e._UZ(0,"tui-data-list-wrapper",128),2&r){const t=e.oxw(2);e.Q6J("items",t.userListForEmail)}}function Kn(r,n){if(1&r){const t=e.EpF();e.TgZ(0,"p",120),e._uU(1,"Email Notification Users"),e.qZA(),e.TgZ(2,"p",121),e._uU(3," Please specify the users you want to send the notification email to "),e.qZA(),e.TgZ(4,"div",122)(5,"tui-input-tag",123),e.NdJ("searchChange",function(i){e.CHM(t);const a=e.oxw();return e.KtG(a.onSearchChange(i))}),e._uU(6," Type to search and press Enter to select... "),e.YNc(7,Gn,1,1,"tui-data-list-wrapper",124),e.qZA()(),e.TgZ(8,"div",125)(9,"button",126),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.validateEmails())}),e._uU(10," Confirm "),e.qZA(),e.TgZ(11,"button",127),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.cancelEmailNotify())}),e._uU(12," Cancel "),e.qZA()()}if(2&r){const t=e.oxw();e.xp6(5),e.Q6J("formControl",null==t.currentFieldArray||null==t.currentFieldArray.controls[t.activeEmailIndex]?null:t.currentFieldArray.controls[t.activeEmailIndex].controls.emailNotifyTo)("tuiTextfieldLabelOutside",!0)}}function Yn(r,n){if(1&r){const t=e.EpF();e.TgZ(0,"tui-tabs",129),e.NdJ("activeItemIndexChange",function(i){e.CHM(t);const a=e.oxw(2);return e.KtG(a.activeItemIndex=i)}),e.TgZ(1,"button",99),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.activeItemIndex=0)}),e._uU(2," HTML "),e.qZA(),e.TgZ(3,"button",136),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.activeItemIndex=1)}),e._uU(4," Style Sheet "),e.qZA(),e.TgZ(5,"button",136),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2);return i.setPreview(i.topTabIndex),e.KtG(i.activeItemIndex=2)}),e._uU(6," Preview "),e.qZA()()}if(2&r){const t=e.oxw(2);e.Q6J("activeItemIndex",t.activeItemIndex)}}function zn(r,n){if(1&r){const t=e.EpF();e.TgZ(0,"tui-tabs",129),e.NdJ("activeItemIndexChange",function(i){e.CHM(t);const a=e.oxw(2);return e.KtG(a.activeItemIndex=i)}),e.TgZ(1,"button",99),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.activeItemIndex=3)}),e._uU(2," HTML "),e.qZA(),e.TgZ(3,"button",136),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.activeItemIndex=4)}),e._uU(4," Style Sheet "),e.qZA(),e.TgZ(5,"button",136),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2);return i.setPreview(i.topTabIndex),e.KtG(i.activeItemIndex=5)}),e._uU(6," Preview "),e.qZA()()}if(2&r){const t=e.oxw(2);e.Q6J("activeItemIndex",t.activeItemIndex)}}function jn(r,n){if(1&r){const t=e.EpF();e.TgZ(0,"div",137)(1,"ngx-monaco-editor",138),e.NdJ("ngModelChange",function(i){e.CHM(t);const a=e.oxw(2);return e.KtG(a.emailContent=i)}),e.qZA()()}if(2&r){const t=e.oxw(2);e.xp6(1),e.Q6J("options",t.editorOptions)("ngModel",t.emailContent)}}function Wn(r,n){if(1&r){const t=e.EpF();e.TgZ(0,"div",137)(1,"ngx-monaco-editor",138),e.NdJ("ngModelChange",function(i){e.CHM(t);const a=e.oxw(2);return e.KtG(a.emailContentNotify=i)}),e.qZA()()}if(2&r){const t=e.oxw(2);e.xp6(1),e.Q6J("options",t.editorOptions)("ngModel",t.emailContentNotify)}}function $n(r,n){if(1&r){const t=e.EpF();e.TgZ(0,"div",137)(1,"ngx-monaco-editor",138),e.NdJ("ngModelChange",function(i){e.CHM(t);const a=e.oxw(2);return e.KtG(a.emailContentCSS=i)}),e.qZA()()}if(2&r){const t=e.oxw(2);e.xp6(1),e.Q6J("options",t.cssEditorOptions)("ngModel",t.emailContentCSS)}}function Xn(r,n){if(1&r){const t=e.EpF();e.TgZ(0,"div",137)(1,"ngx-monaco-editor",138),e.NdJ("ngModelChange",function(i){e.CHM(t);const a=e.oxw(2);return e.KtG(a.emailContentNotifyCSS=i)}),e.qZA()()}if(2&r){const t=e.oxw(2);e.xp6(1),e.Q6J("options",t.cssEditorOptions)("ngModel",t.emailContentNotifyCSS)}}function eo(r,n){if(1&r&&(e.TgZ(0,"div",137),e._UZ(1,"div",139),e.qZA()),2&r){const t=e.oxw(2);e.xp6(1),e.Q6J("innerHTML",t.previewData,e.oJD)}}function to(r,n){if(1&r&&(e.TgZ(0,"ul")(1,"li",140),e._uU(2),e.qZA()()),2&r){const t=n.$implicit;e.xp6(2),e.Oqu(t)}}function no(r,n){if(1&r){const t=e.EpF();e.TgZ(0,"p",1),e._uU(1,"Email Templates"),e.qZA(),e.TgZ(2,"tui-tabs",129),e.NdJ("activeItemIndexChange",function(i){e.CHM(t);const a=e.oxw();return e.KtG(a.topTabIndex=i)}),e.TgZ(3,"button",99),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return i.setPreview(0),e.KtG(i.topTabIndex=0)}),e._uU(4," Action "),e.qZA(),e.TgZ(5,"button",99),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return i.setPreview(1),e.KtG(i.topTabIndex=1)}),e._uU(6," FYI "),e.qZA()(),e.YNc(7,Yn,7,1,"tui-tabs",130),e.YNc(8,zn,7,1,"tui-tabs",130),e.TgZ(9,"div",131)(10,"div",132),e.YNc(11,jn,2,2,"div",133),e.YNc(12,Wn,2,2,"div",133),e.YNc(13,$n,2,2,"div",133),e.YNc(14,Xn,2,2,"div",133),e.YNc(15,eo,2,1,"div",133),e.qZA(),e.TgZ(16,"div",134)(17,"p",135),e._uU(18,"Form Keys"),e.qZA(),e.YNc(19,to,3,1,"ul",21),e.qZA()(),e.TgZ(20,"div",125)(21,"button",126),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.confirmEmailTemplate())}),e._uU(22," Save "),e.qZA(),e.TgZ(23,"button",127),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.cancelEmailTemplate())}),e._uU(24," Cancel "),e.qZA()()}if(2&r){const t=e.oxw();e.xp6(2),e.Q6J("activeItemIndex",t.topTabIndex),e.xp6(5),e.Q6J("ngIf",0==t.topTabIndex),e.xp6(1),e.Q6J("ngIf",1==t.topTabIndex),e.xp6(3),e.Q6J("ngIf",0==t.activeItemIndex&&0==t.topTabIndex),e.xp6(1),e.Q6J("ngIf",0==t.activeItemIndex&&1==t.topTabIndex),e.xp6(1),e.Q6J("ngIf",1==t.activeItemIndex&&0==t.topTabIndex),e.xp6(1),e.Q6J("ngIf",1==t.activeItemIndex&&1==t.topTabIndex),e.xp6(1),e.Q6J("ngIf",2==t.activeItemIndex),e.xp6(4),e.Q6J("ngForOf",t.summarySchemaFields)}}function oo(r,n){if(1&r){const t=e.EpF();e.TgZ(0,"div",137)(1,"ngx-monaco-editor",138),e.NdJ("ngModelChange",function(i){e.CHM(t);const a=e.oxw(2);return e.KtG(a.triggerCode=i)}),e.qZA()()}if(2&r){const t=e.oxw(2);e.xp6(1),e.Q6J("options",t.jsEditorOptions)("ngModel",t.triggerCode)}}function io(r,n){if(1&r){const t=e.EpF();e.TgZ(0,"div",137)(1,"ngx-monaco-editor",138),e.NdJ("ngModelChange",function(i){e.CHM(t);const a=e.oxw(2);return e.KtG(a.triggerCodeAfter=i)}),e.qZA()()}if(2&r){const t=e.oxw(2);e.xp6(1),e.Q6J("options",t.jsEditorOptions)("ngModel",t.triggerCodeAfter)}}function ro(r,n){if(1&r){const t=e.EpF();e.TgZ(0,"div",137)(1,"ngx-monaco-editor",138),e.NdJ("ngModelChange",function(i){e.CHM(t);const a=e.oxw(2);return e.KtG(a.eventCodeOnChange=i)}),e.qZA()()}if(2&r){const t=e.oxw(2);e.xp6(1),e.Q6J("options",t.jsEditorOptions)("ngModel",t.eventCodeOnChange)}}function so(r,n){if(1&r){const t=e.EpF();e.TgZ(0,"div",137)(1,"ngx-monaco-editor",138),e.NdJ("ngModelChange",function(i){e.CHM(t);const a=e.oxw(2);return e.KtG(a.eventCodeOnLoad=i)}),e.qZA()()}if(2&r){const t=e.oxw(2);e.xp6(1),e.Q6J("options",t.jsEditorOptions)("ngModel",t.eventCodeOnLoad)}}function ao(r,n){if(1&r){const t=e.EpF();e.TgZ(0,"p",1),e._uU(1,"Triggers & Events"),e.qZA(),e.TgZ(2,"tui-tabs",129),e.NdJ("activeItemIndexChange",function(i){e.CHM(t);const a=e.oxw();return e.KtG(a.activeItemIndexHooks=i)}),e.TgZ(3,"button",99),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.activeItemIndexHooks=0)}),e._uU(4," Before Submit "),e.qZA(),e.TgZ(5,"button",136),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.activeItemIndex=1)}),e._uU(6," After Submit "),e.qZA(),e.TgZ(7,"button",136),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.activeItemIndex=2)}),e._uU(8," On Change "),e.qZA(),e.TgZ(9,"button",136),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.activeItemIndex=3)}),e._uU(10," On Load "),e.qZA()(),e.TgZ(11,"div",132),e.YNc(12,oo,2,2,"div",133),e.YNc(13,io,2,2,"div",133),e.YNc(14,ro,2,2,"div",133),e.YNc(15,so,2,2,"div",133),e.qZA(),e.TgZ(16,"div",125)(17,"button",126),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.confirmEmailTemplate())}),e._uU(18," Save "),e.qZA(),e.TgZ(19,"button",127),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.cancelEmailTemplate())}),e._uU(20," Cancel "),e.qZA()()}if(2&r){const t=e.oxw();e.xp6(2),e.Q6J("activeItemIndex",t.activeItemIndexHooks),e.xp6(10),e.Q6J("ngIf",0==t.activeItemIndexHooks),e.xp6(1),e.Q6J("ngIf",1==t.activeItemIndexHooks),e.xp6(1),e.Q6J("ngIf",2==t.activeItemIndexHooks),e.xp6(1),e.Q6J("ngIf",3==t.activeItemIndexHooks)}}function lo(r,n){if(1&r){const t=e.EpF();e.TgZ(0,"p",1),e._uU(1,"PDF Template"),e.qZA(),e.TgZ(2,"div",132)(3,"div",137)(4,"ngx-monaco-editor",138),e.NdJ("ngModelChange",function(i){e.CHM(t);const a=e.oxw();return e.KtG(a.pdfTempCode=i)}),e.qZA()()(),e.TgZ(5,"div",125)(6,"button",126),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.confirmEmailTemplate())}),e._uU(7," Save "),e.qZA(),e.TgZ(8,"button",127),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.cancelEmailTemplate())}),e._uU(9," Cancel "),e.qZA()()}if(2&r){const t=e.oxw();e.xp6(4),e.Q6J("options",t.jsEditorOptions)("ngModel",t.pdfTempCode)}}function uo(r,n){1&r&&(e.TgZ(0,"strong",141),e._uU(1,"How conditions work?"),e.qZA(),e._UZ(2,"hr"),e.TgZ(3,"ul",142)(4,"li")(5,"strong"),e._uU(6,"AND"),e.qZA(),e._uU(7," implies that every user of the step must provide approval"),e.qZA(),e.TgZ(8,"li",143)(9,"strong"),e._uU(10,"OR"),e.qZA(),e._uU(11," implies that any one of the users may provide approval"),e.qZA(),e.TgZ(12,"li")(13,"strong"),e._uU(14,"NONE"),e.qZA(),e._uU(15," implies that there is only one user per step and hence no conditon is necessary"),e.qZA()())}function co(r,n){1&r&&(e.TgZ(0,"strong",144),e._uU(1,"Admin Users"),e.qZA(),e._UZ(2,"hr"),e.TgZ(3,"p",145),e._uU(4," Admin Users have access to create, delete and modify submissions as well as child apps within a specified application "),e.qZA())}function mo(r,n){1&r&&(e.TgZ(0,"strong",144),e._uU(1,"View Only Users"),e.qZA(),e._UZ(2,"hr"),e.TgZ(3,"p",145),e._uU(4," View Only Users have read-only access. They may view submissions and child apps but may not modify or delete them "),e.qZA())}function po(r,n){if(1&r&&e._UZ(0,"tui-data-list-wrapper",128),2&r){const t=e.oxw(2);e.Q6J("items",t.summarySchemaFields)}}function _o(r,n){if(1&r&&e._UZ(0,"tui-data-list-wrapper",128),2&r){const t=e.oxw(3);e.Q6J("items",null==t.schemaForm||null==t.schemaForm.controls.summarySchema?null:t.schemaForm.controls.summarySchema.value)}}function go(r,n){if(1&r&&e._UZ(0,"tui-data-list-wrapper",128),2&r){const t=e.oxw(3);e.Q6J("items",t.selectItems)}}function fo(r,n){if(1&r){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",156)(2,"tui-select",157),e._uU(3," View schema field "),e.YNc(4,_o,1,1,"tui-data-list-wrapper",124),e.qZA(),e.TgZ(5,"tui-input",158),e._UZ(6,"input",159),e.TgZ(7,"p",142),e._uU(8,"Field label"),e.qZA()(),e.TgZ(9,"tui-select",160),e._uU(10," Specify data type "),e._UZ(11,"input",161),e.YNc(12,go,1,1,"tui-data-list-wrapper",124),e.qZA(),e.TgZ(13,"button",162),e.NdJ("click",function(){const a=e.CHM(t).index,p=e.oxw(2);return e.KtG(p.deleteViewSchema(a))}),e.qZA()(),e.BQk()}if(2&r){const t=n.index;e.xp6(1),e.Q6J("formGroupName",t),e.xp6(1),e.Q6J("tuiTextfieldLabelOutside",!0),e.xp6(3),e.Q6J("tuiTextfieldLabelOutside",!0),e.xp6(1),e.Q6J("tuiTextfieldLabelOutside",!0)}}function ho(r,n){if(1&r){const t=e.EpF();e.TgZ(0,"h2",146),e._uU(1,"Modify Summary & View Schema"),e.qZA(),e.TgZ(2,"div",147)(3,"label",148),e._uU(4,"Summary Schema "),e.TgZ(5,"sup"),e._uU(6,"(Optional)"),e.qZA()(),e.TgZ(7,"tui-multi-select",149),e.NdJ("ngModelChange",function(i){e.CHM(t);const a=e.oxw();return e.KtG(a.applySummarySchemaValuesToViewSchema(i))}),e._uU(8," Summary schema fields "),e.YNc(9,po,1,1,"tui-data-list-wrapper",124),e.qZA(),e.TgZ(10,"p",150),e._uU(11,"Type the fieldname and press Enter to add. e.g. formKey.fieldValue"),e.qZA(),e.TgZ(12,"div",116),e.ynx(13,151),e.TgZ(14,"label",148),e._uU(15,"View Schema "),e.TgZ(16,"sup"),e._uU(17,"(Optional)"),e.qZA()(),e.YNc(18,fo,14,4,"ng-container",21),e.TgZ(19,"div",152)(20,"button",153),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.addViewSchema())}),e.qZA()(),e.BQk(),e.qZA()(),e.TgZ(21,"div",154)(22,"button",155),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.setSummaryAndViewSchema())}),e._uU(23," Confirm "),e.qZA(),e.TgZ(24,"button",49),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.closeSchemaDialog())}),e._uU(25," Cancel "),e.qZA()()}if(2&r){const t=e.oxw();e.xp6(2),e.Q6J("formGroup",t.schemaForm),e.xp6(5),e.Q6J("tuiTextfieldLabelOutside",!0),e.xp6(11),e.Q6J("ngForOf",t.viewSchema.controls)}}function bo(r,n){if(1&r){const t=e.EpF();e.TgZ(0,"p",163),e._uU(1,"Delete Form"),e.qZA(),e.TgZ(2,"p",164),e._uU(3,"Are you sure you want to delete this form?"),e.qZA(),e.TgZ(4,"div",165)(5,"button",166),e.NdJ("click",function(){const a=e.CHM(t).$implicit;return e.oxw().deleteForm(),e.KtG(a.complete())}),e._uU(6," Confirm "),e.qZA(),e.TgZ(7,"button",49),e.NdJ("click",function(){const a=e.CHM(t).$implicit;return e.KtG(a.complete())}),e._uU(8," Cancel "),e.qZA()()}}function vo(r,n){if(1&r){const t=e.EpF();e.TgZ(0,"h2",146),e._uU(1,"Add default data"),e.qZA(),e.TgZ(2,"div",167)(3,"formio",168),e.NdJ("change",function(i){e.CHM(t);const a=e.oxw();return e.KtG(a.onChangeForm(i))}),e.qZA()(),e.TgZ(4,"div",169)(5,"button",155),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.confirmDefaultSubmission())}),e._uU(6," Save "),e.qZA(),e.TgZ(7,"button",49),e.NdJ("click",function(){const a=e.CHM(t).$implicit,p=e.oxw();return a.complete(),e.KtG(p.deafultFormSubmission[p.defaultFormIndex]=null)}),e._uU(8," Cancel "),e.qZA()()}if(2&r){const t=e.oxw();e.xp6(3),e.Q6J("options",t.options)("form",t.formForDefaultData)("submission",t.sanitizeSubmission(t.deafultFormSubmission[t.defaultFormIndex]))}}const xo=function(r){return{validation:"required",message:"App Title is required",control:r}},yo=function(r){return{validation:"required",message:"App code is required",control:r}},Co=function(r){return{validation:"maxlength",message:"App code should not exceed 7 characters",control:r}},To=function(r){return{validation:"required",message:"A Description is required",control:r}},So=function(r){return{validation:"required",message:"Company is required",control:r}},wo=function(r){return{validation:"required",message:"Category is required",control:r}};class Ue{constructor(n,t,s,i,a,p,U,ge,ve,be,G){this.fb=n,this.auth=t,this.transportService=s,this.router=i,this.dashboard=a,this.activatedRoute=p,this.notif=U,this.formService=ge,this.dialogs=ve,this.media=be,this.domSanitizer=G,this.activeItemIndex=0,this.topTabIndex=0,this.activeItemIndexHooks=0,this.formComponents=[],this.activeIndex=0,this.language=new e.vpe,this.langItems=[{name:"en"},{name:"ar"}],this.languageForm=new c.cw({languages:new c.NI(this.langItems[0])}),this.conditions=["OR","AND","ANY"],this.formTabs=[],this.subModuleFormIoValue=new K.X({}),this.destroy$=new P.x,this.isCreatingSubModule=new P.x,this.isSavingAsDraft=new P.x,this.cols=["3","4","5","6","7","8","9","10","11","12"],this.domainUrl=window.location.origin,this.userListForEmail=[],this.search$=new P.x,this.saveDialogSubscription=[],this.limit=10,this.page=0,this.showError=new P.x,this.errorIndex=0,this.items=[{name:"anyCreate"},{name:"anyCreateAndModify"},{name:"disabled"}],this.formKeysForViewSchema=[],this.summarySchemaFields=[],this.dropDownForButtons=[],this.formKeys=[],this.formKeysFinal=[],this.schemaSubscription=[],this.defaultFormSubscription=[],this.selectItems=["Text","Number","Date"],this.schemaForm=new c.cw({summarySchema:new c.NI([]),viewSchema:new c.Oe([new c.cw({fieldKey:new c.NI,displayAs:new c.NI(""),type:new c.NI(this.selectItems[0])})])}),this.deafultFormSubmission=[],this.deafultFormSubmissionDialog=[],this.firstEditorPreview=!1,this.secondEditorPreview=!1,this.addForms=new c.NI(!0),this.editorOptions={theme:"vs-dark",language:"handlebars"},this.cssEditorOptions={theme:"vs-dark",language:"css"},this.jsEditorOptions={theme:"vs-dark",language:"javascript"},this.eventComponent=new c.NI(null),this.initSubModuleForm(),this.accessTypeValue=new c.NI(null),this.submoduleFromLS=this.transportService.subModuleDraft.value,this.getAllCompanies(),this.getAllCategories(),this.getSubmoduleByIDForEdit(),this.activatedRoute.queryParams.pipe((0,y.R)(this.destroy$)).subscribe(A=>{A.moduleID&&A.moduleCode&&(this.transportService.moduleID.next(A.moduleID),this.transportService.moduleCode.next(A.moduleCode))}),this.search$.pipe((0,V.w)(A=>this.dashboard.getAllUsersForListing(this.limit,this.page,A))).subscribe(A=>{A&&(this.userListForEmail=A?.results?.map(ne=>ne?.email))}),this.dashboard.getAllUsersForListing(this.limit,this.page).pipe((0,y.R)(this.destroy$)).subscribe(A=>{A&&(this.userListForEmail=A?.results?.map(ne=>ne?.email))})}ngOnInit(){this.activatedRoute.queryParams.pipe((0,y.R)(this.destroy$)).subscribe(n=>{if(0==Object.keys(n).length){const t=(0,d.rV)(d.MX.navHierarchy)||[];t.forEach(s=>{s.routerLink=`/modules/${s.code}?moduleID=${(0,d.rV)(d.MX.moduleID)}`}),this.dashboard.items=(0,z.vB)([...t,{caption:(0,d.rV)(d.MX.editmoduleTitle)||(0,d.rV)(d.MX.moduleSlug),routerLink:`/modules/edit-module/${(0,d.rV)(d.MX.editmoduleId)}`}],"caption")}else this.router.url.includes("moduleCode")?this.dashboard.items=(0,z.vB)([{caption:(0,d.rV)(d.MX.editmoduleTitle)||(0,d.rV)(d.MX.moduleSlug),routerLink:`/modules/edit-module/${(0,d.rV)(d.MX.editmoduleId)}?moduleCode=${(0,d.rV)(d.MX.moduleSlug)}`}],"caption"):(((0,d.rV)(d.MX.navHierarchy)||[]).forEach(s=>{s.routerLink=`/modules/${s.code}?moduleID=${(0,d.rV)(d.MX.moduleID)}`}),this.dashboard.items=(0,z.vB)([{caption:(0,d.rV)(d.MX.editmoduleTitle)||(0,d.rV)(d.MX.moduleSlug),routerLink:`/modules/edit-module/${(0,d.rV)(d.MX.editmoduleId)||(0,d.rV)(d.MX.moduleID)}`}],"caption"))})}setPreview(n){0==n&&(this.previewData="<style>"+this.emailContentCSS+"</style>"+this.emailContent,this.previewData=this.domSanitizer.bypassSecurityTrustHtml(this.previewData)),1==n&&(this.previewData="<style>"+this.emailContentNotifyCSS+"</style>"+this.emailContentNotify,this.previewData=this.domSanitizer.bypassSecurityTrustHtml(this.previewData))}sanitizeSubmission(n){let t=n?.data;if(t)for(const s in t)"string"==typeof t[s]&&(t[s]=t[s]?.replace(/&lt;/g,"<")?.replace(/&gt;/g,">")),("dataGrid"==s||"editGrid"==s)&&t[s]?.forEach(i=>{for(const a in i)"string"==typeof i[a]&&(i[a]=i[a]?.replace(/&lt;/g,"<")?.replace(/&gt;/g,">"))});return n}openModifyEditorDialog(n){this.saveDialogSubscription.push(this.dialogs.open(n,{dismissible:!1,closeable:!1,size:"l"}).subscribe())}confirmEmailTemplate(){this.saveDialogSubscription.forEach(n=>n.unsubscribe())}cancelEmailTemplate(){this.emailContent=this.defaultEmailTemplateFromEdit.action||this.dashboard.emailContent,this.emailContentNotify=this.defaultEmailTemplateFromEdit.notify||this.dashboard.emailContentNotify,this.emailContentCSS=this.defaultEmailTemplateFromEdit.actionCSS||this.dashboard.emailContentCSS,this.emailContentNotifyCSS=this.defaultEmailTemplateFromEdit.notifyCSS||this.dashboard.emailContentNotifyCSS,this.saveDialogSubscription.forEach(n=>n.unsubscribe())}get viewSchema(){return this.schemaForm.controls.viewSchema}addViewSchema(){const n=this.fb.group({fieldKey:new c.NI(""),displayAs:new c.NI(""),type:new c.NI(this.selectItems[0])});this.viewSchema.push(n)}deleteViewSchema(n){this.viewSchema.removeAt(n)}onFileSelect(n){const t=n?.target?.files[0];if(1==(0,z.QG)(t)){this.file=t;const s=new FileReader;s.readAsDataURL(t),s.onload=i=>{this.base64File=s.result}}else this.notif.displayNotification("Allowed file types are JPG/PNG/WebP. File size cannot exceed 2MB","File Upload","warning")}openEmailNotifyModal(n,t,s){this.activeEmailIndex=s,this.currentFieldArray=t,this.saveDialogSubscription.push(this.dialogs.open(n,{dismissible:!1,closeable:!1}).subscribe())}onSearchChange(n){this.search$.next(n)}validateEmails(){let n=this.workflows.at(this.activeEmailIndex)?.get("emailNotifyTo")?.value;n=n.map(t=>!!/\S+@\S+\.\S+/.test(t)),n.includes(!1)?this.notif.displayNotification("Please provide valid email addresses","Email Notify","warning"):this.saveDialogSubscription.forEach(t=>t.unsubscribe())}cancelEmailNotify(){this.workflows.at(this.activeEmailIndex)?.get("emailNotifyTo")?.setValue([]),this.saveDialogSubscription.forEach(n=>n.unsubscribe())}getSubmoduleByIDForEdit(){this.activatedRoute.params.pipe((0,y.R)(this.destroy$)).subscribe(n=>{n.id&&(this.dashboard.excludeIdEmitter.emit(n.id),this.transportService.subModuleID.next(n.id),this.dashboard.getSubModuleByID(n.id).subscribe(t=>{if(t)if(this.addForms.setValue(t?.formVisibility),this.workFlowId=t?.workFlowId?.id,this.categoryId=t?.categoryId?.id,this.pdfTempCode=t?.pdfTemplate?.replace(/&lt;/g,"<")?.replace(/&gt;/g,">"),t.emailTemplate={action:t.emailTemplate?.action?.replace(/&lt;/g,"<")?.replace(/&gt;/g,">"),notify:t.emailTemplate?.notify?.replace(/&lt;/g,"<")?.replace(/&gt;/g,">")},this.defaultEmailTemplateFromEdit=t.emailTemplate,this.triggerCode=t.triggers[0]?.code||'function x(submission) {\n              console.log(submission, "Hello world!");\n            }',this.triggerCodeAfter=t.triggers[1]?.code||'function x(submission) {\n              console.log(submission, "Hello world!");\n            }',this.emailContent=this.defaultEmailTemplateFromEdit.action||this.dashboard.emailContent,this.emailContentNotify=this.defaultEmailTemplateFromEdit.notify||this.dashboard.emailContentNotify,this.emailContentCSS=this.defaultEmailTemplateFromEdit.actionCSS||this.dashboard.emailContentCSS,this.emailContentNotifyCSS=this.defaultEmailTemplateFromEdit.notifyCSS||this.dashboard.emailContentNotifyCSS,this.schemaForm.controls.summarySchema?.setValue(t?.summarySchema),t.viewSchema?.length>0&&this.schemaForm.controls.viewSchema.removeAt(0),t.viewSchema?.map(s=>{const i=this.fb.group({fieldKey:new c.NI(s?.fieldKey),displayAs:new c.NI(s?.displayAs),type:new c.NI(s?.type)});this.schemaForm.controls.viewSchema.push(i)}),this.items?.forEach((s,i)=>{s?.name==t?.accessType&&this.accessTypeValue?.setValue(this.items[i])}),Object.keys(this.submoduleFromLS)?.length>0){this.initSubModuleForm(this.submoduleFromLS),this.base64File=this.submoduleFromLS?.image,this.file=this.submoduleFromLS?.file,t?.formIds?.forEach(i=>{L.cQ.eachComponent(i?.components,a=>{if("select"==a.type&&(a.template=a?.template?.replace(/&lt;/g,"<").replace(/&gt;/g,">")),a?.html&&(a.html=a.html?.replace(/&lt;/g,"<").replace(/&gt;/g,">")),"editgrid"==a.type)for(const p in a.templates)a.templates[p]=a.templates[p]?.replace(/&lt;/g,"<").replace(/&gt;/g,">")},!0)}),this.formComponents=t?.formIds,this.formTabs=t?.formIds?.map(i=>i.title);let s=JSON.parse(JSON.stringify(this.formComponents));s?.map(i=>{this.formKeys?.push({[i.key]:L.cQ.flattenComponents(i?.components,!0)})}),this.summarySchemaFields=this.formKeys.flatMap(i=>(0,z.oX)(i)),this.formKeysForViewSchema=this.summarySchemaFields,s?.map((i,a)=>{i?.defaultData&&(this.defaultFormIndex=a,this.deafultFormSubmission[this.defaultFormIndex]=i?.defaultData)})}else{t?.formIds?.forEach(G=>{L.cQ.eachComponent(G?.components,A=>{if("select"==A.type&&(A.template=A?.template?.replace(/&lt;/g,"<").replace(/&gt;/g,">")),A?.html&&(A.html=A.html?.replace(/&lt;/g,"<").replace(/&gt;/g,">")),"editgrid"==A.type)for(const ne in A.templates)A.templates[ne]=A.templates[ne]?.replace(/&lt;/g,"<").replace(/&gt;/g,">")},!0)}),this.formComponents=t?.formIds,this.formTabs=t?.formIds?.map(G=>G.title);let s=JSON.parse(JSON.stringify(this.formComponents));s?.map(G=>{this.formKeys?.push({[G.key]:L.cQ.flattenComponents(G?.components,!0)})}),this.summarySchemaFields=this.formKeys.flatMap(G=>(0,z.oX)(G)),this.formKeysForViewSchema=this.summarySchemaFields,s?.map((G,A)=>{G?.defaultData&&(this.defaultFormIndex=A,this.deafultFormSubmission[this.defaultFormIndex]=G?.defaultData)});const i={value:t?.companyId?.id,label:t?.companyId?.title},a={value:t?.categoryId?.id,label:t?.categoryId?.name};this.file=t?.image,this.base64File=t?.image;const p=t?.workFlowId?.stepIds?.map(G=>({id:G?.id,approverIds:G?.approverIds?.map(A=>({name:A?.fullName,id:A?.id,control:new c.NI(!0)})),condition:G?.condition,emailNotifyTo:G?.emailNotifyToId?.notifyUsers||[],emailNotifyToId:G?.emailNotifyToId?.id})),U=t?.adminUsers?.map(G=>({name:G?.fullName,id:G?.id,control:new c.NI(!0)})),ge=t?.viewOnlyUsers?.map(G=>({name:G?.fullName,id:G?.id,control:new c.NI(!0)}));delete t?.workFlowId,delete t?.url,delete t?.companyId,delete t?.categoryId;const be=Object.assign(t,{workFlowId:p},{categoryId:a},{companyId:i},{viewOnlyUsers:ge},{adminUsers:U},{colWidth:t?.layout?.colWidth||"4"});this.transportService.saveDraftLocally(be),this.initSubModuleForm(be)}}))})}getValidityForWorkflowStep(){return this.workflows.controls[0]?.get("approverIds")?.hasError("required")&&this.workflows.controls[0]?.get("approverIds")?.touched}applySummarySchemaValuesToViewSchema(n){n?.forEach((t,s)=>{this.schemaForm?.controls.viewSchema?.value?.forEach((i,a)=>{i?.fieldKey!==t&&this.schemaForm?.controls.viewSchema?.removeAt(a)})}),0==n?.length&&this.schemaForm?.controls.viewSchema?.removeAt(0)}getAllCompanies(){this.dashboard.getAllCompanies(10,0).pipe((0,y.R)(this.destroy$)).subscribe(n=>{this.companyList=n.results?.map(t=>({value:t?.id,label:t?.title}))})}getAllCategories(){this.dashboard.getAllCategories(10).pipe((0,y.R)(this.destroy$)).subscribe(n=>{this.categoryList=n.results?.map(t=>({value:t?.id,label:t?.name}))})}get categories(){return this.f.categories}addCategory(){const n=this.fb.group({name:["",c.kI.required]});this.categories.push(n)}removeCategory(n){this.categories.removeAt(n)}initSubModuleForm(n){this.subModuleForm=this.fb.group({categoryId:[n?.categoryId?.value?n?.categoryId?.value:this.categoryList?.filter(t=>n?.categoryId===t.value)[0]?.value||null,c.kI.required],code:[n?.code,c.kI.compose([c.kI.required]),[z.Iw.createValidator(this.dashboard,"submodule")]],companyId:[n?.companyId?.value?n?.companyId?.value:this.companyList?.filter(t=>n?.companyId===t.value)[0]?.value||null,c.kI.required],title:[n?.title||null,c.kI.compose([c.kI.required]),[z.Iw.createValidator(this.dashboard,"submodule","title")]],image:[n?.image||null,c.kI.required],description:[n?.description||null,c.kI.required],adminUsers:[n?.adminUsers||[],c.kI.required],viewOnlyUsers:[n?.viewOnlyUsers||[],c.kI.required],colWidth:[n?.colWidth||"4"],workFlowId:this.fb.array(n?.workFlowId?n?.workFlowId?.map(t=>this.fb.group({id:t.id,condition:[t.condition,c.kI.required],approverIds:[t.approverIds,c.kI.required],emailNotifyTo:[t.emailNotifyTo||[],c.kI.required],emailNotifyToId:t?.emailNotifyToId})):[this.fb.group({condition:["",c.kI.required],approverIds:[[],c.kI.required],emailNotifyTo:[[],c.kI.required]})])})}get f(){return this.subModuleForm.controls}setAdminUsers(n){this.subModuleForm?.get("adminUsers")?.setValue(n)}setViewUsers(n){this.subModuleForm?.get("viewOnlyUsers")?.setValue(n)}addDefaultData(n,t){this.formForDefaultData=this.formComponents[n],this.defaultFormIndex=n,this.defaultFormSubscription.push(this.dialogs.open(t,{dismissible:!1,closeable:!1,size:"l"}).subscribe())}onChangeForm(n){n?.data&&n?.changed&&1==n.isModified&&(n.changed.component.validate={},n?.data?.file&&n?.data?.file?.forEach(t=>{t.url=t?.data?.baseUrl.split("v1")[0]+t?.data?.fileUrl}),this.deafultFormSubmissionDialog[this.defaultFormIndex]={data:n?.data})}confirmDefaultSubmission(){this.deafultFormSubmission=this.deafultFormSubmissionDialog,this.formComponents[this.defaultFormIndex].defaultData=this.deafultFormSubmission[this.defaultFormIndex];let n={...this.formComponents[this.defaultFormIndex],revisionNo:void 0,id:void 0,createdBy:void 0,status:void 0,updatedBy:void 0};this.formService.updateForm(this.formComponents[this.defaultFormIndex]?.id,n).pipe((0,y.R)(this.destroy$)).subscribe(t=>{t&&this.defaultFormSubscription.forEach(s=>s.unsubscribe())})}sendFormForEdit(n,t,s){let i=this.workflows?.value?.flatMap(a=>a?.approverIds?.map(p=>({id:p.id,name:p.name})));if(0==i.length)return this.notif.displayNotification("Please create a default workflow before adding forms","Default Workflow","warning");this.transportService.editBreadcrumbs.next(this.dashboard.items),(0,d.LS)(d.MX.editBreadcrumbs,this.dashboard.items),(0,d.LS)(d.MX.approvers,i),(0,d.LS)(d.MX.formKey,s),t?((0,d.LS)(d.MX.formEdit,!0),this.transportService.saveDraftLocally({...this.subModuleForm.value,image:this.base64File,file:this.file}),this.router.navigate(["/forms/edit-form"],{queryParams:{id:t}})):((0,d.LS)(d.MX.formEdit,!0),this.transportService.isFormEdit.next(!0),this.transportService.sendFormDataForEdit.next(this.formComponents[n]),this.transportService.saveDraftLocally({...this.subModuleForm.value,image:this.base64File,file:this.file}),this.router.navigate(["/forms/edit-form"],{queryParams:{submoduleID:this.transportService.subModuleID?.value}}))}deleteFormDialog(n,t){this.delFormId=t,this.dialogs.open(n,{dismissible:!0,closeable:!0}).pipe((0,y.R)(this.destroy$)).subscribe()}deleteForm(){this.formService.deleteForm(this.delFormId).pipe((0,y.R)(this.destroy$)).subscribe(n=>{this.getSubmoduleByIDForEdit()})}saveDraft(){let n=this.workflows?.value?.flatMap(t=>t?.approverIds?.map(s=>({id:s.id,name:s.name})));if(0==n.length)return this.notif.displayNotification("Please create a default workflow before adding forms","Default Workflow","warning");(0,d.LS)(d.MX.approvers,n),this.transportService.sendFormBuilderData(this.formComponents),this.transportService.saveDraftLocally({...this.subModuleForm.value,image:this.base64File,file:this.file}),this.transportService.editBreadcrumbs.next(this.dashboard.items),(0,d.LS)(d.MX.editBreadcrumbs,this.dashboard.items),this.router.navigate(["/forms/edit-form"])}get workflows(){return this.f.workFlowId}addWorkflowStep(){const n=this.fb.group({condition:["",c.kI.required],approverIds:[[],c.kI.required],emailNotifyTo:[[],c.kI.required]});this.workflows.push(n)}removeWorkflowStep(n){this.workflows.removeAt(n)}getApproverList(n,t){this.workflows.at(t)?.get("approverIds")?.setValue(n)}validateSelection(n){if(this.errorIndex=n,!(this.workflows.at(n)?.get("approverIds")?.value?.length<2))return this.workflows.at(n)?.get("approverIds")?.value?.length>=2&&"none"==this.workflows.at(n)?.get("condition")?.value?this.showError.next(!0):void this.showError.next(!1);this.workflows.at(n)?.get("condition")?.setValue("none")}countUsers(n,t){if(this.errorIndex=t,!(n<2))return n>=2&&"none"==this.workflows.at(t)?.get("condition")?.value?this.showError.next(!0):void this.showError.next(!1);this.workflows.at(t)?.get("condition")?.setValue("none")}dataSubmitValidation(){return!(this.f.companyId?.invalid||0==this.workflows?.length||this.workflows.controls.map(n=>0==n.get("approverIds")?.value.length).includes(!0)||!0===this.workflows.controls.map(n=>n.get("condition")?.value).includes("")||0==Object.values(this.formComponents)[0]?.components?.length)}cancelSubmodule(){(0,d.rV)(d.MX.moduleSlug)?this.router.navigate(["/modules",(0,d.rV)(d.MX.moduleSlug)],{queryParams:{moduleID:(0,d.rV)(d.MX.moduleID)}}):this.router.navigate(["/dashboard/home"])}checkIfLabelIsUnique(){return new Set(this.schemaForm.controls.viewSchema.value?.map(t=>t?.displayAs)).size===this.schemaForm.controls.viewSchema.value?.length}setSummaryAndViewSchema(){return 0==this.checkIfLabelIsUnique()?this.notif.displayNotification("Field labels must be unique","Schema Controls","warning"):this.schemaForm?.value?.viewSchema[0]?.displayAs?void this.schemaSubscription.forEach(n=>n.unsubscribe()):this.notif.displayNotification("Please provide all data","Form Schema","warning")}closeSchemaDialog(){this.saveDialogSubscription.forEach(n=>n.unsubscribe()),this.schemaSubscription.forEach(n=>n.unsubscribe())}openTriggeOrPdfOrSummarySchemaDialog(n){this.saveDialogSubscription.push(this.dialogs.open(n,{dismissible:!1,closeable:!1,size:"l"}).subscribe())}saveSubModule(n){if(!n){if(0==this.dataSubmitValidation())return this.subModuleForm.markAllAsTouched(),this.notif.displayNotification("Please provide all data","Edit Submodule","warning");if(this.workflows.controls.map(s=>s.get("approverIds")?.value.length>1&&s.get("condition")?.value).includes("none"))return this.notif.displayNotification("Please provide valid condition for the workflow step/s","Create Submodule","warning")}n?this.isSavingAsDraft.next(!0):this.isCreatingSubModule.next(!0);let t={url:`/modules/module-details/${this.subModuleForm.get("title")?.value.replace(/\s/g,"-").toLowerCase()}`,companyId:this.subModuleForm.get("companyId")?.value,categoryId:this.subModuleForm.get("categoryId")?.value?this.subModuleForm.get("categoryId")?.value:this.categoryId,image:this.subModuleForm.get("image")?.value,title:this.subModuleForm.get("title")?.value,description:this.subModuleForm.get("description")?.value,code:this.subModuleForm.get("code")?.value,adminUsers:this.subModuleForm.get("adminUsers")?.value?.map(s=>s?.id),viewOnlyUsers:this.subModuleForm.get("viewOnlyUsers")?.value?.map(s=>s?.id),colWidth:this.f.colWidth?.value||"4",steps:this.workflows?.value?.map(s=>({id:s?.id?s?.id:void 0,approverIds:s?.approverIds?.map(i=>i.id?i.id:i),condition:s?.condition,emailNotifyTo:s?.emailNotifyTo||[],emailNotifyToId:s?.emailNotifyToId?s?.emailNotifyToId:void 0})),formVisibility:this.addForms.value,summarySchema:this.schemaForm.value?.summarySchema?.length>0?this.schemaForm.value?.summarySchema:void 0,viewSchema:this.schemaForm.value?.viewSchema[0]?.displayAs?this.schemaForm.value?.viewSchema:void 0,accessType:this.accessTypeValue?.value?.name,pdfTemplate:this.pdfTempCode||void 0,emailTemplate:{action:this.emailContent,actionCSS:this.emailContentCSS,notify:this.emailContentNotify,notifyCSS:this.emailContentNotifyCSS},triggers:[{name:"beforeSubmit",code:this.triggerCode||"function beforeSubmit(){}"},{name:"afterSubmit",code:this.triggerCodeAfter||"function afterSubmit(){}"}],events:[{name:"onChange",code:this.eventCodeOnChange||"function onChange(event){console.log('On Change Works!')}"},{name:"onLoad",code:this.eventCodeOnLoad||"function onLoad(event){console.log('On Load Works!')}"}]};if(Object.assign(t,n?{status:n}:{status:1}),"string"==typeof this.file){const s="uploads"+t?.image.split("uploads")[1];t={...t,image:s},this.dashboard.updateSubModule(this.transportService.subModuleID?.value,t).pipe((0,y.R)(this.destroy$)).subscribe(i=>{i?(this.isCreatingSubModule.next(!1),this.isSavingAsDraft.next(!1),this.transportService.saveDraftLocally({}),this.transportService.sendFormBuilderData([{title:"",key:"",display:"",components:[]}]),this.routeToBasedOnPreviousPage()):(this.isCreatingSubModule.next(!1),this.isSavingAsDraft.next(!1))})}else this.media.uploadMedia(this.file).pipe((0,y.R)(this.destroy$)).subscribe(s=>{s.hasErrors()?(this.isCreatingSubModule.next(!1),this.isSavingAsDraft.next(!1)):(t={...t,image:s?.data?.fileUrl},this.dashboard.updateSubModule(this.transportService.subModuleID?.value,t).pipe((0,y.R)(this.destroy$)).subscribe(i=>{i?(this.isCreatingSubModule.next(!1),this.transportService.saveDraftLocally({}),this.transportService.sendFormBuilderData([{title:"",key:"",display:"",components:[]}]),this.routeToBasedOnPreviousPage()):(this.isCreatingSubModule.next(!1),this.isSavingAsDraft.next(!1))}))});(0,d.cl)(d.MX.editmoduleId),(0,d.cl)(d.MX.editmoduleSlug)}routeToBasedOnPreviousPage(){this.activatedRoute.queryParams.pipe((0,y.R)(this.destroy$)).subscribe(n=>{Object.keys(n).length>0?this.router.navigate(["/dashboard/home"]):this.router.navigate(["/modules",(0,d.rV)(d.MX.moduleSlug)||""],{queryParams:{moduleID:(0,d.rV)(d.MX.moduleID)||""}})})}ngOnDestroy(){this.destroy$.complete(),this.destroy$.unsubscribe()}}Ue.\u0275fac=function(n){return new(n||Ue)(e.Y36(c.qu),e.Y36(ae.e),e.Y36(oe.R),e.Y36(u.F0),e.Y36(de.s),e.Y36(u.gz),e.Y36(H.T),e.Y36(Ge.s),e.Y36(D.RO),e.Y36(W),e.Y36(me.H7))},Ue.\u0275cmp=e.Xpm({type:Ue,selectors:[["ng-component"]],decls:134,vars:57,consts:[[1,"w-11/12","h-auto","min-h-screen","mx-auto","mt-44","md:mt-52","pb-44"],[1,"text-xl","font-semibold","text-center"],[1,"text-lg","font-semibold","bg-[#EAE4D8]","px-2","py-2","rounded-md","mt-2"],[1,"block","pt-5",3,"formGroup"],[1,"grid","grid-cols-12","gap-3"],[1,"col-span-6","mt-3","mb-5"],[1,"block","pb-1"],[1,"text-xs","text-red-400"],["required","","formControlName","title","type","text",1,"form-control",3,"ngClass"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["class","text-xs text-red-500",4,"ngIf"],["required","","formControlName","code","type","text",1,"form-control",3,"ngClass"],[1,"col-span-6","mt-3","mb-3"],["required","","formControlName","description","type","text","rows","6",1,"form-control","h-full",3,"ngClass"],["for","dropzone-file",1,"flex","flex-col","items-center","justify-center","w-full","h-full","border-2","border-gray-300","border-dashed","rounded-md","cursor-pointer","bg-gray-50","hover:bg-gray-100",3,"change"],[3,"inheritColor","size","showLoader","overlay"],["class","flex justify-center",4,"ngIf"],["class","flex justify-start",4,"ngIf"],["id","dropzone-file","type","file",1,"hidden"],[1,"my-7","col-span-6"],["required","","formControlName","companyId","type","text",1,"form-control",3,"ngClass"],[4,"ngFor","ngForOf"],["required","","formControlName","categoryId","type","text",1,"form-control",3,"ngClass"],[1,"w-1/2","mt-4"],["required","","formControlName","colWidth","type","text",1,"form-control"],[1,"mt-10"],[1,"flex","justify-between","bg-[#EAE4D8]","px-2","py-2","rounded-md"],[1,"text-lg","font-semibold","mt-1"],[1,"grid","grid-cols-12","gap-3","my-8"],[1,"col-span-6"],[1,"block","pb-1","text-sm"],["direction","right",1,"",3,"content"],["formControlName","adminUsers",3,"approverList"],["formControlName","viewOnlyUsers",3,"approverList"],[1,"mt-12","mb-14"],[1,"flex","justify-between","bg-[#EAE4D8]","px-2","rounded-md","py-2"],["tuiButton","","appearance","custom","size","s",1,"bg-[#a58f81]","text-white","hover:bg-opacity-80","hover:transition-colors",3,"click"],["formArrayName","workFlowId"],["tuiIconButton","","type","button","size","m","appearance","primary","icon","tuiIconPlusLarge",3,"click"],[1,"mb-5","mt-7"],[1,"flex","justify-between","bg-[#EAE4D8]","px-2","py-2","rounded-md","mb-3"],["size","l",1,"mt-1",3,"formControl","pseudoActive","pseudoFocus"],[1,"font-semibold","text-lg","-mb-1"],["class","flex gap-x-2",4,"ngIf"],[4,"ngIf"],["class","mt-7",4,"ngIf"],[1,"flex","justify-center","gap-2","mt-10"],["tuiButton","","type","button","size","m","appearance","primary",3,"showLoader","click"],["tuiButton","","type","button","size","m","appearance","secondary",3,"showLoader","click"],["tuiButton","","type","button","size","m","appearance","accent",3,"click"],["formError",""],["template",""],["ckTemplate",""],["triggerTemp",""],["pdfTemplate",""],["hint",""],["hintAdmin",""],["hintViewOnly",""],["summarySchemaTemplate",""],["deltemplate",""],["defaultForm",""],[1,"text-xs","text-red-500"],[1,"flex","justify-center"],["alt","app_icon","width","100","height","100",1,"rounded-md",3,"src"],[1,"flex","justify-start"],[1,"mx-8","mt-1"],["src","../../../../../assets/windows.svg","width","32","height","32"],[1,"text-sm","text-gray-400","list-disc"],[3,"value"],[1,"text-base","font-semibold","mt-7"],[1,"grid","grid-cols-12","gap-3","my-4",3,"formGroupName"],[1,"lg:col-span-3","col-span-5"],["formControlName","approverIds",3,"checkUsersLength","approverList"],["for","conditionSelect",1,"block","pb-1"],["formControlName","condition","aria-label","Default select example","id","conditionSelect",1,"h-10","mt-2","form-select","form-control",3,"change"],["value","or"],["value","none"],[1,"inline-flex","col-span-1","mt-8"],["direction","right",1,"mt-1","mr-4","-ml-2",3,"content"],[3,"contentTop","colorTop"],["tuiIconButton","","type","button","size","s","appearance","outline","icon","tuiIconMailLarge",3,"click"],[1,"lg:col-span-4","col-span-10"],[1,"flex","justify-between","mt-8"],[1,"tui-space_bottom-3",3,"formControl","item"],[1,"mt-1","text-xxs","font-extralight"],[1,"col-span-1","mt-8"],["tuiIconButton","","type","button","size","s","appearance","secondary-destructive","icon","tuiIconTrash2Large",3,"click"],["value","and"],[1,"lg:col-span-4","col-span-5"],[1,"col-span-1","mt-8","lg:-ml-4","ml-2"],[1,"flex","gap-x-2"],[1,"bg-[#a58f81]","text-white","hover:bg-opacity-80","hover:transition-colors","px-2.5","py-2","rounded-xl",3,"click"],[1,"px-2.5","py-2","text-white","bg-[#A58F81]","rounded-xl","cursor-pointer","hover:text-white","hover:bg-opacity-80","hover:transition-colors",3,"click"],[1,"mt-3","text-base","font-semibold","text-center"],[1,"flex","flex-col","w-full","px-5","mx-auto","mt-5","border","border-gray-400","border-dashed","rounded-md","bg-gray-50"],[1,"w-full","mx-auto","my-1"],[1,"text-xs","text-gray-500"],[1,"flex","justify-between","my-8"],["tuiTabs","","vertical","left",1,"lg:w-32","w-18","mr-5"],["tuiTab","",3,"click"],["class","w-full well jsonviewer ml-2 lg:ml-0",4,"ngIf"],[1,"w-full","well","jsonviewer","ml-2","lg:ml-0"],[1,"relative","flex","justify-end","gap-x-2"],[1,"absolute","z-10","flex","justify-end","-top-[30px]","right-1","gap-x-2"],["title","Add default data",1,"rounded-md","cursor-pointer","mt-[0.5px]",3,"click"],["aria-hidden","true",1,"text-green-500","hover:text-green-600","fa","fa-table","fa-2x"],["title","Edit Form/Permissions",1,"rounded-md","cursor-pointer",3,"click"],["aria-hidden","true",1,"text-blue-500","hover:text-blue-600","fa","fa-pencil-square","fa-2x"],["title","Delete Form",1,"rounded-md","cursor-pointer",3,"click"],["aria-hidden","true",1,"text-red-500","fa","fa-trash","fa-2x","hover:text-red-600"],[3,"language","options","form","submission"],[1,"grid","grid-cols-12","gap-2"],["data-placeholder","",1,"h-8","col-span-12","my-3","overflow-hidden","bg-gray-200","rounded-md"],[1,"grid","grid-cols-12","col-span-12","gap-2"],["data-placeholder","",1,"col-span-6","mb-3","overflow-hidden","bg-gray-200","rounded-md","h-28"],["data-placeholder","",1,"h-8","col-span-6","my-3","overflow-hidden","bg-gray-200","rounded-md"],[1,"mt-7"],[1,"px-5","py-3","rounded-lg","bg-[#a58f81]","no-underline","text-white","cursor-pointer","hover:text-white","hover:bg-opacity-80","hover:transition-colors",3,"click"],[1,"w-full","mt-1","text-left","fv-plugins-message-container","text-xxs","2xl:text-xs"],["role","alert",1,"text-red-400","fv-help-block","text-xxs","2xl:text-xs","2xl:mb-2"],[1,"text-lg","font-semibold","text-center"],[1,"mt-3","text-base","font-medium","text-gray-500"],[1,"flex","flex-col","justify-center","my-5"],[1,"b-form",3,"formControl","tuiTextfieldLabelOutside","searchChange"],[3,"items",4,"tuiDataList"],[1,"flex","justify-start","gap-x-3"],["tuiButton","","type","button","size","m",3,"click"],["appearance","accent","tuiButton","","type","button","size","m",3,"click"],[3,"items"],[3,"activeItemIndex","activeItemIndexChange"],[3,"activeItemIndex","activeItemIndexChange",4,"ngIf"],[1,"flex","justify-between"],[1,"w-full"],["class","my-3 h-[480px]",4,"ngIf"],[1,"w-[28%]","ml-6","h-[480px]","overflow-y-auto","overflow-x-hidden"],[1,"text-lg","font-semibold","my-2","text-black"],["tuiTab","",1,"flex","justify-end",3,"click"],[1,"my-3","h-[480px]"],[1,"h-full",3,"options","ngModel","ngModelChange"],[1,"h-[480px]","overflow-scroll",3,"innerHTML"],[1,"my-2","list-disc","text-black"],[1,"text-base"],[1,"mt-2"],[1,"my-2"],[1,"text-base","text-center"],[1,"mt-2","leading-5"],[1,"mt-4","text-lg","font-semibold","text-center"],[1,"w-[96%]","mx-auto","my-8",3,"formGroup"],[1,"mb-2","font-medium"],["formControlName","summarySchema",3,"tuiTextfieldLabelOutside","ngModelChange"],[1,"mt-1","text-xxs"],["formArrayName","viewSchema"],[1,"flex","justify-end","my-2"],["tuiIconButton","","type","button","size","s","appearance","primary","icon","tuiIconPlus",3,"click"],[1,"flex","justify-center","gap-2"],["tuiButton","","type","button","size","m","appearance","primary",3,"click"],[1,"grid","grid-cols-12","gap-2","mb-3",3,"formGroupName"],["formControlName","fieldKey",1,"col-span-4",3,"tuiTextfieldLabelOutside"],["formControlName","displayAs",1,"col-span-4",3,"tuiTextfieldLabelOutside"],["tuiTextfield","","type","text",3,"tuiTextfieldLabelOutside"],["formControlName","type",1,"col-span-3"],["placeholder","Specify data type","tuiTextfield",""],["tuiIconButton","","type","button","size","s","appearance","secondary-destructive","icon","tuiIconTrash2",1,"col-span-1","mt-2",3,"click"],[1,"pb-2","text-xl","font-semibold","text-center","border-b","border-gray-400"],[1,"mt-4","text-base","font-medium","text-center"],[1,"flex","justify-center","mt-4"],["tuiButton","","appearance","primary","type","button","size","m",1,"mx-3",3,"click"],[1,"w-[98%]","mx-auto"],[3,"options","form","submission","change"],[1,"flex","justify-center","gap-2","mb-5"]],template:function(n,t){if(1&n){const s=e.EpF();e._UZ(0,"app-header"),e.TgZ(1,"section",0)(2,"section")(3,"h3",1),e._uU(4,"Edit app"),e.qZA(),e.TgZ(5,"h4",2),e._uU(6,"Basic Info"),e.qZA()(),e.TgZ(7,"form",3)(8,"div",4)(9,"div",5)(10,"label",6),e._uU(11,"App Title "),e.TgZ(12,"span",7),e._uU(13,"*"),e.qZA()(),e._UZ(14,"input",8),e.GkF(15,9),e.YNc(16,Cn,2,0,"span",10),e.qZA(),e.TgZ(17,"div",5)(18,"label",6),e._uU(19,"App Code "),e.TgZ(20,"span",7),e._uU(21,"*"),e.qZA()(),e._UZ(22,"input",11),e.GkF(23,9)(24,9),e.YNc(25,Tn,2,0,"span",10),e.qZA()(),e.TgZ(26,"div",4)(27,"div",12)(28,"label",6),e._uU(29,"App Description"),e.TgZ(30,"span",7),e._uU(31,"*"),e.qZA()(),e._UZ(32,"textarea",13),e.GkF(33,9),e.qZA(),e.TgZ(34,"div",12)(35,"label",6),e._uU(36,"App Icon"),e.TgZ(37,"span",7),e._uU(38,"*"),e.qZA()(),e.TgZ(39,"label",14),e.NdJ("change",function(a){return t.onFileSelect(a)}),e.TgZ(40,"tui-loader",15),e.YNc(41,Sn,2,1,"div",16),e.YNc(42,wn,8,0,"div",17),e.qZA(),e._UZ(43,"input",18),e.qZA()()(),e.TgZ(44,"div",4)(45,"div",19)(46,"label",6),e._uU(47,"Company Name "),e.TgZ(48,"span",7),e._uU(49,"*"),e.qZA()(),e.TgZ(50,"select",20),e.YNc(51,An,3,2,"ng-container",21),e.qZA(),e.GkF(52,9),e.qZA(),e.TgZ(53,"div",19)(54,"label",6),e._uU(55,"Category Name "),e.TgZ(56,"span",7),e._uU(57,"*"),e.qZA()(),e.TgZ(58,"select",22),e.YNc(59,In,3,2,"ng-container",21),e.qZA(),e.GkF(60,9),e.qZA()(),e.TgZ(61,"div",23)(62,"label",6),e._uU(63,"Column Width"),e.qZA(),e.TgZ(64,"select",24),e.YNc(65,Mn,3,2,"ng-container",21),e.qZA()(),e.TgZ(66,"section",25)(67,"div",26)(68,"h4",27),e._uU(69,"User Access & Workflow"),e.qZA()()(),e.TgZ(70,"div",28)(71,"div",29)(72,"label",30),e._uU(73,"Admin users "),e._UZ(74,"tui-tooltip",31),e.TgZ(75,"sup"),e._uU(76,"(optional)"),e.qZA()(),e.TgZ(77,"custom-multi-select",32),e.NdJ("approverList",function(a){return t.setAdminUsers(a)}),e.qZA()(),e.TgZ(78,"div",29)(79,"label",30),e._uU(80,"View Only users "),e._UZ(81,"tui-tooltip",31),e.TgZ(82,"sup"),e._uU(83,"(optional)"),e.qZA()(),e.TgZ(84,"custom-multi-select",33),e.NdJ("approverList",function(a){return t.setViewUsers(a)}),e.qZA()()(),e.TgZ(85,"div",34)(86,"div",35)(87,"h4",27),e._uU(88,"Workflow"),e.qZA(),e.TgZ(89,"button",36),e.NdJ("click",function(){e.CHM(s);const a=e.MAs(117);return e.KtG(t.openModifyEditorDialog(a))}),e._uU(90," Modify Email Template"),e.qZA()(),e.ynx(91,37),e.YNc(92,Nn,6,4,"ng-container",21),e.BQk(),e.TgZ(93,"button",38),e.NdJ("click",function(){return t.addWorkflowStep()}),e.qZA()(),e.TgZ(94,"div",39)(95,"div",40)(96,"tui-checkbox-labeled",41)(97,"p",42),e._uU(98),e.qZA()(),e.YNc(99,Fn,7,0,"div",43),e.qZA(),e.YNc(100,qn,9,2,"ng-container",44),e.qZA(),e.YNc(101,Vn,3,1,"div",45),e.TgZ(102,"div",46)(103,"button",47),e.NdJ("click",function(){return t.saveSubModule()}),e.ALo(104,"async"),e._uU(105," Update "),e.qZA(),e.TgZ(106,"button",48),e.NdJ("click",function(){return t.saveSubModule(3)}),e.ALo(107,"async"),e._uU(108," Save as Draft "),e.qZA(),e.TgZ(109,"button",49),e.NdJ("click",function(){return t.cancelSubmodule()}),e._uU(110,"Cancel"),e.qZA()()()(),e._UZ(111,"app-footer"),e.YNc(112,Hn,1,1,"ng-template",null,50,e.W1O),e.YNc(114,Kn,13,2,"ng-template",null,51,e.W1O),e.YNc(116,no,25,9,"ng-template",null,52,e.W1O),e.YNc(118,ao,21,5,"ng-template",null,53,e.W1O),e.YNc(120,lo,10,2,"ng-template",null,54,e.W1O),e.YNc(122,uo,16,0,"ng-template",null,55,e.W1O),e.YNc(124,co,5,0,"ng-template",null,56,e.W1O),e.YNc(126,mo,5,0,"ng-template",null,57,e.W1O),e.YNc(128,ho,26,3,"ng-template",null,58,e.W1O),e.YNc(130,bo,9,0,"ng-template",null,59,e.W1O),e.YNc(132,vo,9,3,"ng-template",null,60,e.W1O)}if(2&n){const s=e.MAs(113),i=e.MAs(125),a=e.MAs(127);e.xp6(7),e.Q6J("formGroup",t.subModuleForm),e.xp6(7),e.Q6J("ngClass",null!=t.f.title&&t.f.title.invalid&&null!=t.f.title&&t.f.title.dirty?"is-invalid":""),e.xp6(1),e.Q6J("ngTemplateOutlet",s)("ngTemplateOutletContext",e.VKq(45,xo,t.f.title)),e.xp6(1),e.Q6J("ngIf",null==t.f.title?null:t.f.title.hasError("codeExists")),e.xp6(6),e.Q6J("ngClass",null!=t.f.code&&t.f.code.invalid&&null!=t.f.code&&t.f.code.dirty?"is-invalid":""),e.xp6(1),e.Q6J("ngTemplateOutlet",s)("ngTemplateOutletContext",e.VKq(47,yo,t.f.code)),e.xp6(1),e.Q6J("ngTemplateOutlet",s)("ngTemplateOutletContext",e.VKq(49,Co,t.f.code)),e.xp6(1),e.Q6J("ngIf",null==t.f.code?null:t.f.code.hasError("codeExists")),e.xp6(7),e.Q6J("ngClass",null!=t.f.description&&t.f.description.invalid&&null!=t.f.description&&t.f.description.dirty?"is-invalid":""),e.xp6(1),e.Q6J("ngTemplateOutlet",s)("ngTemplateOutletContext",e.VKq(51,To,t.f.description)),e.xp6(7),e.Q6J("inheritColor",!0)("size","l")("showLoader",!1)("overlay",!0),e.xp6(1),e.Q6J("ngIf",t.file),e.xp6(1),e.Q6J("ngIf",!t.file),e.xp6(8),e.Q6J("ngClass",null!=t.f.companyId&&t.f.companyId.invalid&&null!=t.f.companyId&&t.f.companyId.dirty?"is-invalid":""),e.xp6(1),e.Q6J("ngForOf",t.companyList),e.xp6(1),e.Q6J("ngTemplateOutlet",s)("ngTemplateOutletContext",e.VKq(53,So,t.f.companyId)),e.xp6(6),e.Q6J("ngClass",null!=t.f.categoryId&&t.f.categoryId.invalid&&null!=t.f.categoryId&&t.f.categoryId.dirty?"is-invalid":""),e.xp6(1),e.Q6J("ngForOf",t.categoryList),e.xp6(1),e.Q6J("ngTemplateOutlet",s)("ngTemplateOutletContext",e.VKq(55,wo,t.f.categoryId)),e.xp6(5),e.Q6J("ngForOf",t.cols),e.xp6(9),e.Q6J("content",i),e.xp6(7),e.Q6J("content",a),e.xp6(11),e.Q6J("ngForOf",t.workflows.controls),e.xp6(4),e.Q6J("formControl",t.addForms)("pseudoActive",!0)("pseudoFocus",!0),e.xp6(2),e.Oqu(1==t.addForms.value?"Include forms in Submission":"Exclude forms in Submission"),e.xp6(1),e.Q6J("ngIf",(null==t.formComponents[0]||null==t.formComponents[0].components?null:t.formComponents[0].components.length)>0&&1==(null==t.addForms?null:t.addForms.value)),e.xp6(1),e.Q6J("ngIf",1==t.addForms.value),e.xp6(1),e.Q6J("ngIf",1==t.addForms.value),e.xp6(2),e.Q6J("showLoader",1==e.lcZ(104,41,t.isCreatingSubModule)),e.xp6(3),e.Q6J("showLoader",1==e.lcZ(107,43,t.isSavingAsDraft))}},dependencies:[o.mk,o.sg,o.O5,o.tP,pe.G,Q.c,B.K3,B.wU,Ae.MB,Se.xT,I.eC,Ie.gX,ie.VT,X.uJ,X.OI,c._Y,c.YN,c.Kr,c.Fj,c.EJ,c.JJ,c.JL,c.Q7,c.oH,c.sg,c.u,c.x0,c.CE,c.On,we.v0,Be.k4,f,Qe.e,F.H9,F.p_,F.uW,F.yu,se.V,ue.PZ,Je.w,Le.kM,Te.p,qe.T2,o.Ov]});var Ao=l(42993),Ke=l(27969),Ye=l(69952),Io=l(85600),Mo=l(98952),ze=l(38929),Ve=l(48011),Zo=l(221),je=l(35554),Re=l(6229);function ko(r,n){if(1&r){const t=e.EpF();e.TgZ(0,"a",8),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.editWorkflowRoute(null==i.cellValue||null==i.cellValue.data?null:i.cellValue.data.id,null==i.cellValue||null==i.cellValue.data?null:i.cellValue.data.code))}),e._UZ(1,"i",9),e.qZA()}}function Eo(r,n){if(1&r){const t=e.EpF();e.TgZ(0,"a",10),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.viewWorkflowRoute(null==i.cellValue||null==i.cellValue.data?null:i.cellValue.data.id,null==i.cellValue||null==i.cellValue.data?null:i.cellValue.data.code))}),e._UZ(1,"i",11),e.qZA()}}function Do(r,n){if(1&r){const t=e.EpF();e.TgZ(0,"a",12),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2),a=e.MAs(3);return e.KtG(i.showDeleteDialog(a,"delete",null==i.cellValue||null==i.cellValue.data?null:i.cellValue.data.id,null==i.cellValue||null==i.cellValue.data?null:i.cellValue.data.workflowStatus))}),e._UZ(1,"i",13),e.qZA()}}function Oo(r,n){if(1&r){const t=e.EpF();e.TgZ(0,"a",14),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2),a=e.MAs(3);return e.KtG(i.showDeleteDialog(a,"cancel",null==i.cellValue||null==i.cellValue.data?null:i.cellValue.data.id,null==i.cellValue||null==i.cellValue.data?null:i.cellValue.data.workflowStatus))}),e._UZ(1,"i",15),e.qZA()}}function Uo(r,n){if(1&r&&(e.ynx(0),e.TgZ(1,"div",3),e.YNc(2,ko,2,0,"a",4),e.YNc(3,Eo,2,0,"a",5),e.YNc(4,Do,2,0,"a",6),e.YNc(5,Oo,2,0,"a",7),e.qZA(),e.BQk()),2&r){const t=e.oxw();e.xp6(2),e.Q6J("ngIf",1==t.checkEditDisableDeleteButton(null==t.cellValue?null:t.cellValue.data)&&("In Progress"==(null==t.cellValue||null==t.cellValue.data?null:t.cellValue.data.submissionStatus)||"Created"==(null==t.cellValue||null==t.cellValue.data?null:t.cellValue.data.submissionStatus))),e.xp6(1),e.Q6J("ngIf",1==t.checkViewButtonCondition(null==t.cellValue?null:t.cellValue.data)),e.xp6(1),e.Q6J("ngIf",1==t.checkEditDisableDeleteButton(null==t.cellValue?null:t.cellValue.data)&&("In Progress"==(null==t.cellValue||null==t.cellValue.data?null:t.cellValue.data.submissionStatus)||"Created"==(null==t.cellValue||null==t.cellValue.data?null:t.cellValue.data.submissionStatus))),e.xp6(1),e.Q6J("ngIf",1==t.checkEditDisableDeleteButton(null==t.cellValue?null:t.cellValue.data)&&("In Progress"==(null==t.cellValue||null==t.cellValue.data?null:t.cellValue.data.submissionStatus)||"Created"==(null==t.cellValue||null==t.cellValue.data?null:t.cellValue.data.submissionStatus)))}}const No=function(r){return["/modules/edit-submission",r]};function Fo(r,n){if(1&r){const t=e.EpF();e.TgZ(0,"a",16),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.setWorkflowID(null==i.cellValue||null==i.cellValue.data?null:i.cellValue.data.code,null==i.cellValue||null==i.cellValue.data?null:i.cellValue.data.id))}),e._UZ(1,"i",17),e.qZA()}if(2&r){const t=e.oxw();e.Q6J("routerLink",e.VKq(1,No,null==t.cellValue||null==t.cellValue.data?null:t.cellValue.data.id))}}function Po(r,n){if(1&r){const t=e.EpF();e.TgZ(0,"p",18),e._uU(1),e.qZA(),e.TgZ(2,"p",19),e._uU(3," You are about to "),e.TgZ(4,"span",20),e._uU(5),e.qZA(),e._uU(6," this submission. Are you sure you want to continue? "),e.qZA(),e.TgZ(7,"div",21)(8,"label",22),e._uU(9,"Comments "),e.TgZ(10,"sup"),e._uU(11,"(optional)"),e.qZA()(),e._UZ(12,"textarea",23),e.qZA(),e.TgZ(13,"div",24)(14,"button",25),e.NdJ("click",function(){const a=e.CHM(t).$implicit;return e.oxw().sendDeleteOrCancelDecision(),e.KtG(a.complete())}),e.ALo(15,"async"),e._uU(16," Confirm "),e.qZA(),e.TgZ(17,"button",26),e.NdJ("click",function(){const a=e.CHM(t).$implicit;return e.oxw().remarks.reset(),e.KtG(a.complete())}),e._uU(18," Cancel "),e.qZA()()}if(2&r){const t=e.oxw();e.xp6(1),e.hij(" ",t.dialogTitle," Submission "),e.xp6(3),e.Q6J("ngClass","Delete"==t.dialogTitle?"text-red-500":"text-[#cf5c27]"),e.xp6(1),e.Oqu(t.dialogTitle),e.xp6(7),e.Q6J("formControl",t.remarks),e.xp6(2),e.Q6J("showLoader",1==e.lcZ(15,5,t.sendingDecision))}}class Ne{constructor(n,t,s,i){this.auth=n,this.router=t,this.workflowService=s,this.dialogs=i,this.remarks=new c.NI(""),this.sendingDecision=new P.x,this.destroy$=new P.x,this.saveDialogSubscription=[],this.currentUser=this.auth.currentUserValue}agInit(n){this.cellValue=n}refresh(n){return this.cellValue=n,!0}setWorkflowID(n,t){(0,d.LS)(d.MX.formKey,n),(0,d.LS)(d.MX.editSubmissionId,t)}checkEditDisableDeleteButton(n){return!(!this.currentUser.roles.includes("sysAdmin")&&"disabled"==n.subModuleId.accessType&&!n.activeStepUsers.includes(this.currentUser.id)&&!n.subModuleId.adminUsers.includes(this.currentUser.id))}editWorkflowRoute(n,t){(0,d.LS)(d.MX.previewMode,!1),(0,d.LS)(d.MX.formKey,t),(0,d.LS)(d.MX.formID,n),this.router.navigate(["/modules",(0,d.rV)(d.MX.moduleSlug),t,n])}viewWorkflowRoute(n,t){(0,d.LS)(d.MX.previewMode,!0),(0,d.LS)(d.MX.formKey,t),(0,d.LS)(d.MX.formID,n),this.router.navigate(["/modules",(0,d.rV)(d.MX.moduleSlug),t,n])}checkViewButtonCondition(n){return!(this.currentUser&&!this.currentUser.roles.includes("sysAdmin")&&"disabled"==n.subModuleId.accessType&&!n.workFlowUsers.includes(this.currentUser.id)&&!n.subModuleId.adminUsers.includes(this.currentUser.id)&&!n.subModuleId.viewOnlyUsers.includes(this.currentUser.id))}showDeleteDialog(n,t,s,i){i?.map(a=>{"inProgress"==a?.status&&(this.currentStepId=a?.stepId)}),this.isDeleting=t,this.workflowID=s,"delete"==t&&(this.dialogTitle="Delete"),"cancel"==t&&(this.dialogTitle="Cancel"),"enable"==t&&(this.dialogTitle="Enable"),this.saveDialogSubscription.push(this.dialogs.open(n,{dismissible:!0,closeable:!0}).subscribe())}sendDeleteOrCancelDecision(){this.sendingDecision.next(!0);let n={stepId:this.currentStepId,userId:this.currentUser?.id,remarks:this.remarks?.value||void 0,type:"submittal"};"delete"==this.isDeleting&&(Object.assign(n,{status:2}),this.workflowService.updateSubmissionWorkflow(this.workflowID,n).pipe((0,y.R)(this.destroy$)).subscribe(t=>{t&&(this.sendingDecision.next(!1),this.saveDialogSubscription.forEach(s=>s.unsubscribe()),this.remarks.reset(),this.workflowService.actionComplete.emit(!0))})),"cancel"==this.isDeleting&&(Object.assign(n,{submissionStatus:5}),this.workflowService.updateSubmissionWorkflow(this.workflowID,n).pipe((0,y.R)(this.destroy$)).subscribe(t=>{t&&(this.sendingDecision.next(!1),this.saveDialogSubscription.forEach(s=>s.unsubscribe),this.remarks.reset(),this.workflowService.actionComplete.emit(!0))})),"enable"==this.isDeleting&&(Object.assign(n,{submissionStatus:2}),this.workflowService.updateSubmissionWorkflow(this.workflowID,n).pipe((0,y.R)(this.destroy$)).subscribe(t=>{t&&(this.sendingDecision.next(!1),this.saveDialogSubscription.forEach(s=>s.unsubscribe),this.remarks.reset(),this.workflowService.actionComplete.emit(!0))}))}ngOnDestroy(){this.destroy$.complete(),this.destroy$.unsubscribe(),this.saveDialogSubscription.forEach(n=>n.unsubscribe())}}function Jo(r,n){if(1&r){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",3)(2,"ag-grid-angular",4),e.NdJ("gridReady",function(i){e.CHM(t);const a=e.oxw(2);return e.KtG(a.onGridReady(i))}),e.qZA()(),e.BQk()}if(2&r){const t=e.oxw(2);e.xp6(2),e.Q6J("rowData",t.rowData)("columnDefs",t.columnDefs)("pagination",!0)("paginationPageSize",10)("suppressMenuHide",!0)}}function Lo(r,n){if(1&r&&(e.ynx(0),e.YNc(1,Jo,3,5,"ng-container",2),e.ALo(2,"async"),e.ALo(3,"async"),e.BQk()),2&r){const t=e.oxw();let s;e.xp6(1),e.Q6J("ngIf",(null==(s=e.lcZ(2,1,t.moduleData))||null==s.formIds?null:s.formIds.length)>0&&1==(null==(s=e.lcZ(3,3,t.moduleData))?null:s.formVisibility))}}function Bo(r,n){1&r&&e._UZ(0,"p")}Ne.\u0275fac=function(n){return new(n||Ne)(e.Y36(ae.e),e.Y36(u.F0),e.Y36(Re.C),e.Y36(D.RO))},Ne.\u0275cmp=e.Xpm({type:Ne,selectors:[["action-button-component"]],standalone:!0,features:[e.jDz],decls:4,vars:2,consts:[[4,"ngIf"],["title","Update Submission Status","class","w-10 px-1.5 pt-1 pb-1.5 text-center mr-1.5 text-xs font-medium text-white no-underline bg-blue-500 rounded-md cursor-pointer hover:text-white hover:bg-opacity-80 hover:transition-colors",3,"routerLink","click",4,"ngIf"],["dialog",""],[1,"w-full"],["title","Edit Submission & Perform Workflow Action","class","w-10 px-[8px] pt-1 pb-1.5 mr-1.5 text-xs font-medium text-center text-white no-underline bg-blue-500 rounded-md cursor-pointer hover:text-white hover:bg-opacity-80 hover:transition-colors",3,"click",4,"ngIf"],["title","View Submission","class","w-10 px-1.5 pt-1 pb-1.5 text-center text-xs font-medium text-white no-underline bg-green-600 rounded-md cursor-pointer hover:text-white hover:bg-opacity-80 hover:transition-colors",3,"click",4,"ngIf"],["title","Delete Submission","class","w-10 px-2 pt-1 pb-1.5 text-center ml-1.5 text-xs font-medium text-white no-underline bg-red-600 rounded-md cursor-pointer hover:text-white hover:bg-opacity-80 hover:transition-colors",3,"click",4,"ngIf"],["title","Cancel Submission","class","w-10 px-1.5 pt-1 pb-1.5 text-center ml-1.5 text-xs font-medium text-white no-underline bg-[#CF5C27] rounded-md cursor-pointer hover:text-white hover:bg-opacity-80 hover:transition-colors",3,"click",4,"ngIf"],["title","Edit Submission & Perform Workflow Action",1,"w-10","px-[8px]","pt-1","pb-1.5","mr-1.5","text-xs","font-medium","text-center","text-white","no-underline","bg-blue-500","rounded-md","cursor-pointer","hover:text-white","hover:bg-opacity-80","hover:transition-colors",3,"click"],["aria-hidden","true",1,"fa","fa-pencil"],["title","View Submission",1,"w-10","px-1.5","pt-1","pb-1.5","text-center","text-xs","font-medium","text-white","no-underline","bg-green-600","rounded-md","cursor-pointer","hover:text-white","hover:bg-opacity-80","hover:transition-colors",3,"click"],["aria-hidden","true",1,"fa","fa-eye","fa-lg"],["title","Delete Submission",1,"w-10","px-2","pt-1","pb-1.5","text-center","ml-1.5","text-xs","font-medium","text-white","no-underline","bg-red-600","rounded-md","cursor-pointer","hover:text-white","hover:bg-opacity-80","hover:transition-colors",3,"click"],["aria-hidden","true",1,"fa","fa-trash","fa-lg"],["title","Cancel Submission",1,"w-10","px-1.5","pt-1","pb-1.5","text-center","ml-1.5","text-xs","font-medium","text-white","no-underline","bg-[#CF5C27]","rounded-md","cursor-pointer","hover:text-white","hover:bg-opacity-80","hover:transition-colors",3,"click"],["aria-hidden","true",1,"fa","fa-ban","fa-lg"],["title","Update Submission Status",1,"w-10","px-1.5","pt-1","pb-1.5","text-center","mr-1.5","text-xs","font-medium","text-white","no-underline","bg-blue-500","rounded-md","cursor-pointer","hover:text-white","hover:bg-opacity-80","hover:transition-colors",3,"routerLink","click"],["aria-hidden","true",1,"fa","fa-edit","fa-lg"],[1,"mb-5","text-lg","font-semibold","text-center"],[1,"text-base","font-semibold","text-center"],[3,"ngClass"],[1,"flex","flex-col","justify-center","my-5"],["for","Textarea1",1,"block"],["id","Textarea1","rows","4",1,"form-control",3,"formControl"],[1,"flex","justify-start","gap-2"],["tuiButton","","type","button","size","m",3,"showLoader","click"],["tuiButton","","appearance","accent","type","button","size","m",3,"click"]],template:function(n,t){1&n&&(e.YNc(0,Uo,6,4,"ng-container",0),e.YNc(1,Fo,2,3,"a",1),e.YNc(2,Po,19,7,"ng-template",null,2,e.W1O)),2&n&&(e.Q6J("ngIf","Draft"!==(null==t.cellValue||null==t.cellValue.data?null:t.cellValue.data.submissionStatus)&&2!==(null==t.cellValue||null==t.cellValue.data?null:t.cellValue.data.status)),e.xp6(1),e.Q6J("ngIf","Draft"==(null==t.cellValue||null==t.cellValue.data?null:t.cellValue.data.submissionStatus)&&1==t.checkEditDisableDeleteButton(null==t.cellValue?null:t.cellValue.data)))},dependencies:[o.ez,o.mk,o.O5,o.Ov,u.Bz,u.rH,c.UX,c.Fj,c.JJ,c.oH,we.fN,we.v0],encapsulation:2});class Me{constructor(n,t,s,i,a){this.workflowService=n,this.auth=t,this.dashboard=s,this.router=i,this.activatedRoute=a,this.subscriptions=[],this.adminUsers=[],this.createdByUsers=[],this.page=1,this.limit=1e4,this.sendingDecision=new P.x,this.columnDefs=[{field:"code",headerName:"Code",filter:!0,floatingFilter:!0,sortable:!0,resizable:!0,width:200},{field:"submissionStatus",headerName:"Status",filter:!0,floatingFilter:!0,sortable:!0,resizable:!0,width:200},{field:"lastActivityPerformedBy",headerName:"Last Activity By",filter:!0,floatingFilter:!0,sortable:!0,resizable:!0,width:250},{field:"pendingOnUsers",headerName:"Pending With",filter:!0,floatingFilter:!0,sortable:!0,resizable:!0,width:300},{field:"progress",headerName:"Progress",filter:!0,floatingFilter:!0,sortable:!0,resizable:!0,width:200},{field:"actions",headerName:"Actions",cellRenderer:Ne,width:150}],this.rowData=[],this.currentUser=this.auth.currentUserValue,this.userRoleCheckAdmin=this.auth.checkIfRolesExist("sysAdmin"),this.activatedRoute.queryParams.subscribe(p=>{p.moduleID&&(this.submoduleId=p.moduleID,this.fetchDataAndPopulate(),this.moduleData=this.dashboard.getSubModuleByID(p.moduleID))}),this.subscriptions.push(this.workflowService.actionComplete.subscribe(p=>{1==p&&(this.fetchDataAndPopulate(),this.workflowService.actionComplete.emit(!1))}))}onGridReady(n){this.columnDefs?.length<=6&&n.api.sizeColumnsToFit()}checkViewButtonCondition(n){return!(this.currentUser&&!this.currentUser.roles.includes("sysAdmin")&&"disabled"==n.subModuleId.accessType&&!n.workFlowUsers.includes(this.currentUser.id))}fetchDataAndPopulate(){this.subscriptions.push(this.workflowService.getSubmissionFromSubModule(this.submoduleId,this.limit,this.page).subscribe(n=>{this.submissionData=n,this.tableDataValue=n?.results,this.rowData=this.tableDataValue?.map(s=>({id:s?.id,status:s?.status,code:s?.code,submissionStatus:this.showStatus(s?.submissionStatus),lastActivityPerformedBy:s?.summaryData?.lastActivityPerformedBy?.fullName,pendingOnUsers:s?.summaryData?.pendingOnUsers?.map(i=>i?.fullName),progress:String(s?.summaryData?.progress)+"%",subModuleId:s?.subModuleId,activeStepUsers:s?.activeStepUsers,workflowStatus:s?.workflowStatus,workFlowUsers:s?.workFlowUsers})),this.createdByUsers=n?.results?.map(s=>s?.subModuleId?.createdBy)}))}findDynamicKey(n){return Object.keys(n).find(t=>"code"!==t&&"submissionStatus"!==t&&"lastActivityPerformedBy"!==t&&"pendingOnUsers"!==t&&"progress"!==t)}findDynamicValues(n){let t=Object.keys(n).find(s=>"code"!==s&&"submissionStatus"!==s&&"lastActivityPerformedBy"!==s&&"pendingOnUsers"!==s&&"progress"!==s);return"string"==typeof n[t]?n[t]?.replace(/&lt;/g,"<").replace(/&gt;/g,">"):n[t]}checkIfUserisAdmin(n){return n?.map(t=>t?.id).includes(this.currentUser?.id)}checkIfUserIsFirstUser(n){if("inProgress"==n[0]?.status)return n[0]?.activeUsers?.includes(this.currentUser?.id)}checkIfUserisViewOnly(n){return n?.map(t=>t?.id).includes(this.currentUser?.id)}changeProgressColor(n){return n<=49?"#F15B41":n>49&&n<75?"#F9B71A":n>=75?"#32de84":"#fff"}showStatus(n){return 1===n?"Created":3===n?"Completed":2===n?"In Progress":4===n?"Draft":5===n?"Cancelled":6===n?"Deleted":"Rejected"}checkIfUserisPartofWorkflow(n){return n?.map(t=>t?._id)?.includes(this.currentUser?.id)}checkIfUserisActiveUser(n){return n?.flatMap(t=>"inProgress"==t?.status?t.activeUsers:null)?.filter(t=>t).includes(this.currentUser?.id)}checkIfUserisApprovedUser(n){return n?.flatMap(t=>t.approvedUsers)?.includes(this.currentUser?.id)}checkIfUserisCreator(){return this.createdByUsers?.includes(this.currentUser?.id)}getPendingOnUsers(n){return n?.map(t=>t?.fullName)}addSubmissionRoute(){this.router.navigate([`/modules/${(0,d.rV)(d.MX.moduleSlug)}/add-submission`,this.submoduleId])}ngOnDestroy(){this.subscriptions.forEach(n=>n.unsubscribe())}}function Qo(r,n){if(1&r){const t=e.EpF();e.TgZ(0,"div",9)(1,"a",10),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.addSubmissionRoute())}),e._uU(2,"+ Add submission"),e.qZA()()}}function qo(r,n){if(1&r){const t=e.EpF();e.ynx(0),e.TgZ(1,"app-table-view",3),e.NdJ("emitPagination",function(i){e.CHM(t);const a=e.oxw();return e.KtG(a.sendPagination(i))})("emitDeleteEvent",function(i){e.CHM(t);const a=e.oxw();return e.KtG(a.itemDeleted(i))})("emitPageChange",function(i){e.CHM(t);const a=e.oxw();return e.KtG(a.fetchFreshData(i))}),e.qZA(),e._UZ(2,"div",4),e.TgZ(3,"div",5)(4,"div",6),e.YNc(5,Qo,3,0,"div",7),e.ALo(6,"async"),e.ALo(7,"async"),e.ALo(8,"async"),e.ALo(9,"async"),e.ALo(10,"async"),e.ALo(11,"async"),e.ALo(12,"async"),e.qZA(),e._UZ(13,"app-submission-table",8),e.qZA(),e.BQk()}if(2&r){const t=n.ngIf,s=e.oxw();let i;e.xp6(1),e.Q6J("moduleData",s.moduleData)("tableData",t),e.xp6(4),e.Q6J("ngIf",(null==(i=e.lcZ(6,4,s.moduleData))||null==i.formIds?null:i.formIds.length)>0&&1==(null==(i=e.lcZ(7,6,s.moduleData))?null:i.formVisibility)&&(1==s.checkIfAdminUserIsOnFirstStep(null==(i=e.lcZ(8,8,s.moduleData))||null==i.workFlowId||null==i.workFlowId.stepIds[0]?null:i.workFlowId.stepIds[0].approverIds)||s.checkIfUserisAdmin(null==(i=e.lcZ(9,10,s.moduleData))?null:i.adminUsers)||1==s.userRoleCheckSys||0==(null==s.currentUser||null==s.currentUser.roles?null:s.currentUser.roles.length)||0==s.disableModify(null==(i=e.lcZ(10,12,s.moduleData))?null:i.accessType,null==(i=e.lcZ(11,14,s.moduleData))?null:i.adminUsers)||(null==s.currentUser?null:s.currentUser.id)==(null==(i=e.lcZ(12,16,s.moduleData))?null:i.createdBy))),e.xp6(8),e.Q6J("moduleData",s.moduleData)}}function Vo(r,n){1&r&&(e.TgZ(0,"div",11),e._UZ(1,"tui-loader",12),e.TgZ(2,"p",13),e._uU(3,"Loading..."),e.qZA()()),2&r&&(e.xp6(1),e.Q6J("showLoader",!0)("overlay",!0))}Me.\u0275fac=function(n){return new(n||Me)(e.Y36(Re.C),e.Y36(ae.e),e.Y36(de.s),e.Y36(u.F0),e.Y36(u.gz))},Me.\u0275cmp=e.Xpm({type:Me,selectors:[["app-submission-table"]],inputs:{submissionData:"submissionData",moduleData:"moduleData"},standalone:!0,features:[e.jDz],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["noData",""],[4,"ngIf"],[1,"flex","flex-col"],[1,"w-full","h-full","overflow-hidden","ag-theme-alpine",3,"rowData","columnDefs","pagination","paginationPageSize","suppressMenuHide","gridReady"]],template:function(n,t){if(1&n&&(e.YNc(0,Lo,4,5,"ng-container",0),e.YNc(1,Bo,1,0,"ng-template",null,1,e.W1O)),2&n){const s=e.MAs(2);e.Q6J("ngIf",t.submissionData)("ngIfElse",s)}},dependencies:[o.ez,o.O5,o.Ov,ze.V5,Ve.i,c.UX,we.fN,u.Bz,Io.jh,Mo.dp,Zo.A,je.sF,je.N8]});class Fe{constructor(n,t,s,i,a){this.dashBoardService=n,this.activatedRoute=t,this.transport=s,this.router=i,this.auth=a,this.limit=6,this.page=1,this.searchValue=new c.NI,this.destroy$=new P.x,this.currentUser=this.auth.currentUserValue,this.userRoleCheckAdmin=this.auth.checkIfRolesExist("admin"),this.userRoleCheckUser=this.auth.checkIfRolesExist("user"),this.userRoleCheckSys=this.auth.checkIfRolesExist("sysAdmin"),this.activatedRoute.params.pipe((0,Ao.j)("name"),(0,Ke.U)(p=>((0,d.LS)(d.MX.moduleSlug,p),this.moduleSlug=p,p)),(0,y.R)(this.destroy$)).subscribe(p=>{this.subModuleData=this.dashBoardService.getSubModuleByModuleSlug(p,this.limit,this.page)}),this.activatedRoute.queryParams.pipe((0,y.R)(this.destroy$)).subscribe(p=>{p.moduleID&&((0,d.LS)(d.MX.moduleID,p.moduleID),this.transport.moduleID.next(p.moduleID),this.moduleData=this.dashBoardService.getSubModuleByID(p.moduleID))})}checkAccess(n){return!(0==this.userRoleCheckSys&&"disabled"==n?.accessType&&!n?.submissionCreators.includes(this.currentUser?.id))}disableModify(n,t){return!!("disabled"==n||t?.length>0&&t?.map(s=>s?.id).includes(this.currentUser?.id))}addSubmissionRoute(){this.router.navigate([`/modules/${(0,d.rV)(d.MX.moduleSlug)}/add-submission`,this.transport.moduleID?.value])}checkIfUserisAdmin(n){return n?.map(t=>t?.id).includes(this.currentUser?.id)}fetchFreshData(n){n&&(this.subModuleData=this.dashBoardService.getSubModuleByModuleSlug((0,d.rV)(d.MX.moduleSlug),this.limit,1),this.moduleData=this.dashBoardService.getSubModuleByID((0,d.rV)(d.MX.moduleID)))}itemDeleted(n){1==n&&(this.subModuleData=this.dashBoardService.getSubModuleByModuleSlug(this.moduleSlug,this.limit,this.page))}sendPagination(n){n&&(this.page=n,this.subModuleData=this.dashBoardService.getSubModuleByModuleSlug(this.moduleSlug,this.limit,this.page))}checkIfAdminUserIsOnFirstStep(n){return n?.map(t=>t?.id)?.includes(this.currentUser?.id)}ngOnDestroy(){this.destroy$.complete(),this.destroy$.unsubscribe()}}Fe.\u0275fac=function(n){return new(n||Fe)(e.Y36(de.s),e.Y36(u.gz),e.Y36(oe.R),e.Y36(u.F0),e.Y36(ae.e))},Fe.\u0275cmp=e.Xpm({type:Fe,selectors:[["ng-component"]],decls:7,vars:4,consts:[[1,"w-11/12","h-auto","min-h-screen","mx-auto","mt-48","mb-10"],[4,"ngIf","ngIfElse"],["noData",""],[3,"moduleData","tableData","emitPagination","emitDeleteEvent","emitPageChange"],[1,"mt-8"],[1,"my-8"],[1,"flex","justify-end","mb-5"],["class","mt-2 cursor-pointer",4,"ngIf"],[3,"moduleData"],[1,"mt-2","cursor-pointer"],[1,"px-6","py-3","rounded-md","bg-[#a58f81]","text-white","no-underline","hover:text-white","text-base","hover:bg-opacity-90","hover:transition-colors",3,"click"],[1,"pt-28"],["size","xl",3,"showLoader","overlay"],[1,"font-semibold","text-center"]],template:function(n,t){if(1&n&&(e._UZ(0,"app-header"),e.TgZ(1,"section",0),e.YNc(2,qo,14,18,"ng-container",1),e.ALo(3,"async"),e.YNc(4,Vo,4,2,"ng-template",null,2,e.W1O),e.qZA(),e._UZ(6,"app-footer")),2&n){const s=e.MAs(5);e.xp6(2),e.Q6J("ngIf",e.lcZ(3,2,t.subModuleData))("ngIfElse",s)}},dependencies:[o.O5,pe.G,Q.c,Ye.x,Le.kM,Me,o.Ov]});class Ze{resolve(n){return(0,d.rV)(d.MX.moduleSlug)}}Ze.\u0275fac=function(n){return new(n||Ze)},Ze.\u0275prov=e.Yz7({token:Ze,factory:Ze.\u0275fac,providedIn:"root"});var We=l(42147),Ro=l(65598),Ce=l(83715),$e=l(54789),Xe=l(46841),He=l(33713),Ho=l(56210);const Go=["formioForm"];function Ko(r,n){if(1&r){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",23),e.NdJ("click",function(){const a=e.CHM(t).index,p=e.oxw();return e.KtG(p.activeIndex=a)}),e._uU(2),e.qZA(),e.BQk()}if(2&r){const t=n.$implicit;e.xp6(2),e.Oqu(t)}}function Yo(r,n){if(1&r){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",24)(2,"div",25)(3,"a",26),e.NdJ("click",function(){const i=e.CHM(t),a=i.index,p=i.$implicit,U=e.oxw();return e.KtG(U.sendFormForEdit(a,null==p?null:p._id,null==p?null:p.key))}),e._UZ(4,"i",27),e.qZA()(),e.TgZ(5,"formio",28,29),e.NdJ("change",function(i){const p=e.CHM(t).index,U=e.oxw();return e.KtG(U.onChange(i,p))}),e.qZA()(),e.BQk()}if(2&r){const t=n.$implicit,s=n.index,i=e.oxw();e.xp6(1),e.Q6J("ngClass",i.activeIndex==s?"block":"hidden"),e.xp6(4),e.Q6J("submission",i.sanitizeSubmission(i.formValues[s])||i.sanitizeSubmission(t))("options",i.options)("form",t)}}function zo(r,n){1&r&&(e.TgZ(0,"span",51),e._uU(1,"Please select either AND or OR as the condition"),e.qZA())}function jo(r,n){if(1&r){const t=e.EpF();e.ynx(0),e.TgZ(1,"p",33),e._uU(2),e.qZA(),e.TgZ(3,"div",34)(4,"div",35)(5,"label",36),e._uU(6),e.TgZ(7,"span",37),e._uU(8,"*"),e.qZA()(),e.TgZ(9,"custom-multi-select",38),e.NdJ("checkUsersLength",function(i){const p=e.CHM(t).index,U=e.oxw(2);return e.KtG(U.countUsers(i,p))})("approverList",function(i){const p=e.CHM(t).index,U=e.oxw(2);return e.KtG(U.getApproverList(i,p))}),e.qZA(),e.YNc(10,zo,2,0,"span",39),e.ALo(11,"async"),e.qZA(),e.TgZ(12,"div",35)(13,"label",40),e._uU(14,"Condition "),e.TgZ(15,"span",37),e._uU(16,"*"),e.qZA()(),e.TgZ(17,"select",41),e.NdJ("change",function(){const a=e.CHM(t).index,p=e.oxw(2);return e.KtG(p.validateSelection(a))}),e.TgZ(18,"option",42),e._uU(19,"AND"),e.qZA(),e.TgZ(20,"option",43),e._uU(21,"OR"),e.qZA(),e.TgZ(22,"option",44),e._uU(23,"NONE"),e.qZA()()(),e.TgZ(24,"div",45),e._UZ(25,"tui-tooltip",46),e.TgZ(26,"tui-badged-content",47)(27,"button",48),e.NdJ("click",function(){const a=e.CHM(t).index,p=e.oxw(2),U=e.MAs(36);return e.KtG(p.openEmailNotifyModal(U,p.workflows,a))}),e.qZA()()(),e.TgZ(28,"div",49)(29,"button",50),e.NdJ("click",function(){const a=e.CHM(t).index,p=e.oxw(2);return e.KtG(p.removeWorkflowStep(a))}),e.qZA()()(),e.BQk()}if(2&r){const t=n.index,s=n.first,i=e.oxw(2),a=e.MAs(38);let p;e.xp6(2),e.hij("Step ",0===t?"1":t+1,""),e.xp6(1),e.Q6J("formGroupName",t),e.xp6(3),e.hij("",s?"Creators":"Approvers"," "),e.xp6(4),e.Q6J("ngIf",e.lcZ(11,7,i.showError)&&t===i.errorIndex),e.xp6(15),e.Q6J("content",a),e.xp6(1),e.Q6J("contentTop",null==(p=i.workflows.at(t).get("emailNotifyTo"))||null==p.value?null:p.value.length)("colorTop","green")}}function Wo(r,n){if(1&r){const t=e.EpF();e.TgZ(0,"div",30)(1,"h4",1),e._uU(2,"Modify submodule workflow"),e.qZA(),e.ynx(3,31),e.YNc(4,jo,30,9,"ng-container",5),e.BQk(),e.TgZ(5,"button",32),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.addWorkflowStep())}),e.qZA()()}if(2&r){const t=e.oxw();e.Q6J("formGroup",t.workflowForm),e.xp6(4),e.Q6J("ngForOf",t.workflows.controls)}}function $o(r,n){if(1&r&&(e.TgZ(0,"ul",64)(1,"li",65),e._uU(2),e.qZA()()),2&r){const t=n.$implicit;e.xp6(2),e.Oqu(t)}}function Xo(r,n){1&r&&e._UZ(0,"i",66)}function ei(r,n){if(1&r&&(e.TgZ(0,"div",57)(1,"div",58)(2,"p",59),e._uU(3),e.qZA(),e.YNc(4,$o,3,1,"ul",60),e.TgZ(5,"div",61),e._uU(6),e.qZA()(),e.TgZ(7,"div",62),e.YNc(8,Xo,1,0,"i",63),e.qZA()()),2&r){const t=e.oxw(),s=t.index,i=t.$implicit,a=t.last;e.xp6(3),e.hij("Step ",s+1,""),e.xp6(1),e.Q6J("ngForOf",null==i?null:i.approvers),e.xp6(2),e.hij(" ",null==i?null:i.condition," "),e.xp6(2),e.Q6J("ngIf",!a)}}function ti(r,n){1&r&&(e.ynx(0),e.YNc(1,ei,9,4,"div",56),e.BQk())}function ni(r,n){if(1&r){const t=e.EpF();e.ynx(0),e.TgZ(1,"tui-island",52)(2,"h4",53),e._uU(3,"Workflow Steps"),e.qZA(),e.TgZ(4,"tui-carousel",54),e.NdJ("indexChange",function(i){e.CHM(t);const a=e.oxw();return e.KtG(a.carouselIndex=i)}),e.YNc(5,ti,2,0,"ng-container",5),e.qZA(),e.TgZ(6,"tui-pagination",55),e.NdJ("indexChange",function(i){e.CHM(t);const a=e.oxw();return e.KtG(a.carouselIndex=i)}),e.qZA()(),e.BQk()}if(2&r){const t=e.oxw();e.xp6(4),e.Q6J("draggable",!0)("itemsCount",t.currentBreakpoint==t.BreakPoints.Small?2:3)("index",t.carouselIndex),e.xp6(1),e.Q6J("ngForOf",t.items),e.xp6(1),e.Q6J("length",(null==t.items?null:t.items.length)>2?(null==t.items?null:t.items.length)-2:null==t.items?null:t.items.length)("index",t.carouselIndex)}}function oi(r,n){1&r&&(e.ynx(0),e.TgZ(1,"p",67),e._uU(2,"Approval logs are empty!"),e.qZA(),e.BQk())}function ii(r,n){if(1&r&&(e.ynx(0),e.TgZ(1,"div",68)(2,"p",69),e._uU(3,"Performed by: \xa0 "),e.TgZ(4,"span",70),e._uU(5),e.qZA()(),e.TgZ(6,"p",71),e._uU(7,"Action: \xa0 "),e.TgZ(8,"span",72),e._uU(9),e.qZA()(),e.TgZ(10,"p",73),e._uU(11," Approved On: "),e.TgZ(12,"span",70),e._uU(13),e.ALo(14,"date"),e.qZA()(),e.TgZ(15,"p",69),e._uU(16,"Comments: "),e.TgZ(17,"span",70),e._uU(18),e.qZA()()(),e.BQk()),2&r){const t=n.$implicit;e.xp6(4),e.Q6J("ngClass","approved"==(null==t?null:t.approvalStatus)?"text-green-500":"text-gray-600"),e.xp6(1),e.Oqu(null!=t&&t.onBehalfOf?(null==t||null==t.onBehalfOf?null:t.onBehalfOf.fullName)+" on behalf of "+(null==t||null==t.performedById?null:t.performedById.fullName):null==t||null==t.performedById?null:t.performedById.fullName),e.xp6(3),e.Q6J("ngClass","approved"==(null==t?null:t.approvalStatus)?"text-green-500":"text-gray-600"),e.xp6(1),e.Oqu(null==t?null:t.approvalStatus),e.xp6(3),e.Q6J("ngClass","approved"==(null==t?null:t.approvalStatus)?"text-green-500":"text-gray-600"),e.xp6(1),e.hij("\xa0",e.xi3(14,8,null==t?null:t.approvedOn,"medium"),""),e.xp6(4),e.Q6J("ngClass","approved"==(null==t?null:t.approvalStatus)?"text-green-500":"text-gray-600"),e.xp6(1),e.hij("\xa0",null==t?null:t.remarks,"")}}function ri(r,n){if(1&r&&e._UZ(0,"tui-data-list-wrapper",82),2&r){const t=e.oxw(2);e.Q6J("items",t.userListForEmail)}}function si(r,n){if(1&r){const t=e.EpF();e.TgZ(0,"p",74),e._uU(1,"Email Notification Users"),e.qZA(),e.TgZ(2,"p",75),e._uU(3," Please specify the users you want to send the notification email to "),e.qZA(),e.TgZ(4,"div",76)(5,"tui-input-tag",77),e.NdJ("searchChange",function(i){e.CHM(t);const a=e.oxw();return e.KtG(a.onSearchChange(i))}),e._uU(6," Type to search and press Enter to select... "),e.YNc(7,ri,1,1,"tui-data-list-wrapper",78),e.qZA()(),e.TgZ(8,"div",79)(9,"button",80),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.validateEmails())}),e._uU(10," Confirm & Close "),e.qZA(),e.TgZ(11,"button",81),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.cancelEmailNotify())}),e._uU(12," Remove Users & Close "),e.qZA()()}if(2&r){const t=e.oxw();e.xp6(5),e.Q6J("formControl",null==t.currentFieldArray||null==t.currentFieldArray.controls[t.activeEmailIndex]?null:t.currentFieldArray.controls[t.activeEmailIndex].controls.emailNotifyTo)("tuiTextfieldLabelOutside",!0)}}function ai(r,n){1&r&&(e.TgZ(0,"strong",83),e._uU(1,"How conditions work?"),e.qZA(),e._UZ(2,"hr"),e.TgZ(3,"ul",84)(4,"li")(5,"strong"),e._uU(6,"AND"),e.qZA(),e._uU(7," implies that every user of the step must provide approval"),e.qZA(),e.TgZ(8,"li",85)(9,"strong"),e._uU(10,"OR"),e.qZA(),e._uU(11," implies that any one of the users may provide approval"),e.qZA(),e.TgZ(12,"li")(13,"strong"),e._uU(14,"NONE"),e.qZA(),e._uU(15," implies that there is only one user per step and hence no conditon is necessary"),e.qZA()())}class Pe{constructor(n,t,s,i,a,p,U,ge,ve,be,G,A){this.auth=n,this.notif=t,this.router=s,this.fb=i,this.dashboard=a,this.workflowService=p,this.dialogs=U,this.activatedRoute=ge,this.location=ve,this.transportService=be,this.breakpointObserver=G,this.formService=A,this.formTabs=[],this.activeIndex=0,this.options={disableAlerts:!0,noDefaultSubmitButton:!0},this.items=[],this.activeItemIndex=0,this.limit=10,this.page=0,this.destroy$=new P.x,this.search$=new P.x,this.userListForEmail=[],this.saveDialogSubscription=[],this.creatingSubmission=new P.x,this.draftingSubmission=new P.x,this.carouselIndex=0,this.errorIndex=0,this.showError=new P.x,this.formSubmission=new K.X([]),this.formValues=[],this.formValuesTemp=[],this.approvalLogs=[],this.currentBreakpoint="",this.BreakPoints=Ce.u3,this.breakpoint$=this.breakpointObserver.observe([Ce.u3.Large,Ce.u3.Medium,Ce.u3.Small,"(min-width: 500px)"]).pipe((0,We.x)()),this.rxJsOperators={takeUntil:y.R,forkJoin:Y.D,take:Ro.q,map:Ke.U,tap:k.b,distinctUntilChanged:We.x,switchMap:V.w},this.currentUser=this.auth.currentUserValue,this.userRoleCheck=this.auth.checkIfRolesExist("sysAdmin"),this.initWorkflowForm(),this.activatedRoute.params.pipe((0,y.R)(this.destroy$)).subscribe(ne=>{this.subModuleId=ne.id,this.fetchAndPopulateData(this.subModuleId)}),this.search$.pipe((0,V.w)(ne=>this.dashboard.getAllUsersForListing(this.limit,this.page,ne))).subscribe(ne=>{ne&&(this.userListForEmail=ne?.results?.map(De=>De?.email))}),this.dashboard.getAllUsersForListing(this.limit,this.page).pipe((0,y.R)(this.destroy$)).subscribe(ne=>{ne&&(this.userListForEmail=ne?.results?.map(De=>De?.email))})}ngOnInit(){const n=(0,d.rV)(d.MX.navHierarchy);n.forEach(t=>{t.routerLink=`/modules/${t.code}?moduleID=${(0,d.rV)(d.MX.moduleID)}`}),this.dashboard.items=[...n,{caption:(0,d.rV)(d.MX.formKey)||"Edit Submission",routerLink:`/modules/edit-submission/${(0,d.rV)(d.MX.editSubmissionId)}`}],this.breakpoint$.subscribe(()=>this.breakpointChanged())}breakpointChanged(){this.breakpointObserver.isMatched(Ce.u3.Large)?this.currentBreakpoint=Ce.u3.Large:this.breakpointObserver.isMatched(Ce.u3.Medium)?this.currentBreakpoint=Ce.u3.Medium:this.breakpointObserver.isMatched(Ce.u3.Small)?this.currentBreakpoint=Ce.u3.Small:this.breakpointObserver.isMatched("(min-width: 500px)")&&(this.currentBreakpoint="(min-width: 500px)")}sanitizeSubmission(n){let t=n?.data;if(t)for(const s in t)"string"==typeof t[s]&&(t[s]=t[s]?.replace(/&lt;/g,"<")?.replace(/&gt;/g,">")),("dataGrid"==s||"editGrid"==s)&&t[s]?.forEach(i=>{for(const a in i)"string"==typeof i[a]&&(i[a]=i[a]?.replace(/&lt;/g,"<")?.replace(/&gt;/g,">"))});return n}fetchAndPopulateData(n){this.workflowService.getWorkflowSubmission(n).pipe((0,y.R)(this.destroy$)).subscribe(t=>{if(t){t?.formIds?.forEach(i=>{L.cQ.eachComponent(i?.components,a=>{if("editgrid"==a?.type)for(const p in a.templates)a.templates[p]=a.templates[p]?.replace(/&lt;/g,"<").replace(/&gt;/g,">");if("select"==a?.type&&(a.template=a.template?.replace(/&lt;/g,"<").replace(/&gt;/g,">")),a?.html&&(a.html=a.html?.replace(/&lt;/g,"<").replace(/&gt;/g,">")),a?.wysiwyg&&1==a?.wysiwyg&&(i.sanitize=!0),a?.permissions&&a?.permissions?.length>0)return a?.permissions?.map(p=>{this.currentUser?.id==p?.id&&(a.disabled=1!=p.canEdit,a.hidden=0==p.canView)})},!0)}),this.subModuleData=t,this.subModuleData?.events&&this.subModuleData?.events?.length>0&&this.subModuleData?.events?.forEach(i=>{"onLoad"==i?.name&&(this.onLoadFn=new Function("return "+i.code)()),"onChange"==i?.name&&(this.onChangeFn=new Function("return "+i.code)())}),this.workFlowId=t?.workFlowId?._id,this.approvalLogs=t?.approvalLog,this.forms=t?.formIds?.map(i=>({...i,components:i?.components?.map(a=>(a?.label&&"Submit"==a?.label&&(a.hidden=!0),a)),formDataId:t?.formDataIds?.map(a=>{if(a.formId==i?._id)return a?._id}).filter(a=>a)[0],data:t?.formDataIds?.map(a=>{if(a.formId==i?._id)return a?.data}).filter(a=>a)[0]})),this.formTabs=t?.formIds?.map(i=>i.title),this.items=t?.workFlowId?.stepIds?.map(i=>({approvers:i?.approverIds?.map(a=>a?.fullName),condition:i?.condition,emailNotifyTo:i?.emailNotifyToId?.notifyUsers||[]}));const s=t?.workFlowId?.stepIds?.map(i=>({id:i?.id,approverIds:i?.approverIds?.map(a=>({name:a?.fullName,id:a?._id,control:new c.NI(!0)})),condition:i?.condition,emailNotifyTo:i?.emailNotifyToId?.notifyUsers||[],emailNotifyToId:i?.emailNotifyToId?.id}));delete this.subModuleData?.workFlowId,Object.assign(this.subModuleData,{workFlowId:s}),this.initWorkflowForm(s)}})}checkApprovalLogs(){return this.approvalLogs?.map(n=>n?.approvalStatus)?.includes("approved")||this.approvalLogs?.map(n=>n?.approvalStatus)?.includes("created")}initWorkflowForm(n){this.workflowForm=this.fb.group(n?{workflows:this.fb.array(n?.map(t=>this.fb.group({id:t.id,condition:[t.condition,c.kI.required],approverIds:[t.approverIds,c.kI.required],emailNotifyTo:[t.emailNotifyTo||[],c.kI.required],emailNotifyToId:t?.emailNotifyToId})))}:{workflows:this.fb.array([this.fb.group({condition:["",c.kI.required],approverIds:[[],c.kI.required],emailNotifyTo:[[],c.kI.required]})])})}get workflows(){return this.workflowForm.controls.workflows}addWorkflowStep(){const n=this.fb.group({approverIds:[[],c.kI.required],condition:[{value:"",disabled:""},c.kI.required],emailNotifyTo:[[],c.kI.required]});this.workflows.push(n)}removeWorkflowStep(n){this.workflows.removeAt(n)}getApproverList(n,t){this.workflows.at(t)?.get("approverIds")?.setValue(n)}sendFormForEdit(n,t,s){if(t){let i=this.workflows?.value?.flatMap(a=>a?.approverIds?.map(p=>({id:p.id,name:p.name})));if(0==i.length)return this.notif.displayNotification("Please create a default workflow before adding forms","Default Workflow","warning");this.transportService.editBreadcrumbs.next(this.dashboard.items),(0,d.LS)(d.MX.editBreadcrumbs,this.dashboard.items),(0,d.LS)(d.MX.formKey,s),(0,d.LS)(d.MX.approvers,i),this.router.navigate(["/forms/edit-form"],{queryParams:{id:t,fromSubmission:!0}})}}dataSubmitValidation(){return!(0==this.workflows?.length||this.workflows.controls.map(n=>0==n.get("approverIds")?.value.length).includes(!0)||!0===this.workflows.controls.map(n=>n.get("condition")?.value).includes(""))}openEmailNotifyModal(n,t,s){this.activeEmailIndex=s,this.currentFieldArray=t,this.saveDialogSubscription.push(this.dialogs.open(n,{dismissible:!1,closeable:!1}).subscribe())}onSearchChange(n){this.search$.next(n)}validateEmails(){let n=this.workflows.at(this.activeEmailIndex)?.get("emailNotifyTo")?.value;n=n.map(t=>!!/\S+@\S+\.\S+/.test(t)),n.includes(!1)?this.notif.displayNotification("Please provide valid email addresses","Email Notify","warning"):this.saveDialogSubscription.forEach(t=>t.unsubscribe())}cancelEmailNotify(){this.workflows.at(this.activeEmailIndex)?.get("emailNotifyTo")?.setValue([]),this.saveDialogSubscription.forEach(n=>n.unsubscribe())}countUsers(n,t){return this.errorIndex=t,n<2?(this.workflows.at(t)?.get("condition")?.setValue("none"),this.notif.displayNotification('Default condition of "None" will be used if the number of approvers is less than 2',"Create Module","info"),this.showError.next(!1)):n>=2&&"none"==this.workflows.at(t)?.get("condition")?.value?this.showError.next(!0):void this.showError.next(!1)}validateSelection(n){return this.errorIndex=n,this.workflows.at(n)?.get("approverIds")?.value?.length<2?(this.workflows.at(n)?.get("condition")?.setValue("none"),this.notif.displayNotification('Default condition of "None" will be used if the number of approvers is less than 2',"Create Module","info"),this.showError.next(!1)):this.workflows.at(n)?.get("approverIds")?.value?.length>=2&&"none"==this.workflows.at(n)?.get("condition")?.value?this.showError.next(!0):void this.showError.next(!1)}cancelSubmission(){this.router.navigate(["/modules",(0,d.rV)(d.MX.moduleSlug)||""],{queryParams:{moduleID:(0,d.rV)(d.MX.moduleID)||""}})}onChange(n,t){if(n?.data&&n?.changed){if(n?.changed&&"file"==n?.changed?.component?.type){let a=n?.changed?.component?.key;n?.data[a]?.forEach(p=>{p.url=p?.data?.baseUrl.split("v1")[0]+p?.data?.fileUrl})}const s=this.subModuleData?.formDataIds[t]?._id,i=this.subModuleData?.formDataIds[t]?.formId;this.formValuesTemp[t]={...n,formId:s,id:i}}}editSubmission(n){let t=JSON.parse(JSON.stringify(this.forms)),s=[];if(t?.forEach((p,U)=>{this.formioForms.toArray()[U].formio?.components?.forEach((ge,ve)=>{!0===ge?._disabled&&this.formioForms.toArray()[U].formio?.components?.splice(ve,1)})}),t?.forEach((p,U)=>{this.formioForms.toArray()[U].formio?.components?.forEach((ge,ve)=>{let be=this.formioForms.toArray()[U].formio.checkValidity(ge.key,!0,null,!1);s.push(be)})}),s.includes(!1))return this.notif.displayNotification("Please provide valid data for all required fields","Form Validation","warning");if(0==this.dataSubmitValidation())return this.notif.displayNotification("Please provide valid condition for the workflow step/s","Create Submission","warning");if(this.workflows.controls.map(p=>p.get("approverIds")?.value.length>1&&p.get("condition")?.value).includes("none"))return this.notif.displayNotification("Please provide valid condition for the workflow step/s","Create Submission","warning");n?this.draftingSubmission.next(!0):(this.creatingSubmission.next(!0),this.hooks?.length>0&&this.formValuesTemp?.forEach(p=>{this.hooks.forEach(U=>{"beforeSubmit"==U?.name&&(U.code=new Function("return "+U.code)(),U.code(p?.data,this.formService,this.rxJsOperators,this.destroy$))})})),this.creatingSubmission.next(!0);let i=[];this.formValues=this.formValuesTemp,t?.forEach((p,U)=>{i[U]=this.formValues[U]?{formId:this.formValues[U]?._id||this.formValues[U]?.id,data:this.formValues[U]?.data||this.formValues[U]?.defaultData?.data||{},id:this.formValues[U]?.formDataId||this.formValues[U]?.formId}:{formId:p._id,id:p?.formDataId,data:p?.defaultData?.data||{}},this.formSubmission.next(i)});const a={workFlowId:this.workFlowId,formDataIds:this.formSubmission?.value,submissionStatus:n||1,type:"edit",steps:this.workflows?.value?.map(p=>({id:p?.id?p?.id:void 0,approverIds:p?.approverIds?.map(U=>U.id?U.id:U),condition:p?.condition,emailNotifyTo:p?.emailNotifyTo||[],emailNotifyToId:p?.emailNotifyToId?p?.emailNotifyToId:void 0}))};this.workflowService.updateSubmissionWorkflow(this.subModuleId,a).pipe((0,y.R)(this.destroy$)).subscribe(p=>{p&&(n||this.hooks?.length>0&&this.formValuesTemp?.forEach(U=>{this.hooks.forEach(ge=>{"afterSubmit"==ge?.name&&(ge.code=new Function("return "+ge.code)(),ge.code(U?.data,this.formService,this.rxJsOperators,this.destroy$,p?.summaryData?.progress,p?.submissionStatus))})}),this.creatingSubmission.next(!0),this.location.back())})}ngOnDestroy(){this.destroy$.complete(),this.destroy$.unsubscribe()}}Pe.\u0275fac=function(n){return new(n||Pe)(e.Y36(ae.e),e.Y36(H.T),e.Y36(u.F0),e.Y36(c.qu),e.Y36(de.s),e.Y36(Re.C),e.Y36(D.RO),e.Y36(u.gz),e.Y36(o.Ye),e.Y36(oe.R),e.Y36(Ce.Yg),e.Y36(Ge.s))},Pe.\u0275cmp=e.Xpm({type:Pe,selectors:[["ng-component"]],viewQuery:function(n,t){if(1&n&&e.Gf(Go,5),2&n){let s;e.iGM(s=e.CRH())&&(t.formioForms=s)}},decls:39,vars:13,consts:[[1,"w-11/12","h-auto","min-h-screen","mx-auto","lg:mt-52","mt-40","pb-44"],[1,"text-lg","font-semibold"],[1,"flex","flex-col","w-full","px-5","mx-auto","mt-5","border","border-gray-400","border-dashed","rounded-md","bg-gray-50"],[1,"relative","flex","justify-between","my-8"],["tuiTabs","","vertical","left",1,"lg:w-32","w-20","lg:mr-5"],[4,"ngFor","ngForOf"],[3,"activeItemIndex","activeItemIndexChange"],["tuiTab",""],["src","tuiIconEye",1,"tui-space_right-2"],["src","tuiIconEdit",1,"tui-space_right-2"],["class","mt-12",3,"formGroup",4,"ngIf"],[4,"ngIf"],[1,"flex","justify-end","gap-5","mt-8"],["tuiButton","","type","button","size","m","appearance","primary",3,"showLoader","click"],["tuiButton","","type","button","size","m","appearance","secondary",3,"showLoader","click"],["tuiButton","","type","button","size","m","appearance","accent",3,"click"],[1,"my-4"],[1,"mb-5","text-lg","font-semibold"],[1,"grid","grid-cols-12"],[1,"col-span-12","w-[97.5%]"],["size","l",1,"w-full","shadow-lg"],["template",""],["hint",""],["tuiTab","",3,"click"],[1,"w-full","well","jsonviewer","ml-2","lg:ml-0",3,"ngClass"],[1,"absolute","z-10","-top-7","right-1"],["title","Edit Form",1,"rounded-md","cursor-pointer",3,"click"],["aria-hidden","true",1,"text-white","bg-blue-600","fa","fa-pencil-square-o","fa-lg","p-1.5","rounded-md","hover:text-white","hover:bg-opacity-80","hover:transition-colors"],[3,"submission","options","form","change"],["formioForm",""],[1,"mt-12",3,"formGroup"],["formArrayName","workflows"],["tuiIconButton","","type","button","size","m","appearance","primary","icon","tuiIconPlusLarge",3,"click"],[1,"text-base","font-semibold","mt-7"],[1,"grid","grid-cols-12","gap-3","my-4",3,"formGroupName"],[1,"lg:col-span-4","col-span-5"],[1,"block","pb-1"],[1,"text-xs","text-red-400"],["formControlName","approverIds",3,"checkUsersLength","approverList"],["class","text-xs text-red-500",4,"ngIf"],["for","conditionSelect",1,"block","pb-1"],["formControlName","condition","aria-label","Default select example","id","conditionSelect",1,"h-10","form-select","form-control",3,"change"],["value","and"],["value","or"],["value","none"],[1,"inline-flex","col-span-1","mt-8"],["direction","right",1,"mt-1","mr-4","-ml-2",3,"content"],[3,"contentTop","colorTop"],["tuiIconButton","","type","button","size","s","appearance","outline","icon","tuiIconMailLarge",3,"click"],[1,"col-span-1","mt-8","lg:-ml-6","ml-3"],["tuiIconButton","","type","button","size","s","appearance","secondary-destructive","icon","tuiIconTrash2Large",3,"click"],[1,"text-xs","text-red-500"],["size","l",1,"lg:w-[97.5%]","w-[95%]","my-4","shadow-lg","border","border-[#F15B41]","px-5","mx-auto"],[1,"mb-5","text-base","font-semibold","text-gray-700"],[3,"draggable","itemsCount","index","indexChange"],["size","s",1,"my-5","pagination",3,"length","index","indexChange"],["class","flex justify-between w-full",4,"tuiItem"],[1,"flex","justify-between","w-full"],[1,"relative","w-full","px-4","py-4","text-left","border","border-gray-200","rounded-md","bg-gray-50"],[1,"mb-2","text-lg","font-semibold","text-gray-700"],["class","px-5",4,"ngFor","ngForOf"],[1,"absolute","top-0","right-0","px-3","py-1","text-sm","font-semibold","bg-gray-200","rounded-b-none","text-slate-700","rounded-r-md"],[1,"ml-4","mt-7"],["class","fa fa-long-arrow-right fa-lg","aria-hidden","true",4,"ngIf"],[1,"px-5"],[1,"list-disc"],["aria-hidden","true",1,"fa","fa-long-arrow-right","fa-lg"],[1,"py-5","text-base","font-semibold","text-center","text-gray-500"],[1,"grid","grid-cols-12","py-3","border-b","border-gray-300","gap-x-3"],[1,"col-span-3","font-normal"],[1,"font-semibold",3,"ngClass"],[1,"col-span-2","font-normal"],[1,"font-semibold","capitalize",3,"ngClass"],[1,"col-span-4","font-normal"],[1,"text-lg","font-semibold","text-center"],[1,"mt-3","text-base","font-medium","text-gray-500"],[1,"flex","flex-col","justify-center","my-5"],[1,"b-form",3,"formControl","tuiTextfieldLabelOutside","searchChange"],[3,"items",4,"tuiDataList"],[1,"flex","justify-start","gap-x-3"],["tuiButton","","type","button","size","m",3,"click"],["appearance","accent","tuiButton","","type","button","size","m",3,"click"],[3,"items"],[1,"text-base"],[1,"mt-2"],[1,"my-2"]],template:function(n,t){1&n&&(e._UZ(0,"app-header"),e.TgZ(1,"section",0)(2,"p",1),e._uU(3,"Forms"),e.qZA(),e.TgZ(4,"div",2)(5,"section",3)(6,"nav",4),e.YNc(7,Ko,3,1,"ng-container",5),e.qZA(),e.YNc(8,Yo,7,4,"ng-container",5),e.qZA()(),e.TgZ(9,"tui-tabs",6),e.NdJ("activeItemIndexChange",function(i){return t.activeItemIndex=i}),e.TgZ(10,"button",7),e._UZ(11,"tui-svg",8),e._uU(12," Approval Workflow "),e.qZA(),e.TgZ(13,"button",7),e._UZ(14,"tui-svg",9),e._uU(15," Modify Workflow "),e.qZA()(),e.YNc(16,Wo,6,2,"div",10),e.YNc(17,ni,7,6,"ng-container",11),e.TgZ(18,"div",12)(19,"button",13),e.NdJ("click",function(){return t.editSubmission()}),e.ALo(20,"async"),e._uU(21," Update Submission "),e.qZA(),e.TgZ(22,"button",14),e.NdJ("click",function(){return t.editSubmission(4)}),e.ALo(23,"async"),e._uU(24," Save as Draft "),e.qZA(),e.TgZ(25,"button",15),e.NdJ("click",function(){return t.cancelSubmission()}),e._uU(26," Cancel "),e.qZA()(),e.TgZ(27,"section",16)(28,"p",17),e._uU(29,"Approval Logs"),e.qZA(),e.TgZ(30,"div",18)(31,"div",19)(32,"tui-island",20),e.YNc(33,oi,3,0,"ng-container",11),e.YNc(34,ii,19,11,"ng-container",5),e.qZA()()()()(),e.YNc(35,si,13,2,"ng-template",null,21,e.W1O),e.YNc(37,ai,16,0,"ng-template",null,22,e.W1O)),2&n&&(e.xp6(7),e.Q6J("ngForOf",t.formTabs),e.xp6(1),e.Q6J("ngForOf",t.forms),e.xp6(1),e.Q6J("activeItemIndex",t.activeItemIndex),e.xp6(7),e.Q6J("ngIf",1==t.activeItemIndex),e.xp6(1),e.Q6J("ngIf",0==t.activeItemIndex),e.xp6(2),e.Q6J("showLoader",e.lcZ(20,9,t.creatingSubmission)),e.xp6(3),e.Q6J("showLoader",e.lcZ(23,11,t.draftingSubmission)),e.xp6(11),e.Q6J("ngIf",0==(null==t.approvalLogs?null:t.approvalLogs.length)),e.xp6(1),e.Q6J("ngForOf",t.approvalLogs))},dependencies:[o.mk,o.sg,o.O5,pe.G,Se.xT,I.eC,Ie.gX,c.YN,c.Kr,c.EJ,c.JJ,c.JL,c.oH,c.sg,c.u,c.x0,c.CE,we.v0,Be.k4,Qe.e,F.H9,F.p_,F.uW,F.yu,Ho.w,Xe.h,He.VF,He.EB,Ve.r,se.V,ue.PZ,Je.w,$e.PN,o.Ov,o.uU]});const li=[{path:"",component:R,resolve:{breadcrumb:Ze},children:[{path:":name",component:Fe,canActivate:[yn.v]},{path:"add-module/:id",component:Oe,data:{breadcrumb:"Add App"}},{path:"edit-module/:id",component:Ue,data:{breadcrumb:"Edit App"}},{path:"edit-submission/:id",component:Pe,data:{breadcrumb:"Edit Submission"}},{path:":name",data:{preload:!0},loadChildren:()=>l.e(338).then(l.bind(l,41338)).then(r=>r.WorkflowsModule)},{path:"",component:R}]}];class ke{}ke.\u0275fac=function(n){return new(n||ke)},ke.\u0275mod=e.oAB({type:ke}),ke.\u0275inj=e.cJS({imports:[u.Bz.forChild(li),u.Bz]});var ui=l(14375),ci=l(8089),di=l(6110),mi=l(55314);class Ee{}Ee.\u0275fac=function(n){return new(n||Ee)},Ee.\u0275mod=e.oAB({type:Ee}),Ee.\u0275inj=e.cJS({imports:[o.ez,ke,pe.G,Q.c,Ye.x,ui.N,B.Qf,Se.cn,I.zX,ie.lm,X.Jy,c.UX,c.u5,we.fN,Be.XI,h,di.z,Qe.e,F.$$,Xe.y,He.Xj,Ve.i,ze.V5,se.f,ue.cB,mi.X,Je.Q,ci.go,Le.dS,Me,$e.EI,ue.cB,Ie.pc,Te.s,qe.nm]})},55314:(he,ce,l)=>{l.d(ce,{X:()=>e});var o=l(88692),u=l(64537);function d(R,c){1&R&&(u.ynx(0),u.TgZ(1,"tr",12)(2,"td",13),u._UZ(3,"span",14),u.qZA(),u.TgZ(4,"td",13),u._UZ(5,"span",14)(6,"br")(7,"span",15),u.qZA(),u.TgZ(8,"td",13),u._UZ(9,"span",14),u.qZA(),u.TgZ(10,"td",13),u._UZ(11,"span",14),u.qZA(),u.TgZ(12,"td",13),u._UZ(13,"span",16)(14,"br")(15,"span",15),u.qZA(),u.TgZ(16,"td",13),u._UZ(17,"span",17),u.qZA()(),u.BQk())}class e{constructor(){this.Arr=Array,this.num=6}}e.\u0275fac=function(c){return new(c||e)},e.\u0275cmp=u.Xpm({type:e,selectors:[["app-table-loader"]],standalone:!0,features:[u.jDz],decls:25,vars:1,consts:[["role","status",1,"w-full","animate-pulse","flex","justify-between"],[1,"my-4"],[1,"h-3","bg-gray-200","rounded-full","w-48","mb-4"],[1,"h-3","bg-gray-200","rounded-full","w-[360px]","my-2.5"],[1,"sr-only"],[1,"h-10","bg-gray-200","rounded-md","w-32","mt-8"],[1,"rounded-lg","shadow-lg"],[1,"w-full","mt-10"],[1,"text-center","border-b-2","border-gray-300","border-dotted","bg-[#eae4d8]"],[1,"py-2"],[1,"inline-block","py-1","mt-2","mb-2","bg-gray-300","border-2","rounded-sm","px-14"],[4,"ngFor","ngForOf"],[1,"z-50","h-16","text-center","bg-white","border-b-2","border-gray-300","border-dotted","rounded-lg","animate-pulse"],[1,"shadow-lg"],[1,"z-50","inline-block","px-16","py-2","mt-2","mb-2","bg-gray-300","rounded-sm"],[1,"z-50","inline-block","px-10","py-1","mt-1","mb-1","bg-gray-300","rounded-sm"],[1,"z-50","inline-block","px-16","py-2","mt-1","mb-1","bg-gray-300","rounded-sm"],[1,"z-50","inline-block","px-12","py-4","mt-2","mb-2","bg-gray-300","rounded-2xl"]],template:function(c,L){1&c&&(u.TgZ(0,"div",0)(1,"div",1),u._UZ(2,"div",2)(3,"div",2)(4,"div",3),u.TgZ(5,"span",4),u._uU(6,"Loading..."),u.qZA()(),u.TgZ(7,"div",1),u._UZ(8,"div",5),u.qZA()(),u.TgZ(9,"div",6)(10,"table",7)(11,"thead",8)(12,"th",9),u._UZ(13,"span",10),u.qZA(),u.TgZ(14,"th",9),u._UZ(15,"span",10),u.qZA(),u.TgZ(16,"th",9),u._UZ(17,"span",10),u.qZA(),u.TgZ(18,"th",9),u._UZ(19,"span",10),u.qZA(),u.TgZ(20,"th",9),u._UZ(21,"span",10),u.qZA(),u.TgZ(22,"th",9),u._UZ(23,"span",10),u.qZA()(),u.YNc(24,d,18,0,"ng-container",11),u.qZA()()),2&c&&(u.xp6(24),u.Q6J("ngForOf",L.Arr(L.num).fill(1)))},dependencies:[o.ez,o.sg],changeDetection:0})},6110:(he,ce,l)=>{l.d(ce,{z:()=>pe});var o=l(64537),u=l(88692),d=l(85600),e=l(12628),R=l(8089),c=l(441),L=l(88024),D=l(21673),K=l(38023),P=l(54121),y=l(83151),V=l(42147),Y=l(13528),z=l(20092),ae=l(85640);function oe(Q,B){if(1&Q&&(o.TgZ(0,"div",7)(1,"tui-input",10)(2,"p",11),o._uU(3,"Search here..."),o.qZA(),o._UZ(4,"input",12),o.qZA()()),2&Q){const I=o.oxw(2);o.xp6(1),o.Q6J("formControl",I.searchValue)("tuiTextfieldCleaner",!0)}}function de(Q,B){if(1&Q){const I=o.EpF();o.TgZ(0,"li",16),o.NdJ("click",function(){o.CHM(I);const X=o.oxw(2),j=X.index,O=X.$implicit,re=o.oxw(2);return o.KtG(re.setFilterAndApplyActive({index:j,sortType:O.name,applyOn:re.filterBy}))}),o.TgZ(1,"div",17)(2,"span"),o._uU(3),o.qZA(),o._UZ(4,"i",18),o.qZA()()}if(2&Q){const I=o.oxw(2).$implicit;o.Q6J("ngClass","active"===I.status?"bg-blue-100 hover:bg-blue-100":"bg-white hover:bg-gray-100"),o.xp6(3),o.Oqu(I.name),o.xp6(1),o.Q6J("ngClass",I.icon)}}function H(Q,B){if(1&Q&&(o.ynx(0),o.YNc(1,de,5,3,"li",15),o.BQk()),2&Q){const I=o.oxw(3);o.xp6(1),o.Q6J("ngIf",1==I.showSortCategories)}}function k(Q,B){if(1&Q){const I=o.EpF();o.TgZ(0,"li",16),o.NdJ("click",function(){o.CHM(I);const X=o.oxw(),j=X.index,O=X.$implicit,re=o.oxw(2);return o.KtG(re.setFilterAndApplyActive({index:j,sortType:O.name,applyOn:re.filterBy}))}),o.TgZ(1,"div",17)(2,"span"),o._uU(3),o.qZA(),o._UZ(4,"i",18),o.qZA()()}if(2&Q){const I=o.oxw().$implicit;o.Q6J("ngClass","active"===I.status?"bg-blue-100 hover:bg-blue-100":"bg-white hover:bg-gray-100"),o.xp6(3),o.Oqu(I.name),o.xp6(1),o.Q6J("ngClass",I.icon)}}function E(Q,B){if(1&Q&&(o.ynx(0),o.YNc(1,H,2,1,"ng-container",13),o.YNc(2,k,5,3,"ng-template",null,14,o.W1O),o.BQk()),2&Q){const I=B.$implicit,ie=o.MAs(3);o.xp6(1),o.Q6J("ngIf","Sort by Ascending"==(null==I?null:I.name)||"Sort by Descending"==(null==I?null:I.name))("ngIfElse",ie)}}function J(Q,B){if(1&Q){const I=o.EpF();o.TgZ(0,"div",19)(1,"a",20),o.NdJ("click",function(){o.CHM(I);const X=o.oxw(2);return o.KtG(X.resetFilterValue())}),o._uU(2,"Reset Filters"),o.qZA()()}}function W(Q,B){if(1&Q&&(o.TgZ(0,"div",4)(1,"h4",5),o._uU(2),o.qZA(),o.YNc(3,oe,5,2,"div",6),o.TgZ(4,"ul",7),o.YNc(5,E,4,2,"ng-container",8),o.qZA(),o.YNc(6,J,3,0,"div",9),o.qZA()),2&Q){const I=o.oxw();o.xp6(2),o.hij("Filter by ",I.filterBy,""),o.xp6(1),o.Q6J("ngIf",1==I.searchEnabled),o.xp6(2),o.Q6J("ngForOf",I.items)("ngForTrackBy",I.trackByFn),o.xp6(1),o.Q6J("ngIf",!0===I.isFilterApplied)}}function me(Q,B){if(1&Q&&(o.TgZ(0,"p"),o._uU(1),o.qZA()),2&Q){const I=o.oxw();o.xp6(1),o.Oqu(I.isFilterApplied?"This filter is currently active":"Apply filters")}}class pe{constructor(){this.open=!1,this.destroy$=new K.x,this.searchEnabled=!0,this.showSortCategories=!0,this.disabled=!1,this.applyStatus=new o.vpe,this.resetFilters=new o.vpe,this.sendSearchToTable=new o.vpe,this.isFilterApplied=!1,this.previousFilterValues=new P.X([]),this.searchValue=new z.NI,this.searchValue.valueChanges.pipe((0,y.b)(400),(0,V.x)(),(0,Y.R)(this.destroy$)).subscribe(B=>{this.sendSearchToTable.emit(B||null)})}searchTableData(B,I){this.sendSearchToTable.emit({search:B,searchBy:I}),this.isFilterApplied=!0}setFilterAndApplyActive(B){1!=this.disabled&&(this.applyStatus.emit(B),this.items?.some(I=>I.name===B.sortType)&&(this.items.forEach(I=>{I.status=B.sortType===I.name?"active":"idle"}),this.isFilterApplied=!0))}areArraysEqual(B,I){if(B.length!==I.length)return!1;const ie=B.slice().sort((j,O)=>j.id-O.id),X=I.slice().sort((j,O)=>j.id-O.id);for(let j=0;j<ie.length;j++){const O=ie[j],re=X[j];for(let $ in O)if(O[$]!==re[$])return!1}return!0}resetFilterValue(){this.isFilterApplied=!1,this.items.forEach(B=>B.status="idle"),this.resetFilters.emit("reset")}trackByFn(B,I){return I}ngOnDestroy(){this.destroy$.complete(),this.destroy$.unsubscribe()}}pe.\u0275fac=function(B){return new(B||pe)},pe.\u0275cmp=o.Xpm({type:pe,selectors:[["filter"]],inputs:{items:"items",searchEnabled:"searchEnabled",showSortCategories:"showSortCategories",filterBy:"filterBy",disabled:"disabled"},outputs:{applyStatus:"applyStatus",resetFilters:"resetFilters",sendSearchToTable:"sendSearchToTable"},standalone:!0,features:[o.jDz],decls:6,vars:4,consts:[[3,"content","open","openChange"],["tuiIconButton","","tuiHintDirection","right","size","xs","icon","tuiIconFilter",3,"tuiHint","appearance"],["dropdown",""],["tooltip",""],[1,"px-5","py-3","w-80"],[1,"text-sm","font-semibold","my-3"],["class","my-3",4,"ngIf"],[1,"my-3"],[4,"ngFor","ngForOf","ngForTrackBy"],["class","cursor-pointer mt-5 mb-3 text-center",4,"ngIf"],["tuiTextfieldIconLeft","tuiIconSearchLarge",1,"w-full",3,"formControl","tuiTextfieldCleaner"],[1,"mt-2"],["tuiTextfield","","placeholder","Type to start searching..."],[4,"ngIf","ngIfElse"],["otherFilter",""],["class","px-2 py-3 my-1 text-sm rounded-lg cursor-pointer",3,"ngClass","click",4,"ngIf"],[1,"px-2","py-3","my-1","text-sm","rounded-lg","cursor-pointer",3,"ngClass","click"],[1,"flex","justify-between"],["aria-hidden","true",3,"ngClass"],[1,"cursor-pointer","mt-5","mb-3","text-center"],[1,"px-3","py-2","rounded-md","bg-[#ac2224]","text-white","text-sm","no-underline","hover:text-white",3,"click"]],template:function(B,I){if(1&B&&(o.TgZ(0,"tui-hosted-dropdown",0),o.NdJ("openChange",function(X){return I.open=X}),o._UZ(1,"button",1),o.YNc(2,W,7,5,"ng-template",null,2,o.W1O),o.qZA(),o.YNc(4,me,2,1,"ng-template",null,3,o.W1O)),2&B){const ie=o.MAs(3),X=o.MAs(5);o.Q6J("content",ie)("open",I.open),o.xp6(1),o.Q6J("tuiHint",X)("appearance",I.isFilterApplied?"primary":"secondary")}},dependencies:[u.ez,u.mk,u.sg,u.O5,d.jh,d.o1,e.fN,e.v0,L.zX,D.Qf,D.K3,D.wU,ae.MB,R.go,R.D,R.xn,R.t6,R.DM,z.UX,z.JJ,z.oH,c.cn,c.be,c.aR],changeDetection:0})},14375:(he,ce,l)=>{l.d(ce,{N:()=>y});var o=l(64537),u=l(88692),d=l(21673),e=l(20092),R=l(38023),c=l(83151),L=l(42147),D=l(13528),K=l(441),P=l(85640);class y{constructor(){this.searchValue=new e.NI,this.destroy$=new R.x,this.searchStr=new o.vpe,this.searchValue.valueChanges.pipe((0,c.b)(400),(0,L.x)(),(0,D.R)(this.destroy$)).subscribe(Y=>{this.searchStr.emit(Y||null)})}ngOnDestroy(){this.destroy$.complete(),this.destroy$.unsubscribe()}}y.\u0275fac=function(Y){return new(Y||y)},y.\u0275cmp=o.Xpm({type:y,selectors:[["app-search-bar"]],outputs:{searchStr:"searchStr"},standalone:!0,features:[o.jDz],decls:4,vars:2,consts:[["tuiTextfieldIconLeft","tuiIconSearchLarge",1,"shadow-md",3,"formControl","tuiTextfieldCleaner"],[1,"mt-2"],["tuiTextfield","","placeholder","Type to start searching..."]],template:function(Y,z){1&Y&&(o.TgZ(0,"tui-input",0)(1,"p",1),o._uU(2,"Search by app title"),o.qZA(),o._UZ(3,"input",2),o.qZA()),2&Y&&o.Q6J("formControl",z.searchValue)("tuiTextfieldCleaner",!0)},dependencies:[u.ez,d.Qf,d.K3,d.wU,P.MB,e.UX,e.JJ,e.oH,e.u5,K.cn,K.be,K.aR],changeDetection:0})},69952:(he,ce,l)=>{l.d(ce,{x:()=>ye});var o=l(64537),u=l(88692),d=l(14375),e=l(94032),R=l(48011),c=l(88070),L=l(40719),D=l(12628),K=l(8089),P=l(1515),y=l(20707),V=l(4266),Y=l(38023),z=l(54121),ae=l(13528),oe=l(23378),de=l(46954),H=l(20696),k=l(13916);const E=["preview"];function J(S,v){if(1&S){const m=o.EpF();o.TgZ(0,"app-search-bar",9),o.NdJ("searchStr",function(g){o.CHM(m);const T=o.oxw();return o.KtG(T.sendSearchValue(g))}),o.qZA()}}const W=function(S){return["/modules/add-module",S]};function me(S,v){if(1&S&&(o.TgZ(0,"a",13),o._uU(1,"+ Add app "),o.qZA()),2&S){const m=o.oxw(2);o.Q6J("routerLink",o.VKq(1,W,m.moduleId))}}function pe(S,v){if(1&S&&(o.TgZ(0,"span",14),o.ALo(1,"async"),o._uU(2," You can add new apps by clicking on this button "),o.qZA()),2&S){const m=o.oxw(2);o.Q6J("ngClass",0==(null==m.tableData||null==m.tableData.results?null:m.tableData.results.length)&&0==o.lcZ(1,1,m.showEmptyMessage)?"visible":"invisible")}}function Q(S,v){if(1&S&&(o.ynx(0),o.TgZ(1,"div",10),o.YNc(2,me,2,3,"a",11),o.YNc(3,pe,3,3,"span",12),o.qZA(),o.BQk()),2&S){const m=v.ngIf,M=o.oxw();o.xp6(2),o.Q6J("ngIf",M.currentUser.id==(null==m?null:m.createdBy)||M.checkIfUserisAdmin(null==m?null:m.adminUsers)||1==M.userRoleCheck),o.xp6(1),o.Q6J("ngIf",M.currentUser.id==(null==m?null:m.createdBy)||M.checkIfUserisAdmin(null==m?null:m.adminUsers)||1==M.userRoleCheck)}}function B(S,v){1&S&&(o.ynx(0),o._UZ(1,"p"),o.BQk())}const I=function(S){return["/modules/edit-module",S]};function ie(S,v){if(1&S){const m=o.EpF();o.TgZ(0,"a",35),o.NdJ("click",function(){o.CHM(m);const g=o.oxw(3).$implicit,T=o.oxw(2);return o.KtG(T.setEditSlug(null==g?null:g.code,null==g?null:g.id,null==g?null:g.title))}),o._UZ(1,"i",36),o.qZA()}if(2&S){const m=o.oxw(3).$implicit;o.Q6J("routerLink",o.VKq(1,I,null==m?null:m.id))}}function X(S,v){if(1&S){const m=o.EpF();o.TgZ(0,"a",37),o.NdJ("click",function(){o.CHM(m);const g=o.oxw(3).$implicit,T=o.oxw(2),N=o.MAs(10);return o.KtG(T.showDialog(null==g?null:g.id,N))}),o._UZ(1,"i",38),o.qZA()}}function j(S,v){if(1&S){const m=o.EpF();o.TgZ(0,"div",19)(1,"div",20),o.NdJ("click",function(){o.CHM(m);const g=o.oxw(2).$implicit,T=o.oxw(2);return o.KtG(T.setSubmoduleSlug(null==g?null:g.code,null==g?null:g.id))}),o.TgZ(2,"div",21),o._UZ(3,"img",22),o.qZA(),o.TgZ(4,"div",23)(5,"h3",24),o._uU(6),o.qZA(),o.TgZ(7,"p",25),o._uU(8),o.qZA()()(),o.TgZ(9,"div",26)(10,"div"),o.YNc(11,ie,2,3,"a",27),o.YNc(12,X,2,0,"a",28),o.qZA(),o.TgZ(13,"div",29)(14,"a",30),o.NdJ("mouseenter",function(){o.CHM(m);const g=o.oxw(2).$implicit,T=o.oxw(2);return o.KtG(T.setHintDataTool(g))}),o._UZ(15,"tui-badge",31)(16,"i",32),o.qZA(),o.TgZ(17,"a",33),o.NdJ("mouseenter",function(){o.CHM(m);const g=o.oxw(2).$implicit,T=o.oxw(2);return o.KtG(T.setHintDataTool(g))}),o._UZ(18,"tui-badge",31)(19,"i",34),o.qZA()()()()}if(2&S){const m=o.oxw(2).$implicit,M=o.oxw(2),g=o.MAs(12),T=o.MAs(14);let N,x;o.xp6(3),o.Q6J("src",null==m?null:m.image,o.LSH),o.xp6(2),o.Q6J("title",null==m?null:m.title),o.xp6(1),o.hij(" ",null==m?null:m.title," "),o.xp6(1),o.Q6J("title",null==m?null:m.description),o.xp6(1),o.Oqu(null==m?null:m.description),o.xp6(3),o.Q6J("ngIf",(null==M.currentUser?null:M.currentUser.id)==(null==m?null:m.createdBy)||1==M.userRoleCheck||M.checkIfUserisAdmin(null==m?null:m.adminUsers)),o.xp6(1),o.Q6J("ngIf",(null==M.currentUser?null:M.currentUser.id)==(null==m?null:m.createdBy)||1==M.userRoleCheck&&0==M.checkIfUserisViewOnly(null==m?null:m.viewOnlyUsers)||M.checkIfUserisAdmin(null==m?null:m.adminUsers)),o.xp6(2),o.Q6J("tuiHintAppearance","success")("tuiHint",g),o.xp6(1),o.Q6J("value",null==(N=M.setHintData(m))||null==N.stats?null:N.stats.completedCount),o.xp6(2),o.Q6J("tuiHint",T),o.xp6(1),o.Q6J("value",null==(x=M.setHintData(m))||null==x.stats?null:x.stats.inProgressCount)}}function O(S,v){if(1&S&&(o.ynx(0),o.YNc(1,j,20,12,"div",18),o.BQk()),2&S){const m=o.oxw().$implicit,M=o.oxw(2);o.xp6(1),o.Q6J("ngIf",3!==(null==m?null:m.status)&&1==M.checkAccessMain(m))}}function re(S,v){1&S&&(o.ynx(0),o._UZ(1,"tui-badge",44),o.BQk())}function $(S,v){if(1&S){const m=o.EpF();o.TgZ(0,"a",35),o.NdJ("click",function(){o.CHM(m);const g=o.oxw(3).$implicit,T=o.oxw(2);return o.KtG(T.setEditSlug(null==g?null:g.code,null==g?null:g.id,null==g?null:g.title))}),o._UZ(1,"i",36),o.qZA()}if(2&S){const m=o.oxw(3).$implicit;o.Q6J("routerLink",o.VKq(1,I,null==m?null:m.id))}}function le(S,v){if(1&S){const m=o.EpF();o.TgZ(0,"a",37),o.NdJ("click",function(){o.CHM(m);const g=o.oxw(3).$implicit,T=o.oxw(2),N=o.MAs(10);return o.KtG(T.showDialog(null==g?null:g.id,N))}),o._UZ(1,"i",38),o.qZA()}}function w(S,v){if(1&S){const m=o.EpF();o.ynx(0),o.TgZ(1,"div",39)(2,"div",40),o.NdJ("click",function(){o.CHM(m);const g=o.oxw(2).$implicit,T=o.oxw(2);return o.KtG(3!==(null==g?null:g.status)?T.setSubmoduleSlug(null==g?null:g.code,null==g?null:g.id):"")}),o.TgZ(3,"div",21),o._UZ(4,"img",22),o.qZA(),o.TgZ(5,"div",23)(6,"h3",41),o._uU(7),o.YNc(8,re,2,0,"ng-container",2),o.qZA(),o.TgZ(9,"p",42),o._uU(10),o.qZA()()(),o.TgZ(11,"div",43),o.YNc(12,$,2,3,"a",27),o.YNc(13,le,2,0,"a",28),o.qZA()(),o.BQk()}if(2&S){const m=o.oxw(2).$implicit,M=o.oxw(2);o.xp6(4),o.Q6J("src",null==m?null:m.image,o.LSH),o.xp6(2),o.Q6J("title",null==m?null:m.title),o.xp6(1),o.hij(" ",null==m?null:m.title," "),o.xp6(1),o.Q6J("ngIf",3===(null==m?null:m.status)),o.xp6(1),o.Q6J("title",null==m?null:m.description),o.xp6(1),o.Oqu(null==m?null:m.description),o.xp6(2),o.Q6J("ngIf",(null==M.currentUser?null:M.currentUser.id)==(null==m?null:m.createdBy)),o.xp6(1),o.Q6J("ngIf",(null==M.currentUser?null:M.currentUser.id)==(null==m?null:m.createdBy))}}function te(S,v){if(1&S&&(o.ynx(0),o.YNc(1,w,14,8,"ng-container",2),o.BQk()),2&S){const m=o.oxw().$implicit,M=o.oxw(2);o.xp6(1),o.Q6J("ngIf",(null==M.currentUser?null:M.currentUser.id)==(null==m?null:m.createdBy)||1==M.checkAccessMain(m))}}function C(S,v){if(1&S&&(o.ynx(0),o.YNc(1,O,2,1,"ng-container",2),o.YNc(2,te,2,1,"ng-container",2),o.BQk()),2&S){const m=v.$implicit;o.xp6(1),o.Q6J("ngIf",3!==(null==m?null:m.status)),o.xp6(1),o.Q6J("ngIf",3==(null==m?null:m.status))}}function q(S,v){if(1&S){const m=o.EpF();o.TgZ(0,"div",45)(1,"tui-pagination",46),o.NdJ("indexChange",function(g){o.CHM(m);const T=o.oxw(2);return o.KtG(T.goToPage(g))}),o.qZA()()}if(2&S){const m=o.oxw(2);o.xp6(1),o.Q6J("length",(null==m.tableData?null:m.tableData.totalPages)||1)("index",(null==m.tableData?null:m.tableData.page)-1||0)}}function ee(S,v){if(1&S&&(o.TgZ(0,"section",15),o.YNc(1,C,3,2,"ng-container",16),o.qZA(),o.YNc(2,q,2,2,"div",17)),2&S){const m=o.oxw();o.xp6(1),o.Q6J("ngForOf",null==m.tableData?null:m.tableData.results),o.xp6(1),o.Q6J("ngIf",(null==m.tableData||null==m.tableData.results?null:m.tableData.results.length)>0&&1==m.checkAccessPagination())}}function _e(S,v){if(1&S){const m=o.EpF();o.TgZ(0,"p",47),o._uU(1,"Delete App"),o.qZA(),o.TgZ(2,"p",48),o._uU(3,"Are you sure you want to delete this app?"),o.qZA(),o.TgZ(4,"div",49)(5,"button",50),o.NdJ("click",function(){const T=o.CHM(m).$implicit;return o.oxw().deleteModule(),o.KtG(T.complete())}),o._uU(6," Confirm "),o.qZA(),o.TgZ(7,"button",51),o.NdJ("click",function(){const T=o.CHM(m).$implicit;return o.KtG(T.complete())}),o._uU(8," Cancel "),o.qZA()()}}function fe(S,v){if(1&S&&(o.TgZ(0,"strong",52),o._uU(1),o.qZA()),2&S){const m=o.oxw();o.xp6(1),o.hij("Completed Submissions: \xa0 ",(null==m.hintData||null==m.hintData.stats?null:m.hintData.stats.completedCount)||0,"")}}function xe(S,v){if(1&S&&(o.TgZ(0,"strong",52),o._uU(1),o.qZA()),2&S){const m=o.oxw();o.xp6(1),o.hij("In Progress Submissions: \xa0 ",(null==m.hintData||null==m.hintData.stats?null:m.hintData.stats.inProgressCount)||0,"")}}class ye{constructor(v,m,M,g,T,N,x){this.activatedRoute=v,this.dialogs=m,this.dashboardService=M,this.transport=g,this.auth=T,this.router=N,this.previewDialogService=x,this.tableColumns=["Title","Company Name","Status"],this.tableData=[],this.fetchingTableData=new Y.x,this.filterMenuCompany=[{name:"Sort by Acsending",status:"idle",icon:"fa fa-sort-alpha-asc fa-lg",sortBy:"Company Name"},{name:"Sort by Descending",status:"idle",icon:"fa fa-sort-alpha-desc fa-lg",sortBy:"Company Name"},{name:"Sort by Latest",status:"idle",icon:"fa fa-calendar-check-o fa-lg",sortBy:"Company Name"},{name:"Sort by Oldest",status:"idle",icon:"fa fa-calendar-times-o fa-lg",sortBy:"Company Name"}],this.filterMenuSubmodule=[{name:"Sort by Acsending",status:"idle",icon:"fa fa-sort-alpha-asc fa-lg",sortBy:"Submodule Code"},{name:"Sort by Descending",status:"idle",icon:"fa fa-sort-alpha-desc fa-lg",sortBy:"Submodule Code"},{name:"Sort by Latest",status:"idle",icon:"fa fa-calendar-check-o fa-lg",sortBy:"Submodule Code"},{name:"Sort by Oldest",status:"idle",icon:"fa fa-calendar-times-o fa-lg",sortBy:"Submodule Code"}],this.filterMenuModule=[{name:"Sort by Acsending",status:"idle",icon:"fa fa-sort-alpha-asc fa-lg"},{name:"Sort by Descending",status:"idle",icon:"fa fa-sort-alpha-desc fa-lg"},{name:"Sort by Latest",status:"idle",icon:"fa fa-calendar-check-o fa-lg"},{name:"Sort by Oldest",status:"idle",icon:"fa fa-calendar-times-o fa-lg"}],this.statusMenu=[{name:"Draft",status:"idle",icon:""},{name:"Published",status:"idle",icon:""}],this.page=1,this.destroy$=new Y.x,this.isFilterApplied=!1,this.showEmptyMessage=new z.X(!1),this.emitDeleteEvent=new o.vpe,this.emitPagination=new o.vpe,this.emitFilters=new o.vpe,this.emitSearch=new o.vpe,this.emitPageChange=new o.vpe,this.currentUser=this.auth.currentUserValue,this.userRoleCheck=this.auth.checkIfRolesExist("sysAdmin"),this.activatedRoute.queryParams.subscribe(Z=>this.moduleId=Z.moduleID),this.activatedRoute.params.subscribe(Z=>{this.transport.moduleCode.next(Z.name),this.moduleCode=Z.name})}setHintData(v){return v}setHintDataTool(v){this.hintData=v}showDialog(v,m){v&&(this.submoduleID=v,this.dialogs.open(m).subscribe())}deleteModule(){this.dashboardService.deleteSubModule(this.submoduleID).subscribe(v=>{this.emitDeleteEvent.emit(!0)})}showImage(v){this.currentImg=v,this.previewDialogService.open(this.preview).pipe((0,ae.R)(this.destroy$)).subscribe()}checkAccessMain(v){return!(0==this.userRoleCheck&&"disabled"==v?.accessType&&!v.authorizedUsers.includes(this.currentUser.id))}checkAccessPagination(){return this.tableData?.results.some(v=>this.checkAccessMain(v))}showStatus(v){return 1==v?"Published":3==v?"Draft":"Deleted"}splitURL(v){return v.split("/").at(-1)}checkIfUserisViewOnly(v){return v.includes(this.currentUser?.id)}checkIfUserisAdmin(v){return v?.includes(this.currentUser?.id)}goToPage(v){this.page=v+1,this.emitPagination.emit(this.page)}floorNumber(v){return Math.round(v)}getSortType(v){return"Sort by Latest"==v?.sortType?"latest":"Sort by Oldest"==v?.sortType?"oldest":"Sort by Descending"==v?.sortType?"desc":"asc"}sendFilters(v){if(v){this.fetchingTableData.next(!0);const m={field:"Submodule Code"==v?.applyOn?"subModuleCode":"companyName",sortByTime:1==["latest","oldest"].includes(this.getSortType(v))?this.getSortType(v):void 0,sortBy:1==["asc","desc"].includes(this.getSortType(v))?this.getSortType(v):void 0};null==m.sortBy&&delete m.sortBy,null==m.sortByTime&&delete m.sortByTime,this.dashboardService.getSubModuleByModuleSlug((0,V.rV)(V.MX.moduleSlug),7,this.page,m).pipe((0,ae.R)(this.destroy$)).subscribe(M=>{this.tableData=M,this.fetchingTableData.next(!1)})}}checkAccess(v){return!("disabled"==v?.accessType&&!v?.allUsers?.includes(this.currentUser?.id))}sendSearchValue(v){this.fetchingTableData.next(!0);const m={field:"subModuleTitle",search:v};null==m.search&&delete m.search,this.dashboardService.getSubModuleByModuleSlug((0,V.rV)(V.MX.moduleSlug),7,this.page,m).pipe((0,ae.R)(this.destroy$)).subscribe(M=>{0==M?.results?.length&&this.showEmptyMessage.next(!0),v||this.showEmptyMessage.next(!1),this.tableData=M,this.fetchingTableData.next(!1)})}resetFilterValues(v){this.fetchingTableData.next(!0),v&&this.dashboardService.getSubModuleByModuleSlug((0,V.rV)(V.MX.moduleSlug),7,this.page).pipe((0,ae.R)(this.destroy$)).subscribe(m=>{this.tableData=m,this.fetchingTableData.next(!1)})}setSubmoduleSlug(v,m){(0,V.LS)(V.MX.moduleSlug,v),(0,V.LS)(V.MX.moduleID,m),this.emitPageChange.emit({code:v,id:m}),this.router.navigate(["/modules",v],{queryParams:{moduleID:m||""}})}setEditSlug(v,m,M){(0,V.LS)(V.MX.editmoduleSlug,v),(0,V.LS)(V.MX.editmoduleTitle,M),(0,V.LS)(V.MX.editmoduleId,m)}ngOnDestroy(){this.destroy$.complete(),this.destroy$.unsubscribe()}}ye.\u0275fac=function(v){return new(v||ye)(o.Y36(e.gz),o.Y36(y.RO),o.Y36(de.s),o.Y36(H.R),o.Y36(k.e),o.Y36(e.F0),o.Y36(oe.iK))},ye.\u0275cmp=o.Xpm({type:ye,selectors:[["app-table-view"]],viewQuery:function(v,m){if(1&v&&o.Gf(E,5),2&v){let M;o.iGM(M=o.CRH())&&(m.preview=M.first)}},inputs:{tableColumns:"tableColumns",tableData:"tableData",moduleData:"moduleData"},outputs:{emitDeleteEvent:"emitDeleteEvent",emitPagination:"emitPagination",emitFilters:"emitFilters",emitSearch:"emitSearch",emitPageChange:"emitPageChange"},standalone:!0,features:[o._Bn([(0,K.pt)({icon:"tuiIconBookOpenLarge"})]),o.jDz],decls:15,vars:11,consts:[[1,"flex","mt-5","mb-2",3,"ngClass"],["class","md:w-1/3 w-1/2 mb-2",3,"searchStr",4,"ngIf"],[4,"ngIf"],["size","xl",3,"overlay","showLoader"],[4,"ngIf","ngIfElse"],["showSubModules",""],["template",""],["hint",""],["hint2",""],[1,"md:w-1/3","w-1/2","mb-2",3,"searchStr"],[1,"position-relative","mt-5","cursor-pointer"],["class","px-6 py-3 rounded-md bg-[#F15B41] text-white no-underline hover:text-white text-base hover:bg-opacity-90 hover:transition-colors",3,"routerLink",4,"ngIf"],["class","tooltiptext",3,"ngClass",4,"ngIf"],[1,"px-6","py-3","rounded-md","bg-[#F15B41]","text-white","no-underline","hover:text-white","text-base","hover:bg-opacity-90","hover:transition-colors",3,"routerLink"],[1,"tooltiptext",3,"ngClass"],[1,"grid","grid-cols-12","gap-4"],[4,"ngFor","ngForOf"],["class","py-6",4,"ngIf"],["class","bg-white rounded-md shadow-md h-auto drop-shadow-md flex flex-col border-t-4 border-t-[#F15B41] cursor-pointer lg:col-span-4 md:col-span-6 col-span-12",4,"ngIf"],[1,"bg-white","rounded-md","shadow-md","h-auto","drop-shadow-md","flex","flex-col","border-t-4","border-t-[#F15B41]","cursor-pointer","lg:col-span-4","md:col-span-6","col-span-12"],[1,"flex","pt-5","space-x-8","px-4","pb-3",3,"click"],[1,"flex","items-center","justify-center","border","border-gray-200","rounded-lg","w-[13rem]","h-[8rem]"],["alt","top_app_icon","loading","eager",1,"object-contain","w-full","h-full","rounded-lg",3,"src"],[1,"w-full","h-full"],[1,"mb-2","text-lg","font-semibold","line-clamp-2",3,"title"],[1,"leading-6","line-clamp-2",3,"title"],[1,"bg-gradient-to-r","from-orange-200","to-slate-200","h-8","w-full","flex","justify-between","items-center","rounded-br-md","rounded-bl-md","py-5","px-3"],["title","Edit","class","px-2 py-1 mx-2 text-white bg-blue-500 rounded-md cursor-pointer hover:text-white hover:bg-opacity-80 hover:transition-colors",3,"routerLink","click",4,"ngIf"],["title","Delete","class","px-2 py-1 text-white bg-red-600 rounded-md cursor-pointer hover:text-white hover:bg-opacity-80 hover:transition-colors",3,"click",4,"ngIf"],[1,"mr-5","lg:mr-0"],["tuiHintDirection","top",1,"text-white","lg:px-2","lg:py-1","lg:bg-green-500","cursor-pointer","hover:text-white","mr-2","relative","rounded-md",3,"tuiHintAppearance","tuiHint","mouseenter"],["status","custom","size","s",1,"absolute","-top-2","-right-2","bg-yellow-600",3,"value"],["aria-hidden","true",1,"fa","fa-check-circle","fa-lg","bg-green-500","lg:bg-transparent","p-1","lg:p-0","rounded-md"],["tuiHintDirection","top",1,"text-white","lg:px-2","lg:py-1","lg:bg-gray-500","cursor-pointer","hover:text-white","relative","rounded-md",3,"tuiHint","mouseenter"],["aria-hidden","true",1,"fa","fa-clock-o","fa-lg","bg-gray-500","lg:bg-transparent","p-1","lg:p-0","rounded-md"],["title","Edit",1,"px-2","py-1","mx-2","text-white","bg-blue-500","rounded-md","cursor-pointer","hover:text-white","hover:bg-opacity-80","hover:transition-colors",3,"routerLink","click"],["aria-hidden","true",1,"fa","fa-pencil-square-o","fa-lg"],["title","Delete",1,"px-2","py-1","text-white","bg-red-600","rounded-md","cursor-pointer","hover:text-white","hover:bg-opacity-80","hover:transition-colors",3,"click"],["aria-hidden","true",1,"fa","fa-trash","fa-lg"],[1,"bg-white","rounded-md","shadow-lg","h-auto","drop-shadow-lg","flex","flex-col","border-t-8","border-t-[#F15B41]","lg:col-span-4","md:col-span-6","col-span-12"],[1,"flex","px-4","pt-5","pb-3","space-x-8","mb-10",3,"click"],[1,"mb-2","text-lg","font-semibold","line-clamp-1",3,"title"],[1,"leading-6","line-clamp-4",3,"title"],[1,"flex","items-center","justify-center","w-full","h-8","py-5","bg-gradient-to-r","from-orange-200","to-slate-200","rounded-br-md","rounded-bl-md","fixed","bottom-0"],["status","primary","value","Draft","size","s",1,"tui-space_left-1"],[1,"py-6"],[3,"length","index","indexChange"],[1,"pb-2","text-xl","font-semibold","text-center","border-b","border-gray-400"],[1,"mt-4","text-base","font-medium","text-center"],[1,"flex","justify-center","mt-4"],["tuiButton","","appearance","primary","type","button","size","m",1,"mx-3",3,"click"],["tuiButton","","type","button","size","m","appearance","accent",3,"click"],[1,"text-base"]],template:function(v,m){if(1&v&&(o.TgZ(0,"div",0),o.YNc(1,J,1,0,"app-search-bar",1),o.YNc(2,Q,4,2,"ng-container",2),o.ALo(3,"async"),o.qZA(),o.TgZ(4,"tui-loader",3),o.ALo(5,"async"),o.YNc(6,B,2,0,"ng-container",4),o.YNc(7,ee,3,2,"ng-template",null,5,o.W1O),o.qZA(),o.YNc(9,_e,9,0,"ng-template",null,6,o.W1O),o.YNc(11,fe,2,1,"ng-template",null,7,o.W1O),o.YNc(13,xe,2,1,"ng-template",null,8,o.W1O)),2&v){const M=o.MAs(8);o.Q6J("ngClass",1==m.checkAccessPagination()?"justify-between":"justify-end"),o.xp6(1),o.Q6J("ngIf",(null==m.tableData||null==m.tableData.results?null:m.tableData.results.length)>0&&1==m.checkAccessPagination()),o.xp6(1),o.Q6J("ngIf",o.lcZ(3,7,m.moduleData)),o.xp6(2),o.Q6J("overlay",!0)("showLoader",o.lcZ(5,9,m.fetchingTableData)),o.xp6(2),o.Q6J("ngIf",0==(null==m.tableData||null==m.tableData.results?null:m.tableData.results.length))("ngIfElse",M)}},dependencies:[u.ez,u.mk,u.sg,u.O5,u.Ov,d.N,e.Bz,e.rH,R.i,R.r,L.dS,L.kM,D.fN,D.v0,c.f,c.g,K.go,K.D,K.xn,K.t6,K.DM,P.Q],styles:['.tooltiptext[_ngcontent-%COMP%]{width:170px;background-color:#6c86e2;color:#fff;text-align:center;border-radius:6px;padding:5px 2px;position:absolute;font-size:11px;z-index:1;top:-11px;right:110%}.tooltiptext[_ngcontent-%COMP%]:after{content:"";position:absolute;top:50%;left:100%;margin-top:-5px;border-width:5px;border-style:solid;border-color:transparent transparent transparent #6C86E2}'],changeDetection:0})},83715:(he,ce,l)=>{l.d(ce,{Yg:()=>v,u3:()=>M});var o=l(64537);function R(g){return Array.isArray(g)?g:[g]}var K=l(38023),P=l(15696),y=l(83729),V=l(87241),Y=l(65598),z=l(11588),ae=l(83151),oe=l(27969),de=l(51927),H=l(13528),k=l(88692);let E;try{E=typeof Intl<"u"&&Intl.v8BreakIterator}catch{E=!1}let J=(()=>{class g{constructor(N){this._platformId=N,this.isBrowser=this._platformId?(0,k.NF)(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!E)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return g.\u0275fac=function(N){return new(N||g)(o.LFG(o.Lbi))},g.\u0275prov=o.Yz7({token:g,factory:g.\u0275fac,providedIn:"root"}),g})();const _e=new Set;let fe,xe=(()=>{class g{constructor(N){this._platform=N,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):S}matchMedia(N){return(this._platform.WEBKIT||this._platform.BLINK)&&function ye(g){if(!_e.has(g))try{fe||(fe=document.createElement("style"),fe.setAttribute("type","text/css"),document.head.appendChild(fe)),fe.sheet&&(fe.sheet.insertRule(`@media ${g} {body{ }}`,0),_e.add(g))}catch(T){console.error(T)}}(N),this._matchMedia(N)}}return g.\u0275fac=function(N){return new(N||g)(o.LFG(J))},g.\u0275prov=o.Yz7({token:g,factory:g.\u0275fac,providedIn:"root"}),g})();function S(g){return{matches:"all"===g||""===g,media:g,addListener:()=>{},removeListener:()=>{}}}let v=(()=>{class g{constructor(N,x){this._mediaMatcher=N,this._zone=x,this._queries=new Map,this._destroySubject=new K.x}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(N){return m(R(N)).some(Z=>this._registerQuery(Z).mql.matches)}observe(N){const Z=m(R(N)).map(b=>this._registerQuery(b).observable);let _=(0,P.a)(Z);return _=(0,y.z)(_.pipe((0,Y.q)(1)),_.pipe((0,z.T)(1),(0,ae.b)(0))),_.pipe((0,oe.U)(b=>{const f={matches:!1,breakpoints:{}};return b.forEach(({matches:h,query:F})=>{f.matches=f.matches||h,f.breakpoints[F]=h}),f}))}_registerQuery(N){if(this._queries.has(N))return this._queries.get(N);const x=this._mediaMatcher.matchMedia(N),_={observable:new V.y(b=>{const f=h=>this._zone.run(()=>b.next(h));return x.addListener(f),()=>{x.removeListener(f)}}).pipe((0,de.O)(x),(0,oe.U)(({matches:b})=>({query:N,matches:b})),(0,H.R)(this._destroySubject)),mql:x};return this._queries.set(N,_),_}}return g.\u0275fac=function(N){return new(N||g)(o.LFG(xe),o.LFG(o.R0b))},g.\u0275prov=o.Yz7({token:g,factory:g.\u0275fac,providedIn:"root"}),g})();function m(g){return g.map(T=>T.split(",")).reduce((T,N)=>T.concat(N)).map(T=>T.trim())}const M={XSmall:"(max-width: 599.98px)",Small:"(min-width: 600px) and (max-width: 959.98px)",Medium:"(min-width: 960px) and (max-width: 1279.98px)",Large:"(min-width: 1280px) and (max-width: 1919.98px)",XLarge:"(min-width: 1920px)",Handset:"(max-width: 599.98px) and (orientation: portrait), (max-width: 959.98px) and (orientation: landscape)",Tablet:"(min-width: 600px) and (max-width: 839.98px) and (orientation: portrait), (min-width: 960px) and (max-width: 1279.98px) and (orientation: landscape)",Web:"(min-width: 840px) and (orientation: portrait), (min-width: 1280px) and (orientation: landscape)",HandsetPortrait:"(max-width: 599.98px) and (orientation: portrait)",TabletPortrait:"(min-width: 600px) and (max-width: 839.98px) and (orientation: portrait)",WebPortrait:"(min-width: 840px) and (orientation: portrait)",HandsetLandscape:"(max-width: 959.98px) and (orientation: landscape)",TabletLandscape:"(min-width: 960px) and (max-width: 1279.98px) and (orientation: landscape)",WebLandscape:"(min-width: 1280px) and (orientation: landscape)"}}}]);