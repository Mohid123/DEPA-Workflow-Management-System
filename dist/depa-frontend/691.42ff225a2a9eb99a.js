"use strict";(self.webpackChunkDEPA_FRONTEND=self.webpackChunkDEPA_FRONTEND||[]).push([[691],{12691:(Pi,ct,l)=>{l.r(ct),l.d(ct,{DashboardModule:()=>D});var c=l(36895),a=l(24006),C=l(19132),t=l(94650);class k{constructor(){}}k.\u0275fac=function(i){return new(i||k)},k.\u0275cmp=t.Xpm({type:k,selectors:[["app-dashboard"]],decls:1,vars:0,template:function(i,e){1&i&&t._UZ(0,"router-outlet")},dependencies:[C.lC]});var x=l(1163),b=l(46954),E=l(15274),T=l(56546),h=l(39367),y=l(5754),_=l(4266),pt=l(80311),v=l(20696);function kt(n,i){1&n&&(t.ynx(0),t._UZ(1,"tui-badge",12),t.BQk())}const Et=function(n){return["/modules",n]},Mt=function(n){return{moduleID:n}};function Nt(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"a",13),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.storeModuleID(null==r.appData?null:r.appData._id,null==r.appData?null:r.appData.code))}),t._UZ(1,"i",14),t.qZA()}if(2&n){const e=t.oxw();t.Q6J("routerLink",t.VKq(2,Et,null==e.appData?null:e.appData.code))("queryParams",t.VKq(4,Mt,null==e.appData?null:e.appData._id))}}const Ot=function(n){return["/modules/edit-module",n]},Pt=function(n){return{moduleCode:n}};function Jt(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"a",15),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.editModuleEvent(null==r.appData?null:r.appData._id,null==r.appData?null:r.appData.code,null==r.appData?null:r.appData.title))}),t._UZ(1,"i",16),t.qZA()}if(2&n){const e=t.oxw();t.Q6J("routerLink",t.VKq(2,Ot,null==e.appData?null:e.appData._id))("queryParams",t.VKq(4,Pt,null==e.appData?null:e.appData.code))}}function qt(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"a",17),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.deleteModuleEvent(null==r.appData?null:r.appData._id))}),t._UZ(1,"i",18),t.qZA()}}class w{constructor(i,e){this.transport=i,this.auth=e,this.deleteModule=new t.vpe,this.editModule=new t.vpe,this.currentUser=this.auth.currentUserValue,this.userRoleCheck=this.auth.checkIfRolesExist("sysAdmin")}checkAccess(i){return!(0==this.userRoleCheck&&"disabled"==i?.accessType&&!i.authorizedUsers.includes(this.currentUser.id))}storeModuleID(i,e){this.transport.moduleID.next(i),(0,_.LS)(_.MX.moduleSlug,e)}deleteModuleEvent(i){this.deleteModule.emit(i)}editModuleEvent(i,e,o){(0,_.LS)(_.MX.moduleSlug,e),(0,_.LS)(_.MX.editmoduleTitle,o),(0,_.LS)(_.MX.editmoduleId,i),this.editModule.emit(i),this.transport.moduleID.next(i)}checkIfUserisAdmin(i){return i?.includes(this.currentUser?.id)}checkIfUserisViewOnly(i){return i?.includes(this.currentUser?.id)}}function Ft(n,i){1&n&&(t.TgZ(0,"div",5)(1,"div",6)(2,"div",7),t.O4$(),t.TgZ(3,"svg",8),t._UZ(4,"path",9),t.qZA()(),t.kcU(),t.TgZ(5,"div",10),t._UZ(6,"div",11)(7,"div",12)(8,"div",13)(9,"div",14)(10,"div",15)(11,"div",16),t.qZA(),t.TgZ(12,"span",17),t._uU(13,"Loading..."),t.qZA()()())}function Qt(n,i){1&n&&(t.TgZ(0,"div",18)(1,"div",19),t.O4$(),t.TgZ(2,"svg",8),t._UZ(3,"path",9),t.qZA()(),t.kcU(),t.TgZ(4,"div",20),t._UZ(5,"div",11)(6,"div",12)(7,"div",13)(8,"div",14)(9,"div",15)(10,"div",16),t.qZA()())}function Lt(n,i){1&n&&(t.TgZ(0,"div",21)(1,"div",22),t.O4$(),t.TgZ(2,"svg",23),t._UZ(3,"path",9),t.qZA()(),t.kcU(),t.TgZ(4,"div",20),t._UZ(5,"div",11)(6,"div",12)(7,"div",13)(8,"div",14)(9,"div",15)(10,"div",16),t.qZA()())}function Yt(n,i){if(1&n&&(t.ynx(0),t.YNc(1,Ft,14,0,"div",2),t.YNc(2,Qt,11,0,"div",3),t.YNc(3,Lt,11,0,"div",4),t.BQk()),2&n){const e=i.index;t.xp6(1),t.Q6J("ngIf",0==e),t.xp6(1),t.Q6J("ngIf",1==e),t.xp6(1),t.Q6J("ngIf",e>1)}}w.\u0275fac=function(i){return new(i||w)(t.Y36(v.R),t.Y36(E.e))},w.\u0275cmp=t.Xpm({type:w,selectors:[["grid-top-app"]],inputs:{appData:"appData"},outputs:{deleteModule:"deleteModule",editModule:"editModule"},standalone:!0,features:[t.jDz],decls:14,vars:7,consts:[[1,"bg-white","rounded-md","shadow-lg","h-auto","drop-shadow-lg","flex","flex-col","border-t-8","border-t-[#F15B41]"],[1,"flex","pt-5","space-x-8","px-4","pb-3"],[1,"flex","items-center","justify-center","border","border-gray-200","rounded-lg","w-[13rem]","h-[8rem]"],["alt","top_app_icon","loading","eager",1,"object-contain","w-full","h-full","rounded-lg",3,"src"],[1,"w-full","h-full"],[1,"mb-2","text-lg","font-semibold"],[4,"ngIf"],[1,"leading-6","line-clamp-4"],[1,"bg-gradient-to-r","from-orange-200","to-slate-200","h-8","w-full","flex","justify-center","items-center","rounded-br-md","rounded-bl-md","py-5"],["title","Apps and Submissions","class","px-2 py-1 text-white bg-green-500 rounded-md hover:text-white",3,"routerLink","queryParams","click",4,"ngIf"],["title","Edit","class","px-2 py-1 mx-2 text-white bg-blue-400 rounded-md hover:text-white cursor-pointer",3,"routerLink","queryParams","click",4,"ngIf"],["title","Delete","class","px-2 py-1 text-white bg-red-500 rounded-md hover:text-white cursor-pointer",3,"click",4,"ngIf"],["status","primary","value","Draft","size","s",1,"tui-space_left-1"],["title","Apps and Submissions",1,"px-2","py-1","text-white","bg-green-500","rounded-md","hover:text-white",3,"routerLink","queryParams","click"],["aria-hidden","true",1,"fa","fa-sitemap","fa-lg"],["title","Edit",1,"px-2","py-1","mx-2","text-white","bg-blue-400","rounded-md","hover:text-white","cursor-pointer",3,"routerLink","queryParams","click"],["aria-hidden","true",1,"fa","fa-pencil-square-o","fa-lg"],["title","Delete",1,"px-2","py-1","text-white","bg-red-500","rounded-md","hover:text-white","cursor-pointer",3,"click"],["aria-hidden","true",1,"fa","fa-trash","fa-lg"]],template:function(i,e){1&i&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2),t._UZ(3,"img",3),t.qZA(),t.TgZ(4,"div",4)(5,"h3",5),t._uU(6),t.YNc(7,kt,2,0,"ng-container",6),t.qZA(),t.TgZ(8,"p",7),t._uU(9),t.qZA()()(),t.TgZ(10,"div",8),t.YNc(11,Nt,2,6,"a",9),t.YNc(12,Jt,2,6,"a",10),t.YNc(13,qt,2,0,"a",11),t.qZA()()),2&i&&(t.xp6(3),t.Q6J("src",null==e.appData?null:e.appData.image,t.LSH),t.xp6(3),t.hij(" ",null==e.appData?null:e.appData.title," "),t.xp6(1),t.Q6J("ngIf",3===(null==e.appData?null:e.appData.status)),t.xp6(2),t.Oqu(null==e.appData?null:e.appData.description),t.xp6(2),t.Q6J("ngIf",3!==(null==e.appData?null:e.appData.status)&&1==e.checkAccess(e.appData)),t.xp6(1),t.Q6J("ngIf",(null==e.currentUser?null:e.currentUser.id)==(null==e.appData?null:e.appData.createdBy)||1==e.userRoleCheck||e.checkIfUserisAdmin(null==e.appData?null:e.appData.adminUsers)),t.xp6(1),t.Q6J("ngIf",(null==e.currentUser?null:e.currentUser.id)==(null==e.appData?null:e.appData.createdBy)||1==e.userRoleCheck&&0==e.checkIfUserisViewOnly(null==e.appData?null:e.appData.viewOnlyUsers)||e.checkIfUserisAdmin(null==e.appData?null:e.appData.adminUsers)))},dependencies:[c.ez,c.O5,C.Bz,C.rH,pt.f,pt.g],changeDetection:0});class M{constructor(){this.Arr=Array,this.num=4}}function zt(n,i){1&n&&t._UZ(0,"app-grid-view-loader")}function St(n,i){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"p",8),t._uU(2," Create a category to start adding new apps "),t._UZ(3,"br")(4,"br"),t.TgZ(5,"a",9),t.NdJ("click",function(){t.CHM(e);const r=t.oxw(2),s=t.MAs(10);return t.KtG(r.showAddDialog(s))}),t._uU(6,"+ Add Category"),t.qZA()(),t.BQk()}}M.\u0275fac=function(i){return new(i||M)},M.\u0275cmp=t.Xpm({type:M,selectors:[["app-grid-view-loader"]],decls:2,vars:1,consts:[[1,"grid","grid-cols-12","gap-4","w-11/12","mx-auto","mt-52","pb-60"],[4,"ngFor","ngForOf"],["class","px-4 py-2 bg-gray-100 rounded-md col-span-8 h-72",4,"ngIf"],["class","px-5 py-4 bg-gray-100 rounded-md col-span-4 row-span-3",4,"ngIf"],["class","px-2 py-2 bg-gray-100 rounded-md col-span-4 row-span-2 h-88",4,"ngIf"],[1,"px-4","py-2","bg-gray-100","rounded-md","col-span-8","h-72"],["role","status",1,"animate-pulse","md:flex","md:items-center","space-x-8"],[1,"flex","items-center","justify-center","w-full","bg-gray-200","rounded","h-68"],["xmlns","http://www.w3.org/2000/svg","aria-hidden","true","fill","currentColor","viewBox","0 0 640 512",1,"w-12","h-12","text-gray-400"],["d","M480 80C480 35.82 515.8 0 560 0C604.2 0 640 35.82 640 80C640 124.2 604.2 160 560 160C515.8 160 480 124.2 480 80zM0 456.1C0 445.6 2.964 435.3 8.551 426.4L225.3 81.01C231.9 70.42 243.5 64 256 64C268.5 64 280.1 70.42 286.8 81.01L412.7 281.7L460.9 202.7C464.1 196.1 472.2 192 480 192C487.8 192 495 196.1 499.1 202.7L631.1 419.1C636.9 428.6 640 439.7 640 450.9C640 484.6 612.6 512 578.9 512H55.91C25.03 512 .0006 486.1 .0006 456.1L0 456.1z"],[1,"w-full"],[1,"h-2.5","bg-gray-200","rounded-full","w-48","mb-4"],[1,"h-2","bg-gray-200","rounded-full","max-w-[480px]","mb-2.5"],[1,"h-2","bg-gray-200","rounded-full","mb-2.5"],[1,"h-2","bg-gray-200","rounded-full","max-w-[440px]","mb-2.5"],[1,"h-2","bg-gray-200","rounded-full","max-w-[460px]","mb-2.5"],[1,"h-2","bg-gray-200","rounded-full","max-w-[360px]"],[1,"sr-only"],[1,"px-5","py-4","bg-gray-100","rounded-md","col-span-4","row-span-3"],[1,"flex","items-center","justify-center","w-full","bg-gray-200","rounded","h-72"],[1,"w-full","mt-8"],[1,"px-2","py-2","bg-gray-100","rounded-md","col-span-4","row-span-2","h-88"],[1,"flex","justify-center","items-center","w-auto","bg-gray-200","rounded","h-40","mb-5","animate-pulse"],["xmlns","http://www.w3.org/2000/svg","aria-hidden","true","fill","currentColor","viewBox","0 0 640 512",1,"w-8","h-8","text-gray-400"]],template:function(i,e){1&i&&(t.TgZ(0,"section",0),t.YNc(1,Yt,4,3,"ng-container",1),t.qZA()),2&i&&(t.xp6(1),t.Q6J("ngForOf",e.Arr(e.num).fill(1)))},dependencies:[c.sg,c.O5],changeDetection:0});const Ht=function(n){return["/modules/add-module",n]},Bt=function(n){return{parentID:n}};function Gt(n,i){if(1&n&&(t.TgZ(0,"a",14),t._uU(1,"+ Add new app"),t.qZA()),2&n){const e=t.oxw().$implicit;t.Q6J("routerLink",t.VKq(2,Ht,e._id))("queryParams",t.VKq(4,Bt,(null==e?null:e._id)||""))}}function Vt(n,i){1&n&&(t.ynx(0),t._UZ(1,"div",15),t.BQk())}function $t(n,i){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"grid-top-app",16),t.NdJ("deleteModule",function(r){t.CHM(e);const s=t.oxw(5),u=t.MAs(8);return t.KtG(s.showDialog(r,u))}),t.qZA(),t.BQk()}if(2&n){const e=t.oxw().$implicit,o=t.oxw(4);t.xp6(1),t.Q6J("appData",e)("ngClass",null!=e&&e.layout&&null!=e&&null!=e.layout&&e.layout.colWidth?"col-span-"+o.toString(null==e||null==e.layout?null:e.layout.colWidth):"col-span-4")}}function Rt(n,i){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"grid-top-app",16),t.NdJ("deleteModule",function(r){t.CHM(e);const s=t.oxw(6),u=t.MAs(8);return t.KtG(s.showDialog(r,u))}),t.qZA(),t.BQk()}if(2&n){const e=t.oxw(2).$implicit,o=t.oxw(4);t.xp6(1),t.Q6J("appData",e)("ngClass",null!=e&&e.layout&&null!=e&&null!=e.layout&&e.layout.colWidth?"col-span-"+o.toString(null==e||null==e.layout?null:e.layout.colWidth):"col-span-4")}}function jt(n,i){if(1&n&&(t.ynx(0),t.YNc(1,Rt,2,2,"ng-container",6),t.BQk()),2&n){const e=t.oxw().$implicit,o=t.oxw(4);t.xp6(1),t.Q6J("ngIf",(null==o.currentUser?null:o.currentUser.id)==(null==e?null:e.createdBy))}}function Kt(n,i){if(1&n&&(t.ynx(0),t.YNc(1,$t,2,2,"ng-container",6),t.YNc(2,jt,2,1,"ng-container",6),t.BQk()),2&n){const e=i.$implicit;t.xp6(1),t.Q6J("ngIf",3!==(null==e?null:e.status)),t.xp6(1),t.Q6J("ngIf",3==(null==e?null:e.status))}}function Wt(n,i){if(1&n&&t.YNc(0,Kt,3,2,"ng-container",7),2&n){const e=t.oxw().$implicit;t.Q6J("ngForOf",null==e?null:e.submodules)}}function Xt(n,i){if(1&n&&(t.ynx(0),t.TgZ(1,"div",10)(2,"p",11),t._uU(3),t.qZA(),t.YNc(4,Gt,2,6,"a",12),t.qZA(),t.YNc(5,Vt,2,0,"ng-container",1),t.YNc(6,Wt,1,1,"ng-template",null,13,t.W1O),t.BQk()),2&n){const e=i.$implicit,o=t.MAs(7),r=t.oxw(2);t.xp6(3),t.Oqu(e.name),t.xp6(1),t.Q6J("ngIf",1==r.userRoleCheck),t.xp6(1),t.Q6J("ngIf",!e.submodules||0==(null==e.subsubmodules?null:e.subsubmodules.length))("ngIfElse",o)}}function te(n,i){if(1&n&&(t.TgZ(0,"section",5),t.YNc(1,St,7,0,"ng-container",6),t.ALo(2,"async"),t.YNc(3,Xt,8,4,"ng-container",7),t.ALo(4,"async"),t.qZA()),2&n){const e=t.oxw();let o;t.xp6(1),t.Q6J("ngIf",0==(null==(o=t.lcZ(2,2,e.dashboardApps))?null:o.length)),t.xp6(2),t.Q6J("ngForOf",t.lcZ(4,4,e.dashboardApps))}}function ee(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"p",17),t._uU(1,"Delete App"),t.qZA(),t.TgZ(2,"p",18),t._uU(3,"Are you sure you want to delete this app?"),t.qZA(),t.TgZ(4,"div",19)(5,"button",20),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw().deleteModule(),t.KtG(s.complete())}),t._uU(6," Confirm "),t.qZA(),t.TgZ(7,"button",21),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.KtG(s.complete())}),t._uU(8," Cancel "),t.qZA()()}}function ne(n,i){1&n&&(t.TgZ(0,"span",29),t._uU(1,"Category name is required"),t.qZA())}function ie(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"p",22),t._uU(1," Add Category "),t.qZA(),t.TgZ(2,"div",23),t._UZ(3,"input",24),t.YNc(4,ne,2,0,"span",25),t.qZA(),t.TgZ(5,"div",26)(6,"button",27),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw().addCategory(),t.KtG(s.complete())}),t._uU(7," Add "),t.qZA(),t.TgZ(8,"button",28),t.NdJ("click",function(){const s=t.CHM(e).$implicit,u=t.oxw();return s.complete(),t.KtG(u.formData.reset())}),t._uU(9," Cancel "),t.qZA()()}if(2&n){const e=t.oxw();t.xp6(3),t.Q6J("ngClass",null!=e.formData&&e.formData.invalid&&null!=e.formData&&e.formData.touched?"is-invalid":"")("formControl",e.formData),t.xp6(1),t.Q6J("ngIf",(null==e.formData?null:e.formData.invalid)&&(null==e.formData?null:e.formData.touched)),t.xp6(2),t.Q6J("disabled",null==e.formData?null:e.formData.invalid)}}class N{constructor(i,e,o){this.dashboard=i,this.dialogs=e,this.auth=o,this.subscription=[],this.formData=new a.NI(null,a.kI.compose([a.kI.required])),this.currentUser=this.auth.currentUserValue,this.userRoleCheck=this.auth.checkIfRolesExist("admin"),this.dashboardApps=this.dashboard.getDashboardApps()}showAddDialog(i){this.dialogs.open(i,{dismissible:!1,closeable:!1}).subscribe()}toString(i){return String(i)}addCategory(){this.subscription.push(this.dashboard.addCategory({name:this.formData.value}).subscribe(e=>{e&&(this.dashboardApps=this.dashboard.getDashboardApps())}))}showDialog(i,e){i&&(this.moduleId=i,this.dialogs.open(e).subscribe())}deleteModule(){this.subscription.push(this.dashboard.deleteSubModule(this.moduleId).subscribe(i=>{this.dashboardApps=this.dashboard.getDashboardApps()}))}ngOnDestroy(){this.subscription.forEach(i=>i.unsubscribe())}}N.\u0275fac=function(i){return new(i||N)(t.Y36(b.s),t.Y36(x.RO),t.Y36(E.e))},N.\u0275cmp=t.Xpm({type:N,selectors:[["ng-component"]],decls:11,vars:4,consts:[[1,"bg_img_main"],[4,"ngIf","ngIfElse"],["dashboardapps",""],["template",""],["addTemplate",""],[1,"grid","w-11/12","grid-cols-12","md:grid-cols-8","lg:grid-cols-12","gap-4","pb-20","mx-auto","md:mt-52","mt-40"],[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"col-span-12","my-8","text-base","font-semibold","text-center"],[1,"px-2","py-1","bg-[#A58F81]","text-white","text-sm","rounded-md","cursor-pointer","hover:text-white",3,"click"],[1,"flex","justify-between","py-2","px-2","bg-[#eae4d8]","rounded-md","col-span-12","relative"],[1,"mt-2","text-lg","font-semibold"],["class","px-4 py-2 rounded-md bg-[#F15B41] text-white no-underline hover:text-white text-base",3,"routerLink","queryParams",4,"ngIf"],["showApps",""],[1,"px-4","py-2","rounded-md","bg-[#F15B41]","text-white","no-underline","hover:text-white","text-base",3,"routerLink","queryParams"],[1,"h-5"],[3,"appData","ngClass","deleteModule"],[1,"pb-2","text-xl","font-semibold","text-center","border-b","border-gray-400"],[1,"mt-4","text-base","font-medium","text-center"],[1,"flex","justify-center","mt-4"],["tuiButton","","appearance","secondary-destructive","type","button","size","m",1,"mx-3",3,"click"],["tuiButton","","type","button","size","m",3,"click"],[1,"text-lg","font-semibold","text-center"],[1,"flex","flex-col","justify-center","my-5"],["type","text",1,"my-2","form-control",3,"ngClass","formControl"],["class","text-xs text-red-500",4,"ngIf"],[1,"flex","justify-center","gap-2"],["tuiButton","","type","button","size","m",3,"disabled","click"],["tuiButton","","type","button","appearance","accent","size","m",3,"click"],[1,"text-xs","text-red-500"]],template:function(i,e){if(1&i&&(t._UZ(0,"app-header"),t.TgZ(1,"div",0),t.YNc(2,zt,1,0,"app-grid-view-loader",1),t.ALo(3,"async"),t.YNc(4,te,5,6,"ng-template",null,2,t.W1O),t.qZA(),t._UZ(6,"app-footer"),t.YNc(7,ee,9,0,"ng-template",null,3,t.W1O),t.YNc(9,ie,10,4,"ng-template",null,4,t.W1O)),2&i){const o=t.MAs(5);t.xp6(2),t.Q6J("ngIf",!t.lcZ(3,2,e.dashboardApps))("ngIfElse",o)}},dependencies:[c.mk,c.sg,c.O5,C.rH,T.G,h.v0,y.c,a.Fj,a.JJ,a.oH,w,M,c.Ov]});var Z=l(89740);class O{constructor(i,e,o,r){this.dialog=i,this.transportService=e,this.dashboard=o,this.context=r}showDialog(i){this.dialog.open(i).subscribe()}cancel(){this.dashboard.moduleEditData.next(null),(0,_.cl)(_.MX.publishAppValue),(0,_.cl)(_.MX.activeIndex),this.transportService.dialogState.emit(v.U.DISCARD),this.context.completeWith(!0)}saveDraft(){}stayOnPage(){this.context.completeWith(!0),this.transportService.dialogState.emit(v.U.DEFAULT)}}O.\u0275fac=function(i){return new(i||O)(t.Y36(x.RO),t.Y36(v.R),t.Y36(b.s),t.Y36(Z.yf))},O.\u0275cmp=t.Xpm({type:O,selectors:[["app-module-guard"]],decls:9,vars:0,consts:[[1,"flex","justify-center","flex-col","items-center"],["aria-hidden","true",1,"fa","fa-exclamation-circle","fa-5x","text-yellow-500"],[1,"font-semibold","text-base","my-5"],[1,"flex","justify-between","gap-2"],["tuiButton","","type","button","size","m","appearance","accent",3,"click"],["tuiButton","","type","button","size","m","appearance","secondary",3,"click"]],template:function(i,e){1&i&&(t.TgZ(0,"div",0),t._UZ(1,"i",1),t.TgZ(2,"p",2),t._uU(3,"All your unsaved data will be lost. Are you sure you want to proceed?"),t.qZA(),t.TgZ(4,"div",3)(5,"button",4),t.NdJ("click",function(){return e.cancel()}),t._uU(6,"Proceed"),t.qZA(),t.TgZ(7,"button",5),t.NdJ("click",function(){return e.stayOnPage()}),t._uU(8,"Stay on this page"),t.qZA()()())},dependencies:[h.v0],changeDetection:0});class A{constructor(i,e,o,r){this.dialog=i,this.dashboard=e,this.transportService=o,this.router=r}canActivate(i,e){return null===this.dashboard.moduleEditData.value&&!(0,_.rV)(_.MX.publishAppValue)||(this.dialog.open(new Z.Al(O),{dismissible:!1,closeable:!1}).subscribe(),this.transportService.dialogState.subscribe(r=>r===v.U.DISCARD&&(this.router.navigate([e.url]),!0)),!1)}}A.\u0275fac=function(i){return new(i||A)(t.LFG(x.RO),t.LFG(b.s),t.LFG(v.R),t.LFG(C.F0))},A.\u0275prov=t.Yz7({token:A,factory:A.\u0275fac,providedIn:"root"});var P=l(77579),it=l(61135),m=l(82722),f=l(17820),V=l(87819),p=l(70655),dt=l(77721),d=l(68923),oe=l(1054),I=l(38355),re=l(62665),_t=l(47776),ot=l(78535),J=l(54004),$=l(63900),mt=l(71884),se=l(68675),q=l(80702),F=l(8276),Q=l(71115),gt=l(94645),R=l(31947);const ht={icons:{up:"tuiIconPlus",down:"tuiIconMinus"},appearance:"textfield",hideButtons:!1,min:0,max:Number.MAX_SAFE_INTEGER,step:1,postfix:""},rt=new t.OlP("[TUI_INPUT_COUNT_OPTIONS]",{factory:()=>ht});var le=l(4707),ft=l(18090),Ct=l(55753);const ce=["tuiTh",""];function pe(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"button",3),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.table.updateSorterAndDirection(r.sorter))}),t.GkF(1,4),t._uU(2),t.ALo(3,"async"),t._UZ(4,"tui-svg",5),t.qZA()}if(2&n){const e=t.oxw(),o=t.MAs(2);t.ekj("t-sort_sorted",e.isCurrent),t.xp6(1),t.Q6J("ngTemplateOutlet",o),t.xp6(1),t.hij(" ",t.lcZ(3,5,e.table.change$)," "),t.xp6(2),t.Q6J("src",e.icon)}}function de(n,i){1&n&&t.Hsn(0)}function _e(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"div",6),t.NdJ("tuiResized",function(r){t.CHM(e);const s=t.oxw();return t.KtG(s.onResized(r))}),t.qZA()}}const j=["*"],me=["tuiTd",""],ge=["tuiTr",""];function he(n,i){if(1&n&&(t.TgZ(0,"td",5),t._uU(1),t.qZA()),2&n){const e=i.ngIf,o=t.oxw(2).$implicit;t.xp6(1),t.hij(" ",e[o]," ")}}function fe(n,i){if(1&n&&(t.YNc(0,he,2,1,"td",4),t.ALo(1,"async")),2&n){const e=t.oxw(3);t.Q6J("ngIf",t.lcZ(1,1,e.item$))}}function Ce(n,i){if(1&n&&(t.ynx(0,2),t.YNc(1,fe,2,3,"ng-template",null,3,t.W1O),t.BQk()),2&n){const e=i.$implicit,o=t.MAs(2),r=t.oxw().ngIf;t.Q6J("ngTemplateOutlet",(null==r[e]?null:r[e].template)||o)}}function be(n,i){if(1&n&&(t.ynx(0),t.YNc(1,Ce,3,1,"ng-container",1),t.BQk()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.table.columns)}}const xe=["tuiTbody",""];function Te(n,i){if(1&n&&(t.ynx(0),t._uU(1),t.BQk()),2&n){const e=i.polymorpheusOutlet;t.xp6(1),t.hij(" ",e," ")}}function ye(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"tr")(1,"th",1)(2,"button",2),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.onClick())}),t.TgZ(3,"span",3),t.YNc(4,Te,2,1,"ng-container",4),t.qZA(),t._UZ(5,"tui-svg",5),t.qZA()()()}if(2&n){const e=t.oxw();t.xp6(1),t.Q6J("colSpan",e.table.columns.length),t.xp6(3),t.Q6J("polymorpheusOutlet",e.heading),t.xp6(1),t.ekj("t-chevron_rotated",e.open)}}function ve(n,i){1&n&&(t.ynx(0),t.Hsn(1),t.BQk())}function we(n,i){if(1&n&&(t.GkF(0,7),t.ALo(1,"tuiMapper")),2&n){const e=i.$implicit,o=i.index,r=t.oxw(2);t.Q6J("ngTemplateOutlet",r.row.template)("ngTemplateOutletContext",t.Dn7(1,2,e,r.toContext,o))}}function Ze(n,i){if(1&n&&(t.ynx(0),t.YNc(1,we,2,6,"ng-container",6),t.BQk()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.sorted)}}const Ae=["tuiThGroup",""];function Ie(n,i){if(1&n&&(t.TgZ(0,"th",5),t._uU(1),t.qZA()),2&n){const e=t.oxw(2).$implicit;t.xp6(1),t.hij(" ",e.toString()," ")}}function Ue(n,i){if(1&n&&t.YNc(0,Ie,2,1,"th",4),2&n){const e=t.oxw(3);t.Q6J("ngIf",!e.th&&!e.heads.length)}}function De(n,i){if(1&n&&(t.ynx(0,2),t.YNc(1,Ue,1,1,"ng-template",null,3,t.W1O),t.BQk()),2&n){const e=i.$implicit,o=t.MAs(2),r=t.oxw().ngIf;t.Q6J("ngTemplateOutlet",(null==r[e.toString()]?null:r[e.toString()].template)||o)}}function ke(n,i){if(1&n&&(t.ynx(0),t.YNc(1,De,3,1,"ng-container",1),t.BQk()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.table.columns)}}let K=(()=>{class n{constructor(e){this.template=e,this.tuiCell=""}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(t.Rgc))},n.\u0275dir=t.lG2({type:n,selectors:[["","tuiCell",""]],inputs:{tuiCell:"tuiCell"}}),(0,p.gn)([(0,d.TH)()],n.prototype,"tuiCell",void 0),n})();const bt=new t.OlP("[TUI_STUCK]"),Ee={provide:bt,deps:[t.SBq,q.te],useFactory:({nativeElement:n},i)=>{const e=i.pipe((0,J.U)(([{intersectionRatio:o}])=>o<1));return n["$.class._stuck"]=e,e}},Me=[{provide:q.RL,useValue:"10000px 10000px 10000px 0px"},{provide:q.op,useValue:[0,1]},{provide:Q.x_,useFactory:()=>{const n=new Q.qc;return n.appearance="table",n}},{provide:Q.rW,useValue:{labelOutside:!0}},{provide:rt,deps:[[new t.tp0,rt]],useFactory:n=>Object.assign(Object.assign({},n),{hideButtons:!0})},{provide:Q.kI,useExisting:(0,t.Gpc)(()=>g)},q.te,gt.CV,Ee];let g=(()=>{class n extends oe.QJ{constructor(e,o,r,s){super(),this.entries$=e,this.mode$=o,this.stuck$=r,this.changeDetectorRef=s,this.columns=[],this.size="m",this.direction=1,this.directionChange=new t.vpe,this.sorterChange=new t.vpe,this.sorter=()=>0}updateSorterAndDirection(e){this.sorter===e?this.updateDirection(1===this.direction?-1:1):(this.updateSorter(e),this.updateDirection(1))}ngAfterViewInit(){this.changeDetectorRef.detectChanges()}updateSorter(e){this.sorter=e||(()=>0),this.sorterChange.emit(this.sorter),this.change$.next()}updateDirection(e){this.direction=e,this.directionChange.emit(this.direction),this.change$.next()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(q.te),t.Y36(R.Au),t.Y36(bt),t.Y36(t.sBO))},n.\u0275dir=t.lG2({type:n,selectors:[["table","tuiTable",""]],hostAttrs:[2,"border-collapse","separate"],hostVars:1,hostBindings:function(e,o){1&e&&t.NdJ("$.data-mode.attr",function(){return o.mode$})("$.class._stuck",function(){return o.stuck$}),2&e&&t.uIk("data-size",o.size)},inputs:{columns:"columns",size:"size",direction:"direction",sorter:"sorter"},outputs:{directionChange:"directionChange",sorterChange:"sorterChange"},features:[t._Bn(Me),t.qOj]}),(0,p.gn)([(0,d.TH)()],n.prototype,"columns",void 0),(0,p.gn)([(0,d.TH)()],n.prototype,"size",void 0),(0,p.gn)([(0,d.TH)()],n.prototype,"direction",void 0),(0,p.gn)([(0,d.TH)()],n.prototype,"sorter",void 0),n})(),L=(()=>{class n{constructor(e){this.template=e}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(t.Rgc))},n.\u0275dir=t.lG2({type:n,selectors:[["","tuiHead",""]],inputs:{tuiHead:"tuiHead"}}),n})(),Ne=(()=>{class n{constructor(e,o,r){this.documentRef=e,this.elementRef=o,this.parentRef=r,this.tuiResized=(0,I.mL)(this.elementRef.nativeElement,"mousedown").pipe((0,I.mp)(),(0,$.w)(()=>{const{width:s,right:u}=this.parentRef.nativeElement.getBoundingClientRect();return(0,I.mL)(this.documentRef,"mousemove").pipe((0,mt.x)(),(0,J.U)(({clientX:nt})=>s+nt-u),(0,m.R)((0,I.mL)(this.documentRef,"mouseup")))}))}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(c.K0),t.Y36(t.SBq),t.Y36(R.zP))},n.\u0275dir=t.lG2({type:n,selectors:[["","tuiResized",""]],outputs:{tuiResized:"tuiResized"}}),n})(),Oe=(()=>{class n{constructor(e){this.template=e,this.tuiRowOf=[]}static ngTemplateContextGuard(e,o){return!0}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(t.Rgc))},n.\u0275dir=t.lG2({type:n,selectors:[["ng-template","tuiRow",""]],inputs:{tuiRowOf:"tuiRowOf"}}),(0,p.gn)([(0,d.TH)()],n.prototype,"tuiRowOf",void 0),n})(),Y=(()=>{class n{constructor(e,o){this.head=e,this.table=o,this.sorter=this.head?(r,s)=>function ue(n,i){const e=n instanceof ft.TU?Number(n.toUtcNativeDate()):n,o=i instanceof ft.TU?Number(i.toUtcNativeDate()):i;return e===o?0:(0,Ct.Aj)(e)&&(0,Ct.Aj)(o)?e.localeCompare(o):e>o?1:-1}(r[this.key],s[this.key]):null,this.resizable=!1,this.sticky=!1,this.width=null}get key(){if(!this.head)throw new re.m2;return this.head.tuiHead}get isCurrent(){return!!this.sorter&&!!this.table&&this.sorter===this.table.sorter}get icon(){var e;return this.isCurrent?1===(null===(e=this.table)||void 0===e?void 0:e.direction)?"tuiIconSortDescending":"tuiIconSortAscending":"tuiIconSortOff"}onResized(e){this.width=e}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(L,8),t.Y36((0,t.Gpc)(()=>g),8))},n.\u0275cmp=t.Xpm({type:n,selectors:[["th","tuiTh",""]],hostVars:4,hostBindings:function(e,o){2&e&&(t.Udp("width",o.width,"px"),t.ekj("_sticky",o.sticky))},inputs:{sorter:"sorter",resizable:"resizable",sticky:"sticky"},features:[t._Bn([{provide:R.zP,useExisting:t.SBq}])],attrs:ce,ngContentSelectors:j,decls:4,vars:3,consts:[["type","button","class","t-sort",3,"t-sort_sorted","click",4,"ngIf","ngIfElse"],["content",""],["class","t-bar",3,"tuiResized",4,"ngIf"],["type","button",1,"t-sort",3,"click"],[3,"ngTemplateOutlet"],[1,"t-sort-icon",3,"src"],[1,"t-bar",3,"tuiResized"]],template:function(e,o){if(1&e&&(t.F$t(),t.YNc(0,pe,5,7,"button",0),t.YNc(1,de,1,0,"ng-template",null,1,t.W1O),t.YNc(3,_e,1,0,"div",2)),2&e){const r=t.MAs(2);t.Q6J("ngIf",o.sorter&&o.table)("ngIfElse",r),t.xp6(3),t.Q6J("ngIf",o.resizable)}},dependencies:[F.PN,c.O5,c.tP,Ne,c.Ov],styles:['[_nghost-%COMP%]{transition-property:box-shadow;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out;position:relative;top:0;height:var(--tui-height-m);font:var(--tui-font-text-s);text-align:left;font-weight:bold;color:var(--tui-text-02);background:var(--tui-base-01);cursor:default;padding:0 .75rem;box-sizing:border-box;box-shadow:0 .3125rem rgba(237,237,237,0);border:1px solid var(--tui-base-04)}[_nghost-%COMP%]:not(:first-child){border-left:none}._sticky[_nghost-%COMP%]{position:-webkit-sticky;position:sticky;z-index:30}._sticky[_nghost-%COMP%]:first-child{left:0}._sticky[_nghost-%COMP%]:after{transition-property:opacity;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out;content:"";position:absolute;top:0;left:100%;bottom:0;width:.3125rem;pointer-events:none;background:rgba(237,237,237,.7);opacity:0}._stuck   [_nghost-%COMP%]{z-index:20}tr:not(:first-child)[_nghost-%COMP%], tr:not(:first-child)   [_nghost-%COMP%]{border-top:none}table[data-size="l"][_nghost-%COMP%], table[data-size="l"]   [_nghost-%COMP%]{height:var(--tui-height-l);font:var(--tui-font-text-m);font-weight:bold;padding:0 1rem}thead[tuiThead][_nghost-%COMP%], thead[tuiThead]   [_nghost-%COMP%]{position:-webkit-sticky;position:sticky}table._stuck._sticky[_nghost-%COMP%]:after, table._stuck   ._sticky[_nghost-%COMP%]:after{opacity:1}thead[tuiThead]._stuck[_nghost-%COMP%], thead[tuiThead]._stuck   [_nghost-%COMP%]{box-shadow:0 .3125rem rgba(237,237,237,.7)}table[data-mode="onDark"][_nghost-%COMP%]:after, table[data-mode="onDark"]   [_nghost-%COMP%]:after{background:rgba(60,60,60,.9)}table[data-mode="onDark"]   thead[tuiThead]._stuck[_nghost-%COMP%], table[data-mode="onDark"]   thead[tuiThead]._stuck   [_nghost-%COMP%]{box-shadow:0 .3125rem rgba(60,60,60,.9)}table[data-mode="onDark"]   thead[tuiThead]._stuck[_nghost-%COMP%]:first-child, table[data-mode="onDark"]   thead[tuiThead]._stuck   [_nghost-%COMP%]:first-child{box-shadow:.0625rem .3125rem rgba(60,60,60,.9)}table[data-size="l"]   thead[tuiThead]   tr:nth-child(2)[_nghost-%COMP%], table[data-size="l"]   thead[tuiThead]   tr:nth-child(2)   [_nghost-%COMP%]{top:var(--tui-height-l)}table[data-size="m"]   thead[tuiThead]   tr:nth-child(2)[_nghost-%COMP%], table[data-size="m"]   thead[tuiThead]   tr:nth-child(2)   [_nghost-%COMP%]{top:var(--tui-height-m)}table[data-size="s"]   thead[tuiThead]   tr:nth-child(2)[_nghost-%COMP%], table[data-size="s"]   thead[tuiThead]   tr:nth-child(2)   [_nghost-%COMP%]{top:var(--tui-height-s)}.t-sort[_ngcontent-%COMP%]{transition-property:color;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out;-webkit-appearance:none;-moz-appearance:none;appearance:none;padding:0;border:0;background:none;font-size:inherit;line-height:inherit;display:inline-flex;flex-direction:inherit;align-items:center;outline:none;font-weight:bold;cursor:pointer}.t-sort_sorted[_ngcontent-%COMP%]{color:var(--tui-text-01)}.t-sort[_ngcontent-%COMP%]:focus-visible{background:var(--tui-selection)}.t-sort[_ngcontent-%COMP%]:hover{color:var(--tui-text-01)}.t-bar[_ngcontent-%COMP%]{transition-property:opacity;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out;position:absolute;top:0;bottom:0;right:-1px;width:3px;justify-self:flex-end;border-left:2px solid transparent;background:var(--tui-support-12);background-clip:content-box;cursor:ew-resize;opacity:0}.t-bar[_ngcontent-%COMP%]:hover, .t-bar[_ngcontent-%COMP%]:active{opacity:1}'],changeDetection:0}),(0,p.gn)([(0,d.TH)()],n.prototype,"sorter",void 0),(0,p.gn)([(0,d.TH)()],n.prototype,"resizable",void 0),(0,p.gn)([(0,d.TH)()],n.prototype,"sticky",void 0),n})(),z=(()=>{class n{constructor(e){this.table=e}transform(e){return this.sort(e,this.table.sorter,this.table.direction)}sort(e,o,r){return[...e].sort((s,u)=>r*o(s,u))}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(g,16))},n.\u0275pipe=t.Yjl({name:"tuiTableSort",type:n,pure:!1}),(0,p.gn)([d.UM],n.prototype,"sort",null),n})();const st=[_t.a3,z,{provide:g,deps:[[new t.tp0,g],t.sBO,_t.a3],useFactory:gt.wD}];let W=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["th","tuiTd",""],["td","tuiTd",""]],contentQueries:function(e,o,r){if(1&e&&t.Suo(r,a.a5,5),2&e){let s;t.iGM(s=t.CRH())&&(o.control=s.first)}},hostVars:2,hostBindings:function(e,o){2&e&&t.ekj("_editable",o.control)},attrs:me,ngContentSelectors:j,decls:1,vars:0,template:function(e,o){1&e&&(t.F$t(),t.Hsn(0))},styles:['[_nghost-%COMP%]{position:relative;height:var(--tui-height-m);font:var(--tui-font-text-s);text-align:left;padding:0 .75rem;background:var(--tui-base-01);border:1px solid var(--tui-base-04);border-top:none;box-sizing:border-box;transform:translate(0)}[_nghost-%COMP%]:first-child{left:0}[_nghost-%COMP%]:not(:first-child){border-left:none}._editable[_nghost-%COMP%]:focus-within{z-index:1}._editable[_nghost-%COMP%]{padding:0;vertical-align:top}th[_nghost-%COMP%]{position:-webkit-sticky;position:sticky;z-index:1}th[_nghost-%COMP%]:after{transition-property:opacity;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out;content:"";position:absolute;top:0;bottom:0;left:100%;width:.3125rem;pointer-events:none;background:rgba(237,237,237,.7);opacity:0}th[_nghost-%COMP%]:focus-within:not(:disabled){z-index:11}table[data-mode="onDark"][_nghost-%COMP%]:after, table[data-mode="onDark"]   [_nghost-%COMP%]:after{background:rgba(60,60,60,.9)}table._stuck[_nghost-%COMP%], table._stuck   [_nghost-%COMP%]{z-index:10}table._stuck[_nghost-%COMP%]:last-of-type:after, table._stuck   [_nghost-%COMP%]:last-of-type:after{opacity:1}table[data-size="l"][_nghost-%COMP%], table[data-size="l"]   [_nghost-%COMP%]{font:var(--tui-font-text-m);height:var(--tui-height-l);padding-left:1rem;padding-right:1rem}table[data-size="l"]._editable[_nghost-%COMP%], table[data-size="l"]   ._editable[_nghost-%COMP%]{padding:0}td[_nghost-%COMP%]:focus-within{z-index:1}td[_nghost-%COMP%]:not(:focus-within){z-index:0}'],changeDetection:0}),n})(),X=(()=>{class n{constructor(e,o){this.table=e,this.body=o,this.cells=ot.Mm,this.contentReady$=new le.t(1),this.cells$=this.contentReady$.pipe((0,$.w)(()=>(0,I.ll)(this.cells)),(0,J.U)(r=>r.reduce((s,u)=>Object.assign(Object.assign({},s),{[u.tuiCell]:u}),{}))),this.item$=this.contentReady$.pipe((0,$.w)(()=>(0,I.ll)(this.body.rows)),(0,J.U)(r=>this.body.sorted[r.findIndex(s=>s===this)]))}ngAfterContentInit(){return(0,p.mG)(this,void 0,void 0,function*(){yield Promise.resolve(),this.contentReady$.next(!0)})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36((0,t.Gpc)(()=>g)),t.Y36((0,t.Gpc)(()=>tt)))},n.\u0275cmp=t.Xpm({type:n,selectors:[["tr","tuiTr",""]],contentQueries:function(e,o,r){if(1&e&&t.Suo(r,K,4),2&e){let s;t.iGM(s=t.CRH())&&(o.cells=s)}},features:[t._Bn([st])],attrs:ge,decls:2,vars:3,consts:[[4,"ngIf"],[3,"ngTemplateOutlet",4,"ngFor","ngForOf"],[3,"ngTemplateOutlet"],["plain",""],["tuiTd","",4,"ngIf"],["tuiTd",""]],template:function(e,o){1&e&&(t.YNc(0,be,2,1,"ng-container",0),t.ALo(1,"async")),2&e&&t.Q6J("ngIf",t.lcZ(1,1,o.cells$))},dependencies:[W,c.O5,c.sg,c.tP,c.Ov],encapsulation:2,changeDetection:0}),n})(),tt=(()=>{class n{constructor(e,o){this.pipe=e,this.table=o,this.data=[],this.heading="",this.open=!0,this.openChange=new t.vpe,this.rows=ot.Mm,this.toContext=(r,s)=>({$implicit:r,index:s})}get sorted(){return this.pipe.transform(this.data)}onClick(){this.open=!this.open,this.openChange.emit(this.open)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(z),t.Y36((0,t.Gpc)(()=>g)))},n.\u0275cmp=t.Xpm({type:n,selectors:[["tbody","tuiTbody",""]],contentQueries:function(e,o,r){if(1&e&&(t.Suo(r,Oe,5),t.Suo(r,X,4)),2&e){let s;t.iGM(s=t.CRH())&&(o.row=s.first),t.iGM(s=t.CRH())&&(o.rows=s)}},inputs:{data:"data",heading:"heading",open:"open"},outputs:{openChange:"openChange"},features:[t._Bn(st)],attrs:xe,ngContentSelectors:j,decls:3,vars:3,consts:[[4,"ngIf"],[1,"t-heading",3,"colSpan"],["type","button",1,"t-expand",3,"click"],[1,"t-name"],[4,"polymorpheusOutlet"],["src","tuiIconChevronDownLarge",1,"t-chevron"],[3,"ngTemplateOutlet","ngTemplateOutletContext",4,"ngFor","ngForOf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(e,o){1&e&&(t.F$t(),t.YNc(0,ye,6,4,"tr",0),t.YNc(1,ve,2,0,"ng-container",0),t.YNc(2,Ze,2,1,"ng-container",0)),2&e&&(t.Q6J("ngIf",o.heading),t.xp6(1),t.Q6J("ngIf",o.open),t.xp6(1),t.Q6J("ngIf",o.open&&o.row))},dependencies:[F.PN,c.O5,Z.Li,c.sg,c.tP,dt.c],styles:['[_nghost-%COMP%]{border-color:var(--tui-base-04)}[_nghost-%COMP%]   tr[_ngcontent-%COMP%]{border-color:inherit}.t-expand[_ngcontent-%COMP%]{-webkit-appearance:none;-moz-appearance:none;appearance:none;padding:0;border:0;background:none;font-size:inherit;line-height:inherit;display:flex;width:100%;height:100%;align-items:center;box-sizing:border-box;outline:none;font-weight:bold;cursor:pointer;border-color:inherit}.t-expand[_ngcontent-%COMP%]:focus-visible   .t-name[_ngcontent-%COMP%]{background:var(--tui-selection)}.t-expand[_ngcontent-%COMP%]:before, .t-expand[_ngcontent-%COMP%]:after{content:"";position:-webkit-sticky;position:sticky;height:100%;border-left:1px solid;border-color:inherit}.t-expand[_ngcontent-%COMP%]:before{left:0}.t-expand[_ngcontent-%COMP%]:after{right:0}.t-heading[_ngcontent-%COMP%]{transition-property:background;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out;height:var(--tui-height-m);font:var(--tui-font-text-s);padding:0;background:var(--tui-base-02);border-bottom:1px solid var(--tui-base-04);border-color:inherit}.t-heading[_ngcontent-%COMP%]:hover{background:var(--tui-base-03)}table[data-size="l"][_nghost-%COMP%]   .t-heading[_ngcontent-%COMP%], table[data-size="l"]   [_nghost-%COMP%]   .t-heading[_ngcontent-%COMP%]{font:var(--tui-font-text-m);height:var(--tui-height-l)}.t-name[_ngcontent-%COMP%]{position:-webkit-sticky;position:sticky;left:.75rem;display:inline-block}table[data-size="l"][_nghost-%COMP%]   .t-name[_ngcontent-%COMP%], table[data-size="l"]   [_nghost-%COMP%]   .t-name[_ngcontent-%COMP%]{left:1rem}.t-chevron[_ngcontent-%COMP%]{transition-property:transform;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out;position:-webkit-sticky;position:sticky;right:.75rem;margin:0 .6875rem 0 auto}.t-chevron_rotated[_ngcontent-%COMP%]{transform:rotate(180deg)}'],changeDetection:0}),(0,p.gn)([(0,d.TH)()],n.prototype,"data",void 0),(0,p.gn)([(0,d.TH)()],n.prototype,"heading",void 0),(0,p.gn)([(0,d.TH)()],n.prototype,"open",void 0),n})(),at=(()=>{class n{constructor(e){this.table=e,this.heads=ot.Mm,this.heads$=null}ngAfterContentInit(){this.heads$=this.heads.changes.pipe((0,se.O)(null),(0,J.U)(()=>this.heads.reduce((e,o)=>Object.assign(Object.assign({},e),{[o.tuiHead]:o}),{})))}}return n.\u0275fac=function(e){return new(e||n)(t.Y36((0,t.Gpc)(()=>g)))},n.\u0275cmp=t.Xpm({type:n,selectors:[["tr","tuiThGroup",""]],contentQueries:function(e,o,r){if(1&e&&(t.Suo(r,Y,5),t.Suo(r,L,4)),2&e){let s;t.iGM(s=t.CRH())&&(o.th=s.first),t.iGM(s=t.CRH())&&(o.heads=s)}},features:[t._Bn([st])],attrs:Ae,ngContentSelectors:j,decls:3,vars:3,consts:[[4,"ngIf"],[3,"ngTemplateOutlet",4,"ngFor","ngForOf"],[3,"ngTemplateOutlet"],["plain",""],["tuiTh","",4,"ngIf"],["tuiTh",""]],template:function(e,o){1&e&&(t.F$t(),t.Hsn(0),t.YNc(1,ke,2,1,"ng-container",0),t.ALo(2,"async")),2&e&&(t.xp6(1),t.Q6J("ngIf",t.lcZ(2,1,o.heads$)))},dependencies:[Y,c.O5,c.sg,c.tP,c.Ov],encapsulation:2,changeDetection:0}),n})(),xt=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[c.ez,Z.wq,dt.I,F.EI]]}),n})();var Tt=l(53548);new t.OlP("[TUI_TABLE_SHOW_HIDE_MESSAGE]",{factory:(0,Tt.v)("showHideText")});const Pe=new t.OlP("[TUI_TABLE_PAGINATION_TEXTS]",{factory:(0,Tt.v)("paginationTexts")});var yt=l(91127),vt=l(79791),lt=l(53861);function Je(n,i){if(1&n&&(t.ynx(0),t._uU(1),t.TgZ(2,"strong",6),t._uU(3),t.qZA(),t.BQk()),2&n){const e=t.oxw().ngIf,o=t.oxw();t.xp6(1),t.hij(" ",e.pages," "),t.xp6(2),t.Oqu(o.pages)}}function qe(n,i){if(1&n&&(t.ynx(0),t._uU(1),t.BQk()),2&n){const e=i.polymorpheusOutlet;t.xp6(1),t.hij(" ",e," ")}}function Fe(n,i){1&n&&t._UZ(0,"tui-svg",13)}function Qe(n,i){1&n&&t._UZ(0,"span",14)}const Le=function(n,i){return{$implicit:n,total:i}};function Ye(n,i){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"button",9),t.NdJ("click",function(){const s=t.CHM(e).$implicit,u=t.oxw(3);return t.KtG(u.onItem(s))}),t.YNc(2,qe,2,1,"ng-container",10),t.YNc(3,Fe,1,0,"tui-svg",11),t.YNc(4,Qe,1,0,"ng-template",null,12,t.W1O),t.qZA(),t.BQk()}if(2&n){const e=i.$implicit,o=t.MAs(5),r=t.oxw(3);t.xp6(2),t.Q6J("polymorpheusOutlet",r.options.sizeOptionContent)("polymorpheusOutletContext",t.WLB(4,Le,e,r.total)),t.xp6(1),t.Q6J("ngIf",e===r.size)("ngIfElse",o)}}function ze(n,i){if(1&n&&(t.TgZ(0,"tui-data-list",7),t.YNc(1,Ye,6,7,"ng-container",8),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",e.items)}}function Se(n,i){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"button",15),t.NdJ("click",function(){t.CHM(e);const r=t.oxw(2);return t.KtG(r.back())}),t.qZA(),t.TgZ(2,"button",16),t.NdJ("click",function(){t.CHM(e);const r=t.oxw(2);return t.KtG(r.forth())}),t.qZA(),t.BQk()}if(2&n){const e=i.ngIf,o=t.oxw(2);t.xp6(1),t.Q6J("disabled",o.leftDisabled)("title",e[0]),t.xp6(1),t.Q6J("disabled",o.rightDisabled)("title",e[1])}}function He(n,i){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"span",1),t.YNc(2,Je,4,2,"ng-container",0),t.qZA(),t.TgZ(3,"span",2),t._uU(4),t.TgZ(5,"tui-hosted-dropdown",3),t.NdJ("openChange",function(r){t.CHM(e);const s=t.oxw();return t.KtG(s.open=r)}),t.TgZ(6,"button",4)(7,"strong"),t._uU(8),t.qZA()(),t.YNc(9,ze,2,1,"ng-template",null,5,t.W1O),t.qZA(),t._uU(11),t.TgZ(12,"strong",6),t._uU(13),t.qZA()(),t.YNc(14,Se,3,4,"ng-container",0),t.ALo(15,"async"),t.BQk()}if(2&n){const e=i.ngIf,o=t.MAs(10),r=t.oxw();t.xp6(2),t.Q6J("ngIf",r.options.showPages),t.xp6(2),t.hij(" ",e.linesPerPage," "),t.xp6(1),t.Q6J("content",o)("open",r.open),t.xp6(3),t.AsE("",r.start+1,"\u2013",r.end,""),t.xp6(3),t.hij(" ",e.of," "),t.xp6(2),t.Oqu(r.total),t.xp6(1),t.Q6J("ngIf",t.lcZ(15,9,r.spinTexts$))}}const wt={sizeOptionContent:function Be({$implicit:n}){return`${n}`},showPages:!0,items:[10,20,50,100],size:10},Zt=new t.OlP("[TUI_TABLE_PAGINATION_OPTIONS]",{factory:()=>wt});let ut=(()=>{class n{constructor(e,o,r){this.spinTexts$=e,this.texts$=o,this.options=r,this.items=this.options.items,this.total=0,this.page=0,this.size=this.options.size,this.pageChange=new t.vpe,this.sizeChange=new t.vpe,this.paginationChange=new t.vpe,this.open=!1}get pages(){return Math.ceil(this.total/this.size)}get start(){return this.page*this.size}get end(){return Math.min(this.start+this.size,this.total)}get leftDisabled(){return!this.start}get rightDisabled(){return this.end===this.total}get pagination(){return{page:this.page,size:this.size}}onItem(e){const{start:o}=this;this.size=e,this.sizeChange.emit(e),this.open=!1,this.page=Math.floor(o/this.size),this.pageChange.emit(this.page),this.paginationChange.emit(this.pagination)}back(){this.page--,this.pageChange.emit(this.page),this.paginationChange.emit(this.pagination)}forth(){this.page++,this.pageChange.emit(this.page),this.paginationChange.emit(this.pagination)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(R.U4),t.Y36(Pe),t.Y36(Zt))},n.\u0275cmp=t.Xpm({type:n,selectors:[["tui-table-pagination"]],inputs:{items:"items",total:"total",page:"page",size:"size"},outputs:{pageChange:"pageChange",sizeChange:"sizeChange",paginationChange:"paginationChange"},decls:2,vars:3,consts:[[4,"ngIf"],[1,"t-pages"],["automation-id","tui-table-pagination__lines-per-page-wrapper"],[3,"content","open","openChange"],["tuiLink","","type","button"],["content",""],[1,"t-strong"],["size","s"],[4,"ngFor","ngForOf"],["tuiOption","",1,"t-item",3,"click"],[4,"polymorpheusOutlet","polymorpheusOutletContext"],["src","tuiIconCheckLarge","class","t-checkmark",4,"ngIf","ngIfElse"],["fakeIcon",""],["src","tuiIconCheckLarge",1,"t-checkmark"],[1,"t-checkmark"],["tuiIconButton","","type","button","size","xs","appearance","icon","icon","tuiIconChevronLeft",1,"t-back",3,"disabled","title","click"],["tuiIconButton","","type","button","size","xs","appearance","icon","icon","tuiIconChevronRight",3,"disabled","title","click"]],template:function(e,o){1&e&&(t.YNc(0,He,16,11,"ng-container",0),t.ALo(1,"async")),2&e&&t.Q6J("ngIf",t.lcZ(1,1,o.texts$))},dependencies:[yt.o1,vt.V,lt.qi,lt.vK,F.PN,h.v0,c.O5,c.sg,Z.Li,c.Ov],styles:["[_nghost-%COMP%]{display:flex;font:var(--tui-font-text-s);align-items:center;color:var(--tui-text-03)}.t-strong[_ngcontent-%COMP%]{color:var(--tui-text-01)}.t-pages[_ngcontent-%COMP%]{margin-right:auto}.t-item[_ngcontent-%COMP%]{min-width:5.5rem;box-sizing:border-box}.t-checkmark[_ngcontent-%COMP%]{min-width:1.5rem;border-left:5px solid transparent}.t-back[_ngcontent-%COMP%]{margin:0 .25rem 0 1.5rem}"],changeDetection:0}),(0,p.gn)([(0,d.TH)()],n.prototype,"items",void 0),(0,p.gn)([(0,d.TH)()],n.prototype,"total",void 0),(0,p.gn)([(0,d.TH)()],n.prototype,"page",void 0),(0,p.gn)([(0,d.TH)()],n.prototype,"size",void 0),n})(),Ge=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[c.ez,h.fN,vt.j,yt.jh,lt.pc,F.EI,Z.wq]]}),n})();var et=l(54227);function Ve(n,i){1&n&&(t.TgZ(0,"th",17),t._uU(1," Category Name "),t.qZA()),2&n&&t.Q6J("resizable",!0)}function $e(n,i){1&n&&(t.TgZ(0,"th",18),t._uU(1,"Actions"),t.qZA()),2&n&&t.Q6J("sorter",null)}function Re(n,i){1&n&&(t.TgZ(0,"tr")(1,"td",21),t._uU(2,"No results found!"),t.qZA()())}function je(n,i){if(1&n&&(t.TgZ(0,"td",26),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",null==e?null:e.name," ")}}function Ke(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"div",29)(1,"a",30),t.NdJ("click",function(){t.CHM(e);const r=t.oxw(2).$implicit,s=t.oxw(4),u=t.MAs(15);return t.KtG(s.showAddOrEditDialog(u,r))}),t._UZ(2,"i",31),t.qZA(),t.TgZ(3,"button",32),t.NdJ("click",function(){t.CHM(e);const r=t.oxw(2).$implicit,s=t.oxw(4),u=t.MAs(13);return t.KtG(s.showDeleteDialog(r,u))}),t._UZ(4,"i",33),t.qZA()()}}function We(n,i){if(1&n&&(t.TgZ(0,"td",27),t.YNc(1,Ke,5,0,"div",28),t.qZA()),2&n){const e=t.oxw().$implicit,o=t.oxw(4);t.xp6(1),t.Q6J("ngIf",(null==e?null:e.createdBy)===(null==o.currentUser?null:o.currentUser.id)||1==o.userRoleCheckAdmin)}}function Xe(n,i){1&n&&(t.TgZ(0,"tr",23),t.YNc(1,je,2,1,"td",24),t.YNc(2,We,2,1,"td",25),t.qZA()),2&n&&(t.xp6(1),t.Q6J("tuiCell","name"),t.xp6(1),t.Q6J("tuiCell","actions"))}function tn(n,i){if(1&n&&t.YNc(0,Xe,3,2,"tr",22),2&n){const e=t.oxw().tuiLet;t.Q6J("ngForOf",e)}}function en(n,i){if(1&n&&(t.TgZ(0,"tbody",19),t.YNc(1,Re,3,0,"tr",5),t.YNc(2,tn,1,1,"ng-template",null,20,t.W1O),t.qZA()),2&n){const e=i.tuiLet,o=t.MAs(3);t.Q6J("data",e),t.xp6(1),t.Q6J("ngIf",0==(null==e?null:e.length))("ngIfElse",o)}}const nn=function(){return["name","actions"]};function on(n,i){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"table",9)(2,"thead")(3,"tr",10),t.YNc(4,Ve,2,1,"th",11),t.YNc(5,$e,2,1,"th",12),t.qZA()(),t.YNc(6,en,4,3,"tbody",13),t.ALo(7,"tuiTableSort"),t.TgZ(8,"tfoot",14)(9,"tr")(10,"td",15)(11,"tui-table-pagination",16),t.NdJ("pageChange",function(r){t.CHM(e);const s=t.oxw();return t.KtG(s.changePage(r))})("sizeChange",function(r){t.CHM(e);const s=t.oxw();return t.KtG(s.changeSize(r))}),t.qZA()()()()(),t.BQk()}if(2&n){const e=i.ngIf,o=t.oxw();t.xp6(1),t.Q6J("columns",t.DdM(10,nn)),t.xp6(3),t.Q6J("tuiHead","name"),t.xp6(1),t.Q6J("tuiHead","actions"),t.xp6(1),t.Q6J("tuiLet",t.lcZ(7,8,null==e?null:e.results)),t.xp6(4),t.Q6J("colSpan",12),t.xp6(1),t.Q6J("total",null==e?null:e.totalResults)("size",o.limit)("page",o.page)}}function rn(n,i){1&n&&(t._UZ(0,"tui-loader",34),t.TgZ(1,"p",35),t._uU(2,"Fetching Data..."),t.qZA()),2&n&&t.Q6J("overlay",!1)("inheritColor",!1)}function sn(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"p",36),t._uU(1,"Delete Category"),t.qZA(),t.TgZ(2,"p",37),t._uU(3,"Are you sure you want to delete this category?"),t.qZA(),t.TgZ(4,"div",38)(5,"button",39),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw().deleteCategory(),t.KtG(s.complete())}),t._uU(6," Confirm "),t.qZA(),t.TgZ(7,"button",40),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.KtG(s.complete())}),t._uU(8," Cancel "),t.qZA()()}}function an(n,i){1&n&&(t.TgZ(0,"span",50),t._uU(1," Category is required "),t.qZA())}function ln(n,i){1&n&&(t.TgZ(0,"span",50),t._uU(1," A category with this name already exists. Please provide a different name. "),t.qZA())}function un(n,i){if(1&n&&(t.TgZ(0,"div",45)(1,"label",46),t._uU(2,"Category Name"),t.TgZ(3,"sup",47),t._uU(4,"*"),t.qZA()(),t._UZ(5,"input",48),t.YNc(6,an,2,0,"span",49),t.YNc(7,ln,2,0,"span",49),t.qZA()),2&n){const e=t.oxw(2);t.xp6(5),t.Q6J("formControl",e.categoryControlEdit),t.xp6(1),t.Q6J("ngIf",(null==e.categoryControlEdit?null:e.categoryControlEdit.hasError("required"))&&(null==e.categoryControlEdit?null:e.categoryControlEdit.dirty)),t.xp6(1),t.Q6J("ngIf",null==e.categoryControlEdit?null:e.categoryControlEdit.hasError("codeExists"))}}function cn(n,i){1&n&&(t.TgZ(0,"span",50),t._uU(1," Category is required "),t.qZA())}function pn(n,i){1&n&&(t.TgZ(0,"span",50),t._uU(1," A category with this name already exists. Please provide a different name. "),t.qZA())}function dn(n,i){if(1&n&&(t.TgZ(0,"div",45)(1,"label",46),t._uU(2,"Category Name"),t.TgZ(3,"sup",47),t._uU(4,"*"),t.qZA()(),t._UZ(5,"input",48),t.YNc(6,cn,2,0,"span",49),t.YNc(7,pn,2,0,"span",49),t.qZA()),2&n){const e=t.oxw(2);t.xp6(5),t.Q6J("formControl",e.categoryControl),t.xp6(1),t.Q6J("ngIf",(null==e.categoryControl?null:e.categoryControl.hasError("required"))&&(null==e.categoryControl?null:e.categoryControl.dirty)),t.xp6(1),t.Q6J("ngIf",null==e.categoryControl?null:e.categoryControl.hasError("codeExists"))}}function _n(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"p",41),t._uU(1),t.qZA(),t.YNc(2,un,8,3,"div",42),t.YNc(3,dn,8,3,"div",42),t.TgZ(4,"div",43)(5,"button",40),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.editOrAddCategory())}),t._uU(6),t.qZA(),t.TgZ(7,"button",44),t.NdJ("click",function(){const s=t.CHM(e).$implicit,u=t.oxw();return s.complete(),t.KtG(u.categoryId=null)}),t._uU(8," Cancel "),t.qZA()()}if(2&n){const e=t.oxw();t.xp6(1),t.hij(" ",e.categoryId?"Update":"Add"," Category "),t.xp6(1),t.Q6J("ngIf",e.categoryId),t.xp6(1),t.Q6J("ngIf",!e.categoryId),t.xp6(3),t.hij(" ",e.categoryId?"Update":"Add"," ")}}class S{constructor(i,e,o,r){this.dashboard=i,this.dialogs=e,this.cf=o,this.auth=r,this.categoryEditControl=new a.NI(""),this.categoryId=null,this.destroy$=new P.x,this.limit=10,this.page=0,this.formData=new it.X({isValid:!1}),this.subscription=[],this.categoryControl=new a.NI("",a.kI.compose([a.kI.required]),[f.Iw.createValidator(this.dashboard,"category")]),this.categoryControlEdit=new a.NI("",a.kI.compose([a.kI.required]),[f.Iw.createValidator(this.dashboard,"category",void 0,void 0)]),this.currentUser=this.auth.currentUserValue,this.userRoleCheckAdmin=this.auth.checkIfRolesExist("admin"),this.categories=this.dashboard.getAllCategories(this.limit)}changePage(i){this.page=i,this.categories=this.dashboard.getAllCategories(this.limit)}changeSize(i){this.limit=i,this.categories=this.dashboard.getAllCategories(this.limit)}showAddOrEditDialog(i,e){this.categoryControl.reset(),this.subscription.push(this.dialogs.open(i,{dismissible:!1,closeable:!1}).subscribe()),e?.id?(this.categoryId=e?.id,this.dashboard.excludeIdEmitter.emit(e?.id),this.categoryControlEdit.setValue(e?.name)):this.categoryId=null}editOrAddCategory(){if(this.categoryId){if(this.categoryControlEdit.invalid)return void this.categoryControlEdit.markAsDirty();this.dashboard.editCategory({name:this.categoryControlEdit.value},this.categoryId).pipe((0,m.R)(this.destroy$)).subscribe(e=>{e&&(this.categoryId=null,this.categories=this.dashboard.getAllCategories(this.limit),this.cf.detectChanges(),this.subscription.forEach(o=>o.unsubscribe()),this.categoryControlEdit.reset(),this.categoryControl.reset())})}else{if(this.categoryControl.invalid)return void this.categoryControl.markAsDirty();this.dashboard.addCategory({name:this.categoryControl.value}).pipe((0,m.R)(this.destroy$)).subscribe(e=>{e&&(this.categories=this.dashboard.getAllCategories(this.limit),this.cf.detectChanges(),this.subscription.forEach(o=>o.unsubscribe()),this.categoryControlEdit.reset(),this.categoryControl.reset())})}}showStatus(i){return 1==i?"Published":2==i?"Deleted":"Draft"}deleteCategory(){this.dashboard.deleteCategory(this.categoryId).pipe((0,m.R)(this.destroy$)).subscribe(()=>{this.categories=this.dashboard.getAllCategories(this.limit),this.categoryId=null,this.cf.detectChanges()})}showDeleteDialog(i,e){this.dialogs.open(e,{dismissible:!1,closeable:!1}).subscribe(),this.categoryId=i?.id}ngOnDestroy(){this.destroy$.complete(),this.destroy$.unsubscribe()}}S.\u0275fac=function(i){return new(i||S)(t.Y36(b.s),t.Y36(x.RO),t.Y36(t.sBO),t.Y36(E.e))},S.\u0275cmp=t.Xpm({type:S,selectors:[["ng-component"]],decls:16,vars:4,consts:[[1,"bg_img_main"],[1,"w-11/12","mx-auto","mt-52","pb-60"],[1,"flex","justify-end","mb-5"],[1,"cursor-pointer"],[1,"px-4","py-2","rounded-lg","bg-[#a58f81]","text-white","no-underline","hover:text-white","text-sm",3,"click"],[4,"ngIf","ngIfElse"],["loading",""],["deltemplate",""],["addTemplate",""],["tuiTable","",1,"w-full","rounded-lg",3,"columns"],["tuiThGroup",""],["tuiTh","","class","w-11/12 text-base",3,"resizable",4,"tuiHead"],["class","text-base","tuiTh","",3,"sorter",4,"tuiHead"],["tuiTbody","",3,"data",4,"tuiLet"],[1,"bg-white"],[1,"px-3","py-6","border","border-gray-300",3,"colSpan"],[3,"total","size","page","pageChange","sizeChange"],["tuiTh","",1,"w-11/12","text-base",3,"resizable"],["tuiTh","",1,"text-base",3,"sorter"],["tuiTbody","",3,"data"],["showData",""],["colspan","12",1,"px-4","py-8","text-lg","font-medium","text-center","text-gray-500","bg-white","border","border-gray-300"],["tuiTr","",4,"ngFor","ngForOf"],["tuiTr",""],["class","py-3 font-semibold","tuiTd","",4,"tuiCell"],["tuiTd","",4,"tuiCell"],["tuiTd","",1,"py-3","font-semibold"],["tuiTd",""],["class","flex justify-start",4,"ngIf"],[1,"flex","justify-start"],[1,"px-2","py-1","mx-2","text-white","bg-blue-400","rounded-md","cursor-pointer","hover:text-white",3,"click"],["aria-hidden","true",1,"fa","fa-pencil-square-o"],[1,"px-2","py-1","text-white","bg-red-500","rounded-md",3,"click"],["aria-hidden","true",1,"fa","fa-trash"],["size","xl",1,"mt-14",3,"overlay","inheritColor"],[1,"text-base","font-medium","text-center","my-2","text-[#6C86E2]"],[1,"pb-2","text-xl","font-semibold","text-center","border-b","border-gray-400"],[1,"mt-4","text-base","font-medium","text-center"],[1,"flex","justify-center","mt-4"],["tuiButton","","appearance","secondary-destructive","type","button","size","m",1,"mx-3",3,"click"],["tuiButton","","type","button","size","m",3,"click"],[1,"text-lg","font-semibold","text-center"],["class","flex flex-col justify-center my-5",4,"ngIf"],[1,"flex","justify-center","gap-x-3"],["tuiButton","","type","button","size","m","appearance","accent",3,"click"],[1,"flex","flex-col","justify-center","my-5"],["for","Textarea2",1,"block"],[1,"text-red-500"],[1,"mb-1","form-control",3,"formControl"],["class","text-xs text-red-500",4,"ngIf"],[1,"text-xs","text-red-500"]],template:function(i,e){if(1&i){const o=t.EpF();t._UZ(0,"app-header"),t.TgZ(1,"div",0)(2,"section",1)(3,"div",2)(4,"div",3)(5,"a",4),t.NdJ("click",function(){t.CHM(o);const s=t.MAs(15);return t.KtG(e.showAddOrEditDialog(s,null))}),t._uU(6,"+ Add category"),t.qZA()()(),t.YNc(7,on,12,11,"ng-container",5),t.ALo(8,"async"),t.YNc(9,rn,3,2,"ng-template",null,6,t.W1O),t.qZA()(),t._UZ(11,"app-footer"),t.YNc(12,sn,9,0,"ng-template",null,7,t.W1O),t.YNc(14,_n,9,4,"ng-template",null,8,t.W1O)}if(2&i){const o=t.MAs(10);t.xp6(7),t.Q6J("ngIf",t.lcZ(8,2,e.categories))("ngIfElse",o)}},dependencies:[c.sg,c.O5,T.G,h.v0,y.c,g,tt,at,Y,W,X,K,L,et.Ls,a.Fj,a.JJ,a.oH,V.kM,ut,c.Ov,z],changeDetection:0});var mn=l(78372),gn=l(1668);function hn(n,i){1&n&&(t.TgZ(0,"th",21),t._uU(1," Full Name "),t.qZA()),2&n&&t.Q6J("resizable",!0)}function fn(n,i){1&n&&(t.TgZ(0,"th",21),t._uU(1," Email "),t.qZA()),2&n&&t.Q6J("resizable",!0)}function Cn(n,i){1&n&&(t.TgZ(0,"th",21),t._uU(1," Role/s "),t.qZA()),2&n&&t.Q6J("resizable",!0)}function bn(n,i){1&n&&(t.TgZ(0,"th",22),t._uU(1,"Actions"),t.qZA()),2&n&&t.Q6J("sorter",null)}function xn(n,i){1&n&&(t.TgZ(0,"tr")(1,"td",25),t._uU(2,"No results found!"),t.qZA()())}function Tn(n,i){if(1&n&&(t.TgZ(0,"td",30),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",null==e?null:e.fullName," ")}}function yn(n,i){if(1&n&&(t.TgZ(0,"td",30),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",null==e?null:e.email," ")}}function vn(n,i){if(1&n&&(t.TgZ(0,"td",30),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",null==e?null:e.roles," ")}}function wn(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"td",31)(1,"div",32)(2,"a",33),t.NdJ("click",function(){t.CHM(e);const r=t.oxw().$implicit,s=t.oxw(4),u=t.MAs(15);return t.KtG(s.showDialog(u,r))}),t._UZ(3,"i",34),t.qZA(),t.TgZ(4,"button",35),t.NdJ("click",function(){t.CHM(e);const r=t.oxw().$implicit,s=t.oxw(4),u=t.MAs(17);return t.KtG(s.showDeleteDialog(r,u))}),t._UZ(5,"i",36),t.qZA()()()}if(2&n){const e=t.oxw().$implicit,o=t.oxw(4);t.xp6(1),t.Q6J("ngClass",0==o.checkRoles(null==e?null:e.roles)?"block":"hidden")}}function Zn(n,i){1&n&&(t.TgZ(0,"tr",27),t.YNc(1,Tn,2,1,"td",28),t.YNc(2,yn,2,1,"td",28),t.YNc(3,vn,2,1,"td",28),t.YNc(4,wn,6,1,"td",29),t.qZA()),2&n&&(t.xp6(1),t.Q6J("tuiCell","full name"),t.xp6(1),t.Q6J("tuiCell","email"),t.xp6(1),t.Q6J("tuiCell","role"),t.xp6(1),t.Q6J("tuiCell","actions"))}function An(n,i){if(1&n&&t.YNc(0,Zn,5,4,"tr",26),2&n){const e=t.oxw().tuiLet;t.Q6J("ngForOf",e)}}function In(n,i){if(1&n&&(t.TgZ(0,"tbody",23),t.YNc(1,xn,3,0,"tr",7),t.YNc(2,An,1,1,"ng-template",null,24,t.W1O),t.qZA()),2&n){const e=i.tuiLet,o=t.MAs(3);t.Q6J("data",e),t.xp6(1),t.Q6J("ngIf",0==(null==e?null:e.length))("ngIfElse",o)}}const Un=function(){return["fullName","email","role","actions"]};function Dn(n,i){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"table",12)(2,"thead",13)(3,"tr",14),t.YNc(4,hn,2,1,"th",15),t.YNc(5,fn,2,1,"th",15),t.YNc(6,Cn,2,1,"th",15),t.YNc(7,bn,2,1,"th",16),t.qZA()(),t.YNc(8,In,4,3,"tbody",17),t.ALo(9,"tuiTableSort"),t.TgZ(10,"tfoot",18)(11,"tr")(12,"td",19)(13,"tui-table-pagination",20),t.NdJ("pageChange",function(r){t.CHM(e);const s=t.oxw();return t.KtG(s.changePage(r))})("sizeChange",function(r){t.CHM(e);const s=t.oxw();return t.KtG(s.changeSize(r))}),t.qZA()()()()(),t.BQk()}if(2&n){const e=i.ngIf,o=t.oxw();t.xp6(1),t.Q6J("columns",t.DdM(12,Un)),t.xp6(3),t.Q6J("tuiHead","fullName"),t.xp6(1),t.Q6J("tuiHead","email"),t.xp6(1),t.Q6J("tuiHead","role"),t.xp6(1),t.Q6J("tuiHead","actions"),t.xp6(1),t.Q6J("tuiLet",t.lcZ(9,10,null==e?null:e.results)),t.xp6(4),t.Q6J("colSpan",12),t.xp6(1),t.Q6J("total",null==e?null:e.totalResults)("size",o.limit)("page",o.page)}}function kn(n,i){1&n&&(t._UZ(0,"tui-loader",37),t.TgZ(1,"p",38),t._uU(2,"Fetching Data..."),t.qZA()),2&n&&t.Q6J("overlay",!1)("inheritColor",!1)}function En(n,i){1&n&&(t.TgZ(0,"span",55),t._uU(1," Full name is required "),t.qZA())}function Mn(n,i){1&n&&(t.TgZ(0,"span",55),t._uU(1," Email is required "),t.qZA())}function Nn(n,i){1&n&&(t.TgZ(0,"span",55),t._uU(1," Please provide a valid email address "),t.qZA())}function On(n,i){1&n&&(t.TgZ(0,"span",55),t._uU(1," A user with this email already exists. Please provide a different email. "),t.qZA())}function Pn(n,i){1&n&&(t.TgZ(0,"span",55),t._uU(1," Please specify user role "),t.qZA())}function Jn(n,i){1&n&&(t.TgZ(0,"span",55),t._uU(1," Password is required "),t.qZA())}function qn(n,i){1&n&&(t.TgZ(0,"span",55),t._uU(1," Password should be at least 8 characters long "),t.qZA())}function Fn(n,i){1&n&&(t.TgZ(0,"p",55),t._uU(1," Password should have at least one number and one character "),t.qZA())}function Qn(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"p",39),t._uU(1," Update User "),t.qZA(),t.TgZ(2,"div",40)(3,"div",41)(4,"label",42),t._uU(5,"Full Name"),t.TgZ(6,"sup",43),t._uU(7,"*"),t.qZA()(),t._UZ(8,"input",44),t.YNc(9,En,2,0,"span",45),t.qZA(),t.TgZ(10,"div",46)(11,"label",42),t._uU(12,"Email"),t.TgZ(13,"sup",43),t._uU(14,"*"),t.qZA()(),t._UZ(15,"input",47),t.YNc(16,Mn,2,0,"span",45),t.YNc(17,Nn,2,0,"span",45),t.YNc(18,On,2,0,"span",45),t.qZA(),t.TgZ(19,"div",46)(20,"label",42),t._uU(21,"Role"),t.TgZ(22,"sup",43),t._uU(23,"*"),t.qZA()(),t.TgZ(24,"select",48)(25,"option",49),t._uU(26,"Admin"),t.qZA(),t.TgZ(27,"option",50),t._uU(28,"User"),t.qZA()(),t.YNc(29,Pn,2,0,"span",45),t.qZA(),t.TgZ(30,"div",46)(31,"label",42),t._uU(32,"Password"),t.qZA(),t._UZ(33,"input",51),t.YNc(34,Jn,2,0,"span",45),t.YNc(35,qn,2,0,"span",45),t.YNc(36,Fn,2,0,"p",45),t.qZA()(),t.TgZ(37,"div",52)(38,"button",53),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.editOrAddUser())}),t._uU(39," Update "),t.qZA(),t.TgZ(40,"button",54),t.NdJ("click",function(){const s=t.CHM(e).$implicit,u=t.oxw();return s.complete(),t.KtG(u.userId=null)}),t._uU(41," Cancel "),t.qZA()()}if(2&n){const e=t.oxw();t.xp6(2),t.Q6J("formGroup",e.userEditFormCustom),t.xp6(7),t.Q6J("ngIf",(null==e.fE.fullName?null:e.fE.fullName.hasError("required"))&&(null==e.fE.fullName?null:e.fE.fullName.dirty)),t.xp6(7),t.Q6J("ngIf",(null==e.fE.email?null:e.fE.email.hasError("required"))&&(null==e.fE.email?null:e.fE.email.dirty)),t.xp6(1),t.Q6J("ngIf",(null==e.fE.email?null:e.fE.email.hasError("pattern"))&&(null==e.fE.email?null:e.fE.email.dirty)),t.xp6(1),t.Q6J("ngIf",null==e.fE.email?null:e.fE.email.hasError("codeExists")),t.xp6(11),t.Q6J("ngIf",(null==e.fE.role?null:e.fE.role.hasError("required"))&&(null==e.f.role?null:e.f.role.dirty)),t.xp6(5),t.Q6J("ngIf",(null==e.fE.password?null:e.fE.password.hasError("required"))&&(null==e.fE.password?null:e.fE.password.dirty)),t.xp6(1),t.Q6J("ngIf",(null==e.fE.password?null:e.fE.password.hasError("minlength"))&&(null==e.fE.password?null:e.fE.password.dirty)),t.xp6(1),t.Q6J("ngIf",(null==e.fE.password?null:e.fE.password.hasError("pattern"))&&(null==e.fE.password?null:e.fE.password.dirty))}}function Ln(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"p",56),t._uU(1,"Delete User"),t.qZA(),t.TgZ(2,"p",57),t._uU(3,"Are you sure you want to delete this user ?"),t.qZA(),t.TgZ(4,"div",58)(5,"button",59),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw().deleteUser(),t.KtG(s.complete())}),t._uU(6," Confirm "),t.qZA(),t.TgZ(7,"button",54),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.KtG(s.complete())}),t._uU(8," Cancel "),t.qZA()()}}function Yn(n,i){1&n&&(t.TgZ(0,"span",55),t._uU(1," Full name is required "),t.qZA())}function zn(n,i){1&n&&(t.TgZ(0,"span",55),t._uU(1," Email is required "),t.qZA())}function Sn(n,i){1&n&&(t.TgZ(0,"span",55),t._uU(1," Please provide a valid email address "),t.qZA())}function Hn(n,i){1&n&&(t.TgZ(0,"span",55),t._uU(1," A user with this email already exists. Please provide a different email. "),t.qZA())}function Bn(n,i){1&n&&(t.TgZ(0,"span",55),t._uU(1," Please specify user role "),t.qZA())}function Gn(n,i){1&n&&(t.TgZ(0,"span",55),t._uU(1," Password is required "),t.qZA())}function Vn(n,i){1&n&&(t.TgZ(0,"span",55),t._uU(1," Password should be at least 8 characters long "),t.qZA())}function $n(n,i){1&n&&(t.TgZ(0,"p",55),t._uU(1," Password should have at least one number and one character "),t.qZA())}function Rn(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"p",39),t._uU(1," Add User "),t.qZA(),t.TgZ(2,"div",40)(3,"div",41)(4,"label",42),t._uU(5,"Full Name"),t.TgZ(6,"sup",43),t._uU(7,"*"),t.qZA()(),t._UZ(8,"input",60),t.YNc(9,Yn,2,0,"span",45),t.qZA(),t.TgZ(10,"div",46)(11,"label",42),t._uU(12,"Email"),t.TgZ(13,"sup",43),t._uU(14,"*"),t.qZA()(),t._UZ(15,"input",61),t.YNc(16,zn,2,0,"span",45),t.YNc(17,Sn,2,0,"span",45),t.YNc(18,Hn,2,0,"span",45),t.qZA(),t.TgZ(19,"div",46)(20,"label",42),t._uU(21,"Role"),t.TgZ(22,"sup",43),t._uU(23,"*"),t.qZA()(),t.TgZ(24,"select",48)(25,"option",49),t._uU(26,"Admin"),t.qZA(),t.TgZ(27,"option",50),t._uU(28,"User"),t.qZA()(),t.YNc(29,Bn,2,0,"span",45),t.qZA(),t.TgZ(30,"div",46)(31,"label",42),t._uU(32,"Password"),t.qZA(),t._UZ(33,"input",62),t.YNc(34,Gn,2,0,"span",45),t.YNc(35,Vn,2,0,"span",45),t.YNc(36,$n,2,0,"p",45),t.qZA()(),t.TgZ(37,"div",52)(38,"button",53),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.editOrAddUser())}),t._uU(39," Add "),t.qZA(),t.TgZ(40,"button",54),t.NdJ("click",function(){const s=t.CHM(e).$implicit,u=t.oxw();return s.complete(),t.KtG(u.userAddFormCustom.reset())}),t._uU(41," Cancel "),t.qZA()()}if(2&n){const e=t.oxw();t.xp6(2),t.Q6J("formGroup",e.userAddFormCustom),t.xp6(7),t.Q6J("ngIf",(null==e.f.fullName?null:e.f.fullName.hasError("required"))&&(null==e.f.fullName?null:e.f.fullName.dirty)),t.xp6(7),t.Q6J("ngIf",(null==e.f.email?null:e.f.email.hasError("required"))&&(null==e.f.email?null:e.f.email.dirty)),t.xp6(1),t.Q6J("ngIf",(null==e.f.email?null:e.f.email.hasError("pattern"))&&(null==e.f.email?null:e.f.email.dirty)),t.xp6(1),t.Q6J("ngIf",null==e.f.email?null:e.f.email.hasError("codeExists")),t.xp6(11),t.Q6J("ngIf",(null==e.f.role?null:e.f.role.hasError("required"))&&(null==e.f.role?null:e.f.role.dirty)),t.xp6(5),t.Q6J("ngIf",(null==e.f.password?null:e.f.password.hasError("required"))&&(null==e.f.password?null:e.f.password.dirty)),t.xp6(1),t.Q6J("ngIf",(null==e.f.password?null:e.f.password.hasError("minlength"))&&(null==e.f.password?null:e.f.password.dirty)),t.xp6(1),t.Q6J("ngIf",(null==e.f.password?null:e.f.password.hasError("pattern"))&&(null==e.f.password?null:e.f.password.dirty))}}class H{constructor(i,e,o,r){this.dashboard=i,this.auth=e,this.dialogs=o,this.cf=r,this.userId=null,this.destroy$=new P.x,this.limit=10,this.page=0,this.searchValue=new a.NI,this.fetchingUsers=new P.x,this.subscription=[],this.userAddFormCustom=new a.cw({fullName:new a.NI(null,a.kI.compose([a.kI.required])),email:new a.NI(null,a.kI.compose([a.kI.required,a.kI.pattern("^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+.[a-zA-Z]{2,}$")]),[f.Iw.createValidator(this.dashboard,"user")]),role:new a.NI(null,a.kI.compose([a.kI.required])),password:new a.NI("Welcome1!",a.kI.compose([a.kI.minLength(8),a.kI.pattern("^(?=.*[0-9])(?=.*[a-zA-Z]).*$")]))}),this.userEditFormCustom=new a.cw({fullName:new a.NI(null,a.kI.compose([a.kI.required])),email:new a.NI(null,a.kI.compose([a.kI.required,a.kI.pattern("^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+.[a-zA-Z]{2,}$")]),[f.Iw.createValidator(this.dashboard,"user",void 0,void 0)]),role:new a.NI(null,a.kI.compose([a.kI.required])),password:new a.NI(null,a.kI.compose([a.kI.minLength(8),a.kI.pattern("^(?=.*[0-9])(?=.*[a-zA-Z]).*$")]))}),this.users=this.dashboard.getAllUsersForListing(this.limit,this.page),this.searchValue.valueChanges.pipe((0,mn.b)(400),(0,mt.x)(),(0,$.w)(s=>this.users=""==s?this.dashboard.getAllUsersForListing(this.limit,this.page):this.dashboard.getAllUsersForListing(this.limit,this.page,s)),(0,m.R)(this.destroy$)).subscribe(()=>{this.cf.detectChanges()})}get f(){return this.userAddFormCustom.controls}get fE(){return this.userEditFormCustom.controls}changePage(i){this.page=i,this.users=this.dashboard.getAllUsersForListing(this.limit,this.page)}changeSize(i){this.limit=i,this.users=this.dashboard.getAllUsersForListing(this.limit,this.page)}checkRoles(i){return i?.includes("sysAdmin")}showDialog(i,e){this.subscription.push(this.dialogs.open(i,{dismissible:!1,closeable:!1}).subscribe()),this.userId=e?.id||null,this.dashboard.excludeIdEmitter.emit(e?.id?e?.id:null),this.userEditFormCustom?.controls.fullName?.setValue(e?.fullName),this.userEditFormCustom?.controls.email?.setValue(e?.email),this.userEditFormCustom?.controls.role?.setValue(e?.roles[0]),this.userEditFormCustom?.controls.password?.setValue(e?.password)}showAddDialog(i){this.subscription.push(this.dialogs.open(i,{dismissible:!1,closeable:!1}).subscribe()),this.formSubmission={data:{}}}showDeleteDialog(i,e){this.dialogs.open(e,{dismissible:!1,closeable:!1}).subscribe(),this.userId=i?.id}editOrAddUser(){if(this.userId){if(this.fE.email?.invalid||this.fE.fullName?.invalid||this.fE.role?.invalid)return this.fE.email?.markAsDirty(),this.fE.fullName?.markAsDirty(),void this.fE.role?.markAsDirty();if(this.fE.password?.value&&this.fE.password?.invalid)return this.fE.email?.markAsDirty(),this.fE.fullName?.markAsDirty(),this.fE.role?.markAsDirty(),void this.fE.password?.markAsDirty();this.dashboard.updateUser(this.userId,{roles:[this.userEditFormCustom?.value?.role],fullName:this.userEditFormCustom?.value?.fullName,email:this.userEditFormCustom?.value?.email,password:this.userEditFormCustom?.value?.password||void 0}).pipe((0,m.R)(this.destroy$)).subscribe(e=>{e&&(this.users=this.dashboard.getAllUsersForListing(this.limit,this.page),this.cf.detectChanges(),this.userId=null,this.subscription.forEach(o=>o.unsubscribe()),this.userEditFormCustom.reset(),this.userAddFormCustom.reset())})}else{if(this.f.email?.invalid||this.f.fullName?.invalid||this.f.role?.invalid)return this.f.email?.markAsDirty(),this.f.fullName?.markAsDirty(),void this.f.role?.markAsDirty();if(this.f.password?.value&&this.f.password?.invalid)return this.f.email?.markAsDirty(),this.f.fullName?.markAsDirty(),this.f.role?.markAsDirty(),void this.f.password?.markAsDirty();this.dashboard.addNewUser({roles:[this.userAddFormCustom?.value?.role],fullName:this.userAddFormCustom?.value?.fullName,email:this.userAddFormCustom?.value?.email,password:this.userAddFormCustom?.value?.password||void 0}).pipe((0,m.R)(this.destroy$)).subscribe(e=>{e&&(this.users=this.dashboard.getAllUsersForListing(this.limit,this.page),this.cf.detectChanges(),this.userId=null,this.subscription.forEach(o=>o.unsubscribe()),this.userEditFormCustom.reset(),this.userAddFormCustom.reset())})}}deleteUser(){this.dashboard.deleteUser(this.userId).pipe((0,m.R)(this.destroy$)).subscribe(()=>{this.users=this.dashboard.getAllUsersForListing(this.limit,this.page),this.cf.detectChanges(),this.userId=null})}ngOnDestroy(){this.destroy$.complete(),this.destroy$.unsubscribe()}}function jn(n,i){1&n&&(t.TgZ(0,"th",20),t._uU(1," Group Code "),t.qZA()),2&n&&t.Q6J("resizable",!0)}function Kn(n,i){1&n&&(t.TgZ(0,"th",21),t._uU(1," Company Name "),t.qZA()),2&n&&t.Q6J("resizable",!0)}function Wn(n,i){1&n&&(t.TgZ(0,"th",22),t._uU(1,"Actions"),t.qZA()),2&n&&t.Q6J("sorter",null)}function Xn(n,i){1&n&&(t.TgZ(0,"tr")(1,"td",25),t._uU(2,"No results found!"),t.qZA()())}function ti(n,i){if(1&n&&(t.TgZ(0,"td",30),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",null==e?null:e.title," ")}}function ei(n,i){if(1&n&&(t.TgZ(0,"td",30),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",null==e?null:e.groupCode," ")}}function ni(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"td",31)(1,"div",32)(2,"a",33),t.NdJ("click",function(){t.CHM(e);const r=t.oxw().$implicit,s=t.oxw(4),u=t.MAs(15);return t.KtG(s.showDialog(u,r))}),t._UZ(3,"i",34),t.qZA(),t.TgZ(4,"button",35),t.NdJ("click",function(){t.CHM(e);const r=t.oxw().$implicit,s=t.oxw(4),u=t.MAs(17);return t.KtG(s.showDeleteDialog(r,u))}),t._UZ(5,"i",36),t.qZA()()()}}function ii(n,i){1&n&&(t.TgZ(0,"tr",27),t.YNc(1,ti,2,1,"td",28),t.YNc(2,ei,2,1,"td",28),t.YNc(3,ni,6,0,"td",29),t.qZA()),2&n&&(t.xp6(1),t.Q6J("tuiCell","title"),t.xp6(1),t.Q6J("tuiCell","groupCode"),t.xp6(1),t.Q6J("tuiCell","actions"))}function oi(n,i){if(1&n&&t.YNc(0,ii,4,3,"tr",26),2&n){const e=t.oxw().tuiLet;t.Q6J("ngForOf",e)}}function ri(n,i){if(1&n&&(t.TgZ(0,"tbody",23),t.YNc(1,Xn,3,0,"tr",5),t.YNc(2,oi,1,1,"ng-template",null,24,t.W1O),t.qZA()),2&n){const e=i.tuiLet,o=t.MAs(3);t.Q6J("data",e),t.xp6(1),t.Q6J("ngIf",0==(null==e?null:e.length))("ngIfElse",o)}}H.\u0275fac=function(i){return new(i||H)(t.Y36(b.s),t.Y36(E.e),t.Y36(x.RO),t.Y36(t.sBO))},H.\u0275cmp=t.Xpm({type:H,selectors:[["ng-component"]],decls:20,vars:5,consts:[[1,"bg_img_main"],[1,"w-11/12","mx-auto","mt-52","pb-60"],[1,"flex","justify-between","mb-5"],[1,"w-2/5"],["appTrim","","placeholder","Search users by Full name",1,"form-control",3,"formControl"],[1,"cursor-pointer"],[1,"px-4","py-2","rounded-lg","bg-[#a58f81]","text-white","no-underline","hover:text-white","text-sm",3,"click"],[4,"ngIf","ngIfElse"],["loading",""],["template",""],["deltemplate",""],["addTemplate",""],["tuiTable","",1,"w-full","rounded-lg",3,"columns"],[1,"border","border-gray-300"],["tuiThGroup",""],["tuiTh","","class","text-base w-[29%]",3,"resizable",4,"tuiHead"],["class","w-[12.5%] text-base","tuiTh","",3,"sorter",4,"tuiHead"],["tuiTbody","",3,"data",4,"tuiLet"],[1,"bg-white"],[1,"px-3","py-6","border","border-gray-300",3,"colSpan"],[3,"total","size","page","pageChange","sizeChange"],["tuiTh","",1,"text-base","w-[29%]",3,"resizable"],["tuiTh","",1,"w-[12.5%]","text-base",3,"sorter"],["tuiTbody","",3,"data"],["showData",""],["colspan","12",1,"px-4","py-8","text-lg","font-medium","text-center","text-gray-500","bg-white","border","border-gray-300"],["tuiTr","",4,"ngFor","ngForOf"],["tuiTr",""],["class","py-3 font-semibold","tuiTd","",4,"tuiCell"],["tuiTd","",4,"tuiCell"],["tuiTd","",1,"py-3","font-semibold"],["tuiTd",""],[1,"flex","justify-start",3,"ngClass"],[1,"px-2","py-1","mx-2","text-white","bg-blue-400","rounded-md","cursor-pointer","hover:text-white",3,"click"],["aria-hidden","true",1,"fa","fa-pencil-square-o"],[1,"px-2","py-1","text-white","bg-red-500","rounded-md",3,"click"],["aria-hidden","true",1,"fa","fa-trash"],["size","xl",1,"mt-14",3,"overlay","inheritColor"],[1,"text-base","font-medium","text-center","my-2","text-[#6C86E2]"],[1,"text-lg","font-semibold","text-center"],[1,"flex","flex-col","justify-center","my-5",3,"formGroup"],[1,"mb-2"],[1,"block"],[1,"text-red-500"],["formControlName","fullName",1,"mb-1","form-control"],["class","text-xs text-red-500",4,"ngIf"],[1,"my-2"],["formControlName","email",1,"mb-1","form-control"],["aria-label","Default select example","formControlName","role",1,"form-select","form-control"],["value","admin"],["value","user"],["type","password","formControlName","password",1,"mb-1","form-control"],[1,"flex","justify-center","gap-x-3"],["tuiButton","","type","button","size","m",3,"click"],["tuiButton","","type","button","size","m","appearance","accent",3,"click"],[1,"text-xs","text-red-500"],[1,"pb-2","text-xl","font-semibold","text-center","border-b","border-gray-400"],[1,"mt-4","text-base","font-medium","text-center"],[1,"flex","justify-center","mt-4"],["tuiButton","","appearance","secondary-destructive","type","button","size","m",1,"mx-3",3,"click"],["autocomplete","new-password","formControlName","fullName",1,"mb-1","form-control"],["autocomplete","new-password","formControlName","email",1,"mb-1","form-control"],["autocomplete","new-password","type","password","formControlName","password",1,"mb-1","form-control"]],template:function(i,e){if(1&i){const o=t.EpF();t._UZ(0,"app-header"),t.TgZ(1,"div",0)(2,"section",1)(3,"div",2)(4,"div",3),t._UZ(5,"input",4),t.qZA(),t.TgZ(6,"div",5)(7,"a",6),t.NdJ("click",function(){t.CHM(o);const s=t.MAs(19);return t.KtG(e.showAddDialog(s))}),t._uU(8,"+ Add new user"),t.qZA()()(),t.YNc(9,Dn,14,13,"ng-container",7),t.ALo(10,"async"),t.YNc(11,kn,3,2,"ng-template",null,8,t.W1O),t.qZA()(),t._UZ(13,"app-footer"),t.YNc(14,Qn,42,9,"ng-template",null,9,t.W1O),t.YNc(16,Ln,9,0,"ng-template",null,10,t.W1O),t.YNc(18,Rn,42,9,"ng-template",null,11,t.W1O)}if(2&i){const o=t.MAs(12);t.xp6(5),t.Q6J("formControl",e.searchValue),t.xp6(4),t.Q6J("ngIf",t.lcZ(10,3,e.users))("ngIfElse",o)}},dependencies:[c.mk,c.sg,c.O5,T.G,h.v0,y.c,g,tt,at,Y,W,X,K,L,et.Ls,a.YN,a.Kr,a.Fj,a.EJ,a.JJ,a.JL,a.oH,a.sg,a.u,V.kM,ut,gn.$,c.Ov,z],changeDetection:0});const si=function(){return["groupCode","title","actions"]};function ai(n,i){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"table",10)(2,"thead",11)(3,"tr",12),t.YNc(4,jn,2,1,"th",13),t.YNc(5,Kn,2,1,"th",14),t.YNc(6,Wn,2,1,"th",15),t.qZA()(),t.YNc(7,ri,4,3,"tbody",16),t.ALo(8,"tuiTableSort"),t.TgZ(9,"tfoot",17)(10,"tr")(11,"td",18)(12,"tui-table-pagination",19),t.NdJ("pageChange",function(r){t.CHM(e);const s=t.oxw();return t.KtG(s.changePage(r))})("sizeChange",function(r){t.CHM(e);const s=t.oxw();return t.KtG(s.changeSize(r))}),t.qZA()()()()(),t.BQk()}if(2&n){const e=i.ngIf,o=t.oxw();t.xp6(1),t.Q6J("columns",t.DdM(11,si)),t.xp6(3),t.Q6J("tuiHead","groupCode"),t.xp6(1),t.Q6J("tuiHead","title"),t.xp6(1),t.Q6J("tuiHead","actions"),t.xp6(1),t.Q6J("tuiLet",t.lcZ(8,9,null==e?null:e.results)),t.xp6(4),t.Q6J("colSpan",12),t.xp6(1),t.Q6J("total",null==e?null:e.totalResults)("size",o.limit)("page",o.page)}}function li(n,i){1&n&&(t._UZ(0,"tui-loader",37),t.TgZ(1,"p",38),t._uU(2,"Fetching Data..."),t.qZA()),2&n&&t.Q6J("overlay",!1)("inheritColor",!1)}function ui(n,i){1&n&&(t.TgZ(0,"span",48),t._uU(1," Company name is required "),t.qZA())}function ci(n,i){1&n&&(t.TgZ(0,"span",48),t._uU(1," A company with this name already exists. Please provide another name. "),t.qZA())}function pi(n,i){1&n&&(t.TgZ(0,"span",48),t._uU(1," Group Code is required "),t.qZA())}function di(n,i){1&n&&(t.TgZ(0,"span",48),t._uU(1," Group Code should be at least 3 characters "),t.qZA())}function _i(n,i){1&n&&(t.TgZ(0,"span",48),t._uU(1," Group Code should not exceed 4 characters "),t.qZA())}function mi(n,i){1&n&&(t.TgZ(0,"span",48),t._uU(1," A company with this code already exists. Please provide a different code. "),t.qZA())}function gi(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"p",39),t._uU(1," Add Company "),t.qZA(),t.TgZ(2,"div",40)(3,"label",41),t._uU(4,"Company Name "),t.TgZ(5,"sup",42),t._uU(6,"*"),t.qZA()(),t._UZ(7,"input",43),t.YNc(8,ui,2,0,"span",44),t.YNc(9,ci,2,0,"span",44),t.qZA(),t.TgZ(10,"div",40)(11,"label",41),t._uU(12,"Group Code"),t.TgZ(13,"sup",42),t._uU(14,"*"),t.qZA()(),t._UZ(15,"input",43),t.YNc(16,pi,2,0,"span",44),t.YNc(17,di,2,0,"span",44),t.YNc(18,_i,2,0,"span",44),t.YNc(19,mi,2,0,"span",44),t.qZA(),t.TgZ(20,"div",45)(21,"button",46),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.editOrAddCompany())}),t._uU(22," Add "),t.qZA(),t.TgZ(23,"button",47),t.NdJ("click",function(){const s=t.CHM(e).$implicit,u=t.oxw();return s.complete(),u.categoryEditControl.reset(),u.groupCodeControl.reset(),t.KtG(u.categoryId=null)}),t._uU(24," Cancel "),t.qZA()()}if(2&n){const e=t.oxw();t.xp6(7),t.Q6J("formControl",e.categoryEditControl),t.xp6(1),t.Q6J("ngIf",(null==e.categoryEditControl?null:e.categoryEditControl.hasError("required"))&&(null==e.categoryEditControl?null:e.categoryEditControl.dirty)),t.xp6(1),t.Q6J("ngIf",null==e.categoryEditControl?null:e.categoryEditControl.hasError("codeExists")),t.xp6(6),t.Q6J("formControl",e.groupCodeControl),t.xp6(1),t.Q6J("ngIf",(null==e.groupCodeControl?null:e.groupCodeControl.hasError("required"))&&(null==e.groupCodeControl?null:e.groupCodeControl.dirty)),t.xp6(1),t.Q6J("ngIf",(null==e.groupCodeControl?null:e.groupCodeControl.hasError("minlength"))&&(null==e.groupCodeControl?null:e.groupCodeControl.dirty)),t.xp6(1),t.Q6J("ngIf",(null==e.groupCodeControl?null:e.groupCodeControl.hasError("maxlength"))&&(null==e.groupCodeControl?null:e.groupCodeControl.dirty)),t.xp6(1),t.Q6J("ngIf",null==e.groupCodeControl?null:e.groupCodeControl.hasError("codeExists"))}}function hi(n,i){1&n&&(t.TgZ(0,"span",48),t._uU(1," Company name is required "),t.qZA())}function fi(n,i){1&n&&(t.TgZ(0,"span",48),t._uU(1," A company with this name already exists. Please provide another name. "),t.qZA())}function Ci(n,i){1&n&&(t.TgZ(0,"span",48),t._uU(1," Group Code is required "),t.qZA())}function bi(n,i){1&n&&(t.TgZ(0,"span",48),t._uU(1," Group Code should be at least 3 characters "),t.qZA())}function xi(n,i){1&n&&(t.TgZ(0,"span",48),t._uU(1," Group Code should not exceed 4 characters "),t.qZA())}function Ti(n,i){1&n&&(t.TgZ(0,"span",48),t._uU(1," A company with this code already exists. Please provide a different code. "),t.qZA())}function yi(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"p",39),t._uU(1," Update Company "),t.qZA(),t.TgZ(2,"div",40)(3,"label",49),t._uU(4,"Company Name "),t.TgZ(5,"sup",42),t._uU(6,"*"),t.qZA()(),t._UZ(7,"input",43),t.YNc(8,hi,2,0,"span",44),t.YNc(9,fi,2,0,"span",44),t.qZA(),t.TgZ(10,"div",40)(11,"label",50),t._uU(12,"Group Code"),t.TgZ(13,"sup",42),t._uU(14,"*"),t.qZA()(),t._UZ(15,"input",43),t.YNc(16,Ci,2,0,"span",44),t.YNc(17,bi,2,0,"span",44),t.YNc(18,xi,2,0,"span",44),t.YNc(19,Ti,2,0,"span",44),t.qZA(),t.TgZ(20,"div",45)(21,"button",46),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.editOrAddCompany())}),t._uU(22," Update "),t.qZA(),t.TgZ(23,"button",47),t.NdJ("click",function(){const s=t.CHM(e).$implicit,u=t.oxw();return s.complete(),t.KtG(u.categoryId=null)}),t._uU(24," Cancel "),t.qZA()()}if(2&n){const e=t.oxw();t.xp6(7),t.Q6J("formControl",e.categoryEditControlEdit),t.xp6(1),t.Q6J("ngIf",(null==e.categoryEditControlEdit?null:e.categoryEditControlEdit.hasError("required"))&&(null==e.categoryEditControlEdit?null:e.categoryEditControlEdit.dirty)),t.xp6(1),t.Q6J("ngIf",null==e.categoryEditControlEdit?null:e.categoryEditControlEdit.hasError("codeExists")),t.xp6(6),t.Q6J("formControl",e.groupCodeControlEdit),t.xp6(1),t.Q6J("ngIf",(null==e.groupCodeControlEdit?null:e.groupCodeControlEdit.hasError("required"))&&(null==e.groupCodeControlEdit?null:e.groupCodeControlEdit.dirty)),t.xp6(1),t.Q6J("ngIf",(null==e.groupCodeControlEdit?null:e.groupCodeControlEdit.hasError("minlength"))&&(null==e.groupCodeControlEdit?null:e.groupCodeControlEdit.dirty)),t.xp6(1),t.Q6J("ngIf",(null==e.groupCodeControlEdit?null:e.groupCodeControlEdit.hasError("maxlength"))&&(null==e.groupCodeControlEdit?null:e.groupCodeControlEdit.dirty)),t.xp6(1),t.Q6J("ngIf",null==e.groupCodeControlEdit?null:e.groupCodeControlEdit.hasError("codeExists"))}}function vi(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"p",51),t._uU(1,"Delete Company"),t.qZA(),t.TgZ(2,"p",52),t._uU(3,"Are you sure you want to delete this company?"),t.qZA(),t.TgZ(4,"div",53)(5,"button",54),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw().deleteCompanyData(),t.KtG(s.complete())}),t._uU(6," Confirm "),t.qZA(),t.TgZ(7,"button",46),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.KtG(s.complete())}),t._uU(8," Cancel "),t.qZA()()}}class B{constructor(i,e){this.dashboard=i,this.dialogs=e,this.categoryEditControl=new a.NI("",a.kI.compose([a.kI.required]),[f.Iw.createValidator(this.dashboard,"company","title")]),this.groupCodeControl=new a.NI("",a.kI.compose([a.kI.required,a.kI.minLength(3),a.kI.maxLength(4)]),[f.Iw.createValidator(this.dashboard,"company")]),this.categoryEditControlEdit=new a.NI("",a.kI.compose([a.kI.required]),[f.Iw.createValidator(this.dashboard,"company","title")]),this.groupCodeControlEdit=new a.NI("",a.kI.compose([a.kI.required,a.kI.minLength(3),a.kI.maxLength(4)]),[f.Iw.createValidator(this.dashboard,"company")]),this.destroy$=new P.x,this.limit=10,this.page=0,this.subscription=[],this.companies=this.dashboard.getAllCompanies(this.limit,this.page)}changePage(i){this.page=i,this.companies=this.dashboard.getAllCompanies(this.limit,this.page)}changeSize(i){this.limit=i,this.companies=this.dashboard.getAllCompanies(this.limit,this.page)}editOrAddCompany(){if(this.categoryId){if(this.categoryEditControlEdit.invalid||this.groupCodeControlEdit.invalid)return this.categoryEditControlEdit.markAsDirty(),void this.groupCodeControlEdit.markAsDirty();this.dashboard.updateCompany({title:this.categoryEditControlEdit?.value,groupCode:this.groupCodeControlEdit?.value},this.categoryId).pipe((0,m.R)(this.destroy$)).subscribe(i=>{i&&(this.companies=this.dashboard.getAllCompanies(this.limit,this.page),this.subscription.forEach(e=>e.unsubscribe()),this.categoryEditControl.reset(),this.categoryEditControlEdit.reset(),this.groupCodeControl.reset(),this.groupCodeControlEdit.reset(),this.categoryId=null)})}else{if(this.categoryEditControl.invalid||this.groupCodeControl.invalid)return this.categoryEditControl.markAsDirty(),void this.groupCodeControl.markAsDirty();this.dashboard.addCompany({title:this.categoryEditControl?.value,groupCode:this.groupCodeControl?.value}).pipe((0,m.R)(this.destroy$)).subscribe(i=>{i&&(this.companies=this.dashboard.getAllCompanies(this.limit,this.page),this.subscription.forEach(e=>e.unsubscribe()),this.categoryEditControl.reset(),this.categoryEditControlEdit.reset(),this.groupCodeControl.reset(),this.groupCodeControlEdit.reset(),this.categoryId=null)})}}deleteCompanyData(){this.dashboard.deleteCompany(this.categoryId).pipe((0,m.R)(this.destroy$)).subscribe(()=>{this.companies=this.dashboard.getAllCompanies(this.limit,this.page),this.categoryId=null})}showDialog(i,e){this.subscription.push(this.dialogs.open(i,{dismissible:!1,closeable:!1}).subscribe()),this.dashboard.excludeIdEmitter.emit(e?.id?e?.id:null),this.categoryEditControlEdit.setValue(e?.title?e?.title:""),this.groupCodeControlEdit.setValue(e?.groupCode?e?.groupCode:""),this.categoryId=e?.id||null}showDeleteDialog(i,e){this.dialogs.open(e,{dismissible:!1,closeable:!1}).subscribe(),this.categoryId=i?.id}ngOnDestroy(){this.destroy$.complete(),this.destroy$.unsubscribe()}}B.\u0275fac=function(i){return new(i||B)(t.Y36(b.s),t.Y36(x.RO))},B.\u0275cmp=t.Xpm({type:B,selectors:[["ng-component"]],decls:18,vars:4,consts:[[1,"bg_img_main"],[1,"w-11/12","mx-auto","mt-52","pb-60"],[1,"flex","justify-end","mb-5"],[1,"cursor-pointer"],[1,"px-4","py-2","rounded-lg","bg-[#a58f81]","text-white","no-underline","hover:text-white","text-sm",3,"click"],[4,"ngIf","ngIfElse"],["loading",""],["template",""],["editTemplate",""],["deltemplate",""],["tuiTable","",1,"w-full","rounded-lg",3,"columns"],[1,"border","border-gray-300"],["tuiThGroup",""],["tuiTh","","class","text-base w-[15%]",3,"resizable",4,"tuiHead"],["tuiTh","","class","text-base",3,"resizable",4,"tuiHead"],["class","w-[12.5%] text-base","tuiTh","",3,"sorter",4,"tuiHead"],["tuiTbody","",3,"data",4,"tuiLet"],[1,"bg-white"],[1,"px-3","py-6","border","border-gray-300",3,"colSpan"],[3,"total","size","page","pageChange","sizeChange"],["tuiTh","",1,"text-base","w-[15%]",3,"resizable"],["tuiTh","",1,"text-base",3,"resizable"],["tuiTh","",1,"w-[12.5%]","text-base",3,"sorter"],["tuiTbody","",3,"data"],["showData",""],["colspan","12",1,"px-4","py-8","text-lg","font-medium","text-center","text-gray-500","bg-white","border","border-gray-300"],["tuiTr","",4,"ngFor","ngForOf"],["tuiTr",""],["class","py-3 font-semibold","tuiTd","",4,"tuiCell"],["tuiTd","",4,"tuiCell"],["tuiTd","",1,"py-3","font-semibold"],["tuiTd",""],[1,"flex","justify-start"],[1,"px-2","py-1","mx-2","text-white","bg-blue-400","rounded-md","cursor-pointer","hover:text-white",3,"click"],["aria-hidden","true",1,"fa","fa-pencil-square-o"],[1,"px-2","py-1","text-white","bg-red-500","rounded-md",3,"click"],["aria-hidden","true",1,"fa","fa-trash"],["size","xl",1,"mt-14",3,"overlay","inheritColor"],[1,"text-base","font-medium","text-center","my-2","text-[#6C86E2]"],[1,"text-lg","font-semibold","text-center"],[1,"flex","flex-col","justify-center","my-5"],[1,"block"],[1,"text-red-500"],[1,"mb-1","form-control",3,"formControl"],["class","text-xs text-red-500",4,"ngIf"],[1,"flex","justify-center","gap-x-3"],["tuiButton","","type","button","size","m",3,"click"],["tuiButton","","type","button","size","m","appearance","accent",3,"click"],[1,"text-xs","text-red-500"],["for","Textarea1",1,"block"],["for","Textarea2",1,"block"],[1,"pb-2","text-xl","font-semibold","text-center","border-b","border-gray-400"],[1,"mt-4","text-base","font-medium","text-center"],[1,"flex","justify-center","mt-4"],["tuiButton","","appearance","secondary-destructive","type","button","size","m",1,"mx-3",3,"click"]],template:function(i,e){if(1&i){const o=t.EpF();t._UZ(0,"app-header"),t.TgZ(1,"div",0)(2,"section",1)(3,"div",2)(4,"div",3)(5,"a",4),t.NdJ("click",function(){t.CHM(o);const s=t.MAs(13);return t.KtG(e.showDialog(s,null))}),t._uU(6,"+ Add company"),t.qZA()()(),t.YNc(7,ai,13,12,"ng-container",5),t.ALo(8,"async"),t.YNc(9,li,3,2,"ng-template",null,6,t.W1O),t.qZA()(),t._UZ(11,"app-footer"),t.YNc(12,gi,25,8,"ng-template",null,7,t.W1O),t.YNc(14,yi,25,8,"ng-template",null,8,t.W1O),t.YNc(16,vi,9,0,"ng-template",null,9,t.W1O)}if(2&i){const o=t.MAs(10);t.xp6(7),t.Q6J("ngIf",t.lcZ(8,2,e.companies))("ngIfElse",o)}},dependencies:[c.sg,c.O5,T.G,h.v0,y.c,g,tt,at,Y,W,X,K,L,et.Ls,a.Fj,a.JJ,a.oH,V.kM,ut,c.Ov,z]});var At=l(57505),wi=l(22603),It=l(60101),Ut=l(32041);class G{constructor(i,e,o,r){this.auth=i,this.dashboard=e,this.notif=o,this.cf=r,this.formData=new it.X({}),this.userForm=At.dI,this.passwordForm=At.LD,this.destroy$=new P.x,this.passValue=new it.X(null),this.currentUser=this.auth.currentUserValue,this.formData.next({fullname:this.currentUser?.fullName,email:this.currentUser?.email,roles:this.currentUser?.roles}),this.formSubmission={data:{fullname:this.currentUser?.fullName,email:this.currentUser?.email,roles:this.currentUser?.roles}}}getFormValues(i){if(i?.data)return i}getPasswordFieldValues(i){i?.data&&this.passValue.next(i?.data)}updatePassword(){if(this.passValue?.value?.password?.length>0&&this.passValue?.value?.password1?.length){if(this.passValue?.value?.password!==this.passValue?.value?.password1)return this.notif.displayNotification("Passwords do not match","Update password","warning");this.dashboard.updateUser(this.currentUser?.id,{password:this.passValue?.value?.password}).pipe((0,m.R)(this.destroy$)).subscribe(e=>{})}else this.notif.displayNotification("Please fill in all fields","Update password","warning")}editUser(){if(1==this.checkIfObjectValuesHaveChanged(this.formData?.value,this.formSubmission?.data))return this.notif.displayNotification("You have not changed any information","Edit User Info","warning");this.dashboard.updateUser(this.currentUser?.id,{fullName:this.formSubmission?.data?.fullname,email:this.formSubmission?.data?.email,roles:this.formSubmission?.data?.roles}).pipe((0,m.R)(this.destroy$)).subscribe(e=>{e&&(this.auth.updateUser(e),this.formData.next({fullname:e?.fullName,email:e?.email,roles:e?.roles}))})}checkIfObjectValuesHaveChanged(i,e){const o=Object?.keys(i).sort(),r=Object?.keys(e).sort();return o.length===r.length&&!!o.every((u,nt)=>i[u]===e[r[nt]])}ngOnDestroy(){this.destroy$.complete(),this.destroy$.unsubscribe()}}G.\u0275fac=function(i){return new(i||G)(t.Y36(E.e),t.Y36(b.s),t.Y36(wi.T),t.Y36(t.sBO))},G.\u0275cmp=t.Xpm({type:G,selectors:[["ng-component"]],decls:23,vars:9,consts:[[1,"bg_img_main"],[1,"mt-52","pb-52","mx-auto","w-11/12"],[1,"px-8","py-5","bg-white","rounded-md","w-full","grid","grid-cols-12","sahdow-lg","drop-shadow-lg"],[1,"col-span-4","flex","flex-col","items-center","gap-2"],["new","","size","xxl",3,"text"],[1,"font-semibold"],[1,"col-span-8"],[1,"pb-3","text-base","font-semibold"],[3,"submission","form","change"],["tuiButton","","type","button","size","m",3,"disabled","click"],[1,"py-3","mt-9","text-base","font-semibold"],[3,"form","change"],["tuiButton","","type","button","size","m",3,"click"]],template:function(i,e){if(1&i&&(t._UZ(0,"app-header"),t.TgZ(1,"div",0)(2,"section",1)(3,"div",2)(4,"div",3),t._UZ(5,"tui-avatar",4),t.TgZ(6,"p",5),t._uU(7),t.qZA(),t.TgZ(8,"p"),t._uU(9),t.qZA()(),t.TgZ(10,"div",6)(11,"p",7),t._uU(12,"Profile data"),t.qZA(),t.TgZ(13,"formio",8),t.NdJ("change",function(r){return e.getFormValues(r)}),t.qZA(),t.TgZ(14,"button",9),t.NdJ("click",function(){return e.editUser()}),t.ALo(15,"async"),t._uU(16," Update Profile "),t.qZA(),t.TgZ(17,"p",10),t._uU(18,"Reset password"),t.qZA(),t.TgZ(19,"formio",11),t.NdJ("change",function(r){return e.getPasswordFieldValues(r)}),t.qZA(),t.TgZ(20,"button",12),t.NdJ("click",function(){return e.updatePassword()}),t._uU(21," Update password "),t.qZA()()()()(),t._UZ(22,"app-footer")),2&i){let o;t.xp6(5),t.Q6J("text",null==e.currentUser?null:e.currentUser.fullName),t.xp6(2),t.Oqu(null==e.currentUser?null:e.currentUser.fullName),t.xp6(2),t.Oqu(null==e.currentUser?null:e.currentUser.email),t.xp6(4),t.Q6J("submission",e.formSubmission)("form",e.userForm),t.xp6(1),t.Q6J("disabled",0==(null==(o=t.lcZ(15,7,e.formData))?null:o.isValid)),t.xp6(5),t.Q6J("form",e.passwordForm)}},dependencies:[T.G,h.v0,y.c,It.k4,Ut.JP,c.Ov],changeDetection:0});const Zi=[{path:"",component:k,data:{breadcrumb:"Dashboard"},children:[{path:"home",component:N,canActivate:[A],data:{breadcrumb:"Home"}},{path:"categories",component:S,data:{breadcrumb:"Categories"}},{path:"users",component:H,data:{breadcrumb:"Users"}},{path:"companies",component:B,data:{breadcrumb:"Companies"}},{path:"profile",component:G,data:{breadcrumb:"Profile"}},{path:"",redirectTo:"home",pathMatch:"full"}]}];class U{}U.\u0275fac=function(i){return new(i||U)},U.\u0275mod=t.oAB({type:U}),U.\u0275inj=t.cJS({imports:[C.Bz.forChild(Zi),C.Bz]});var Ai=l(44886),Ii=l(13675),Ui=l(82176),Di=l(60946),ki=l(4053),Ei=l(56772),Mi=l(37378),Ni=l(75407);class D{}D.\u0275fac=function(i){return new(i||D)},D.\u0275mod=t.oAB({type:D}),D.\u0275inj=t.cJS({imports:[c.ez,U,T.G,h.fN,y.c,xt,Ui.i,et.WD,Di.$$,a.UX,a.u5,V.dS,w,Ni.e,It.XI,xt,ki.cB,Ei.zX,Q.cn,Ge,Mi.f,Ut.Jm,Ai.go,Ii.Q]})}}]);