<nav class="bg-[#2F3044] fixed w-full z-40 top-0 left-0 border-b border-gray-200 shadow-md">
  <div class="flex flex-wrap items-center justify-between max-w-screen p-4 mx-3 lg:mx-20">
    <img [routerLink]="['/dashboard/home']" ngSrc="../../../assets/depa_logo.svg" width="40" height="36">
    <div class="items-center justify-between hidden w-full md:flex md:w-auto md:order-1" id="navbar-sticky">
      <ul class="flex flex-col px-4 py-2 font-medium rounded-lg md:flex-row md:space-x-6">
        <li class="mt-2">
          <a [routerLink]="['/dashboard/home']" routerLinkActive="router-link-active"
            class="block px-4 py-2 text-white no-underline hover:text-gray-100">Home</a>
        </li>
        <li *ngIf="userRoleCheck == true" class="mt-2">
          <a [routerLink]="['/dashboard/categories']" routerLinkActive="router-link-active" class="block px-4 py-2 text-white no-underline hover:text-gray-100">Categories</a>
        </li>
        <li *ngIf="userRoleCheck == true" class="mt-2">
          <a [routerLink]="['/dashboard/companies']" routerLinkActive="router-link-active" class="block px-4 py-2 text-white no-underline hover:text-gray-100">Companies</a>
        </li>
        <li *ngIf="userRoleCheck == true" class="mt-2">
          <a [routerLink]="['/dashboard/users']" routerLinkActive="router-link-active" class="block px-4 py-2 text-white no-underline hover:text-gray-100">Users</a>
        </li>
        <li class="cursor-pointer">
          <tui-hosted-dropdown
            [content]="dropdown"
            [(open)]="open"
          >
            <tui-avatar
              [text]="currentUser?.fullName"
              [tuiHint]="tooltip"
              tuiHintDirection="left"
              size="m"
              [rounded]="true"
            ></tui-avatar>
          </tui-hosted-dropdown>
        </li>
      </ul>
    </div>
  </div>
</nav>

<!--breadcrumbs-->
<div class="fixed z-30 flex justify-between w-full px-5 pt-2 mt-8 border-b-2 shadow-md border-b-gray-300 top-9 md:top-16 bg-white">
  <tui-breadcrumbs size="l"
    class="text-[#9a9ba3] tui-space_bottom-3 flex flex-wrap">
    <ng-container *ngIf="checkCurrentRouteIncludes() === false">
      <ng-container *ngFor="let item of dashboardService.items; let i = index; let last = last">
        <ng-container *ngIf="i == 0 || dashboardService.items?.length == 0">
          <a *tuiItem tuiLink [routerLink]="['/dashboard/home']" class="hover:text-[rgb(118,119,127)]">
            <i class="fa fa-home fa-lg" aria-hidden="true"></i>
          </a>
        </ng-container>
        <ng-container *ngIf="item?.caption !== 'Dashboard' && item?.caption !== 'Home'">
          <a *tuiItem tuiLink [routerLink]="encode(item.routerLink)" [queryParams]="finalQueryParams()" class="hover:text-[#76777f] capitalize">
            {{ setString(item?.caption) }}
          </a>
        </ng-container>
      </ng-container>
    </ng-container>
    <ng-container *ngIf="checkCurrentRouteIncludes() === true">
      <ng-container *ngIf="dashboardService.tempItems | async as serverCrumbs">
        <ng-container *ngFor="let item of serverCrumbs; let i = index; let last = last">
          <ng-container *ngIf="i == 0 || serverCrumbs?.length == 0">
            <a *tuiItem tuiLink [routerLink]="['/dashboard/home']" class="hover:text-[rgb(118,119,127)]">
              <i class="fa fa-home fa-lg" aria-hidden="true"></i>
            </a>
          </ng-container>
          <ng-container *ngIf="item.caption !== 'Dashboard' && item.caption !== 'Home'">
            <a *tuiItem tuiLink [routerLink]="['/modules', item.code]" [queryParams]="{moduleID: item.routerLink}" class="hover:text-[#76777f] capitalize">
              {{ setString(item.caption) }}
            </a>
          </ng-container>
        </ng-container>
      </ng-container>
    </ng-container>
  </tui-breadcrumbs>
</div>

<ng-template #tooltip>
  <p>{{currentUser?.fullName}} is logged in</p>
</ng-template>

<ng-template #dropdown>
  <div class="px-5 py-3 border-b border-gray-300">
    <p class="font-semibold text-base tracking-wide">{{currentUser?.fullName}}</p>
    <p class="font-medium text-sm tracking-wide">{{currentUser?.email}}</p>
  </div>
  <div class="px-5 py-2">
    <a class="block py-2 px-4 no-underline rounded-lg hover:bg-slate-200 cursor-pointer font-medium text-sm" [routerLink]="['/dashboard/profile']">
      <i class="fa fa-user" aria-hidden="true"></i> &nbsp; Profile
    </a>
    <div class="mt-3">
      <a (click)="logoutSession()" class="block py-2 px-4 no-underline rounded-lg hover:bg-slate-200 cursor-pointer font-medium text-sm">
        <i class="fa fa-sign-out" aria-hidden="true"></i> &nbsp; Logout
      </a>
    </div>
  </div>
</ng-template>
