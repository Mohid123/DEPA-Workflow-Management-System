<app-header></app-header>
<section class="w-11/12 h-auto min-h-screen mx-auto mt-48">
  <ng-container *ngIf="(subModuleData | async) as data; else noData">
    <app-table-view [moduleData]="moduleData" (emitPagination)="sendPagination($event)" (emitDeleteEvent)="itemDeleted($event)" [tableData]="data" (emitPageChange)="fetchFreshData($event)"></app-table-view>
    <div class="mt-8">
      <hr>
    </div>
    <div class="my-8">
      <div class="flex justify-between mb-5">
        <div class="w-1/3">
          <tui-input
            tuiTextfieldIconLeft="tuiIconSearchLarge"
            class="w-full"
            [formControl]="searchValue"
            [tuiTextfieldCleaner]="true"
            class="shadow-md"
          >
            <p class="mt-2">Search by Submission Title</p>
            <input
              class="w-full"
              tuiTextfield
              placeholder="Type to start searching..."
            />
        </tui-input>
        </div>
        <div *ngIf="data?.createdBy == currentUser?.id || currentUser?.role == 'admin' || checkIfUserisAdmin((moduleData | async)?.adminUsers)" class="cursor-pointer">
          <a (click)="addSubmissionRoute()" class="px-6 py-3 rounded-md bg-[#a58f81] text-white no-underline hover:text-white text-base">+ Add submission</a>
        </div>
      </div>
      <app-submission-table></app-submission-table>
    </div>
  </ng-container>
  <ng-template #noData>
    <app-table-loader></app-table-loader>
  </ng-template>
</section>
<app-footer></app-footer>