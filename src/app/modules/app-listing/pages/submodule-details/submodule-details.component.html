<app-header></app-header>
<section class="w-11/12 h-auto min-h-screen mx-auto mt-52 pb-40">
  <!--submodule forms-->
  <p class="mb-8 mt-4 text-lg font-semibold">Submodule Code: {{submoduleDetails?.code}}</p>
  <p class="my-4 text-lg font-semibold">Submodule Forms</p>
  <div class="flex flex-col w-full px-5 mt-5 border border-gray-400 border-dashed rounded-md bg-gray-50">
    <section class="flex justify-between w-full my-8">
      <nav
        tuiTabs
        vertical="left"
        class="w-32 mr-5"
      >
        <ng-container *ngFor="let tab of formTabs; let j = index">
          <button (click)="activeIndex = j" tuiTab>{{tab}}</button>
        </ng-container>
      </nav>
      <ng-container *ngFor="let form of formWithWorkflow; let i = index;">
        <div *ngIf="activeIndex == i" class="w-full well jsonviewer">
          <formio [readOnly]="true" [form]="form"></formio>
        </div>
      </ng-container>

    </section>
  </div>

  <!--submodule workflow-->
  <p class="mt-10 mb-5 text-lg font-semibold">Submodule Workflow</p>
  <tui-island
    size="l"
    class="w-full my-4 shadow-lg border border-[#F15B41] px-5 mx-auto"
  >
    <h4 class="mb-5 text-base font-semibold text-gray-700">Workflow Steps</h4>
    <tui-carousel
      [draggable]="true"
      [itemsCount]="3"
      [(index)]="carouselIndex"
    >
    <ng-container *ngFor="let item of items; let i = index; let last = last">
      <div *tuiItem class="flex justify-between w-full">
        <div class="relative w-full px-4 py-4 text-left border border-gray-200 rounded-md bg-gray-50">
          <p class="mb-2 text-lg font-semibold text-gray-700">Step {{ i + 1}}</p>
          <ul *ngFor="let approver of item?.approvers" class="px-5">
            <li class="list-disc">{{approver}}</li>
          </ul>
          <div class="absolute top-0 right-0 px-3 py-1 text-sm font-semibold bg-gray-200 rounded-b-none text-slate-700 rounded-r-md">
            {{item?.condition}}
          </div>
        </div>
        <div class="ml-4 mt-7">
          <i *ngIf="!last" class="fa fa-long-arrow-right fa-lg" aria-hidden="true"></i>
        </div>
      </div>
    </ng-container>
    </tui-carousel>
    <tui-pagination
      class="my-5 pagination"
      [length]="items?.length > 2 ? items?.length - 2 : items?.length"
      size="s"
      [(index)]="carouselIndex"
    ></tui-pagination>

    <!--workflow progress-->
    <!-- <div class="relative w-full my-12 mr-10">
      <p class="mb-4 text-base font-semibold">Workflow Progress</p>
      <progress
        tuiProgressBar
        [max]="100"
        [value]="value"
      ></progress>
      <label
        tuiProgressLabel
        class="absolute top-20"
        [style.left]="value ? value + '%' : '16px'"
      >
        {{value}}%
      </label>
    </div> -->
  </tui-island>
</section>
<app-footer></app-footer>
